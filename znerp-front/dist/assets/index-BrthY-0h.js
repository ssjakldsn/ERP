import{bt as g,d as j,z as J,h as M,r as y,e as O,n as R,O as A,o as i,c as p,f as a,w as o,y as E,q as x,a as l,g as B,x as u,a5 as V,F as G,I as T,ak as W,al as $,C as H,cc as K,J as L,M as N}from"./index-CIfmhqRC.js";import{_ as Q}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{E as X}from"./el-card-DyMugU68.js";import{_ as Y}from"./index-2RHHZ-Zv.js";import{C as Z}from"./CardTitle-CmREB7ye.js";const ee={class:"flex items-center justify-between"},ae={key:0},le={key:0},oe=j({name:"CrmCustomerPoolConfig",__name:"index",setup(te){const D=J(),{t:w}=M(),d=y(!1),e=y({enabled:!1,contactExpireDays:void 0,dealExpireDays:void 0,notifyEnabled:!1,notifyDays:void 0}),h=O({enabled:[{required:!0,message:"\u662F\u5426\u542F\u7528\u5BA2\u6237\u516C\u6D77\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=y(),v=async()=>{try{d.value=!0;const n=await(async()=>await g.get({url:"/crm/customer-pool-config/get"}))();if(n===null)return;e.value=n}finally{d.value=!1}},C=async()=>{if(c&&await c.value.validate()){d.value=!0;try{const n=e.value;await(async t=>await g.put({url:"/crm/customer-pool-config/save",data:t}))(n),D.success(w("common.updateSuccess")),await v(),d.value=!1}finally{d.value=!1}}},k=()=>{e.value.enabled||(e.value.contactExpireDays=void 0,e.value.dealExpireDays=void 0,e.value.notifyEnabled=!1,e.value.notifyDays=void 0)},z=()=>{e.value.notifyEnabled||(e.value.notifyDays=void 0)};return R(()=>{v()}),(n,t)=>{const b=Y,U=T,r=W,_=$,m=H,f=K,F=X,q=L,I=Q,P=A("hasPermi"),S=N;return i(),p(G,null,[a(b,{title:"\u3010\u5BA2\u6237\u3011\u5BA2\u6237\u7BA1\u7406\u3001\u516C\u6D77\u5BA2\u6237",url:"https://doc.iocoder.cn/crm/customer/"}),a(b,{title:"\u3010\u901A\u7528\u3011\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/crm/permission/"}),a(I,null,{default:o(()=>[E((i(),x(q,{ref_key:"formRef",ref:c,model:l(e),rules:l(h),"label-width":"160px"},{default:o(()=>[a(F,{shadow:"never"},{header:o(()=>[B("div",ee,[a(l(Z),{title:"\u5BA2\u6237\u516C\u6D77\u89C4\u5219\u8BBE\u7F6E"}),E((i(),x(U,{type:"primary",onClick:C},{default:o(()=>[u(" \u4FDD\u5B58 ")]),_:1})),[[P,["crm:customer-pool-config:update"]]])])]),default:o(()=>[a(m,{label:"\u5BA2\u6237\u516C\u6D77\u89C4\u5219\u8BBE\u7F6E",prop:"enabled"},{default:o(()=>[a(_,{modelValue:l(e).enabled,"onUpdate:modelValue":t[0]||(t[0]=s=>l(e).enabled=s),onChange:k,class:"ml-4"},{default:o(()=>[a(r,{value:!1,size:"large"},{default:o(()=>[u("\u4E0D\u542F\u7528")]),_:1}),a(r,{value:!0,size:"large"},{default:o(()=>[u("\u542F\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(e).enabled?(i(),p("div",ae,[a(m,null,{default:o(()=>[a(f,{class:"mr-2",modelValue:l(e).contactExpireDays,"onUpdate:modelValue":t[1]||(t[1]=s=>l(e).contactExpireDays=s)},null,8,["modelValue"]),u(" \u5929\u4E0D\u8DDF\u8FDB\u6216 "),a(f,{class:"mx-2",modelValue:l(e).dealExpireDays,"onUpdate:modelValue":t[2]||(t[2]=s=>l(e).dealExpireDays=s)},null,8,["modelValue"]),u(" \u5929\u672A\u6210\u4EA4 ")]),_:1}),a(m,{label:"\u63D0\u524D\u63D0\u9192\u8BBE\u7F6E",prop:"notifyEnabled"},{default:o(()=>[a(_,{modelValue:l(e).notifyEnabled,"onUpdate:modelValue":t[3]||(t[3]=s=>l(e).notifyEnabled=s),onChange:z,class:"ml-4"},{default:o(()=>[a(r,{value:!1,size:"large"},{default:o(()=>[u("\u4E0D\u63D0\u9192")]),_:1}),a(r,{value:!0,size:"large"},{default:o(()=>[u("\u63D0\u9192")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(e).notifyEnabled?(i(),p("div",le,[a(m,null,{default:o(()=>[u(" \u63D0\u524D "),a(f,{class:"mx-2",modelValue:l(e).notifyDays,"onUpdate:modelValue":t[4]||(t[4]=s=>l(e).notifyDays=s)},null,8,["modelValue"]),u(" \u5929\u63D0\u9192 ")]),_:1})])):V("",!0)])):V("",!0)]),_:1})]),_:1},8,["model","rules"])),[[S,l(d)]])]),_:1})],64)}}});export{oe as default};
