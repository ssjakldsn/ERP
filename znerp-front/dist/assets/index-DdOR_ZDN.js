import G from"./Left-CDUbtM6G.js";import w from"./Right-BByH3va5.js";import{A as x}from"./index-LbDC7svD.js";import{i as S}from"./constants-PZ18_Kze.js";import{d as _,r,z as h,n as y,o as A,c as E,f as p,a as n,aw as k}from"./index-CIfmhqRC.js";import"./el-text-DMgoq9G3.js";import"./el-card-DyMugU68.js";import"./index-CY7R6inO.js";import"./download-D5Lb_h0f.js";import"./fetch-D5K_4anA.js";const R={class:"absolute top-0 left-0 right-0 bottom-0 flex"},j=_({name:"AiMindMap",__name:"index",setup(z){const s=r(),l=r(!1),i=r(!1),o=r(!0),d=h(),e=r(""),m=r(),v=r(),g=a=>{o.value=!1,e.value=a,o.value=!0},u=()=>{var a;l.value=!1,i.value=!1,(a=s.value)==null||a.abort()},c=a=>{l.value=!0,i.value=!0,o.value=!1,s.value=new AbortController,e.value="",x.generateMindMap({data:a,onMessage:async t=>{var f;const{code:b,data:C,msg:M}=JSON.parse(t.data);if(b!==0)return d.alert(`\u751F\u6210\u601D\u7EF4\u5BFC\u56FE\u5F02\u5E38! ${M}`),void u();e.value=e.value+C,await k(),(f=v.value)==null||f.scrollBottom()},onClose(){var t;o.value=!0,(t=m.value)==null||t.setGeneratedContent(e.value),u()},onError(t){console.error("\u751F\u6210\u601D\u7EF4\u5BFC\u56FE\u5931\u8D25",t),u()},ctrl:s.value})};return y(()=>{e.value=S}),(a,t)=>(A(),E("div",R,[p(G,{ref_key:"leftRef",ref:m,"is-generating":n(l),onSubmit:c,onDirectGenerate:g},null,8,["is-generating"]),p(w,{ref_key:"rightRef",ref:v,generatedContent:n(e),isEnd:n(o),isGenerating:n(l),isStart:n(i)},null,8,["generatedContent","isEnd","isGenerating","isStart"])]))}});export{j as default};
