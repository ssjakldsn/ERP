import{d as A,h as B,z as J,r as o,e as M,o as i,q as c,w as t,f as n,a,x as k,y as R,c as D,F as E,p as G,k as W,A as j,B as H,C as K,U as L,J as N,I as O,M as Q}from"./index-CIfmhqRC.js";import{_ as T}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{a as X,g as Y,c as Z,u as $}from"./index-BxLwD91R.js";const ee=A({name:"CrmProductCategoryForm",__name:"ProductCategoryForm",emits:["success"],setup(ae,{expose:w,emit:C}){const{t:p}=B(),v=J(),r=o(!1),f=o(""),d=o(!1),y=o(""),u=o({id:void 0,name:void 0,parentId:void 0}),I=M({name:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],parentId:[{required:!0,message:"\u7236\u7EA7\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),m=o(),_=o([]);w({open:async(s,e)=>{if(r.value=!0,f.value=p("action."+s),y.value=s,U(),e){d.value=!0;try{u.value=await X(e)}finally{d.value=!1}}_.value=await Y({parentId:0})}});const h=C,F=async()=>{if(m&&await m.value.validate()){d.value=!0;try{const s=u.value;y.value==="create"?(await Z(s),v.success(p("common.createSuccess"))):(await $(s),v.success(p("common.updateSuccess"))),r.value=!1,h("success")}finally{d.value=!1}}},U=()=>{var s;u.value={id:void 0,name:void 0,parentId:void 0},(s=m.value)==null||s.resetFields()};return(s,e)=>{const b=j,x=H,g=K,q=L,P=N,V=O,S=T,z=Q;return i(),c(S,{title:a(f),modelValue:a(r),"onUpdate:modelValue":e[3]||(e[3]=l=>W(r)?r.value=l:null)},{footer:t(()=>[n(V,{onClick:F,type:"primary",disabled:a(d)},{default:t(()=>[k("\u786E \u5B9A")]),_:1},8,["disabled"]),n(V,{onClick:e[2]||(e[2]=l=>r.value=!1)},{default:t(()=>[k("\u53D6 \u6D88")]),_:1})]),default:t(()=>[R((i(),c(P,{ref_key:"formRef",ref:m,model:a(u),rules:a(I),"label-width":"100px"},{default:t(()=>[n(g,{label:"\u7236\u7EA7\u5206\u7C7B",prop:"parentId"},{default:t(()=>[n(x,{modelValue:a(u).parentId,"onUpdate:modelValue":e[0]||(e[0]=l=>a(u).parentId=l),placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u5206\u7C7B"},{default:t(()=>[(i(),c(b,{key:0,label:"\u9876\u7EA7\u5206\u7C7B",value:0})),(i(!0),D(E,null,G(a(_),l=>(i(),c(b,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(g,{label:"\u540D\u79F0",prop:"name"},{default:t(()=>[n(q,{modelValue:a(u).name,"onUpdate:modelValue":e[1]||(e[1]=l=>a(u).name=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[z,a(d)]])]),_:1},8,["title","modelValue"])}}});export{ee as _};
