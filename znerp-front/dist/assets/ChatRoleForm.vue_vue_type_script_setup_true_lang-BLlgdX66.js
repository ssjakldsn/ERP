import{bt as i,d as K,h as W,z as X,r as p,a3 as Y,e as Z,o as d,q as c,w as s,f as o,a as e,x as w,y as $,c as M,F as S,p as k,a5 as V,v as ee,D as E,t as L,Q as ae,k as le,U as te,C as se,cl as ue,A as oe,B as de,ak as re,al as ie,cc as ce,J as me,I as pe,M as ne}from"./index-CIfmhqRC.js";import{_ as ye}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{C as R}from"./constants-A8BI3pz7.js";import{C as ve}from"./index-DvHknbTX.js";const h={getChatRolePage:async u=>await i.get({url:"/ai/chat-role/page",params:u}),getChatRole:async u=>await i.get({url:"/ai/chat-role/get?id="+u}),createChatRole:async u=>await i.post({url:"/ai/chat-role/create",data:u}),updateChatRole:async u=>await i.put({url:"/ai/chat-role/update",data:u}),deleteChatRole:async u=>await i.delete({url:"/ai/chat-role/delete?id="+u}),getMyPage:async u=>await i.get({url:"/ai/chat-role/my-page",params:u}),getCategoryList:async()=>await i.get({url:"/ai/chat-role/category-list"}),createMy:async u=>await i.post({url:"/ai/chat-role/create-my",data:u}),updateMy:async u=>await i.put({url:"/ai/chat-role/update-my",data:u}),deleteMy:async u=>await i.delete({url:"/ai/chat-role/delete-my?id="+u})},ge=K({name:"ChatRoleForm",__name:"ChatRoleForm",emits:["success"],setup(u,{expose:N,emit:B}){const{t:b}=W(),_=X(),n=p(!1),U=p(""),y=p(!1),v=p(""),t=p({id:void 0,modelId:void 0,name:void 0,avatar:void 0,category:void 0,sort:void 0,description:void 0,systemMessage:void 0,publicStatus:!0,status:R.ENABLE}),C=p(),q=p([]),f=Y(()=>v.value==="my-create"||v.value==="my-update"),F=Z({name:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],avatar:[{required:!0,message:"\u89D2\u8272\u5934\u50CF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],category:[{required:!0,message:"\u89D2\u8272\u7C7B\u522B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u89D2\u8272\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],description:[{required:!0,message:"\u89D2\u8272\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],systemMessage:[{required:!0,message:"\u89D2\u8272\u8BBE\u5B9A\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],publicStatus:[{required:!0,message:"\u662F\u5426\u516C\u5F00\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]});N({open:async(r,l,g)=>{if(n.value=!0,U.value=g||b("action."+r),v.value=r,G(),l){y.value=!0;try{t.value=await h.getChatRole(l)}finally{y.value=!1}}q.value=await ve.getChatModelSimpleList(R.ENABLE)}});const O=B,T=async()=>{await C.value.validate(),y.value=!0;try{const r=t.value;v.value==="my-create"?(await h.createMy(r),_.success(b("common.createSuccess"))):v.value==="my-update"?(await h.updateMy(r),_.success(b("common.updateSuccess"))):v.value==="create"?(await h.createChatRole(r),_.success(b("common.createSuccess"))):(await h.updateChatRole(r),_.success(b("common.updateSuccess"))),n.value=!1,O("success")}finally{y.value=!1}},G=()=>{var r;t.value={id:void 0,modelId:void 0,name:void 0,avatar:void 0,category:void 0,sort:void 0,description:void 0,systemMessage:void 0,publicStatus:!0,status:R.ENABLE},(r=C.value)==null||r.resetFields()};return(r,l)=>{const g=te,m=se,P=ue,j=oe,z=de,x=re,I=ie,D=ce,J=me,A=pe,Q=ye,H=ne;return d(),c(Q,{title:e(U),modelValue:e(n),"onUpdate:modelValue":l[10]||(l[10]=a=>le(n)?n.value=a:null)},{footer:s(()=>[o(A,{onClick:T,type:"primary",disabled:e(y)},{default:s(()=>[w("\u786E \u5B9A")]),_:1},8,["disabled"]),o(A,{onClick:l[9]||(l[9]=a=>n.value=!1)},{default:s(()=>[w("\u53D6 \u6D88")]),_:1})]),default:s(()=>[$((d(),c(J,{ref_key:"formRef",ref:C,model:e(t),rules:e(F),"label-width":"100px"},{default:s(()=>[o(m,{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{default:s(()=>[o(g,{modelValue:e(t).name,"onUpdate:modelValue":l[0]||(l[0]=a=>e(t).name=a),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(m,{label:"\u89D2\u8272\u5934\u50CF",prop:"avatar"},{default:s(()=>[o(P,{modelValue:e(t).avatar,"onUpdate:modelValue":l[1]||(l[1]=a=>e(t).avatar=a),height:"60px",width:"60px"},null,8,["modelValue"])]),_:1}),e(f)?V("",!0):(d(),c(m,{key:0,label:"\u7ED1\u5B9A\u6A21\u578B",prop:"modelId"},{default:s(()=>[o(z,{modelValue:e(t).modelId,"onUpdate:modelValue":l[2]||(l[2]=a=>e(t).modelId=a),placeholder:"\u8BF7\u9009\u62E9\u6A21\u578B",clearable:""},{default:s(()=>[(d(!0),M(S,null,k(e(q),a=>(d(),c(j,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})),e(f)?V("",!0):(d(),c(m,{key:1,label:"\u89D2\u8272\u7C7B\u522B",prop:"category"},{default:s(()=>[o(g,{modelValue:e(t).category,"onUpdate:modelValue":l[3]||(l[3]=a=>e(t).category=a),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u7C7B\u522B"},null,8,["modelValue"])]),_:1})),o(m,{label:"\u89D2\u8272\u63CF\u8FF0",prop:"description"},{default:s(()=>[o(g,{type:"textarea",modelValue:e(t).description,"onUpdate:modelValue":l[4]||(l[4]=a=>e(t).description=a),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0"},null,8,["modelValue"])]),_:1}),o(m,{label:"\u89D2\u8272\u8BBE\u5B9A",prop:"systemMessage"},{default:s(()=>[o(g,{type:"textarea",modelValue:e(t).systemMessage,"onUpdate:modelValue":l[5]||(l[5]=a=>e(t).systemMessage=a),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u8BBE\u5B9A"},null,8,["modelValue"])]),_:1}),e(f)?V("",!0):(d(),c(m,{key:2,label:"\u662F\u5426\u516C\u5F00",prop:"publicStatus"},{default:s(()=>[o(I,{modelValue:e(t).publicStatus,"onUpdate:modelValue":l[6]||(l[6]=a=>e(t).publicStatus=a)},{default:s(()=>[(d(!0),M(S,null,k(e(ee)(e(E).INFRA_BOOLEAN_STRING),a=>(d(),c(x,{key:a.value,value:a.value},{default:s(()=>[w(L(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})),e(f)?V("",!0):(d(),c(m,{key:3,label:"\u89D2\u8272\u6392\u5E8F",prop:"sort"},{default:s(()=>[o(D,{modelValue:e(t).sort,"onUpdate:modelValue":l[7]||(l[7]=a=>e(t).sort=a),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6392\u5E8F",class:"!w-1/1"},null,8,["modelValue"])]),_:1})),e(f)?V("",!0):(d(),c(m,{key:4,label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:s(()=>[o(I,{modelValue:e(t).status,"onUpdate:modelValue":l[8]||(l[8]=a=>e(t).status=a)},{default:s(()=>[(d(!0),M(S,null,k(e(ae)(e(E).COMMON_STATUS),a=>(d(),c(x,{key:a.value,value:a.value},{default:s(()=>[w(L(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}))]),_:1},8,["model","rules"])),[[H,e(y)]])]),_:1},8,["title","modelValue"])}}});export{h as C,ge as _};
