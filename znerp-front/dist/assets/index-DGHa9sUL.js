import{d as J,b3 as K,ai as _,r as k,ar as I,o as v,c as d,g as R,F as V,p as M,W as L,at as W,f as B,a as $,a5 as N,x as O,t as P,H as Q,_ as T}from"./index-CIfmhqRC.js";const D=(i,g)=>{const[t,a]=[i.x,g.x].sort(),[l,r]=[i.y,g.y].sort(),p=a+1,f=r+1;return{left:t,right:p,top:l,bottom:f,height:f-l,width:p-t}},U={class:"relative"},X={class:"cube-table"},Y=["onClick","onMouseenter"],Z=["onClick"],ee=["onClick"],te=T(J({name:"MagicCubeEditor",__name:"index",props:{modelValue:K().isRequired,rows:_.number.def(4),cols:_.number.def(4),cubeSize:_.number.def(75)},emits:["update:modelValue","hotAreaSelected"],setup(i,{emit:g}){const t=i,a=k([]);I(()=>[t.rows,t.cols],()=>{if(a.value=[],t.rows&&t.cols)for(let o=0;o<t.rows;o++){a.value[o]=[];for(let e=0;e<t.cols;e++)a.value[o].push({x:e,y:o,active:!1})}},{immediate:!0});const l=k([]);I(()=>t.modelValue,()=>l.value=t.modelValue||[],{immediate:!0});const r=k(),p=()=>!!r.value,f=g,A=()=>f("update:modelValue",l),q=k(0),E=(o,e)=>{q.value=e,f("hotAreaSelected",o,e)};function y(){j((o,e,s)=>{s.active&&(s.active=!1)}),r.value=void 0}const j=o=>{for(let e=0;e<a.value.length;e++)for(let s=0;s<a.value[e].length;s++)o(e,s,a.value[e][s])};return(o,e)=>{const s=Q;return v(),d("div",U,[R("table",X,[R("tbody",null,[(v(!0),d(V,null,M($(a),(u,n)=>(v(),d("tr",{key:n},[(v(!0),d(V,null,M(u,(S,b)=>(v(),d("td",{key:b,class:L(["cube",{active:S.active}]),style:W({width:`${i.cubeSize}px`,height:`${i.cubeSize}px`}),onClick:G=>((C,z)=>{const m=a.value[C][z];if(!p())return r.value=m,void(r.value.active=!0);l.value.push(D(r.value,m)),y();let c=l.value.length-1;E(l.value[c],c),A()})(n,b),onMouseenter:G=>((C,z)=>{if(!p())return;const m=D(r.value,a.value[C][z]);for(const F of l.value)if(h=m,(c=F).left<h.left+h.width&&c.left+c.width>h.left&&c.top<h.top+h.height&&c.height+c.top>h.top)return void y();var c,h;j((F,ae,H)=>{var x,w;H.active=(x=m,(w=H).x>=x.left&&w.x<x.right&&w.y>=x.top&&w.y<x.bottom)})})(n,b)},[B(s,{icon:"ep-plus"})],46,Y))),128))]))),128))]),(v(!0),d(V,null,M($(l),(u,n)=>(v(),d("div",{key:n,class:"hot-area",style:W({top:i.cubeSize*u.top+"px",left:i.cubeSize*u.left+"px",height:i.cubeSize*u.height+"px",width:i.cubeSize*u.width+"px"}),onClick:S=>E(u,n),onMouseover:y},[$(q)===n?(v(),d("div",{key:0,class:"btn-delete",onClick:S=>(b=>{l.value.splice(b,1),y(),A()})(n)},[B(s,{icon:"ep:circle-close-filled"})],8,ee)):N("",!0),O(" "+P(`${u.width}\xD7${u.height}`),1)],44,Z))),128))])])}}}),[["__scopeId","data-v-1a498d3a"]]);export{te as _};
