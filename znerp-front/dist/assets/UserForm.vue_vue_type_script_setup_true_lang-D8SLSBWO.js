import{d as q,h as z,z as A,r as m,e as B,o as n,q as c,w as d,f as o,a,x as _,y as J,c as R,F as S,p as D,k as E,U as G,C as H,A as K,B as L,J as N,I as O,M as P}from"./index-CIfmhqRC.js";import{_ as Q}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{b as T}from"./index-C0ch1YxQ.js";import{g as W,u as X}from"./index-CPdF_MJz.js";const Y=q({name:"MpUserForm",__name:"UserForm",emits:["success"],setup(Z,{expose:V,emit:y}){const{t:b}=z(),g=A(),u=m(!1),t=m(!1),l=m({id:void 0,nickname:void 0,remark:void 0,tagIds:[]}),I=B({}),i=m(),f=m([]);V({open:async r=>{if(u.value=!0,h(),r){t.value=!0;try{l.value=await W(r)}finally{t.value=!1}}f.value=await T()}});const U=y,w=async()=>{if(i&&await i.value.validate()){t.value=!0;try{await X(l.value),g.success(b("common.updateSuccess")),u.value=!1,U("success")}finally{t.value=!1}}},h=()=>{var r;l.value={id:void 0,nickname:void 0,remark:void 0,tagIds:[]},(r=i.value)==null||r.resetFields()};return(r,s)=>{const v=G,p=H,x=K,F=L,C=N,k=O,M=Q,j=P;return n(),c(M,{modelValue:a(u),"onUpdate:modelValue":s[4]||(s[4]=e=>E(u)?u.value=e:null),title:"\u4FEE\u6539"},{footer:d(()=>[o(k,{disabled:a(t),type:"primary",onClick:w},{default:d(()=>[_("\u786E \u5B9A")]),_:1},8,["disabled"]),o(k,{onClick:s[3]||(s[3]=e=>u.value=!1)},{default:d(()=>[_("\u53D6 \u6D88")]),_:1})]),default:d(()=>[J((n(),c(C,{ref_key:"formRef",ref:i,model:a(l),rules:a(I),"label-width":"80px"},{default:d(()=>[o(p,{label:"\u6635\u79F0",prop:"nickname"},{default:d(()=>[o(v,{modelValue:a(l).nickname,"onUpdate:modelValue":s[0]||(s[0]=e=>a(l).nickname=e),placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0"},null,8,["modelValue"])]),_:1}),o(p,{label:"\u5907\u6CE8",prop:"remark"},{default:d(()=>[o(v,{modelValue:a(l).remark,"onUpdate:modelValue":s[1]||(s[1]=e=>a(l).remark=e),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1}),o(p,{label:"\u6807\u7B7E",prop:"tagIds"},{default:d(()=>[o(F,{modelValue:a(l).tagIds,"onUpdate:modelValue":s[2]||(s[2]=e=>a(l).tagIds=e),clearable:"",multiple:"",placeholder:"\u8BF7\u9009\u62E9\u6807\u7B7E"},{default:d(()=>[(n(!0),R(S,null,D(a(f),e=>(n(),c(x,{key:e.tagId,label:e.name,value:e.tagId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[j,a(t)]])]),_:1},8,["modelValue"])}}});export{Y as _};
