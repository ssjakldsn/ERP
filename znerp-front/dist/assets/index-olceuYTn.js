import{_ as ce}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{d as ye,ai as x,r as _,N as fe,u as me,n as _e,O as q,o as i,c as y,f as l,w as a,F as v,a as e,z as ve,x as u,t as o,D as b,q as p,a5 as n,y as z,p as w,aD as f,g as m,aE as be,at as ke,aF as Ee,I as Te,av as Pe,K as Re,L as Se,E as we,j as Ae,af as ge,a0 as Ce,a1 as De,_ as Ie}from"./index-CIfmhqRC.js";import{E as Ne,a as he}from"./el-timeline-item-r9TewDuU.js";import{E as Ue,a as Fe}from"./el-descriptions-item-BL6ba85F.js";import{_ as Oe}from"./DictTag.vue_vue_type_script_lang-CTpVFm77.js";import{g as Le,a as Ye,p as Xe}from"./index-DDOznnSc.js";import{f as I}from"./formatTime-DFFN_xWx.js";import{_ as Ke}from"./OrderUpdateRemarkForm.vue_vue_type_script_setup_true_lang-CQkrnmSJ.js";import{_ as Me}from"./OrderDeliveryForm.vue_vue_type_script_setup_true_lang-D-MWCEIO.js";import{_ as Ve}from"./OrderUpdateAddressForm.vue_vue_type_script_setup_true_lang-Cq4AcZcs.js";import{_ as je}from"./OrderUpdatePriceForm.vue_vue_type_script_setup_true_lang-B5gmOpOG.js";import{g as xe}from"./index-CqFYyUKb.js";import{u as qe}from"./tagsView-CqxiFcdS.js";import{D as k,T as B}from"./constants-A8BI3pz7.js";import{g as ze}from"./index-D2ap44TW.js";import"./el-card-DyMugU68.js";import"./color-BN7ZL7BD.js";import"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import"./el-tree-select-CYFGeiEt.js";import"./index-w2FCJT7Q.js";import"./tree-BMqZf9_I.js";const E=T=>(Ce("data-v-5a02ce24"),T=T(),De(),T),Be=E(()=>m("span",{style:{color:"red"}},"\u63D0\u9192: ",-1)),He=E(()=>m("br",null,null,-1)),Ze=E(()=>m("br",null,null,-1)),$e=E(()=>m("span",{style:{color:"red"}},"\u4F18\u60E0\u52B5\u4F18\u60E0: ",-1)),Ge=E(()=>m("span",{style:{color:"red"}},"VIP \u4F18\u60E0: ",-1)),Je=E(()=>m("span",{style:{color:"red"}},"\u6D3B\u52A8\u4F18\u60E0: ",-1)),Qe=E(()=>m("span",{style:{color:"red"}},"\u79EF\u5206\u62B5\u6263: ",-1)),We={key:0},ea={key:1},aa={class:"el-timeline-right-content"},la=Ie(ye({name:"TradeOrderDetail",__name:"index",props:{id:x.number.def(void 0),showPickUp:x.bool.def(!0)},setup(T){const C=ve(),H=d=>{const D=Ee(b.USER_TYPE,d);switch(D==null?void 0:D.colorType){case"success":return"#67C23A";case"info":return"#909399";case"warning":return"#E6A23C";case"danger":return"#F56C6C"}return"#409EFF"},t=_({logs:[]}),h=_(),Z=()=>{var d;(d=h.value)==null||d.open(t.value)},U=_(),$=()=>{var d;(d=U.value)==null||d.open(t.value)},F=_(),G=()=>{var d;(d=F.value)==null||d.open(t.value)},O=_(),J=()=>{var d;(d=O.value)==null||d.open(t.value)},Q=async()=>{try{await C.confirm("\u786E\u8BA4\u6838\u9500\u8BA2\u5355\u5417\uFF1F"),await Xe(t.value.id),C.success("\u6838\u9500\u6210\u529F"),await P()}catch{}},{params:W}=fe(),ee=T,L=W.id||ee.id,P=async()=>{if(L){const d=await Ye(L);d||(C.error("\u4EA4\u6613\u8BA2\u5355\u4E0D\u5B58\u5728"),re()),t.value=d}},{delView:ae}=qe(),{push:le,currentRoute:te}=me(),re=()=>{ae(e(te)),le({name:"TradeOrder"})},se=()=>{C.success("\u590D\u5236\u6210\u529F")},Y=_([]),N=_([]),X=_({});return _e(async()=>{await P(),t.value.deliveryType===k.EXPRESS.type?(Y.value=await xe(),form.value.logisticsId&&(N.value=await Le(t.value.id))):t.value.deliveryType===k.PICK_UP.type&&(X.value=await ze(t.value.pickUpStoreId))}),(d,D)=>{const r=Ue,R=Oe,S=Fe,A=Te,ue=Pe,g=Re,oe=Se,K=we,ie=Ae,de=ge,M=Ne,V=he,pe=ce,ne=q("hasPermi"),j=q("clipboard");return i(),y(v,null,[l(pe,null,{default:a(()=>[l(S,{title:"\u8BA2\u5355\u4FE1\u606F"},{default:a(()=>[l(r,{label:"\u8BA2\u5355\u53F7: "},{default:a(()=>[u(o(e(t).no),1)]),_:1}),l(r,{label:"\u4E70\u5BB6: "},{default:a(()=>{var s,c;return[u(o((c=(s=e(t))==null?void 0:s.user)==null?void 0:c.nickname),1)]}),_:1}),l(r,{label:"\u8BA2\u5355\u7C7B\u578B: "},{default:a(()=>[l(R,{type:e(b).TRADE_ORDER_TYPE,value:e(t).type},null,8,["type","value"])]),_:1}),l(r,{label:"\u8BA2\u5355\u6765\u6E90: "},{default:a(()=>[l(R,{type:e(b).TERMINAL,value:e(t).terminal},null,8,["type","value"])]),_:1}),l(r,{label:"\u4E70\u5BB6\u7559\u8A00: "},{default:a(()=>[u(o(e(t).userRemark),1)]),_:1}),l(r,{label:"\u5546\u5BB6\u5907\u6CE8: "},{default:a(()=>[u(o(e(t).remark),1)]),_:1}),l(r,{label:"\u652F\u4ED8\u5355\u53F7: "},{default:a(()=>[u(o(e(t).payOrderId),1)]),_:1}),l(r,{label:"\u4ED8\u6B3E\u65B9\u5F0F: "},{default:a(()=>[l(R,{type:e(b).PAY_CHANNEL_CODE,value:e(t).payChannelCode},null,8,["type","value"])]),_:1}),e(t).brokerageUser?(i(),p(r,{key:0,label:"\u63A8\u5E7F\u7528\u6237: "},{default:a(()=>{var s;return[u(o((s=e(t).brokerageUser)==null?void 0:s.nickname),1)]}),_:1})):n("",!0)]),_:1}),l(S,{column:1,title:"\u8BA2\u5355\u72B6\u6001"},{default:a(()=>[l(r,{label:"\u8BA2\u5355\u72B6\u6001: "},{default:a(()=>[l(R,{type:e(b).TRADE_ORDER_STATUS,value:e(t).status},null,8,["type","value"])]),_:1}),z((i(),p(r,{"label-class-name":"no-colon"},{default:a(()=>[e(t).status===e(B).UNPAID.status?(i(),p(A,{key:0,type:"primary",onClick:J},{default:a(()=>[u(" \u8C03\u6574\u4EF7\u683C ")]),_:1})):n("",!0),l(A,{type:"primary",onClick:Z},{default:a(()=>[u("\u5907\u6CE8")]),_:1}),e(t).status===e(B).UNDELIVERED.status?(i(),y(v,{key:1},[e(t).deliveryType===e(k).EXPRESS.type?(i(),p(A,{key:0,type:"primary",onClick:$},{default:a(()=>[u(" \u53D1\u8D27 ")]),_:1})):n("",!0),e(t).deliveryType===e(k).EXPRESS.type?(i(),p(A,{key:1,type:"primary",onClick:G},{default:a(()=>[u(" \u4FEE\u6539\u5730\u5740 ")]),_:1})):n("",!0),e(t).deliveryType===e(k).PICK_UP.type&&T.showPickUp?(i(),p(A,{key:2,type:"primary",onClick:Q},{default:a(()=>[u(" \u6838\u9500 ")]),_:1})):n("",!0)],64)):n("",!0)]),_:1})),[[ne,["trade:order:update"]]]),l(r,null,{label:a(()=>[Be]),default:a(()=>[u(" \u4E70\u5BB6\u4ED8\u6B3E\u6210\u529F\u540E\uFF0C\u8D27\u6B3E\u5C06\u76F4\u63A5\u8FDB\u5165\u60A8\u7684\u5546\u6237\u53F7\uFF08\u5FAE\u4FE1\u3001\u652F\u4ED8\u5B9D\uFF09"),He,u(" \u8BF7\u53CA\u65F6\u5173\u6CE8\u4F60\u53D1\u51FA\u7684\u5305\u88F9\u72B6\u6001\uFF0C\u786E\u4FDD\u53EF\u4EE5\u914D\u9001\u81F3\u4E70\u5BB6\u624B\u4E2D "),Ze,u(" \u5982\u679C\u4E70\u5BB6\u8868\u793A\u6CA1\u6536\u5230\u8D27\u6216\u8D27\u7269\u6709\u95EE\u9898\uFF0C\u8BF7\u53CA\u65F6\u8054\u7CFB\u4E70\u5BB6\u5904\u7406\uFF0C\u53CB\u597D\u534F\u5546 ")]),_:1})]),_:1}),l(S,{title:"\u5546\u54C1\u4FE1\u606F"},{default:a(()=>[l(r,{labelClassName:"no-colon"},{default:a(()=>[l(ie,{gutter:20},{default:a(()=>[l(K,{span:15},{default:a(()=>[l(oe,{data:e(t).items,border:""},{default:a(()=>[l(g,{label:"\u5546\u54C1",prop:"spuName",width:"auto"},{default:a(({row:s})=>[u(o(s.spuName)+" ",1),(i(!0),y(v,null,w(s.properties,c=>(i(),p(ue,{key:c.propertyId},{default:a(()=>[u(o(c.propertyName)+": "+o(c.valueName),1)]),_:2},1024))),128))]),_:1}),l(g,{label:"\u5546\u54C1\u539F\u4EF7",prop:"price",width:"150"},{default:a(({row:s})=>[u(o(e(f)(s.price))+"\u5143",1)]),_:1}),l(g,{label:"\u6570\u91CF",prop:"count",width:"100"}),l(g,{label:"\u5408\u8BA1",prop:"payPrice",width:"150"},{default:a(({row:s})=>[u(o(e(f)(s.payPrice))+"\u5143",1)]),_:1}),l(g,{label:"\u552E\u540E\u72B6\u6001",prop:"afterSaleStatus",width:"120"},{default:a(({row:s})=>[l(R,{type:e(b).TRADE_ORDER_ITEM_AFTER_SALE_STATUS,value:s.afterSaleStatus},null,8,["type","value"])]),_:1})]),_:1},8,["data"])]),_:1}),l(K,{span:10})]),_:1})]),_:1})]),_:1}),l(S,{column:4},{default:a(()=>[l(r,{label:"\u5546\u54C1\u603B\u989D: "},{default:a(()=>[u(o(e(f)(e(t).totalPrice))+" \u5143 ",1)]),_:1}),l(r,{label:"\u8FD0\u8D39\u91D1\u989D: "},{default:a(()=>[u(o(e(f)(e(t).deliveryPrice))+" \u5143 ",1)]),_:1}),l(r,{label:"\u8BA2\u5355\u8C03\u4EF7: "},{default:a(()=>[u(o(e(f)(e(t).adjustPrice))+" \u5143 ",1)]),_:1}),(i(),y(v,null,w(1,s=>l(r,{key:s,"label-class-name":"no-colon"})),64)),l(r,null,{label:a(()=>[$e]),default:a(()=>[u(" "+o(e(f)(e(t).couponPrice))+" \u5143 ",1)]),_:1}),l(r,null,{label:a(()=>[Ge]),default:a(()=>[u(" "+o(e(f)(e(t).vipPrice))+" \u5143 ",1)]),_:1}),l(r,null,{label:a(()=>[Je]),default:a(()=>[u(" "+o(e(f)(e(t).discountPrice))+" \u5143 ",1)]),_:1}),l(r,null,{label:a(()=>[Qe]),default:a(()=>[u(" "+o(e(f)(e(t).pointPrice))+" \u5143 ",1)]),_:1}),(i(),y(v,null,w(3,s=>l(r,{key:s,"label-class-name":"no-colon"})),64)),l(r,{label:"\u5E94\u4ED8\u91D1\u989D: "},{default:a(()=>[u(o(e(f)(e(t).payPrice))+" \u5143 ",1)]),_:1})]),_:1}),l(S,{column:4,title:"\u6536\u8D27\u4FE1\u606F"},{default:a(()=>[l(r,{label:"\u914D\u9001\u65B9\u5F0F: "},{default:a(()=>[l(R,{type:e(b).TRADE_DELIVERY_TYPE,value:e(t).deliveryType},null,8,["type","value"])]),_:1}),l(r,{label:"\u6536\u8D27\u4EBA: "},{default:a(()=>[u(o(e(t).receiverName),1)]),_:1}),l(r,{label:"\u8054\u7CFB\u7535\u8BDD: "},{default:a(()=>[u(o(e(t).receiverMobile),1)]),_:1}),e(t).deliveryType===e(k).EXPRESS.type?(i(),y("div",We,[e(t).receiverDetailAddress?(i(),p(r,{key:0,label:"\u6536\u8D27\u5730\u5740: "},{default:a(()=>[u(o(e(t).receiverAreaName)+" "+o(e(t).receiverDetailAddress)+" ",1),z(l(de,{icon:"ep:document-copy",type:"primary"},null,512),[[j,e(t).receiverAreaName+" "+e(t).receiverDetailAddress,"copy"],[j,se,"success"]])]),_:1})):n("",!0),e(t).logisticsId?(i(),p(r,{key:1,label:"\u7269\u6D41\u516C\u53F8: "},{default:a(()=>{var s;return[u(o((s=e(Y).find(c=>c.id===e(t).logisticsId))==null?void 0:s.name),1)]}),_:1})):n("",!0),e(t).logisticsId?(i(),p(r,{key:2,label:"\u8FD0\u5355\u53F7: "},{default:a(()=>[u(o(e(t).logisticsNo),1)]),_:1})):n("",!0),e(I).deliveryTime?(i(),p(r,{key:3,label:"\u53D1\u8D27\u65F6\u95F4: "},{default:a(()=>[u(o(e(I)(e(t).deliveryTime)),1)]),_:1})):n("",!0),(i(),y(v,null,w(2,s=>l(r,{key:s,"label-class-name":"no-colon"})),64)),e(N).length>0?(i(),p(r,{key:4,label:"\u7269\u6D41\u8BE6\u60C5: "},{default:a(()=>[l(V,null,{default:a(()=>[(i(!0),y(v,null,w(e(N),(s,c)=>(i(),p(M,{key:c,timestamp:e(I)(s.time)},{default:a(()=>[u(o(s.content),1)]),_:2},1032,["timestamp"]))),128))]),_:1})]),_:1})):n("",!0)])):n("",!0),e(t).deliveryType===e(k).PICK_UP.type?(i(),y("div",ea,[e(t).pickUpStoreId?(i(),p(r,{key:0,label:"\u81EA\u63D0\u95E8\u5E97: "},{default:a(()=>{var s;return[u(o((s=e(X))==null?void 0:s.name),1)]}),_:1})):n("",!0)])):n("",!0)]),_:1}),l(S,{title:"\u8BA2\u5355\u64CD\u4F5C\u65E5\u5FD7"},{default:a(()=>[l(r,{labelClassName:"no-colon"},{default:a(()=>[l(V,null,{default:a(()=>[(i(!0),y(v,null,w(e(t).logs,(s,c)=>(i(),p(M,{key:c,timestamp:e(I)(s.createTime),placement:"top"},{dot:a(()=>[m("span",{style:ke({backgroundColor:H(s.userType)}),class:"dot-node-style"},o(e(be)(e(b).USER_TYPE,s.userType)[0]),5)]),default:a(()=>[m("div",aa,o(s.content),1)]),_:2},1032,["timestamp"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),l(Me,{ref_key:"deliveryFormRef",ref:U,onSuccess:P},null,512),l(Ke,{ref_key:"updateRemarkForm",ref:h,onSuccess:P},null,512),l(Ve,{ref_key:"updateAddressFormRef",ref:F,onSuccess:P},null,512),l(je,{ref_key:"updatePriceFormRef",ref:O,onSuccess:P},null,512)],64)}}}),[["__scopeId","data-v-5a02ce24"]]);export{la as default};
