import{d as J,h as M,z as R,r as i,o as c,c as g,f as r,w as o,a as l,x as f,y as q,q as w,F as A,p as E,cL as L,D as T,t as W,k as j,ak as D,al as z,C as B,U as G,J as H,I as K,M as P}from"./index-CIfmhqRC.js";import{_ as Q}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{C as X}from"./constants-A8BI3pz7.js";import{g as Y,c as Z,u as $}from"./index-BY9mST-C.js";const aa=J({name:"WalletChannelForm",__name:"WalletChannelForm",emits:["success"],setup(ea,{expose:b,emit:V}){const{t:p}=M(),v=R(),d=i(!1),_=i(""),n=i(!1),e=i({appId:"",code:"",status:void 0,feeRate:0,remark:"",config:{name:"mock-conf"}}),h={status:[{required:!0,message:"\u6E20\u9053\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},m=i();b({open:async(s,a)=>{d.value=!0,n.value=!0,S(s,a);try{const u=await Y(s,a);u&&u.id&&(e.value=u,e.value.config=JSON.parse(u.config)),_.value=e.value.id?"\u7F16\u8F91\u652F\u4ED8\u6E20\u9053":"\u521B\u5EFA\u652F\u4ED8\u6E20\u9053"}finally{n.value=!1}}});const x=V,C=async()=>{if(m&&await m.value.validate()){n.value=!0;try{const s={...e.value};s.config=JSON.stringify(e.value.config),s.id?(await $(s),v.success(p("common.updateSuccess"))):(await Z(s),v.success(p("common.createSuccess"))),d.value=!1,x("success")}finally{n.value=!1}}},S=(s,a)=>{var u;e.value={appId:s,code:a,status:X.ENABLE,remark:"",feeRate:0,config:{name:"mock-conf"}},(u=m.value)==null||u.resetFields()};return(s,a)=>{const u=D,I=z,k=B,U=G,F=H,y=K,N=Q,O=P;return c(),g("div",null,[r(N,{modelValue:l(d),"onUpdate:modelValue":a[3]||(a[3]=t=>j(d)?d.value=t:null),title:l(_),width:"800px"},{footer:o(()=>[r(y,{disabled:l(n),type:"primary",onClick:C},{default:o(()=>[f("\u786E \u5B9A")]),_:1},8,["disabled"]),r(y,{onClick:a[2]||(a[2]=t=>d.value=!1)},{default:o(()=>[f("\u53D6 \u6D88")]),_:1})]),default:o(()=>[q((c(),w(F,{ref_key:"formRef",ref:m,model:l(e),rules:h,"label-width":"100px"},{default:o(()=>[r(k,{label:"\u6E20\u9053\u72B6\u6001","label-width":"180px",prop:"status"},{default:o(()=>[r(I,{modelValue:l(e).status,"onUpdate:modelValue":a[0]||(a[0]=t=>l(e).status=t)},{default:o(()=>[(c(!0),g(A,null,E(l(L)(l(T).COMMON_STATUS),t=>(c(),w(u,{key:parseInt(t.value),value:parseInt(t.value)},{default:o(()=>[f(W(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(k,{label:"\u5907\u6CE8","label-width":"180px",prop:"remark"},{default:o(()=>[r(U,{modelValue:l(e).remark,"onUpdate:modelValue":a[1]||(a[1]=t=>l(e).remark=t),style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[O,l(n)]])]),_:1},8,["modelValue","title"])])}}});export{aa as _};
