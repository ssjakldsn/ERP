import{d as M,r as o,u as N,N as P,n as V,o as p,c as D,y as T,a,q as R,w as i,x as h,a5 as q,f as e,F,z as W,I as j,l as Q,m as S,E as $,M as G}from"./index-CIfmhqRC.js";import{g as H,_ as J}from"./index-Bm5JfAS4.js";import{u as K}from"./tagsView-CqxiFcdS.js";import{b as O}from"./index-DdHHUXAi.js";import{_ as U}from"./ReceivablePlanDetailsHeader.vue_vue_type_script_setup_true_lang-BfOyVRUL.js";import{_ as X}from"./ReceivablePlanDetailsInfo.vue_vue_type_script_setup_true_lang-BaNNK6qU.js";import{_ as Y}from"./PermissionList.vue_vue_type_script_setup_true_lang-BJ8SS8cZ.js";import{B as z}from"./index-8CYEcIk3.js";import{_ as Z}from"./ReceivablePlanForm.vue_vue_type_script_setup_true_lang-DhJzn0na.js";import"./el-timeline-item-r9TewDuU.js";import"./formatTime-DFFN_xWx.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import"./el-card-DyMugU68.js";import"./el-descriptions-item-BL6ba85F.js";import"./el-text-DMgoq9G3.js";import"./el-collapse-item-BgajxfOI.js";import"./DictTag.vue_vue_type_script_lang-CTpVFm77.js";import"./color-BN7ZL7BD.js";import"./PermissionForm.vue_vue_type_script_setup_true_lang-BA269V0x.js";import"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import"./index-QrlE36WK.js";import"./index-BZptzjxi.js";import"./index-jPQDaA_X.js";const aa=M({name:"CrmReceivablePlanDetail",__name:"index",setup(ea){const E=W(),u=o(0),s=o(!0),t=o({}),f=o(),d=async r=>{s.value=!0;try{t.value=await O(r),await C(r)}finally{s.value=!1}},_=o(),c=o([]),C=async r=>{if(!r)return;const l=await H({bizType:z.CRM_RECEIVABLE_PLAN,bizId:r});c.value=l.list},{delView:L}=K(),{currentRoute:g}=N(),v=()=>{L(a(g))},{params:b}=P();return V(async()=>{if(!b.id)return E.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u56DE\u6B3E\u8BA1\u5212\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void v();u.value=b.id,await d(u.value)}),(r,l)=>{const k=j,m=Q,x=J,A=S,I=$,B=G;return p(),D(F,null,[T((p(),R(U,{"receivable-plan":a(t)},{default:i(()=>{var n;return[(n=a(f))!=null&&n.validateWrite?(p(),R(k,{key:0,onClick:l[0]||(l[0]=ia=>{return y="update",w=a(t).id,void _.value.open(y,w);var y,w})},{default:i(()=>[h(" \u7F16\u8F91 ")]),_:1})):q("",!0)]}),_:1},8,["receivable-plan"])),[[B,a(s)]]),e(I,null,{default:i(()=>[e(A,null,{default:i(()=>[e(m,{label:"\u8BE6\u7EC6\u8D44\u6599"},{default:i(()=>[e(X,{"receivable-plan":a(t)},null,8,["receivable-plan"])]),_:1}),e(m,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:i(()=>[e(x,{"log-list":a(c)},null,8,["log-list"])]),_:1}),e(m,{label:"\u56E2\u961F\u6210\u5458"},{default:i(()=>[e(Y,{ref_key:"permissionListRef",ref:f,"biz-id":a(t).id,"biz-type":a(z).CRM_RECEIVABLE_PLAN,"show-action":!0,onQuitTeam:v},null,8,["biz-id","biz-type"])]),_:1})]),_:1})]),_:1}),e(Z,{ref_key:"formRef",ref:_,onSuccess:l[1]||(l[1]=n=>d(a(t).id))},null,512)],64)}}});export{aa as default};
