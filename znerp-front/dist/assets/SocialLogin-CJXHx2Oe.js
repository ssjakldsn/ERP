import{d as J,N as Q,V as X,r as h,u as ee,a2 as ae,a3 as te,a as e,e as le,n as se,o as M,c as oe,g as n,W as T,t as u,X as q,f as a,w as t,Y as ne,y as ie,a4 as re,q as pe,a5 as de,P as me,x as C,Z as ce,h as fe,$ as ue,a6 as xe,a7 as ge,a8 as I,a9 as he,aa as we,ab as ye,ac as _e,ad as ve,C as be,E as Fe,U as Ve,ae as ke,af as Ne,j as Pe,J as Le,a0 as je,a1 as Se,ag as Ue,ah as Ee,_ as Me}from"./index-CIfmhqRC.js";import{_ as Te}from"./Verify-jghUIUps.js";import{_ as qe}from"./XButton-CPWgIV2x.js";import{_ as R}from"./logo-B-Cl0dDj.js";import{_ as Ce}from"./login-box-bg-CgotIC_L.js";import{u as F}from"./useIcon-DXiy73tX.js";import{T as Ie,_ as Re}from"./LocaleDropdown.vue_vue_type_script_setup_true_lang-CoCmy6pF.js";import{u as ze,L as Ge,_ as Ke,a as Oe}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-RRNxBHMC.js";import{r as V}from"./formRules-C3y0LKNH.js";import"./el-dropdown-item-CvgBZuG7.js";const k=w=>(je("data-v-34a4ff1d"),w=w(),Se(),w),Ze={class:"relative mx-auto h-full flex"},$e={class:"relative flex items-center text-white"},Ae=k(()=>n("img",{alt:"",class:"mr-10px h-48px w-48px",src:R},null,-1)),We={class:"text-20px font-bold"},Ye={class:"h-[calc(100%-60px)] flex items-center justify-center"},Be=k(()=>n("img",{key:"1",alt:"",class:"w-350px",src:Ce},null,-1)),De={key:"2",class:"text-3xl text-white"},He={key:"3",class:"mt-5 text-14px font-normal text-white"},Je={class:"relative flex-1 p-30px dark:bg-[var(--login-bg-color)] lt-sm:p-10px overflow-x-hidden overflow-y-auto"},Qe={class:"flex items-center justify-between text-white at-2xl:justify-end at-xl:justify-end"},Xe={class:"flex items-center at-2xl:hidden at-xl:hidden"},ea=k(()=>n("img",{alt:"",class:"mr-10px h-48px w-48px",src:R},null,-1)),aa={class:"text-20px font-bold"},ta={class:"flex items-center justify-end space-x-10px h-48px"},la={class:"m-auto h-[calc(100%-60px)] w-[100%] flex items-center at-2xl:max-w-500px at-lg:max-w-500px at-md:max-w-500px at-xl:max-w-500px"},sa=Me(J({name:"SocialLogin",__name:"SocialLogin",setup(w){const{t:m}=fe(),r=Q(),N=X(),{getPrefixCls:z}=ue(),P=z("login"),G=F({icon:"ep:house"}),K=F({icon:"ep:avatar"}),O=F({icon:"ep:lock"}),L=h(),{validForm:Z}=Oe(L),{getLoginState:$}=ze(),{push:A}=ee(),W=ae(),v=h(!1),j=h(),Y=h("blockPuzzle"),B=te(()=>e($)===Ge.LOGIN),D={tenantName:[V],username:[V],password:[V]},l=le({isShowPassword:!1,captchaEnable:!1,tenantEnable:!0,loginForm:{tenantName:"\u828B\u9053\u6E90\u7801",username:"admin",password:"admin123",captchaVerification:"",rememberMe:!1}}),S=async()=>{l.captchaEnable?j.value.show():await E({})},U=h();function y(o){return new URL(decodeURIComponent(location.href)).searchParams.get(o)??""}const E=async o=>{var s,p;v.value=!0;try{if(await(async()=>{if(l.tenantEnable){const b=await Ue(l.loginForm.tenantName);Ee(b)}})(),!await Z())return;let i=y("redirect");const c=y("type"),x=(s=r==null?void 0:r.query)==null?void 0:s.code,g=(p=r==null?void 0:r.query)==null?void 0:p.state,f={...l.loginForm},_=await we({username:f.username,password:f.password,captchaVerification:o.captchaVerification,socialCode:x,socialState:g,socialType:c});if(!_)return;U.value=ye.service({lock:!0,text:"\u6B63\u5728\u52A0\u8F7D\u7CFB\u7EDF\u4E2D...",background:"rgba(0, 0, 0, 0.7)"}),f.rememberMe?_e(f):ve(),I(_),i||(i="/"),i.indexOf("sso")!==-1?window.location.href=window.location.href.replace("/login?redirect=",""):A({path:i||W.addRouters[0].path})}finally{v.value=!1,U.value.close()}};return se(()=>{(()=>{const o=xe();o&&(l.loginForm={...l.loginForm,username:o.username?o.username:l.loginForm.username,password:o.password?o.password:l.loginForm.password,rememberMe:!!o.rememberMe,tenantName:o.tenantName?o.tenantName:l.loginForm.tenantName})})(),(async()=>{var o,s;try{const p=y("type"),i=y("redirect"),c=(o=r==null?void 0:r.query)==null?void 0:o.code,x=(s=r==null?void 0:r.query)==null?void 0:s.state,g=await ge(p,c,x);I(g),he.push({path:i||"/"})}catch{}})()}),(o,s)=>{const p=be,i=Fe,c=Ve,x=ke,g=Ne,f=Pe,_=qe,b=Te,H=Le;return M(),oe("div",{class:T([e(P),"relative h-[100%] lt-md:px-10px lt-sm:px-10px lt-xl:px-10px lt-xl:px-10px"])},[n("div",Ze,[n("div",{class:T(`${e(P)}__left flex-1 bg-gray-500 bg-opacity-20 relative p-30px lt-xl:hidden overflow-x-hidden overflow-y-auto`)},[n("div",$e,[Ae,n("span",We,u(e(q)(e(N).getTitle)),1)]),n("div",Ye,[a(ne,{appear:"","enter-active-class":"animate__animated animate__bounceInLeft",tag:"div"},{default:t(()=>[Be,n("div",De,u(e(m)("login.welcome")),1),n("div",He,u(e(m)("login.message")),1)]),_:1})])],2),n("div",Je,[n("div",Qe,[n("div",Xe,[ea,n("span",aa,"11112"+u(e(q)(e(N).getTitle)),1)]),n("div",ta,[a(e(Ie)),a(e(Re),{class:"dark:text-white lt-xl:text-white"})])]),a(ce,{appear:"","enter-active-class":"animate__animated animate__bounceInRight"},{default:t(()=>[n("div",la,[ie(a(H,{ref_key:"formLogin",ref:L,model:e(l).loginForm,rules:D,class:"login-form","label-position":"top","label-width":"120px",size:"large"},{default:t(()=>[a(f,{style:{"margin-right":"-10px","margin-left":"-10px"}},{default:t(()=>[a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[a(p,null,{default:t(()=>[a(Ke,{style:{width:"100%"}})]),_:1})]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[e(l).tenantEnable?(M(),pe(p,{key:0,prop:"tenantName"},{default:t(()=>[a(c,{modelValue:e(l).loginForm.tenantName,"onUpdate:modelValue":s[0]||(s[0]=d=>e(l).loginForm.tenantName=d),placeholder:e(m)("login.tenantNamePlaceholder"),"prefix-icon":e(G),link:"",type:"primary"},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})):de("",!0)]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[a(p,{prop:"username"},{default:t(()=>[a(c,{modelValue:e(l).loginForm.username,"onUpdate:modelValue":s[1]||(s[1]=d=>e(l).loginForm.username=d),placeholder:e(m)("login.usernamePlaceholder"),"prefix-icon":e(K)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[a(p,{prop:"password"},{default:t(()=>[a(c,{modelValue:e(l).loginForm.password,"onUpdate:modelValue":s[2]||(s[2]=d=>e(l).loginForm.password=d),placeholder:e(m)("login.passwordPlaceholder"),"prefix-icon":e(O),"show-password":"",type:"password",onKeyup:s[3]||(s[3]=me(d=>S(),["enter"]))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px","margin-top":"-20px","margin-bottom":"-20px"}},{default:t(()=>[a(p,null,{default:t(()=>[a(f,{justify:"space-between",style:{width:"100%"}},{default:t(()=>[a(i,{span:6},{default:t(()=>[a(x,{modelValue:e(l).loginForm.rememberMe,"onUpdate:modelValue":s[4]||(s[4]=d=>e(l).loginForm.rememberMe=d)},{default:t(()=>[C(u(e(m)("login.remember")),1)]),_:1},8,["modelValue"])]),_:1}),a(i,{offset:6,span:12},{default:t(()=>[a(g,{style:{float:"right"},type:"primary"},{default:t(()=>[C(u(e(m)("login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:t(()=>[a(p,null,{default:t(()=>[a(_,{loading:e(v),title:e(m)("login.login"),class:"w-[100%]",type:"primary",onClick:s[5]||(s[5]=d=>S())},null,8,["loading","title"])]),_:1})]),_:1}),a(b,{ref_key:"verify",ref:j,captchaType:e(Y),imgSize:{width:"400px",height:"200px"},mode:"pop",onSuccess:E},null,8,["captchaType"])]),_:1})]),_:1},8,["model"]),[[re,e(B)]])])]),_:1})])])],2)}}}),[["__scopeId","data-v-34a4ff1d"]]);export{sa as default};
