import{d as T,r as u,ar as R,o,c as t,F as B,p as I,at as l,f as w,a5 as i,g as c,W as d,t as y,a as m,aD as b,q as S}from"./index-CIfmhqRC.js";import{E as P}from"./el-image-DLpquQe6.js";import{b as $}from"./spu-BTu6kAbO.js";import{e as U}from"./seckillActivity-C8ME84dn.js";const E={key:0,class:"absolute left-0 top-0 z-1 items-center justify-center"},L={class:"text-12px"},_={class:"absolute bottom-8px right-8px"},A=T({name:"PromotionSeckill",__name:"index",props:{property:{}},setup(g){const s=g,n=u([]),f=u([]),x=u([]);R(()=>s.property.activityIds,async()=>{try{const r=s.property.activityIds;Array.isArray(r)&&r.length>0&&(x.value=await U(r),n.value=[],f.value=x.value.map(p=>p.spuId).filter(p=>typeof p=="number"),f.value.length>0&&(n.value=await $(f.value)),x.value.forEach(p=>{const a=n.value.find(e=>e.id===p.spuId);a&&(a.price=Math.min(p.seckillPrice||1/0,a.price||1/0))}))}catch(r){console.error("\u83B7\u53D6\u79D2\u6740\u6D3B\u52A8\u7EC6\u8282\u6216 SPU \u7EC6\u8282\u65F6\u51FA\u9519:",r)}},{immediate:!0,deep:!0});const k=r=>{const p=s.property.layoutType==="twoCol"?2:1;return{marginLeft:r%p==0?"0":s.property.space+"px",marginTop:r<p?"0":s.property.space+"px"}},v=u(),C=()=>{let r="100%";return s.property.layoutType==="twoCol"&&(r=(v.value.offsetWidth-s.property.space)/2+"px"),{width:r}};return(r,p)=>{const a=P;return o(),t("div",{class:d("box-content min-h-30px w-full flex flex-row flex-wrap"),ref_key:"containerRef",ref:v},[(o(!0),t(B,null,I(m(n),(e,h)=>(o(),t("div",{class:"relative box-content flex flex-row flex-wrap overflow-hidden bg-white",style:l({...k(h),...C(),borderTopLeftRadius:`${r.property.borderRadiusTop}px`,borderTopRightRadius:`${r.property.borderRadiusTop}px`,borderBottomLeftRadius:`${r.property.borderRadiusBottom}px`,borderBottomRightRadius:`${r.property.borderRadiusBottom}px`}),key:h},[r.property.badge.show?(o(),t("div",E,[w(a,{fit:"cover",src:r.property.badge.imgUrl,class:"h-26px w-38px"},null,8,["src"])])):i("",!0),c("div",{class:d(["h-140px",{"w-full":r.property.layoutType!=="oneColSmallImg","w-140px":r.property.layoutType==="oneColSmallImg"}])},[w(a,{fit:"cover",class:"h-full w-full",src:e.picUrl},null,8,["src"])],2),c("div",{class:d([" flex flex-col gap-8px p-8px box-border",{"w-full":r.property.layoutType!=="oneColSmallImg","w-[calc(100%-140px-16px)]":r.property.layoutType==="oneColSmallImg"}])},[r.property.fields.name.show?(o(),t("div",{key:0,class:d(["text-14px ",{truncate:r.property.layoutType!=="oneColSmallImg","overflow-ellipsis line-clamp-2":r.property.layoutType==="oneColSmallImg"}]),style:l({color:r.property.fields.name.color})},y(e.name),7)):i("",!0),r.property.fields.introduction.show?(o(),t("div",{key:1,class:"truncate text-12px",style:l({color:r.property.fields.introduction.color})},y(e.introduction),5)):i("",!0),c("div",null,[r.property.fields.price.show?(o(),t("span",{key:0,class:"text-16px",style:l({color:r.property.fields.price.color})}," \uFFE5"+y(m(b)(e.price||1/0)),5)):i("",!0),r.property.fields.marketPrice.show&&e.marketPrice?(o(),t("span",{key:1,class:"ml-4px text-10px line-through",style:l({color:r.property.fields.marketPrice.color})},"\uFFE5"+y(m(b)(e.marketPrice)),5)):i("",!0)]),c("div",L,[r.property.fields.salesCount.show?(o(),t("span",{key:0,style:l({color:r.property.fields.salesCount.color})}," \u5DF2\u552E"+y((e.salesCount||0)+(e.virtualSalesCount||0))+"\u4EF6 ",5)):i("",!0),r.property.fields.stock.show?(o(),t("span",{key:1,style:l({color:r.property.fields.stock.color})}," \u5E93\u5B58"+y(e.stock||0),5)):i("",!0)])],2),c("div",_,[r.property.btnBuy.type==="text"?(o(),t("span",{key:0,class:"rounded-full p-x-12px p-y-4px text-12px text-white",style:l({background:`linear-gradient(to right, ${r.property.btnBuy.bgBeginColor}, ${r.property.btnBuy.bgEndColor}`})},y(r.property.btnBuy.text),5)):(o(),S(a,{key:1,class:"h-28px w-28px rounded-full",fit:"cover",src:r.property.btnBuy.imgUrl},null,8,["src"]))])],4))),128))],512)}}});export{A as default};
