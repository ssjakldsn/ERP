import{d as A,z as B,e8 as C,a3 as E,r as h,e as G,o as c,c as g,f as e,w as u,a,q as H,g as n,x as v,k as S,H as T,j as W,I as D,br as F,E as J,cG as K,U as L}from"./index-CIfmhqRC.js";import{W as N}from"./main-CfsIYUE7.js";import{u as O,U as P}from"./useUpload-Dugldi2L.js";const Q=["src"],R={class:"thumb-but"},X=n("div",{style:{margin:"20px 0"}},null,-1),Y=n("div",{style:{margin:"20px 0"}},null,-1),Z=n("div",{style:{margin:"20px 0"}},null,-1),$=A({__name:"TabMusic",props:{modelValue:{}},emits:["update:modelValue"],setup(U,{emit:_}){const b=B(),x={Authorization:"Bearer "+C()},M=U,j=_,l=E({get:()=>M.modelValue,set:d=>j("update:modelValue",d)}),o=h(!1),f=h([]),m=G({accountId:l.value.accountId,type:"thumb",title:"",introduction:""}),I=d=>O(P.Image,2)(d),k=d=>{if(d.code!==0)return b.error("\u4E0A\u4F20\u51FA\u9519\uFF1A"+d.msg),!1;f.value=[],m.title="",m.introduction="",y(d.data)},y=d=>{o.value=!1,l.value.thumbMediaId=d.mediaId,l.value.thumbMediaUrl=d.url};return(d,t)=>{const q=T,s=W,V=D,w=F,p=J,z=K,r=L;return c(),g("div",null,[e(s,{align:"middle",justify:"center"},{default:u(()=>[e(p,{span:6},{default:u(()=>[e(s,{align:"middle",justify:"center",class:"thumb-div"},{default:u(()=>[e(p,{span:24},{default:u(()=>[e(s,{align:"middle",justify:"center"},{default:u(()=>[a(l).thumbMediaUrl?(c(),g("img",{key:0,style:{width:"100px"},src:a(l).thumbMediaUrl},null,8,Q)):(c(),H(q,{key:1,icon:"ep:plus"}))]),_:1}),e(s,{align:"middle",justify:"center",style:{"margin-top":"2%"}},{default:u(()=>[n("div",R,[e(w,{action:"https://erpapi.vqmjc.cc/admin-api/mp/material/upload-temporary",headers:x,multiple:"",limit:1,"file-list":a(f),data:a(m),"before-upload":I,"on-success":k},{trigger:u(()=>[e(V,{type:"primary",link:""},{default:u(()=>[v("\u672C\u5730\u4E0A\u4F20")]),_:1})]),default:u(()=>[e(V,{type:"primary",link:"",onClick:t[0]||(t[0]=i=>o.value=!0),style:{"margin-left":"5px"}},{default:u(()=>[v("\u7D20\u6750\u5E93\u9009\u62E9 ")]),_:1})]),_:1},8,["file-list","data"])])]),_:1})]),_:1})]),_:1}),e(z,{title:"\u9009\u62E9\u56FE\u7247",modelValue:a(o),"onUpdate:modelValue":t[1]||(t[1]=i=>S(o)?o.value=i:null),width:"80%","append-to-body":"","destroy-on-close":""},{default:u(()=>[e(a(N),{type:"image","account-id":a(l).accountId,onSelectMaterial:y},null,8,["account-id"])]),_:1},8,["modelValue"])]),_:1}),e(p,{span:18},{default:u(()=>[e(r,{modelValue:a(l).title,"onUpdate:modelValue":t[2]||(t[2]=i=>a(l).title=i),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["modelValue"]),X,e(r,{modelValue:a(l).description,"onUpdate:modelValue":t[3]||(t[3]=i=>a(l).description=i),placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0"},null,8,["modelValue"])]),_:1})]),_:1}),Y,e(r,{modelValue:a(l).musicUrl,"onUpdate:modelValue":t[4]||(t[4]=i=>a(l).musicUrl=i),placeholder:"\u8BF7\u8F93\u5165\u97F3\u4E50\u94FE\u63A5"},null,8,["modelValue"]),Z,e(r,{modelValue:a(l).hqMusicUrl,"onUpdate:modelValue":t[5]||(t[5]=i=>a(l).hqMusicUrl=i),placeholder:"\u8BF7\u8F93\u5165\u9AD8\u8D28\u91CF\u97F3\u4E50\u94FE\u63A5"},null,8,["modelValue"])])}}});export{$ as _};
