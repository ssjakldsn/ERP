import{d as E,u as T,N as z,r as s,n as J,y as M,a,o as N,q as S,w as l,f as e,k as j,x as p,h as A,z as B,l as D,m as F,I as G,C as U,J as H,M as K}from"./index-CIfmhqRC.js";import{_ as L}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{u as O}from"./tagsView-CqxiFcdS.js";import{_ as P}from"./BasicInfoForm.vue_vue_type_script_setup_true_lang-EgcWU8zl.js";import{_ as Q}from"./ColumInfoForm.vue_vue_type_script_setup_true_lang-BZUwYzPc.js";import{_ as W}from"./GenerateInfoForm.vue_vue_type_script_setup_true_lang-C-Zf2P3V.js";import{g as X,u as Y}from"./index-Cd9gjVFL.js";import"./el-card-DyMugU68.js";import"./formRules-C3y0LKNH.js";import"./dict.type-BZ12AT8E.js";import"./el-dropdown-item-CvgBZuG7.js";import"./el-tree-select-CYFGeiEt.js";import"./tree-BMqZf9_I.js";import"./index-DC6o_CWG.js";const Z=E({name:"InfraCodegenEditTable",__name:"EditTable",setup($){const{t:_}=A(),b=B(),{push:y,currentRoute:g}=T(),{query:v}=z(),{delView:w}=O(),n=s(!1),r=s("colum"),f=s(),I=s(),i=s(),t=s({table:{},columns:[]}),k=async()=>{var o,u;if(a(t)){await((o=a(f))==null?void 0:o.validate()),await((u=a(i))==null?void 0:u.validate());try{await Y(t.value),b.success(_("common.updateSuccess")),c()}catch{}}},c=()=>{w(a(g)),y("/infra/codegen")};return J(()=>{(async()=>{const o=v.id;if(o){n.value=!0;try{t.value=await X(o)}finally{n.value=!1}}})()}),(o,u)=>{const m=D,h=F,d=G,R=U,C=H,V=L,q=K;return M((N(),S(V,null,{default:l(()=>[e(h,{modelValue:a(r),"onUpdate:modelValue":u[0]||(u[0]=x=>j(r)?r.value=x:null)},{default:l(()=>[e(m,{label:"\u57FA\u672C\u4FE1\u606F",name:"basicInfo"},{default:l(()=>[e(a(P),{ref_key:"basicInfoRef",ref:f,table:a(t).table},null,8,["table"])]),_:1}),e(m,{label:"\u5B57\u6BB5\u4FE1\u606F",name:"colum"},{default:l(()=>[e(a(Q),{ref_key:"columInfoRef",ref:I,columns:a(t).columns},null,8,["columns"])]),_:1}),e(m,{label:"\u751F\u6210\u4FE1\u606F",name:"generateInfo"},{default:l(()=>[e(a(W),{ref_key:"generateInfoRef",ref:i,table:a(t).table,columns:a(t).columns},null,8,["table","columns"])]),_:1})]),_:1},8,["modelValue"]),e(C,null,{default:l(()=>[e(R,{style:{float:"right"}},{default:l(()=>[e(d,{loading:a(n),type:"primary",onClick:k},{default:l(()=>[p("\u4FDD\u5B58")]),_:1},8,["loading"]),e(d,{onClick:c},{default:l(()=>[p("\u8FD4\u56DE")]),_:1})]),_:1})]),_:1})]),_:1})),[[q,a(n)]])}}});export{Z as default};
