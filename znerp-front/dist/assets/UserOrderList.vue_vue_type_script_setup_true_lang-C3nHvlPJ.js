import{d as G,u as J,r as v,e as Q,n as X,o as t,c as i,f as u,w as o,a as l,F as n,p as y,q as r,Q as _,D as f,dS as W,a5 as g,P as Z,y as Y,x,A as $,B as ee,C as le,G as ae,U as ue,H as de,I as oe,J as te,L as pe,M as re,a4 as se}from"./index-CIfmhqRC.js";import{_ as ie}from"./index.vue_vue_type_script_setup_true_lang-DYHi04Tm.js";import{_ as ne}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{e as me}from"./index-DDOznnSc.js";import{a as ce}from"./index-D2ap44TW.js";import{g as ve}from"./index-CqFYyUKb.js";import ye from"./OrderTableColumn-BcRGE2Wi.js";import{D as I}from"./constants-A8BI3pz7.js";const fe=G({__name:"UserOrderList",props:{userId:{}},setup(O){const{push:L}=J(),{userId:P}=O,V=v(!0),E=v(0),k=v([]),U=v([]),D=v([]),R=v(),a=v({pageNo:1,pageSize:10,userId:P,status:void 0,payChannelCode:void 0,createTime:void 0,terminal:void 0,type:void 0,deliveryType:void 0,logisticsId:void 0,pickUpStoreId:void 0,pickUpVerifyCode:void 0}),b=Q({queryParam:""}),S=v([{value:"no",label:"\u8BA2\u5355\u53F7"},{value:"userNickname",label:"\u7528\u6237\u6635\u79F0"},{value:"userMobile",label:"\u7528\u6237\u7535\u8BDD"}]),M=m=>{var d;(d=S.value.filter(p=>p.value!==m))==null||d.forEach(p=>{a.value.hasOwnProperty(p.value)&&delete a.value[p.value]})},h=async()=>{a.value.pageNo=1,await w()},H=()=>{var m;(m=R.value)==null||m.resetFields(),a.value.userId=P,h()},w=async()=>{V.value=!0;try{const m=await me(a.value);k.value=m.list,E.value=m.total}finally{V.value=!1}};return X(async()=>{await w(),U.value=await ce(),D.value=await ve()}),(m,d)=>{const p=$,c=ee,s=le,z=ae,A=ue,C=de,T=oe,F=te,q=ne,K=pe,j=ie,B=re;return t(),i(n,null,[u(q,null,{default:o(()=>[u(F,{ref_key:"queryFormRef",ref:R,inline:!0,model:l(a),class:"-mb-15px","label-width":"68px"},{default:o(()=>[u(s,{label:"\u8BA2\u5355\u72B6\u6001",prop:"status"},{default:o(()=>[u(c,{modelValue:l(a).status,"onUpdate:modelValue":d[0]||(d[0]=e=>l(a).status=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:o(()=>[(t(!0),i(n,null,y(l(_)(l(f).TRADE_ORDER_STATUS),e=>(t(),r(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(s,{label:"\u652F\u4ED8\u65B9\u5F0F",prop:"payChannelCode"},{default:o(()=>[u(c,{modelValue:l(a).payChannelCode,"onUpdate:modelValue":d[1]||(d[1]=e=>l(a).payChannelCode=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:o(()=>[(t(!0),i(n,null,y(l(W)(l(f).PAY_CHANNEL_CODE),e=>(t(),r(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(s,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:o(()=>[u(z,{modelValue:l(a).createTime,"onUpdate:modelValue":d[2]||(d[2]=e=>l(a).createTime=e),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-280px","end-placeholder":"\u81EA\u5B9A\u4E49\u65F6\u95F4","start-placeholder":"\u81EA\u5B9A\u4E49\u65F6\u95F4",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),u(s,{label:"\u8BA2\u5355\u6765\u6E90",prop:"terminal"},{default:o(()=>[u(c,{modelValue:l(a).terminal,"onUpdate:modelValue":d[3]||(d[3]=e=>l(a).terminal=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:o(()=>[(t(!0),i(n,null,y(l(_)(l(f).TERMINAL),e=>(t(),r(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(s,{label:"\u8BA2\u5355\u7C7B\u578B",prop:"type"},{default:o(()=>[u(c,{modelValue:l(a).type,"onUpdate:modelValue":d[4]||(d[4]=e=>l(a).type=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:o(()=>[(t(!0),i(n,null,y(l(_)(l(f).TRADE_ORDER_TYPE),e=>(t(),r(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(s,{label:"\u914D\u9001\u65B9\u5F0F",prop:"deliveryType"},{default:o(()=>[u(c,{modelValue:l(a).deliveryType,"onUpdate:modelValue":d[5]||(d[5]=e=>l(a).deliveryType=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:o(()=>[(t(!0),i(n,null,y(l(_)(l(f).TRADE_DELIVERY_TYPE),e=>(t(),r(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(a).deliveryType===l(I).EXPRESS.type?(t(),r(s,{key:0,label:"\u5FEB\u9012\u516C\u53F8",prop:"logisticsId"},{default:o(()=>[u(c,{modelValue:l(a).logisticsId,"onUpdate:modelValue":d[6]||(d[6]=e=>l(a).logisticsId=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:o(()=>[(t(!0),i(n,null,y(l(D),e=>(t(),r(p,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):g("",!0),l(a).deliveryType===l(I).PICK_UP.type?(t(),r(s,{key:1,label:"\u81EA\u63D0\u95E8\u5E97",prop:"pickUpStoreId"},{default:o(()=>[u(c,{modelValue:l(a).pickUpStoreId,"onUpdate:modelValue":d[7]||(d[7]=e=>l(a).pickUpStoreId=e),class:"!w-280px",clearable:"",multiple:"",placeholder:"\u5168\u90E8"},{default:o(()=>[(t(!0),i(n,null,y(l(U),e=>(t(),r(p,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):g("",!0),l(a).deliveryType===l(I).PICK_UP.type?(t(),r(s,{key:2,label:"\u6838\u9500\u7801",prop:"pickUpVerifyCode"},{default:o(()=>[u(A,{modelValue:l(a).pickUpVerifyCode,"onUpdate:modelValue":d[8]||(d[8]=e=>l(a).pickUpVerifyCode=e),class:"!w-280px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u81EA\u63D0\u6838\u9500\u7801",onKeyup:Z(h,["enter"])},null,8,["modelValue"])]),_:1})):g("",!0),u(s,{label:"\u805A\u5408\u641C\u7D22"},{default:o(()=>[Y(u(A,{modelValue:l(a)[l(b).queryParam],"onUpdate:modelValue":d[10]||(d[10]=e=>l(a)[l(b).queryParam]=e),class:"!w-280px",clearable:"",placeholder:"\u8BF7\u8F93\u5165"},{prepend:o(()=>[u(c,{modelValue:l(b).queryParam,"onUpdate:modelValue":d[9]||(d[9]=e=>l(b).queryParam=e),class:"!w-110px",clearable:"",placeholder:"\u5168\u90E8",onChange:M},{default:o(()=>[(t(!0),i(n,null,y(l(S),e=>(t(),r(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),[[se,!0]])]),_:1}),u(s,null,{default:o(()=>[u(T,{onClick:h},{default:o(()=>[u(C,{class:"mr-5px",icon:"ep:search"}),x(" \u641C\u7D22 ")]),_:1}),u(T,{onClick:H},{default:o(()=>[u(C,{class:"mr-5px",icon:"ep:refresh"}),x(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u(q,null,{default:o(()=>[Y((t(),r(K,{data:l(k),"row-key":"id"},{default:o(()=>[u(l(ye),{list:l(k),"pick-up-store-list":l(U)},{default:o(({row:e})=>[u(T,{link:"",type:"primary",onClick:be=>{return N=e.id,void L({name:"TradeOrderDetail",params:{id:N}});var N}},{default:o(()=>[u(C,{icon:"ep:notification"}),x(" \u8BE6\u60C5 ")]),_:2},1032,["onClick"])]),_:1},8,["list","pick-up-store-list"])]),_:1},8,["data"])),[[B,l(V)]]),u(j,{limit:l(a).pageSize,"onUpdate:limit":d[11]||(d[11]=e=>l(a).pageSize=e),page:l(a).pageNo,"onUpdate:page":d[12]||(d[12]=e=>l(a).pageNo=e),total:l(E),onPagination:w},null,8,["limit","page","total"])]),_:1})],64)}}});export{fe as _};
