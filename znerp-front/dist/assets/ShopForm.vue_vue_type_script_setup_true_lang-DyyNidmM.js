import{d as z,h as j,z as D,r as d,e as I,o as k,q as _,w as t,f as u,a,x as b,y as J,k as M,U as R,C as Z,ce as A,J as B,I as E,M as G}from"./index-CIfmhqRC.js";import{_ as H}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{Z as g}from"./index-H3f_2XHj.js";const K=z({name:"ShopForm",__name:"ShopForm",emits:["success"],setup(L,{expose:y,emit:U}){const{t:c}=j(),f=D(),n=d(!1),v=d(""),m=d(!1),V=d(""),l=d({id:void 0,name:"",enName:"",username:"",token:"",phone:"",status:!0}),x=I({name:[{required:!0,message:"\u5E97\u94FA\u540D\u79F0",trigger:"blur"}],token:[{required:!0,message:"\u6388\u6743token\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],username:[{required:!0,message:"\u5E97\u957F\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],phone:[{required:!0,message:"\u8054\u7CFB\u7535\u8BDD\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),i=d(),N=()=>{var s;l.value={id:void 0,name:"",enName:"",username:"",token:"",phone:"",status:!0},(s=i.value)==null||s.resetFields()};y({open:async(s,e)=>{if(n.value=!0,v.value=c("action."+s),V.value=s,N(),e){m.value=!0;try{l.value={id:e.id,name:e.name,enName:e.enName,token:e.token,username:e.username,phone:e.phone,status:e.status==1},console.log("form123",l.value)}finally{m.value=!1}}}});const q=U,w=async()=>{if(i&&await i.value.validate()){m.value=!0;try{let s={...l.value,status:l.value.status?1:0};V.value==="create"?(await g.shopCreate(s),f.success(c("common.createSuccess"))):(await g.shopUpdate(s),f.success(c("common.updateSuccess"))),n.value=!1,q("success")}finally{m.value=!1}}};return(s,e)=>{const p=R,r=Z,C=A,S=B,h=E,F=H,T=G;return k(),_(F,{modelValue:a(n),"onUpdate:modelValue":e[7]||(e[7]=o=>M(n)?n.value=o:null),title:a(v)},{footer:t(()=>[u(h,{disabled:a(m),type:"primary",onClick:w},{default:t(()=>[b("\u786E \u5B9A")]),_:1},8,["disabled"]),u(h,{onClick:e[6]||(e[6]=o=>n.value=!1)},{default:t(()=>[b("\u53D6 \u6D88")]),_:1})]),default:t(()=>[J((k(),_(S,{ref_key:"formRef",ref:i,model:a(l),rules:a(x),"label-width":"120px"},{default:t(()=>[u(r,{label:"\u5E97\u94FA\u4E2D\u6587\u540D",prop:"name"},{default:t(()=>[u(p,{modelValue:a(l).name,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).name=o),placeholder:"\u8BF7\u8F93\u5165\u5E97\u94FA\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u5E97\u94FA\u82F1\u6587\u540D",prop:"enName"},{default:t(()=>[u(p,{modelValue:a(l).enName,"onUpdate:modelValue":e[1]||(e[1]=o=>a(l).enName=o),placeholder:"\u8BF7\u8F93\u5165\u5E97\u94FA\u82F1\u6587\u540D"},null,8,["modelValue"])]),_:1}),u(r,{label:"Token",prop:"token"},{default:t(()=>[u(p,{modelValue:a(l).token,"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).token=o),placeholder:"\u8BF7\u8F93\u5165Token"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u5E97\u957F\u59D3\u540D",prop:"username"},{default:t(()=>[u(p,{modelValue:a(l).username,"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).username=o),placeholder:"\u8BF7\u8F93\u5165\u5E97\u957F\u59D3\u540D"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"phone"},{default:t(()=>[u(p,{modelValue:a(l).phone,"onUpdate:modelValue":e[4]||(e[4]=o=>a(l).phone=o),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u72B6\u6001"},{default:t(()=>[u(C,{modelValue:a(l).status,"onUpdate:modelValue":e[5]||(e[5]=o=>a(l).status=o),"inline-prompt":"","active-text":"\u542F\u7528","inactive-text":"\u7981\u7528"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[T,a(m)]])]),_:1},8,["modelValue","title"])}}});export{K as _};
