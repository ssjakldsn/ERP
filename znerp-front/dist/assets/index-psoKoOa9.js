import{d as D,z as H,h as J,r as n,e as j,n as B,O as E,o as u,c as G,f as e,w as l,a as t,P as C,x as c,y as g,q as y,D as K,g as Q,t as W,F as X,U as Y,C as Z,H as $,I as ee,J as ae,K as le,L as te,M as oe}from"./index-CIfmhqRC.js";import{_ as pe}from"./index.vue_vue_type_script_setup_true_lang-DYHi04Tm.js";import{_ as re}from"./DictTag.vue_vue_type_script_lang-CTpVFm77.js";import{_ as ne}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{C as N}from"./index-DvHknbTX.js";import{_ as ie}from"./ChatModelForm.vue_vue_type_script_setup_true_lang-Cg2Rm23F.js";import{A as se}from"./index-Bb8IOC82.js";import"./index-CrBeVHKs.js";import"./color-BN7ZL7BD.js";import"./el-card-DyMugU68.js";import"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import"./constants-A8BI3pz7.js";const me=D({name:"AiChatModel",__name:"index",setup(de){const x=H(),{t:T}=J(),w=n(!0),V=n([]),S=n(0),p=j({pageNo:1,pageSize:10,name:void 0,model:void 0,platform:void 0}),A=n(),U=n([]),i=async()=>{w.value=!0;try{const m=await N.getChatModelPage(p);V.value=m.list,S.value=m.total}finally{w.value=!1}},s=()=>{p.pageNo=1,i()},z=()=>{A.value.resetFields(),s()},I=n(),M=(m,o)=>{I.value.open(m,o)};return B(async()=>{i(),U.value=await se.getApiKeySimpleList()}),(m,o)=>{const b=Y,f=Z,h=$,d=ee,O=ae,P=ne,F=re,r=le,L=te,R=pe,k=E("hasPermi"),q=oe;return u(),G(X,null,[e(P,null,{default:l(()=>[e(O,{class:"-mb-15px",model:t(p),ref_key:"queryFormRef",ref:A,inline:!0,"label-width":"68px"},{default:l(()=>[e(f,{label:"\u6A21\u578B\u540D\u5B57",prop:"name"},{default:l(()=>[e(b,{modelValue:t(p).name,"onUpdate:modelValue":o[0]||(o[0]=a=>t(p).name=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u540D\u5B57",clearable:"",onKeyup:C(s,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(f,{label:"\u6A21\u578B\u6807\u8BC6",prop:"model"},{default:l(()=>[e(b,{modelValue:t(p).model,"onUpdate:modelValue":o[1]||(o[1]=a=>t(p).model=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u6807\u8BC6",clearable:"",onKeyup:C(s,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(f,{label:"\u6A21\u578B\u5E73\u53F0",prop:"platform"},{default:l(()=>[e(b,{modelValue:t(p).platform,"onUpdate:modelValue":o[2]||(o[2]=a=>t(p).platform=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u5E73\u53F0",clearable:"",onKeyup:C(s,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(f,null,{default:l(()=>[e(d,{onClick:s},{default:l(()=>[e(h,{icon:"ep:search",class:"mr-5px"}),c(" \u641C\u7D22")]),_:1}),e(d,{onClick:z},{default:l(()=>[e(h,{icon:"ep:refresh",class:"mr-5px"}),c(" \u91CD\u7F6E")]),_:1}),g((u(),y(d,{type:"primary",plain:"",onClick:o[3]||(o[3]=a=>M("create"))},{default:l(()=>[e(h,{icon:"ep:plus",class:"mr-5px"}),c(" \u65B0\u589E ")]),_:1})),[[k,["ai:chat-model:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(P,null,{default:l(()=>[g((u(),y(L,{data:t(V),stripe:!0,"show-overflow-tooltip":!0},{default:l(()=>[e(r,{label:"\u6240\u5C5E\u5E73\u53F0",align:"center",prop:"platform"},{default:l(a=>[e(F,{type:t(K).AI_PLATFORM,value:a.row.platform},null,8,["type","value"])]),_:1}),e(r,{label:"\u6A21\u578B\u540D\u5B57",align:"center",prop:"name"}),e(r,{label:"\u6A21\u578B\u6807\u8BC6",align:"center",prop:"model"}),e(r,{label:"API \u79D8\u94A5",align:"center",prop:"keyId","min-width":"140"},{default:l(a=>{var _;return[Q("span",null,W((_=t(U).find(v=>v.id===a.row.keyId))==null?void 0:_.name),1)]}),_:1}),e(r,{label:"\u6392\u5E8F",align:"center",prop:"sort"}),e(r,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:l(a=>[e(F,{type:t(K).COMMON_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(r,{label:"\u6E29\u5EA6\u53C2\u6570",align:"center",prop:"temperature"}),e(r,{label:"\u56DE\u590D\u6570 Token \u6570",align:"center",prop:"maxTokens","min-width":"140"}),e(r,{label:"\u4E0A\u4E0B\u6587\u6570\u91CF",align:"center",prop:"maxContexts"}),e(r,{label:"\u64CD\u4F5C",align:"center"},{default:l(a=>[g((u(),y(d,{link:"",type:"primary",onClick:_=>M("update",a.row.id)},{default:l(()=>[c(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[k,["ai:chat-model:update"]]]),g((u(),y(d,{link:"",type:"danger",onClick:_=>(async v=>{try{await x.delConfirm(),await N.deleteChatModel(v),x.success(T("common.delSuccess")),await i()}catch{}})(a.row.id)},{default:l(()=>[c(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[k,["ai:chat-model:delete"]]])]),_:1})]),_:1},8,["data"])),[[q,t(w)]]),e(R,{total:t(S),page:t(p).pageNo,"onUpdate:page":o[4]||(o[4]=a=>t(p).pageNo=a),limit:t(p).pageSize,"onUpdate:limit":o[5]||(o[5]=a=>t(p).pageSize=a),onPagination:i},null,8,["total","page","limit"])]),_:1}),e(ie,{ref_key:"formRef",ref:I,onSuccess:i},null,512)],64)}}});export{me as default};
