import{d as z,h as Q,z as Y,r as m,e as j,o as u,q as s,w as o,f as d,a as e,x as b,y as G,c as v,F as h,p as _,a5 as c,Q as K,D as N,t as W,k as X,g as V,dA as Z,U as $,aL as ee,C as ae,A as le,B as te,cl as oe,ak as de,al as ue,J as se,I as re,M as ie}from"./index-CIfmhqRC.js";import{_ as me}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{g as ne,c as pe,u as ce}from"./index-DX2fvTi7.js";import{a as fe}from"./index-X3qw9mzS.js";import{C as ye}from"./index-YiSRvDzN.js";const ge=V("i",{class:"el-icon-question",style:{"padding-left":"5px"}},null,-1),ve=V("i",{class:"el-icon-question",style:{"padding-left":"5px"}},null,-1),Ve={key:2},be=V("i",{class:"el-icon-question",style:{"padding-left":"5px"}},null,-1),he=V("i",{class:"el-icon-question",style:{"padding-left":"5px"}},null,-1),_e=z({name:"ModelForm",__name:"ModelForm",emits:["success"],setup(we,{expose:M,emit:F}){const{t:w}=Q(),I=Y(),n=m(!1),k=m(""),p=m(!1),C=m(""),l=m({formType:10,name:"",category:void 0,icon:void 0,description:"",formId:"",formCustomCreatePath:"",formCustomViewPath:""}),L=j({name:[{required:!0,message:"\u53C2\u6570\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],key:[{required:!0,message:"\u53C2\u6570\u952E\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],category:[{required:!0,message:"\u53C2\u6570\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],icon:[{required:!0,message:"\u53C2\u6570\u56FE\u6807\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],value:[{required:!0,message:"\u53C2\u6570\u952E\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],visible:[{required:!0,message:"\u662F\u5426\u53EF\u89C1\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),y=m(),x=m([]),P=m([]);M({open:async(r,t)=>{if(n.value=!0,k.value=w("action."+r),C.value=r,B(),t){p.value=!0;try{l.value=await ne(t)}finally{p.value=!1}}x.value=await fe(),P.value=await ye.getCategorySimpleList()}});const S=F,A=async()=>{if(y&&await y.value.validate()){p.value=!0;try{const r=l.value;C.value==="create"?(await pe(r),await Z.alert("<strong>\u65B0\u5EFA\u6A21\u578B\u6210\u529F\uFF01</strong>\u540E\u7EED\u9700\u8981\u6267\u884C\u5982\u4E0B 3 \u4E2A\u6B65\u9AA4\uFF1A<div>1. \u70B9\u51FB\u3010\u4FEE\u6539\u6D41\u7A0B\u3011\u6309\u94AE\uFF0C\u914D\u7F6E\u6D41\u7A0B\u7684\u5206\u7C7B\u3001\u8868\u5355\u4FE1\u606F</div><div>2. \u70B9\u51FB\u3010\u8BBE\u8BA1\u6D41\u7A0B\u3011\u6309\u94AE\uFF0C\u7ED8\u5236\u6D41\u7A0B\u56FE</div><div>3. \u70B9\u51FB\u3010\u53D1\u5E03\u6D41\u7A0B\u3011\u6309\u94AE\uFF0C\u5B8C\u6210\u6D41\u7A0B\u7684\u6700\u7EC8\u53D1\u5E03</div>\u53E6\u5916\uFF0C\u6BCF\u6B21\u6D41\u7A0B\u4FEE\u6539\u540E\uFF0C\u90FD\u9700\u8981\u70B9\u51FB\u3010\u53D1\u5E03\u6D41\u7A0B\u3011\u6309\u94AE\uFF0C\u624D\u80FD\u6B63\u5F0F\u751F\u6548\uFF01\uFF01\uFF01","\u91CD\u8981\u63D0\u793A",{dangerouslyUseHTMLString:!0,type:"success"})):(await ce(r),I.success(w("common.updateSuccess"))),n.value=!1,S("success")}finally{p.value=!1}}},B=()=>{var r;l.value={formType:10,name:"",category:void 0,icon:"",description:"",formId:"",formCustomCreatePath:"",formCustomViewPath:""},(r=y.value)==null||r.resetFields()};return(r,t)=>{const f=$,g=ee,i=ae,U=le,q=te,D=oe,E=de,H=ue,J=se,T=re,O=me,R=ie;return u(),s(O,{modelValue:e(n),"onUpdate:modelValue":t[10]||(t[10]=a=>X(n)?n.value=a:null),title:e(k),width:"600"},{footer:o(()=>[d(T,{disabled:e(p),type:"primary",onClick:A},{default:o(()=>[b("\u786E \u5B9A")]),_:1},8,["disabled"]),d(T,{onClick:t[9]||(t[9]=a=>n.value=!1)},{default:o(()=>[b("\u53D6 \u6D88")]),_:1})]),default:o(()=>[G((u(),s(J,{ref_key:"formRef",ref:y,model:e(l),rules:e(L),"label-width":"110px"},{default:o(()=>[d(i,{label:"\u6D41\u7A0B\u6807\u8BC6",prop:"key"},{default:o(()=>[d(f,{modelValue:e(l).key,"onUpdate:modelValue":t[0]||(t[0]=a=>e(l).key=a),disabled:!!e(l).id,placeholder:"\u8BF7\u8F93\u5165\u6D41\u6807\u6807\u8BC6",style:{width:"330px"}},null,8,["modelValue","disabled"]),e(l).id?(u(),s(g,{key:1,class:"item",content:"\u6D41\u7A0B\u6807\u8BC6\u4E0D\u53EF\u4FEE\u6539\uFF01",effect:"light",placement:"top"},{default:o(()=>[ve]),_:1})):(u(),s(g,{key:0,class:"item",content:"\u65B0\u5EFA\u540E\uFF0C\u6D41\u7A0B\u6807\u8BC6\u4E0D\u53EF\u4FEE\u6539\uFF01",effect:"light",placement:"top"},{default:o(()=>[ge]),_:1}))]),_:1}),d(i,{label:"\u6D41\u7A0B\u540D\u79F0",prop:"name"},{default:o(()=>[d(f,{modelValue:e(l).name,"onUpdate:modelValue":t[1]||(t[1]=a=>e(l).name=a),disabled:!!e(l).id,clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0"},null,8,["modelValue","disabled"])]),_:1}),e(l).id?(u(),s(i,{key:0,label:"\u6D41\u7A0B\u5206\u7C7B",prop:"category"},{default:o(()=>[d(q,{modelValue:e(l).category,"onUpdate:modelValue":t[2]||(t[2]=a=>e(l).category=a),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u5206\u7C7B",style:{width:"100%"}},{default:o(()=>[(u(!0),v(h,null,_(e(P),a=>(u(),s(U,{key:a.code,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):c("",!0),e(l).id?(u(),s(i,{key:1,label:"\u6D41\u7A0B\u56FE\u6807",prop:"icon"},{default:o(()=>[d(D,{modelValue:e(l).icon,"onUpdate:modelValue":t[3]||(t[3]=a=>e(l).icon=a),limit:1,height:"128px",width:"128px"},null,8,["modelValue"])]),_:1})):c("",!0),d(i,{label:"\u6D41\u7A0B\u63CF\u8FF0",prop:"description"},{default:o(()=>[d(f,{modelValue:e(l).description,"onUpdate:modelValue":t[4]||(t[4]=a=>e(l).description=a),clearable:"",type:"textarea"},null,8,["modelValue"])]),_:1}),e(l).id?(u(),v("div",Ve,[d(i,{label:"\u8868\u5355\u7C7B\u578B",prop:"formType"},{default:o(()=>[d(H,{modelValue:e(l).formType,"onUpdate:modelValue":t[5]||(t[5]=a=>e(l).formType=a)},{default:o(()=>[(u(!0),v(h,null,_(e(K)(e(N).BPM_MODEL_FORM_TYPE),a=>(u(),s(E,{key:a.value,value:a.value},{default:o(()=>[b(W(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(l).formType===10?(u(),s(i,{key:0,label:"\u6D41\u7A0B\u8868\u5355",prop:"formId"},{default:o(()=>[d(q,{modelValue:e(l).formId,"onUpdate:modelValue":t[6]||(t[6]=a=>e(l).formId=a),clearable:"",style:{width:"100%"}},{default:o(()=>[(u(!0),v(h,null,_(e(x),a=>(u(),s(U,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):c("",!0),e(l).formType===20?(u(),s(i,{key:1,label:"\u8868\u5355\u63D0\u4EA4\u8DEF\u7531",prop:"formCustomCreatePath"},{default:o(()=>[d(f,{modelValue:e(l).formCustomCreatePath,"onUpdate:modelValue":t[7]||(t[7]=a=>e(l).formCustomCreatePath=a),placeholder:"\u8BF7\u8F93\u5165\u8868\u5355\u63D0\u4EA4\u8DEF\u7531",style:{width:"330px"}},null,8,["modelValue"]),d(g,{class:"item",content:"\u81EA\u5B9A\u4E49\u8868\u5355\u7684\u63D0\u4EA4\u8DEF\u5F84\uFF0C\u4F7F\u7528 Vue \u7684\u8DEF\u7531\u5730\u5740\uFF0C\u4F8B\u5982\u8BF4\uFF1Abpm/oa/leave/create",effect:"light",placement:"top"},{default:o(()=>[be]),_:1})]),_:1})):c("",!0),e(l).formType===20?(u(),s(i,{key:2,label:"\u8868\u5355\u67E5\u770B\u5730\u5740",prop:"formCustomViewPath"},{default:o(()=>[d(f,{modelValue:e(l).formCustomViewPath,"onUpdate:modelValue":t[8]||(t[8]=a=>e(l).formCustomViewPath=a),placeholder:"\u8BF7\u8F93\u5165\u8868\u5355\u67E5\u770B\u7684\u7EC4\u4EF6\u5730\u5740",style:{width:"330px"}},null,8,["modelValue"]),d(g,{class:"item",content:"\u81EA\u5B9A\u4E49\u8868\u5355\u7684\u67E5\u770B\u7EC4\u4EF6\u5730\u5740\uFF0C\u4F7F\u7528 Vue \u7684\u7EC4\u4EF6\u5730\u5740\uFF0C\u4F8B\u5982\u8BF4\uFF1Abpm/oa/leave/detail",effect:"light",placement:"top"},{default:o(()=>[he]),_:1})]),_:1})):c("",!0)])):c("",!0)]),_:1},8,["model","rules"])),[[R,e(p)]])]),_:1},8,["modelValue","title"])}}});export{_e as _};
