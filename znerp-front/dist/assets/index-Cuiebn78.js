import{d as J,z as Q,h as j,r as m,e as E,n as G,O as W,o as s,c as w,f as a,w as t,a as l,P as X,F as A,p as K,dS as Y,D as _,q as u,Q as Z,x as c,y,U as $,C as ee,A as ae,B as le,H as te,I as oe,J as pe,K as se,L as re,M as ue}from"./index-CIfmhqRC.js";import{_ as ie}from"./index.vue_vue_type_script_setup_true_lang-DYHi04Tm.js";import{_ as ne}from"./DictTag.vue_vue_type_script_lang-CTpVFm77.js";import{_ as de}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{A as T}from"./index-Bb8IOC82.js";import{_ as me}from"./ApiKeyForm.vue_vue_type_script_setup_true_lang-Bxgqc5QO.js";import"./index-CrBeVHKs.js";import"./color-BN7ZL7BD.js";import"./el-card-DyMugU68.js";import"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import"./constants-A8BI3pz7.js";const ce=J({name:"AiApiKey",__name:"index",setup(fe){const x=Q(),{t:F}=j(),v=m(!0),C=m([]),h=m(0),p=E({pageNo:1,pageSize:10,name:void 0,platform:void 0,status:void 0}),S=m(),i=async()=>{v.value=!0;try{const n=await T.getApiKeyPage(p);C.value=n.list,h.value=n.total}finally{v.value=!1}},b=()=>{p.pageNo=1,i()},R=()=>{S.value.resetFields(),b()},U=m(),V=(n,o)=>{U.value.open(n,o)};return G(()=>{i()}),(n,o)=>{const z=$,f=ee,M=ae,N=le,g=te,d=oe,I=pe,O=de,P=ne,r=se,L=re,q=ie,k=W("hasPermi"),B=ue;return s(),w(A,null,[a(O,null,{default:t(()=>[a(I,{class:"-mb-15px",model:l(p),ref_key:"queryFormRef",ref:S,inline:!0,"label-width":"68px"},{default:t(()=>[a(f,{label:"\u540D\u79F0",prop:"name"},{default:t(()=>[a(z,{modelValue:l(p).name,"onUpdate:modelValue":o[0]||(o[0]=e=>l(p).name=e),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:"",onKeyup:X(b,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(f,{label:"\u5E73\u53F0",prop:"platform"},{default:t(()=>[a(N,{modelValue:l(p).platform,"onUpdate:modelValue":o[1]||(o[1]=e=>l(p).platform=e),placeholder:"\u8BF7\u8F93\u5165\u5E73\u53F0",clearable:"",class:"!w-240px"},{default:t(()=>[(s(!0),w(A,null,K(l(Y)(l(_).AI_PLATFORM),e=>(s(),u(M,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(f,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[a(N,{modelValue:l(p).status,"onUpdate:modelValue":o[2]||(o[2]=e=>l(p).status=e),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:"",class:"!w-240px"},{default:t(()=>[(s(!0),w(A,null,K(l(Z)(l(_).COMMON_STATUS),e=>(s(),u(M,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(f,null,{default:t(()=>[a(d,{onClick:b},{default:t(()=>[a(g,{icon:"ep:search",class:"mr-5px"}),c(" \u641C\u7D22")]),_:1}),a(d,{onClick:R},{default:t(()=>[a(g,{icon:"ep:refresh",class:"mr-5px"}),c(" \u91CD\u7F6E")]),_:1}),y((s(),u(d,{type:"primary",plain:"",onClick:o[3]||(o[3]=e=>V("create"))},{default:t(()=>[a(g,{icon:"ep:plus",class:"mr-5px"}),c(" \u65B0\u589E ")]),_:1})),[[k,["ai:api-key:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(O,null,{default:t(()=>[y((s(),u(L,{data:l(C),stripe:!0,"show-overflow-tooltip":!0},{default:t(()=>[a(r,{label:"\u6240\u5C5E\u5E73\u53F0",align:"center",prop:"platform"},{default:t(e=>[a(P,{type:l(_).AI_PLATFORM,value:e.row.platform},null,8,["type","value"])]),_:1}),a(r,{label:"\u540D\u79F0",align:"center",prop:"name"}),a(r,{label:"\u5BC6\u94A5",align:"center",prop:"apiKey"}),a(r,{label:"\u81EA\u5B9A\u4E49 API URL",align:"center",prop:"url"}),a(r,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:t(e=>[a(P,{type:l(_).COMMON_STATUS,value:e.row.status},null,8,["type","value"])]),_:1}),a(r,{label:"\u64CD\u4F5C",align:"center"},{default:t(e=>[y((s(),u(d,{link:"",type:"primary",onClick:D=>V("update",e.row.id)},{default:t(()=>[c(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[k,["ai:api-key:update"]]]),y((s(),u(d,{link:"",type:"danger",onClick:D=>(async H=>{try{await x.delConfirm(),await T.deleteApiKey(H),x.success(F("common.delSuccess")),await i()}catch{}})(e.row.id)},{default:t(()=>[c(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[k,["ai:api-key:delete"]]])]),_:1})]),_:1},8,["data"])),[[B,l(v)]]),a(q,{total:l(h),page:l(p).pageNo,"onUpdate:page":o[4]||(o[4]=e=>l(p).pageNo=e),limit:l(p).pageSize,"onUpdate:limit":o[5]||(o[5]=e=>l(p).pageSize=e),onPagination:i},null,8,["total","page","limit"])]),_:1}),a(me,{ref_key:"formRef",ref:U,onSuccess:i},null,512)],64)}}});export{ce as default};
