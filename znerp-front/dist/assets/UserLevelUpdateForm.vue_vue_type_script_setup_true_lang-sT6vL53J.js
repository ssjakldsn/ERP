import{d as q,h as F,z as L,r as m,e as M,o as c,q as f,w as s,f as o,a as e,x as V,y as j,k as z,U as D,C as J,J as R,I as S,M as A}from"./index-CIfmhqRC.js";import{_ as B}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{g as E,a as G}from"./index-B-I20sFy.js";import{_ as H}from"./MemberLevelSelect.vue_vue_type_script_setup_true_lang-kaFRrRFG.js";const K=q({__name:"UserLevelUpdateForm",emits:["success"],setup(N,{expose:_,emit:b}){const{t:y}=F(),k=L(),u=m(!1),r=m(!1),l=m({id:void 0,nickname:void 0,levelId:void 0,reason:void 0}),w=M({reason:[{required:!0,message:"\u4FEE\u6539\u539F\u56E0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),i=m();_({open:async t=>{if(u.value=!0,h(),t){r.value=!0;try{l.value=await E(t)}finally{r.value=!1}}}});const x=b,U=async()=>{if(i&&await i.value.validate()){r.value=!0;try{await G(l.value),k.success(y("common.updateSuccess")),u.value=!1,x("success")}finally{r.value=!1}}},h=()=>{var t;l.value={id:void 0,nickname:void 0,levelId:void 0,reason:void 0},(t=i.value)==null||t.resetFields()};return(t,a)=>{const p=D,n=J,I=R,v=S,g=B,C=A;return c(),f(g,{title:"\u4FEE\u6539\u7528\u6237\u7B49\u7EA7",modelValue:e(u),"onUpdate:modelValue":a[5]||(a[5]=d=>z(u)?u.value=d:null),width:"600"},{footer:s(()=>[o(v,{onClick:U,type:"primary",disabled:e(r)},{default:s(()=>[V("\u786E \u5B9A")]),_:1},8,["disabled"]),o(v,{onClick:a[4]||(a[4]=d=>u.value=!1)},{default:s(()=>[V("\u53D6 \u6D88")]),_:1})]),default:s(()=>[j((c(),f(I,{ref_key:"formRef",ref:i,model:e(l),rules:e(w),"label-width":"100px"},{default:s(()=>[o(n,{label:"\u7528\u6237\u7F16\u53F7",prop:"id"},{default:s(()=>[o(p,{modelValue:e(l).id,"onUpdate:modelValue":a[0]||(a[0]=d=>e(l).id=d),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0",class:"!w-240px",disabled:""},null,8,["modelValue"])]),_:1}),o(n,{label:"\u7528\u6237\u6635\u79F0",prop:"nickname"},{default:s(()=>[o(p,{modelValue:e(l).nickname,"onUpdate:modelValue":a[1]||(a[1]=d=>e(l).nickname=d),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0",class:"!w-240px",disabled:""},null,8,["modelValue"])]),_:1}),o(n,{label:"\u7528\u6237\u7B49\u7EA7",prop:"levelId"},{default:s(()=>[o(H,{modelValue:e(l).levelId,"onUpdate:modelValue":a[2]||(a[2]=d=>e(l).levelId=d)},null,8,["modelValue"])]),_:1}),o(n,{label:"\u4FEE\u6539\u539F\u56E0",prop:"reason"},{default:s(()=>[o(p,{type:"textarea",modelValue:e(l).reason,"onUpdate:modelValue":a[3]||(a[3]=d=>e(l).reason=d),placeholder:"\u8BF7\u8F93\u5165\u4FEE\u6539\u539F\u56E0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[C,e(r)]])]),_:1},8,["modelValue"])}}});export{K as _};
