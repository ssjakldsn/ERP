import{bt as v,d as j,z as I,h as J,r as d,e as M,n as O,O as P,o as i,c as _,f as a,w as t,y as b,q as g,a as l,g as S,x as r,a5 as A,F as T,I as W,ak as $,al as B,C as G,cc as H,J as K,M as L}from"./index-CIfmhqRC.js";import{_ as N}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{E as Q}from"./el-card-DyMugU68.js";import{_ as X}from"./index-2RHHZ-Zv.js";import{C as Y}from"./CardTitle-CmREB7ye.js";const Z={class:"flex items-center justify-between"},aa={key:0},ea=j({name:"CrmContractConfig",__name:"index",setup(ta){const w=I(),{t:h}=J(),s=d(!1),e=d({notifyEnabled:!1,notifyDays:void 0}),C=M({}),u=d(),f=async()=>{try{s.value=!0;const n=await(async()=>await v.get({url:"/crm/contract-config/get"}))();if(n===null)return;e.value=n}finally{s.value=!1}},E=async()=>{if(u&&await u.value.validate()){s.value=!0;try{const n=e.value;await(async o=>await v.put({url:"/crm/contract-config/save",data:o}))(n),w.success(h("common.updateSuccess")),await f(),s.value=!1}finally{s.value=!1}}},x=()=>{e.value.notifyEnabled||(e.value.notifyDays=void 0)};return O(()=>{f()}),(n,o)=>{const m=X,V=W,y=$,k=B,p=G,D=H,q=Q,z=K,F=N,R=P("hasPermi"),U=L;return i(),_(T,null,[a(m,{title:"\u3010\u5408\u540C\u3011\u5408\u540C\u7BA1\u7406\u3001\u5408\u540C\u63D0\u9192",url:"https://doc.iocoder.cn/crm/contract/"}),a(m,{title:"\u3010\u901A\u7528\u3011\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/crm/permission/"}),a(F,null,{default:t(()=>[b((i(),g(z,{ref_key:"formRef",ref:u,model:l(e),rules:l(C),"label-width":"160px"},{default:t(()=>[a(q,{shadow:"never"},{header:t(()=>[S("div",Z,[a(l(Y),{title:"\u5408\u540C\u914D\u7F6E\u8BBE\u7F6E"}),b((i(),g(V,{type:"primary",onClick:E},{default:t(()=>[r(" \u4FDD\u5B58 ")]),_:1})),[[R,["crm:contract-config:update"]]])])]),default:t(()=>[a(p,{label:"\u63D0\u524D\u63D0\u9192\u8BBE\u7F6E",prop:"notifyEnabled"},{default:t(()=>[a(k,{modelValue:l(e).notifyEnabled,"onUpdate:modelValue":o[0]||(o[0]=c=>l(e).notifyEnabled=c),onChange:x,class:"ml-4"},{default:t(()=>[a(y,{value:!1,size:"large"},{default:t(()=>[r("\u4E0D\u63D0\u9192")]),_:1}),a(y,{value:!0,size:"large"},{default:t(()=>[r("\u63D0\u9192")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(e).notifyEnabled?(i(),_("div",aa,[a(p,null,{default:t(()=>[r(" \u63D0\u524D "),a(D,{class:"mx-2",modelValue:l(e).notifyDays,"onUpdate:modelValue":o[1]||(o[1]=c=>l(e).notifyDays=c)},null,8,["modelValue"]),r(" \u5929\u63D0\u9192 ")]),_:1})])):A("",!0)]),_:1})]),_:1},8,["model","rules"])),[[U,l(s)]])]),_:1})],64)}}});export{ea as default};
