import{d as I,eH as j,r as q,o as p,q as c,w as l,a as r,c as F,F as G,p as H,g as i,t as v,x as o,a5 as U,f as e,ay as w,I as J,U as L,C as S,cc as O,E as T,ce as z,J as A,av as B,j as K}from"./index-CIfmhqRC.js";import M from"./RewardRuleCouponSelect-xq2FZ4bz.js";import{i as N}from"./constants-A8BI3pz7.js";const Q={class:"font-bold"},W=i("span",null,"\u5305\u90AE\uFF1A",-1),X=i("span",null,"\u9001\u79EF\u5206\uFF1A",-1),Y=i("span",null,"\u9001\u4F18\u60E0\u5238\uFF1A",-1),Z=I({name:"RewardRule",__name:"RewardRule",props:{modelValue:{}},emits:["update:modelValue","deleteRule"],setup(R,{expose:k,emit:C}){const t=j(R,"modelValue",C),m=q(),b=()=>{w(t.value.rules)&&(t.value.rules=[]),t.value.rules.push({limit:0,discountPrice:0,freeDelivery:!1,point:0})};return k({setRuleCoupon:()=>{var f;w(m.value)||((f=m.value)==null||f.forEach(V=>V.setGiveCouponList()))}}),(f,V)=>{const _=J,x=L,n=S,h=O,s=T,g=z,E=A,P=B,D=K;return p(),c(D,null,{default:l(()=>[r(t).rules?(p(!0),F(G,{key:0},H(r(t).rules,(a,d)=>(p(),c(s,{key:d,span:24},{default:l(()=>[i("span",Q,"\u6D3B\u52A8\u5C42\u7EA7"+v(d+1),1),d!==0?(p(),c(_,{key:0,link:"",type:"danger",onClick:u=>{return y=d,void t.value.rules.splice(y,1);var y}},{default:l(()=>[o(" \u5220\u9664 ")]),_:2},1032,["onClick"])):U("",!0),e(E,{ref_for:!0,ref:"formRef",model:a},{default:l(()=>[e(n,{label:"\u4F18\u60E0\u95E8\u69DB:","label-width":"100px",prop:"limit"},{default:l(()=>[o(" \u6EE1 "),e(x,{modelValue:a.limit,"onUpdate:modelValue":u=>a.limit=u,min:0,class:"w-150px! p-x-20px!",placeholder:"",type:"number"},null,8,["modelValue","onUpdate:modelValue"]),o(" "+v(r(N).PRICE.type===r(t).conditionType?"\u5143":"\u4EF6"),1)]),_:2},1024),e(n,{label:"\u4F18\u60E0\u5185\u5BB9:","label-width":"100px"},{default:l(()=>[e(s,{span:24},{default:l(()=>[o(" \u8BA2\u5355\u91D1\u989D\u4F18\u60E0 "),e(n,null,{default:l(()=>[o(" \u51CF "),e(h,{modelValue:a.discountPrice,"onUpdate:modelValue":u=>a.discountPrice=u,min:0,precision:2,step:.1,class:"w-150px! p-x-20px!","controls-position":"right"},null,8,["modelValue","onUpdate:modelValue"]),o(" \u5143 ")]),_:2},1024)]),_:2},1024),e(s,{span:24},{default:l(()=>[W,e(g,{modelValue:a.freeDelivery,"onUpdate:modelValue":u=>a.freeDelivery=u,"active-text":"\u662F","inactive-text":"\u5426","inline-prompt":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(s,{span:24},{default:l(()=>[X,e(n,null,{default:l(()=>[o(" \u9001 "),e(x,{modelValue:a.point,"onUpdate:modelValue":u=>a.point=u,class:"w-150px! p-x-20px!",placeholder:"",type:"number"},null,8,["modelValue","onUpdate:modelValue"]),o(" \u79EF\u5206 ")]),_:2},1024)]),_:2},1024),e(s,{span:24},{default:l(()=>[Y,e(M,{ref_for:!0,ref_key:"rewardRuleCouponSelectRef",ref:m,modelValue:a,"onUpdate:modelValue":u=>a=u},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["model"])]),_:2},1024))),128)):U("",!0),e(s,{span:24,class:"mt-10px"},{default:l(()=>[e(_,{type:"primary",onClick:b},{default:l(()=>[o("\u6DFB\u52A0\u4F18\u60E0\u89C4\u5219")]),_:1})]),_:1}),e(s,{span:24},{default:l(()=>[e(P,{type:"warning"},{default:l(()=>[o(" \u8D60\u9001\u79EF\u5206\u4E3A 0 \u65F6\u4E0D\u8D60\u9001\u3002\u672A\u9009\u4F18\u60E0\u5238\u65F6\u4E0D\u8D60\u9001\u3002")]),_:1})]),_:1})]),_:1})}}});export{Z as _};
