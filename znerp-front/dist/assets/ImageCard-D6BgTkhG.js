import{d as z,z as G,r as R,c7 as $,ar as L,ab as N,n as P,o as i,q as c,w as r,g as o,a,x as b,a5 as B,f as u,eb as h,e5 as D,ec as H,e3 as J,c as F,t as y,F as K,p as Q,I as T,_ as V}from"./index-CIfmhqRC.js";import{E as W}from"./el-card-DyMugU68.js";import{E as X}from"./el-image-DLpquQe6.js";import{A as m}from"./constants-PZ18_Kze.js";const Y={class:"image-operation"},Z={key:0},aa={class:"image-mj-btns"},ea=V(z({__name:"ImageCard",props:{detail:{type:Object,require:!0}},emits:["onBtnClick","onMjBtnClick"],setup(A,{emit:M}){const O=G(),k=A,f=R(),d=R(),p=async(n,s)=>{g("onBtnClick",n,s)},g=M,{detail:e}=$(k);L(e,async(n,s)=>{await x(n.status)});const x=async n=>{n===m.IN_PROGRESS?d.value=N.service({target:f.value,text:"\u751F\u6210\u4E2D..."}):d.value&&(d.value.close(),d.value=null)};return P(async()=>{await x(k.detail.status)}),(n,s)=>{const t=T,U=X,q=W;return i(),c(q,{"body-class":"",class:"image-card"},{default:r(()=>{var C,_,w,I,S,j,E;return[o("div",Y,[o("div",null,[((C=a(e))==null?void 0:C.status)===a(m).IN_PROGRESS?(i(),c(t,{key:0,type:"primary",text:"",bg:""},{default:r(()=>[b(" \u751F\u6210\u4E2D ")]),_:1})):((_=a(e))==null?void 0:_.status)===a(m).SUCCESS?(i(),c(t,{key:1,text:"",bg:""},{default:r(()=>[b(" \u5DF2\u5B8C\u6210 ")]),_:1})):((w=a(e))==null?void 0:w.status)===a(m).FAIL?(i(),c(t,{key:2,type:"danger",text:"",bg:""},{default:r(()=>[b(" \u5F02\u5E38 ")]),_:1})):B("",!0)]),o("div",null,[u(t,{class:"btn",text:"",icon:a(h),onClick:s[0]||(s[0]=l=>p("download",a(e)))},null,8,["icon"]),u(t,{class:"btn",text:"",icon:a(D),onClick:s[1]||(s[1]=l=>p("regeneration",a(e)))},null,8,["icon"]),u(t,{class:"btn",text:"",icon:a(H),onClick:s[2]||(s[2]=l=>p("delete",a(e)))},null,8,["icon"]),u(t,{class:"btn",text:"",icon:a(J),onClick:s[3]||(s[3]=l=>p("more",a(e)))},null,8,["icon"])])]),o("div",{class:"image-wrapper",ref_key:"cardImageRef",ref:f},[u(U,{class:"image",src:(I=a(e))==null?void 0:I.picUrl,"preview-src-list":[a(e).picUrl],"preview-teleported":""},null,8,["src","preview-src-list"]),((S=a(e))==null?void 0:S.status)===a(m).FAIL?(i(),F("div",Z,y((j=a(e))==null?void 0:j.errorMessage),1)):B("",!0)],512),o("div",aa,[(i(!0),F(K,null,Q((E=a(e))==null?void 0:E.buttons,l=>(i(),c(t,{size:"small",key:l,class:"min-w-40px ml-0 mr-10px mt-5px",onClick:sa=>(async v=>{await O.confirm(`\u786E\u8BA4\u64CD\u4F5C "${v.label} ${v.emoji}" ?`),g("onMjBtnClick",v,k.detail)})(l)},{default:r(()=>[b(y(l.label)+y(l.emoji),1)]),_:2},1032,["onClick"]))),128))])]}),_:1})}}}),[["__scopeId","data-v-b5b6c7a7"]]);export{ea as default};
