import{d as V,h as x,z as F,r as u,o as b,q as A,w as r,f as i,a as l,x as y,y as C,k as g,I as z,M as R}from"./index-CIfmhqRC.js";import{_ as j}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{_ as q}from"./Form-cSLPXDG2.js";import{g as E,c as I,u as U}from"./index-BulLiPxL.js";import{r as B,a as D}from"./account.data-DB2SYEX0.js";const G=V({name:"SystemMailAccountForm",__name:"MailAccountForm",emits:["success"],setup(H,{expose:_,emit:w}){const{t:c}=x(),n=F(),e=u(!1),f=u(""),s=u(!1),d=u(""),o=u();_({open:async(t,a)=>{if(e.value=!0,f.value=c("action."+t),d.value=t,a){s.value=!0;try{const m=await E(a);o.value.setValues(m)}finally{s.value=!1}}}});const h=w,k=async()=>{if(o&&await o.value.getElFormRef().validate()){s.value=!0;try{const t=o.value.formModel;d.value==="create"?(await I(t),n.success(c("common.createSuccess"))):(await U(t),n.success(c("common.updateSuccess"))),e.value=!1,h("success")}finally{s.value=!1}}};return(t,a)=>{const m=q,v=z,M=j,S=R;return b(),A(M,{modelValue:l(e),"onUpdate:modelValue":a[1]||(a[1]=p=>g(e)?e.value=p:null),title:l(f)},{footer:r(()=>[i(v,{disabled:l(s),type:"primary",onClick:k},{default:r(()=>[y("\u786E \u5B9A")]),_:1},8,["disabled"]),i(v,{onClick:a[0]||(a[0]=p=>e.value=!1)},{default:r(()=>[y("\u53D6 \u6D88")]),_:1})]),default:r(()=>[C(i(m,{ref_key:"formRef",ref:o,rules:l(B),schema:l(D).formSchema},null,8,["rules","schema"]),[[S,l(s)]])]),_:1},8,["modelValue","title"])}}});export{G as _};
