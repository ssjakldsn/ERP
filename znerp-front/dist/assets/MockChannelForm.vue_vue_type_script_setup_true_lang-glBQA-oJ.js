import{d as O,h as J,z as R,r as i,o as m,c as g,f as r,w as o,a as l,x as f,y as q,q as w,F as A,p as E,cL as L,D as T,t as j,k as z,ak as D,al as B,C as G,U as H,J as K,I as P,M as Q}from"./index-CIfmhqRC.js";import{_ as W}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{C as X}from"./constants-A8BI3pz7.js";import{g as Y,c as Z,u as $}from"./index-BY9mST-C.js";const aa=O({name:"MockChannelForm",__name:"MockChannelForm",emits:["success"],setup(ea,{expose:b,emit:V}){const{t:p}=J(),v=R(),d=i(!1),k=i(""),n=i(!1),e=i({appId:"",code:"",status:void 0,feeRate:0,remark:"",config:{name:"mock-conf"}}),h={status:[{required:!0,message:"\u6E20\u9053\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},c=i();b({open:async(s,a)=>{d.value=!0,n.value=!0,S(s,a);try{const u=await Y(s,a);u&&u.id&&(e.value=u,e.value.config=JSON.parse(u.config)),k.value=e.value.id?"\u7F16\u8F91\u652F\u4ED8\u6E20\u9053":"\u521B\u5EFA\u652F\u4ED8\u6E20\u9053"}finally{n.value=!1}}});const x=V,C=async()=>{if(c&&await c.value.validate()){n.value=!0;try{const s={...e.value};s.config=JSON.stringify(e.value.config),s.id?(await $(s),v.success(p("common.updateSuccess"))):(await Z(s),v.success(p("common.createSuccess"))),d.value=!1,x("success")}finally{n.value=!1}}},S=(s,a)=>{var u;e.value={appId:s,code:a,status:X.ENABLE,remark:"",feeRate:0,config:{name:"mock-conf"}},(u=c.value)==null||u.resetFields()};return(s,a)=>{const u=D,I=B,_=G,M=H,U=K,y=P,F=W,N=Q;return m(),g("div",null,[r(F,{modelValue:l(d),"onUpdate:modelValue":a[3]||(a[3]=t=>z(d)?d.value=t:null),title:l(k),width:"800px"},{footer:o(()=>[r(y,{disabled:l(n),type:"primary",onClick:C},{default:o(()=>[f("\u786E \u5B9A")]),_:1},8,["disabled"]),r(y,{onClick:a[2]||(a[2]=t=>d.value=!1)},{default:o(()=>[f("\u53D6 \u6D88")]),_:1})]),default:o(()=>[q((m(),w(U,{ref_key:"formRef",ref:c,model:l(e),rules:h,"label-width":"100px"},{default:o(()=>[r(_,{label:"\u6E20\u9053\u72B6\u6001","label-width":"180px",prop:"status"},{default:o(()=>[r(I,{modelValue:l(e).status,"onUpdate:modelValue":a[0]||(a[0]=t=>l(e).status=t)},{default:o(()=>[(m(!0),g(A,null,E(l(L)(l(T).COMMON_STATUS),t=>(m(),w(u,{key:parseInt(t.value),value:parseInt(t.value)},{default:o(()=>[f(j(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(_,{label:"\u5907\u6CE8","label-width":"180px",prop:"remark"},{default:o(()=>[r(M,{modelValue:l(e).remark,"onUpdate:modelValue":a[1]||(a[1]=t=>l(e).remark=t),style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[N,l(n)]])]),_:1},8,["modelValue","title"])])}}});export{aa as _};
