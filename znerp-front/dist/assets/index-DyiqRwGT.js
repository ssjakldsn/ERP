import{d as D,r as d,e as x,o as c,c as V,f as a,w as p,a as e,F as v,p as E,dS as F,D as G,q as H,x as b,y as P,a4 as q,C as A,A as B,B as J,U as R,G as W,H as j,I as L,J as Q,cG as X}from"./index-CIfmhqRC.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_lang-DYHi04Tm.js";import{_ as K}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{W as O,g as Z}from"./main-Bo4N7guv.js";import{M as ee}from"./types-VQvH2Qnl.js";import{_ as ae}from"./main.vue_vue_type_script_setup_true_lang-Ds9hfoYc.js";import{_ as le}from"./MessageTable.vue_vue_type_script_setup_true_lang-CTgBHdaO.js";import"./index-CrBeVHKs.js";import"./el-card-DyMugU68.js";import"./TabNews-7oV1NnBl.js";import"./main-q6_374v6.js";import"./el-image-DLpquQe6.js";import"./main-CfsIYUE7.js";import"./main-D-MTREjU.js";import"./main.vue_vue_type_script_setup_true_lang-4T-wzdRZ.js";import"./index-B3YA5cCI.js";import"./index-DO3zXEBC.js";import"./formatTime-DFFN_xWx.js";import"./main-BKPadW1d.js";import"./TabText.vue_vue_type_script_setup_true_lang-56KExiTN.js";import"./TabImage-E636bkCf.js";import"./useUpload-Dugldi2L.js";import"./TabVoice-Dqn1wB6g.js";import"./TabVideo-C4oWHYiJ.js";import"./TabMusic.vue_vue_type_script_setup_true_lang-YMp3hNn3.js";import"./MsgList-CNhz3oPm.js";import"./Msg.vue_vue_type_script_setup_true_lang-CDtoXzAI.js";import"./main.vue_vue_type_script_setup_true_lang-rncY1S61.js";import"./main-DGKBWtix.js";import"./MsgEvent.vue_vue_type_script_setup_true_lang-Ahf7SFX-.js";import"./index-CPdF_MJz.js";import"./index-Dsi5T0R-.js";const oe=D({name:"MpMessage",__name:"index",setup(te){const n=d(!1),u=d(0),f=d([]),l=x({pageNo:1,pageSize:10,openid:"",accountId:-1,type:ee.Text,createTime:[]}),_=d(null),s=x({show:!1,userId:0}),I=r=>{l.accountId=r,l.pageNo=1,m()},m=()=>{l.pageNo=1,g()},g=async()=>{try{n.value=!0;const r=await Z(l);f.value=r.list,u.value=r.total}finally{n.value=!1}},S=async()=>{var o;const r=l.accountId;(o=_.value)==null||o.resetFields(),l.accountId=r,m()},U=async r=>{s.userId=r,s.show=!0};return(r,o)=>{const i=A,M=B,k=J,T=R,C=W,y=j,h=L,N=Q,w=K,Y=$,z=X;return c(),V(v,null,[a(w,null,{default:p(()=>[a(N,{class:"-mb-15px",model:e(l),ref_key:"queryFormRef",ref:_,inline:!0,"label-width":"68px"},{default:p(()=>[a(i,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:p(()=>[a(e(ae),{onChange:I})]),_:1}),a(i,{label:"\u6D88\u606F\u7C7B\u578B",prop:"type"},{default:p(()=>[a(k,{modelValue:e(l).type,"onUpdate:modelValue":o[0]||(o[0]=t=>e(l).type=t),placeholder:"\u8BF7\u9009\u62E9\u6D88\u606F\u7C7B\u578B",class:"!w-240px"},{default:p(()=>[(c(!0),V(v,null,E(e(F)(e(G).MP_MESSAGE_TYPE),t=>(c(),H(M,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"\u7528\u6237\u6807\u8BC6",prop:"openid"},{default:p(()=>[a(T,{modelValue:e(l).openid,"onUpdate:modelValue":o[1]||(o[1]=t=>e(l).openid=t),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6807\u8BC6",clearable:"","v-on":m,class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(i,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:p(()=>[a(C,{modelValue:e(l).createTime,"onUpdate:modelValue":o[2]||(o[2]=t=>e(l).createTime=t),style:{width:"240px"},"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":["00:00:00","23:59:59"],class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(i,null,{default:p(()=>[a(h,{onClick:m},{default:p(()=>[a(y,{icon:"ep:search",class:"mr-5px"}),b(" \u641C\u7D22 ")]),_:1}),a(h,{onClick:S},{default:p(()=>[a(y,{icon:"ep:refresh",class:"mr-5px"}),b(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(w,null,{default:p(()=>[a(le,{list:e(f),loading:e(n),onSend:U},null,8,["list","loading"]),P(a(Y,{total:e(u),page:e(l).pageNo,"onUpdate:page":o[3]||(o[3]=t=>e(l).pageNo=t),limit:e(l).pageSize,"onUpdate:limit":o[4]||(o[4]=t=>e(l).pageSize=t),onPagination:g},null,8,["total","page","limit"]),[[q,e(u)>0]])]),_:1}),a(z,{title:"\u7C89\u4E1D\u6D88\u606F\u5217\u8868",modelValue:e(s).show,"onUpdate:modelValue":o[5]||(o[5]=t=>e(s).show=t),onClick:o[6]||(o[6]=t=>e(s).show=!0),width:"50%","destroy-on-close":""},{default:p(()=>[a(e(O),{"user-id":e(s).userId},null,8,["user-id"])]),_:1},8,["modelValue"])],64)}}});export{oe as default};
