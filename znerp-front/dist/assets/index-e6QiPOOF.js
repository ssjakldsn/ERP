import{d as L,z as j,h as B,r as i,e as G,n as Q,O as W,o as d,c as X,f as e,w as l,a as t,P as V,x as m,y as _,q as g,D as Y,F as Z,U as $,C as ee,H as ae,I as le,J as te,K as oe,ce as re,L as ne,M as pe}from"./index-CIfmhqRC.js";import{_ as se}from"./index.vue_vue_type_script_setup_true_lang-DYHi04Tm.js";import{_ as ue}from"./DictTag.vue_vue_type_script_lang-CTpVFm77.js";import{_ as ce}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{_ as ie}from"./index-2RHHZ-Zv.js";import{d as de}from"./formatTime-DFFN_xWx.js";import{d as me}from"./download-D5Lb_h0f.js";import{A as b}from"./index-DBGbv79t.js";import{_ as fe}from"./AccountForm.vue_vue_type_script_setup_true_lang-Bm1A1zU3.js";import"./index-CrBeVHKs.js";import"./color-BN7ZL7BD.js";import"./el-card-DyMugU68.js";import"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";const _e=L({name:"ErpAccount",__name:"index",setup(ge){const y=j(),{t:T}=B(),h=i(!0),U=i([]),A=i(0),o=G({pageNo:1,pageSize:10,no:void 0,remark:void 0,status:void 0,name:void 0}),N=i(),S=i(!1),u=async()=>{h.value=!0;try{const s=await b.getAccountPage(o);U.value=s.list,A.value=s.total}finally{h.value=!1}},f=()=>{o.pageNo=1,u()},M=()=>{N.value.resetFields(),f()},P=i(),z=(s,r)=>{P.value.open(s,r)},O=async()=>{try{await y.exportConfirm(),S.value=!0;const s=await b.exportAccount(o);me.excel(s,"ERP \u7ED3\u7B97\u8D26\u6237.xls")}catch{}finally{S.value=!1}};return Q(()=>{u()}),(s,r)=>{const R=ie,C=$,w=ee,v=ae,c=le,q=te,F=ce,n=oe,D=ue,E=re,H=ne,I=se,x=W("hasPermi"),J=pe;return d(),X(Z,null,[e(R,{title:"\u3010\u8D22\u52A1\u3011\u91C7\u8D2D\u4ED8\u6B3E\u3001\u9500\u552E\u6536\u6B3E",url:"https://doc.iocoder.cn/sale/finance-payment-receipt/"}),e(F,null,{default:l(()=>[e(q,{class:"-mb-15px",model:t(o),ref_key:"queryFormRef",ref:N,inline:!0,"label-width":"68px"},{default:l(()=>[e(w,{label:"\u540D\u79F0",prop:"name"},{default:l(()=>[e(C,{modelValue:t(o).name,"onUpdate:modelValue":r[0]||(r[0]=a=>t(o).name=a),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:"",onKeyup:V(f,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(w,{label:"\u7F16\u7801",prop:"no"},{default:l(()=>[e(C,{modelValue:t(o).no,"onUpdate:modelValue":r[1]||(r[1]=a=>t(o).no=a),placeholder:"\u8BF7\u8F93\u5165\u7F16\u7801",clearable:"",onKeyup:V(f,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(w,{label:"\u5907\u6CE8",prop:"remark"},{default:l(()=>[e(C,{modelValue:t(o).remark,"onUpdate:modelValue":r[2]||(r[2]=a=>t(o).remark=a),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",clearable:"",onKeyup:V(f,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(w,null,{default:l(()=>[e(c,{onClick:f},{default:l(()=>[e(v,{icon:"ep:search",class:"mr-5px"}),m(" \u641C\u7D22")]),_:1}),e(c,{onClick:M},{default:l(()=>[e(v,{icon:"ep:refresh",class:"mr-5px"}),m(" \u91CD\u7F6E")]),_:1}),_((d(),g(c,{type:"primary",plain:"",onClick:r[3]||(r[3]=a=>z("create"))},{default:l(()=>[e(v,{icon:"ep:plus",class:"mr-5px"}),m(" \u65B0\u589E ")]),_:1})),[[x,["erp:account:create"]]]),_((d(),g(c,{type:"success",plain:"",onClick:O,loading:t(S)},{default:l(()=>[e(v,{icon:"ep:download",class:"mr-5px"}),m(" \u5BFC\u51FA ")]),_:1},8,["loading"])),[[x,["erp:account:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(F,null,{default:l(()=>[_((d(),g(H,{data:t(U),stripe:!0,"show-overflow-tooltip":!0},{default:l(()=>[e(n,{label:"\u540D\u79F0",align:"center",prop:"name"}),e(n,{label:"\u7F16\u7801",align:"center",prop:"no"}),e(n,{label:"\u5907\u6CE8",align:"center",prop:"remark"}),e(n,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:l(a=>[e(D,{type:t(Y).COMMON_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(n,{label:"\u6392\u5E8F",align:"center",prop:"sort"}),e(n,{label:"\u662F\u5426\u9ED8\u8BA4",align:"center",prop:"defaultStatus"},{default:l(a=>[e(E,{modelValue:a.row.defaultStatus,"onUpdate:modelValue":k=>a.row.defaultStatus=k,"active-value":!0,"inactive-value":!1,onChange:k=>(async p=>{try{const K=p.defaultStatus?"\u8BBE\u7F6E":"\u53D6\u6D88";await y.confirm("\u786E\u8BA4\u8981"+K+'"'+p.name+'"\u9ED8\u8BA4\u5417?'),await b.updateAccountDefaultStatus(p.id,p.defaultStatus),await u()}catch{p.defaultStatus=!p.defaultStatus}})(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(n,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:t(de),width:"180px"},null,8,["formatter"]),e(n,{label:"\u64CD\u4F5C",align:"center"},{default:l(a=>[_((d(),g(c,{link:"",type:"primary",onClick:k=>z("update",a.row.id)},{default:l(()=>[m(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[x,["erp:account:update"]]]),_((d(),g(c,{link:"",type:"danger",onClick:k=>(async p=>{try{await y.delConfirm(),await b.deleteAccount(p),y.success(T("common.delSuccess")),await u()}catch{}})(a.row.id)},{default:l(()=>[m(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[x,["erp:account:delete"]]])]),_:1})]),_:1},8,["data"])),[[J,t(h)]]),e(I,{total:t(A),page:t(o).pageNo,"onUpdate:page":r[4]||(r[4]=a=>t(o).pageNo=a),limit:t(o).pageSize,"onUpdate:limit":r[5]||(r[5]=a=>t(o).pageSize=a),onPagination:u},null,8,["total","page","limit"])]),_:1}),e(fe,{ref_key:"formRef",ref:P,onSuccess:u},null,512)],64)}}});export{_e as default};
