import{d as X,r as P,eI as j,e as y,aD as w,n as k,o as d,c as q,f as a,g as z,w as r,y as p,q as f,a as l,F as A,el as F,Q as U,D as N,E as K,j as Q,K as Y,L as B,M as W,_ as G}from"./index-CIfmhqRC.js";import{E as H}from"./el-card-DyMugU68.js";import{e as J,_ as O}from"./Echart.vue_vue_type_script_setup_true_lang-C-1NoClp.js";import{_ as V}from"./index-2RHHZ-Zv.js";import{d as Z,e as aa,f as ea,b as ta}from"./member-BQpYUWFp.js";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang-D_t4NQ-2.js";import{c as ra}from"./china-aeAnb323.js";import{f as la}from"./formatter-CHMUnmj-.js";import oa from"./MemberFunnelCard-BA4FVYzj.js";import{_ as sa}from"./MemberTerminalCard.vue_vue_type_script_setup_true_lang-ezP1Pfr8.js";import{C as E}from"./CardTitle-CmREB7ye.js";import"./echarts-D6KrxhA1.js";import"./formatTime-DFFN_xWx.js";import"./CountTo.vue_vue_type_script_setup_true_lang-Sjd3MeH7.js";import"./index.vue_vue_type_script_setup_true_lang-Q5GCgRyW.js";const ia={class:"flex flex-col"},na=G(X({name:"MemberStatistics",__name:"index",setup(ma){var C;const u=P(!0),b=P(),_=j();(C=J)==null||C.registerMap("china",ra);const S=y({tooltip:{trigger:"item",confine:!0,formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"right"},roseType:"area",series:[{name:"\u4F1A\u5458\u7EC8\u7AEF",type:"pie",label:{show:!1},labelLine:{show:!1},data:[]}]}),x=y({tooltip:{trigger:"item",confine:!0,formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"right"},roseType:"area",series:[{name:"\u4F1A\u5458\u6027\u522B",type:"pie",label:{show:!1},labelLine:{show:!1},data:[]}]}),h=y({tooltip:{trigger:"item",formatter:t=>{var s,o,e,i,m;return`${((s=t==null?void 0:t.data)==null?void 0:s.areaName)||(t==null?void 0:t.name)}<br/>
\u4F1A\u5458\u6570\u91CF\uFF1A${((o=t==null?void 0:t.data)==null?void 0:o.userCount)||0}<br/>
\u8BA2\u5355\u521B\u5EFA\u6570\u91CF\uFF1A${((e=t==null?void 0:t.data)==null?void 0:e.orderCreateUserCount)||0}<br/>
\u8BA2\u5355\u652F\u4ED8\u6570\u91CF\uFF1A${((i=t==null?void 0:t.data)==null?void 0:i.orderPayUserCount)||0}<br/>
\u8BA2\u5355\u652F\u4ED8\u91D1\u989D\uFF1A${w(((m=t==null?void 0:t.data)==null?void 0:m.orderPayPrice)||0)}`}},visualMap:{text:["\u9AD8","\u4F4E"],realtime:!1,calculable:!0,top:"middle",inRange:{color:["#fff","#3b82f6"]}},series:[{name:"\u4F1A\u5458\u5730\u57DF\u5206\u5E03",type:"map",map:"china",roam:!1,selectedMode:!1,data:[]}]}),$=async()=>{b.value=await Z()},L=async()=>{const t=await aa();_.value=t.map(e=>({...e,areaName:F(e.areaName)}));let s=0,o=0;h.series[0].data=_.value.map(e=>(s=Math.min(s,e.orderPayUserCount||0),o=Math.max(o,e.orderPayUserCount||0),{...e,name:e.areaName,value:e.orderPayUserCount||0})),h.visualMap.min=s,h.visualMap.max=o},T=async()=>{const t=await ea(),s=U(N.SYSTEM_USER_SEX);s.push({label:"\u672A\u77E5",value:null}),x.series[0].data=s.map(o=>{var i;const e=(i=t.find(m=>m.sex===o.value))==null?void 0:i.userCount;return{name:o.label,value:e||0}})},I=async()=>{const t=await ta(),s=U(N.TERMINAL);s.push({label:"\u672A\u77E5",value:null}),S.series[0].data=s.map(o=>{var i;const e=(i=t.find(m=>m.terminal===o.value))==null?void 0:i.userCount;return{name:o.label,value:e||0}})};return k(async()=>{u.value=!0,await Promise.all([$(),I(),L(),T()]),u.value=!1}),(t,s)=>{const o=V,e=K,i=Q,m=O,g=Y,R=B,M=H,c=W;return d(),q(A,null,[a(o,{title:"\u3010\u7EDF\u8BA1\u3011\u4F1A\u5458\u3001\u5546\u54C1\u3001\u4EA4\u6613\u7EDF\u8BA1",url:"https://doc.iocoder.cn/mall/statistics/"}),z("div",ia,[a(i,{gutter:16,class:"summary"},{default:r(()=>[p((d(),f(e,{sm:6,xs:12},{default:r(()=>{var n;return[a(v,{value:((n=l(b))==null?void 0:n.userCount)||0,icon:"fa-solid:users","icon-bg-color":"text-blue-500","icon-color":"bg-blue-100",title:"\u7D2F\u8BA1\u4F1A\u5458\u6570"},null,8,["value"])]}),_:1})),[[c,l(u)]]),p((d(),f(e,{sm:6,xs:12},{default:r(()=>{var n;return[a(v,{value:((n=l(b))==null?void 0:n.rechargeUserCount)||0,icon:"fa-solid:user","icon-bg-color":"text-purple-500","icon-color":"bg-purple-100",title:"\u7D2F\u8BA1\u5145\u503C\u4EBA\u6570"},null,8,["value"])]}),_:1})),[[c,l(u)]]),p((d(),f(e,{sm:6,xs:12},{default:r(()=>{var n;return[a(v,{decimals:2,value:l(w)(((n=l(b))==null?void 0:n.rechargePrice)||0),icon:"fa-solid:money-check-alt","icon-bg-color":"text-yellow-500","icon-color":"bg-yellow-100",prefix:"\uFFE5",title:"\u7D2F\u8BA1\u5145\u503C\u91D1\u989D"},null,8,["value"])]}),_:1})),[[c,l(u)]]),p((d(),f(e,{sm:6,xs:12},{default:r(()=>{var n;return[a(v,{decimals:2,value:l(w)(((n=l(b))==null?void 0:n.expensePrice)||0),icon:"fa-solid:yen-sign","icon-bg-color":"text-green-500","icon-color":"bg-green-100",prefix:"\uFFE5",title:"\u7D2F\u8BA1\u6D88\u8D39\u91D1\u989D"},null,8,["value"])]}),_:1})),[[c,l(u)]])]),_:1}),a(i,{gutter:16,class:"mb-4"},{default:r(()=>[a(e,{md:18,sm:24},{default:r(()=>[a(oa)]),_:1}),a(e,{md:6,sm:24},{default:r(()=>[a(sa)]),_:1})]),_:1}),a(i,{gutter:16},{default:r(()=>[a(e,{md:18,sm:24},{default:r(()=>[a(M,{shadow:"never"},{header:r(()=>[a(l(E),{title:"\u4F1A\u5458\u5730\u57DF\u5206\u5E03"})]),default:r(()=>[p((d(),f(i,null,{default:r(()=>[a(e,{span:10},{default:r(()=>[a(m,{height:300,options:l(h)},null,8,["options"])]),_:1}),a(e,{span:14},{default:r(()=>[a(R,{data:l(_),height:300},{default:r(()=>[a(g,{"sort-method":(n,D)=>n.areaName.localeCompare(D.areaName,"zh-CN"),align:"center",label:"\u7701\u4EFD","min-width":"80",prop:"areaName","show-overflow-tooltip":"",sortable:""},null,8,["sort-method"]),a(g,{align:"center",label:"\u4F1A\u5458\u6570\u91CF","min-width":"105",prop:"userCount",sortable:""}),a(g,{align:"center",label:"\u8BA2\u5355\u521B\u5EFA\u6570\u91CF","min-width":"135",prop:"orderCreateUserCount",sortable:""}),a(g,{align:"center",label:"\u8BA2\u5355\u652F\u4ED8\u6570\u91CF","min-width":"135",prop:"orderPayUserCount",sortable:""}),a(g,{formatter:l(la),align:"center",label:"\u8BA2\u5355\u652F\u4ED8\u91D1\u989D","min-width":"135",prop:"orderPayPrice",sortable:""},null,8,["formatter"])]),_:1},8,["data"])]),_:1})]),_:1})),[[c,l(u)]])]),_:1})]),_:1}),a(e,{md:6,sm:24},{default:r(()=>[p((d(),f(M,{shadow:"never"},{header:r(()=>[a(l(E),{title:"\u4F1A\u5458\u6027\u522B\u6BD4\u4F8B"})]),default:r(()=>[a(m,{height:300,options:l(x)},null,8,["options"])]),_:1})),[[c,l(u)]])]),_:1})]),_:1})])],64)}}}),[["__scopeId","data-v-9dd2ad6a"]]);export{na as default};
