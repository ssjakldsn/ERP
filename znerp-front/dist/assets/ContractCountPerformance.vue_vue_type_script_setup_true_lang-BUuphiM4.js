import{d as Y,r as C,e as m,n as P,o as p,c as y,f as u,w as n,a as r,y as S,q as f,F as L,p as F,x as I,t as N,K as U,L as k,M as q}from"./index-CIfmhqRC.js";import{E}from"./el-card-DyMugU68.js";import{E as T}from"./el-skeleton-item-Dm6LwaUQ.js";import{_ as K}from"./Echart.vue_vue_type_script_setup_true_lang-C-1NoClp.js";import{S as W}from"./performance-B1Yvw-_L.js";const X=Y({name:"ContractCountPerformance",__name:"ContractCountPerformance",props:{queryParams:{}},setup(M,{expose:g}){const b=M,l=C(!1),c=C([]),e=m({grid:{left:20,right:20,bottom:20,containLabel:!0},legend:{},series:[{name:"\u5F53\u6708\u5408\u540C\u6570\u91CF\uFF08\u4E2A\uFF09",type:"line",data:[]},{name:"\u4E0A\u6708\u5408\u540C\u6570\u91CF\uFF08\u4E2A\uFF09",type:"line",data:[]},{name:"\u53BB\u5E74\u540C\u6708\u5408\u540C\u6570\u91CF\uFF08\u4E2A\uFF09",type:"line",data:[]},{name:"\u73AF\u6BD4\u589E\u957F\u7387\uFF08%\uFF09",type:"line",yAxisIndex:1,data:[]},{name:"\u540C\u6BD4\u589E\u957F\u7387\uFF08%\uFF09",type:"line",yAxisIndex:1,data:[]}],toolbox:{feature:{dataZoom:{xAxisIndex:!1},brush:{type:["lineX","clear"]},saveAsImage:{show:!0,name:"\u5BA2\u6237\u603B\u91CF\u5206\u6790"}}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},yAxis:[{type:"value",name:"\u6570\u91CF\uFF08\u4E2A\uFF09",axisTick:{show:!1},axisLabel:{color:"#BDBDBD",formatter:"{value}"},axisLine:{lineStyle:{color:"#BDBDBD"}},splitLine:{show:!0,lineStyle:{color:"#e6e6e6"}}},{type:"value",name:"",axisTick:{alignWithLabel:!0,lineStyle:{width:0}},axisLabel:{color:"#BDBDBD",formatter:"{value}%"},axisLine:{lineStyle:{color:"#BDBDBD"}},splitLine:{show:!0,lineStyle:{color:"#e6e6e6"}}}],xAxis:{type:"category",name:"\u65E5\u671F",data:[]}}),x=async()=>{l.value=!0;const a=await W.getContractCountPerformance(b.queryParams);e.xAxis&&e.xAxis.data&&(e.xAxis.data=a.map(t=>t.time)),e.series&&e.series[0]&&e.series[0].data&&(e.series[0].data=a.map(t=>t.currentMonthCount)),e.series&&e.series[1]&&e.series[1].data&&(e.series[1].data=a.map(t=>t.lastMonthCount),e.series[3].data=a.map(t=>t.lastMonthCount!==0?((t.currentMonthCount-t.lastMonthCount)/t.lastMonthCount*100).toFixed(2):"NULL")),e.series&&e.series[2]&&e.series[2].data&&(e.series[2].data=a.map(t=>t.lastYearCount),e.series[4].data=a.map(t=>t.lastYearCount!==0?((t.currentMonthCount-t.lastYearCount)/t.lastYearCount*100).toFixed(2):"NULL")),c.value=a,D(),l.value=!1},s=m([]),o=m([{title:"\u5F53\u6708\u5408\u540C\u6570\u91CF\u7EDF\u8BA1\uFF08\u4E2A\uFF09"},{title:"\u4E0A\u6708\u5408\u540C\u6570\u91CF\u7EDF\u8BA1\uFF08\u4E2A\uFF09"},{title:"\u53BB\u5E74\u5F53\u6708\u5408\u540C\u6570\u91CF\u7EDF\u8BA1\uFF08\u4E2A\uFF09"},{title:"\u73AF\u6BD4\u589E\u957F\u7387\uFF08%\uFF09"},{title:"\u540C\u6BD4\u589E\u957F\u7387\uFF08%\uFF09"}]),D=()=>{s.splice(0,s.length),s.push({label:"\u65E5\u671F",prop:"title"}),c.value.forEach((a,t)=>{const d={label:a.time,prop:"prop"+t};s.push(d),o[0]["prop"+t]=a.currentMonthCount,o[1]["prop"+t]=a.lastMonthCount,o[2]["prop"+t]=a.lastYearCount,o[3]["prop"+t]=a.lastMonthCount!==0?((a.currentMonthCount-a.lastMonthCount)/a.lastMonthCount*100).toFixed(2):"NULL",o[4]["prop"+t]=a.lastYearCount!==0?((a.currentMonthCount-a.lastYearCount)/a.lastYearCount*100).toFixed(2):"NULL"})};return g({loadData:x}),P(async()=>{await x()}),(a,t)=>{const d=K,v=T,h=E,w=U,B=k,A=q;return p(),y(L,null,[u(h,{shadow:"never"},{default:n(()=>[u(v,{loading:r(l),animated:""},{default:n(()=>[u(d,{height:500,options:r(e)},null,8,["options"])]),_:1},8,["loading"])]),_:1}),u(h,{shadow:"never",class:"mt-16px"},{default:n(()=>[S((p(),f(B,{data:r(o)},{default:n(()=>[(p(!0),y(L,null,F(r(s),i=>(p(),f(w,{key:i.prop,label:i.label,prop:i.prop,align:"center"},{default:n(_=>[I(N(_.row[i.prop]),1)]),_:2},1032,["label","prop"]))),128))]),_:1},8,["data"])),[[A,r(l)]])]),_:1})],64)}}});export{X as _};
