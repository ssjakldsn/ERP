import{d as h,N as w,r as o,u as q,n as D,o as u,c as F,y as P,a,q as R,w as t,x as Q,a5 as W,f as i,F as j,z as H,I as N,l as S,m as $,E as G,M as J}from"./index-CIfmhqRC.js";import{g as K,_ as O}from"./index-Bm5JfAS4.js";import{u as U}from"./tagsView-CqxiFcdS.js";import{a as X}from"./index-CvUtKmzr.js";import{_ as Y}from"./ReceivableDetailsHeader.vue_vue_type_script_setup_true_lang-Gq525hgE.js";import{_ as Z}from"./ReceivableDetailsInfo.vue_vue_type_script_setup_true_lang-DCnH-FZ4.js";import{_ as aa}from"./PermissionList.vue_vue_type_script_setup_true_lang-BJ8SS8cZ.js";import{B as z}from"./index-8CYEcIk3.js";import{_ as ea}from"./ReceivableForm.vue_vue_type_script_setup_true_lang-Cav8NmDw.js";import"./el-timeline-item-r9TewDuU.js";import"./formatTime-DFFN_xWx.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import"./el-card-DyMugU68.js";import"./el-descriptions-item-BL6ba85F.js";import"./el-collapse-item-BgajxfOI.js";import"./DictTag.vue_vue_type_script_lang-CTpVFm77.js";import"./color-BN7ZL7BD.js";import"./PermissionForm.vue_vue_type_script_setup_true_lang-BA269V0x.js";import"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import"./index-QrlE36WK.js";import"./index-DdHHUXAi.js";import"./index-BZptzjxi.js";import"./index-jPQDaA_X.js";const ia=h({name:"CrmReceivablePlanDetail",__name:"index",props:{id:{}},setup(E){const C=E,g=w(),k=H(),p=o(0),s=o(!0),r=o({}),f=o(),d=async e=>{s.value=!0;try{r.value=await X(e),await x(e)}finally{s.value=!1}},c=o(),_=o([]),x=async e=>{if(!e)return;const l=await K({bizType:z.CRM_RECEIVABLE,bizId:e});_.value=l.list},{delView:I}=U(),{currentRoute:L}=q(),v=()=>{I(a(L))};return w(),D(async()=>{const e=C.id||g.params.id;if(!e)return k.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u56DE\u6B3E\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void v();p.value=e,await d(p.value)}),(e,l)=>{const B=N,m=S,M=O,V=$,A=G,T=J;return u(),F(j,null,[P((u(),R(Y,{receivable:a(r)},{default:t(()=>{var n;return[(n=a(f))!=null&&n.validateWrite?(u(),R(B,{key:0,onClick:l[0]||(l[0]=ta=>{return b="update",y=a(r).id,void c.value.open(b,y);var b,y})},{default:t(()=>[Q(" \u7F16\u8F91 ")]),_:1})):W("",!0)]}),_:1},8,["receivable"])),[[T,a(s)]]),i(A,null,{default:t(()=>[i(V,null,{default:t(()=>[i(m,{label:"\u8BE6\u7EC6\u8D44\u6599"},{default:t(()=>[i(Z,{receivable:a(r)},null,8,["receivable"])]),_:1}),i(m,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:t(()=>[i(M,{"log-list":a(_)},null,8,["log-list"])]),_:1}),i(m,{label:"\u56E2\u961F\u6210\u5458"},{default:t(()=>[i(aa,{ref_key:"permissionListRef",ref:f,"biz-id":a(r).id,"biz-type":a(z).CRM_RECEIVABLE,"show-action":!0,onQuitTeam:v},null,8,["biz-id","biz-type"])]),_:1})]),_:1})]),_:1}),i(ea,{ref_key:"formRef",ref:c,onSuccess:l[1]||(l[1]=n=>d(a(r).id))},null,512)],64)}}});export{ia as default};
