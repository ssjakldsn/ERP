import{b8 as me,b9 as Y,d1 as ge,bb as K,d as M,r as F,b4 as I,a3 as E,c8 as N,cY as be,be as A,a as T,ar as ee,bx as we,aT as $,d2 as _,as as h,o as S,q as O,w as g,f as C,aU as he,aV as ye,d3 as oe,bO as L,aw as Ie,I as ne,b0 as Ee,d4 as Fe,aL as Ce,d5 as Re,bm as te,bW as ke,d6 as Te,aq as le,ba as q,bP as _e,bl as xe,d7 as Se,cy as Be,bY as $e,c as U,c9 as De,am as H,W as J,a5 as V,d8 as re,d9 as Pe,da as Ke,g as Me,a_ as Le,a$ as j,F as Ge,db as ae,dc as Oe,dd as ie,de as ze,df as Ae,dg as He,at as Ne,dh as Ue,di as We,bc as Ye,bf as de}from"./index-CIfmhqRC.js";const qe=me({style:{type:Y([String,Array,Object])},currentTabId:{type:Y(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Y(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Je,ElCollectionItem:Ve,COLLECTION_INJECTION_KEY:Q,COLLECTION_ITEM_INJECTION_KEY:je}=ge("RovingFocusGroup"),X=Symbol("elRovingFocusGroup"),se=Symbol("elRovingFocusGroupItem"),Qe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Z=e=>{const{activeElement:r}=document;for(const c of e)if(c===r||(c.focus(),r!==document.activeElement))return},ue="currentTabIdChange",ce="rovingFocusGroup.entryFocus",Xe={bubbles:!1,cancelable:!0},Ze=M({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:qe,emits:[ue,"entryFocus"],setup(e,{emit:r}){var c;const a=F((c=e.currentTabId||e.defaultCurrentTabId)!=null?c:null),p=F(!1),u=F(!1),d=F(null),{getItems:i}=I(Q,void 0),v=E(()=>[{outline:"none"},e.style]),b=_(n=>{var l;(l=e.onMousedown)==null||l.call(e,n)},()=>{u.value=!0}),w=_(n=>{var l;(l=e.onFocus)==null||l.call(e,n)},n=>{const l=!T(u),{target:f,currentTarget:y}=n;if(f===y&&l&&!T(p)){const D=new Event(ce,Xe);if(y==null||y.dispatchEvent(D),!D.defaultPrevented){const R=i().filter(m=>m.focusable),x=[R.find(m=>m.active),R.find(m=>m.id===T(a)),...R].filter(Boolean).map(m=>m.ref);Z(x)}}u.value=!1}),t=_(n=>{var l;(l=e.onBlur)==null||l.call(e,n)},()=>{p.value=!1});N(X,{currentTabbedId:be(a),loop:A(e,"loop"),tabIndex:E(()=>T(p)?-1:0),rovingFocusGroupRef:d,rovingFocusGroupRootStyle:v,orientation:A(e,"orientation"),dir:A(e,"dir"),onItemFocus:n=>{r(ue,n)},onItemShiftTab:()=>{p.value=!0},onBlur:t,onFocus:w,onMousedown:b}),ee(()=>e.currentTabId,n=>{a.value=n??null}),we(d,ce,(...n)=>{r("entryFocus",...n)})}});var eo=K(M({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Je,ElRovingFocusGroupImpl:K(Ze,[["render",function(e,r,c,a,p,u){return $(e.$slots,"default")}],["__file","roving-focus-group-impl.vue"]])}}),[["render",function(e,r,c,a,p,u){const d=h("el-roving-focus-group-impl"),i=h("el-focus-group-collection");return S(),O(i,null,{default:g(()=>[C(d,he(ye(e.$attrs)),{default:g(()=>[$(e.$slots,"default")]),_:3},16)]),_:3})}],["__file","roving-focus-group.vue"]]),oo=K(M({components:{ElRovingFocusCollectionItem:Ve},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:r}){const{currentTabbedId:c,loop:a,onItemFocus:p,onItemShiftTab:u}=I(X,void 0),{getItems:d}=I(Q,void 0),i=oe(),v=F(null),b=_(l=>{r("mousedown",l)},l=>{e.focusable?p(T(i)):l.preventDefault()}),w=_(l=>{r("focus",l)},()=>{p(T(i))}),t=_(l=>{r("keydown",l)},l=>{const{key:f,shiftKey:y,target:D,currentTarget:R}=l;if(f===L.tab&&y)return void u();if(D!==R)return;const x=(o=>{const s=o.key;return Qe[s]})(l);if(x){l.preventDefault();let o=d().filter(s=>s.focusable).map(s=>s.ref);switch(x){case"last":o.reverse();break;case"prev":case"next":{x==="prev"&&o.reverse();const s=o.indexOf(R);o=a.value?(B=s+1,(m=o).map((k,P)=>m[(P+B)%m.length])):o.slice(s+1);break}}Ie(()=>{Z(o)})}var m,B}),n=E(()=>c.value===T(i));return N(se,{rovingFocusGroupItemRef:v,tabIndex:E(()=>T(n)?0:-1),handleMousedown:b,handleFocus:w,handleKeydown:t}),{id:i,handleKeydown:t,handleFocus:w,handleMousedown:b}}}),[["render",function(e,r,c,a,p,u){const d=h("el-roving-focus-collection-item");return S(),O(d,{id:e.id,focusable:e.focusable,active:e.active},{default:g(()=>[$(e.$slots,"default")]),_:3},8,["id","focusable","active"])}],["__file","roving-focus-item.vue"]]);const W=Symbol("elDropdown"),{ButtonGroup:no}=ne;var to=K(M({name:"ElDropdown",components:{ElButton:ne,ElButtonGroup:no,ElScrollbar:Ee,ElDropdownCollection:Fe,ElTooltip:Ce,ElRovingFocusGroup:eo,ElOnlyChild:Re,ElIcon:te,ArrowDown:ke},props:Te,emits:["visible-change","click","command"],setup(e,{emit:r}){const c=le(),a=q("dropdown"),{t:p}=_e(),u=F(),d=F(),i=F(null),v=F(null),b=F(null),w=F(null),t=F(!1),n=[L.enter,L.space,L.down],l=E(()=>({maxHeight:xe(e.maxHeight)})),f=E(()=>[a.m(m.value)]),y=E(()=>Se(e.trigger)),D=oe().value,R=E(()=>e.id||D);function x(){var o;(o=i.value)==null||o.onClose()}ee([u,y],([o,s],[k])=>{var P,z,G;(P=k==null?void 0:k.$el)!=null&&P.removeEventListener&&k.$el.removeEventListener("pointerenter",B),(z=o==null?void 0:o.$el)!=null&&z.removeEventListener&&o.$el.removeEventListener("pointerenter",B),(G=o==null?void 0:o.$el)!=null&&G.addEventListener&&s.includes("hover")&&o.$el.addEventListener("pointerenter",B)},{immediate:!0}),Be(()=>{var o,s;(s=(o=u.value)==null?void 0:o.$el)!=null&&s.removeEventListener&&u.value.$el.removeEventListener("pointerenter",B)});const m=$e();function B(){var o,s;(s=(o=u.value)==null?void 0:o.$el)==null||s.focus()}return N(W,{contentRef:v,role:E(()=>e.role),triggerId:R,isUsingKeyboard:t,onItemEnter:function(){},onItemLeave:function(){const o=T(v);y.value.includes("hover")&&(o==null||o.focus()),w.value=null}}),N("elDropdown",{instance:c,dropdownSize:m,handleClick:function(){x()},commandHandler:function(...o){r("command",...o)},trigger:A(e,"trigger"),hideOnClick:A(e,"hideOnClick")}),{t:p,ns:a,scrollbar:b,wrapStyle:l,dropdownTriggerKls:f,dropdownSize:m,triggerId:R,triggerKeys:n,currentTabId:w,handleCurrentTabIdChange:function(o){w.value=o},handlerMainButtonClick:o=>{r("click",o)},handleEntryFocus:function(o){t.value||(o.preventDefault(),o.stopImmediatePropagation())},handleClose:x,handleOpen:function(){var o;(o=i.value)==null||o.onOpen()},handleBeforeShowTooltip:function(){r("visible-change",!0)},handleShowTooltip:function(o){(o==null?void 0:o.type)==="keydown"&&v.value.focus()},handleBeforeHideTooltip:function(){r("visible-change",!1)},onFocusAfterTrapped:o=>{var s,k;o.preventDefault(),(k=(s=v.value)==null?void 0:s.focus)==null||k.call(s,{preventScroll:!0})},popperRef:i,contentRef:v,triggeringElementRef:u,referenceElementRef:d}}}),[["render",function(e,r,c,a,p,u){var d;const i=h("el-dropdown-collection"),v=h("el-roving-focus-group"),b=h("el-scrollbar"),w=h("el-only-child"),t=h("el-tooltip"),n=h("el-button"),l=h("arrow-down"),f=h("el-icon"),y=h("el-button-group");return S(),U("div",{class:J([e.ns.b(),e.ns.is("disabled",e.disabled)])},[C(t,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(d=e.referenceElementRef)==null?void 0:d.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},De({content:g(()=>[C(b,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:g(()=>[C(v,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:g(()=>[C(i,null,{default:g(()=>[$(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:g(()=>[C(w,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:g(()=>[$(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(S(),O(y,{key:0},{default:g(()=>[C(n,H({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:g(()=>[$(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),C(n,H({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:g(()=>[C(f,{class:J(e.ns.e("icon"))},{default:g(()=>[C(l)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):V("v-if",!0)],2)}],["__file","dropdown.vue"]]);const lo=M({name:"DropdownItemImpl",components:{ElIcon:te},props:re,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:r}){const c=q("dropdown"),{role:a}=I(W,void 0),{collectionItemRef:p}=I(Pe,void 0),{collectionItemRef:u}=I(je,void 0),{rovingFocusGroupItemRef:d,tabIndex:i,handleFocus:v,handleKeydown:b,handleMousedown:w}=I(se,void 0),t=ae(p,u,d),n=E(()=>a.value==="menu"?"menuitem":a.value==="navigation"?"link":"button"),l=_(f=>{const{code:y}=f;if(y===L.enter||y===L.space)return f.preventDefault(),f.stopImmediatePropagation(),r("clickimpl",f),!0},b);return{ns:c,itemRef:t,dataset:{[Ke]:""},role:n,tabIndex:i,handleFocus:v,handleKeydown:l,handleMousedown:w}}}),pe=()=>{const e=I("elDropdown",{}),r=E(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:r}};var ve=K(M({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Oe,ElRovingFocusItem:oo,ElDropdownItemImpl:K(lo,[["render",function(e,r,c,a,p,u){const d=h("el-icon");return S(),U(Ge,null,[e.divided?(S(),U("li",H({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):V("v-if",!0),Me("li",H({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:i=>e.$emit("clickimpl",i),onFocus:e.handleFocus,onKeydown:j(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:i=>e.$emit("pointermove",i),onPointerleave:i=>e.$emit("pointerleave",i)}),[e.icon?(S(),O(d,{key:0},{default:g(()=>[(S(),O(Le(e.icon)))]),_:1})):V("v-if",!0),$(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}],["__file","dropdown-item-impl.vue"]])},inheritAttrs:!1,props:re,emits:["pointermove","pointerleave","click"],setup(e,{emit:r,attrs:c}){const{elDropdown:a}=pe(),p=le(),u=F(null),d=E(()=>{var t,n;return(n=(t=T(u))==null?void 0:t.textContent)!=null?n:""}),{onItemEnter:i,onItemLeave:v}=I(W,void 0),b=_(t=>(r("pointermove",t),t.defaultPrevented),ie(t=>{if(e.disabled)return void v(t);const n=t.currentTarget;n===document.activeElement||n.contains(document.activeElement)||(i(t),t.defaultPrevented||n==null||n.focus())})),w=_(t=>(r("pointerleave",t),t.defaultPrevented),ie(v));return{handleClick:_(t=>{if(!e.disabled)return r("click",t),t.type!=="keydown"&&t.defaultPrevented},t=>{var n,l,f;e.disabled?t.stopImmediatePropagation():((n=a==null?void 0:a.hideOnClick)!=null&&n.value&&((l=a.handleClick)==null||l.call(a)),(f=a.commandHandler)==null||f.call(a,e.command,p,t))}),handlePointerMove:b,handlePointerLeave:w,textContent:d,propsAndAttrs:E(()=>({...e,...c}))}}}),[["render",function(e,r,c,a,p,u){var d;const i=h("el-dropdown-item-impl"),v=h("el-roving-focus-item"),b=h("el-dropdown-collection-item");return S(),O(b,{disabled:e.disabled,"text-value":(d=e.textValue)!=null?d:e.textContent},{default:g(()=>[C(v,{focusable:!e.disabled},{default:g(()=>[C(i,H(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:g(()=>[$(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}],["__file","dropdown-item.vue"]]),fe=K(M({name:"ElDropdownMenu",props:ze,setup(e){const r=q("dropdown"),{_elDropdownSize:c}=pe(),a=c.value,{focusTrapRef:p,onKeydown:u}=I(Ae,void 0),{contentRef:d,role:i,triggerId:v}=I(W,void 0),{collectionRef:b,getItems:w}=I(He,void 0),{rovingFocusGroupRef:t,rovingFocusGroupRootStyle:n,tabIndex:l,onBlur:f,onFocus:y,onMousedown:D}=I(X,void 0),{collectionRef:R}=I(Q,void 0),x=E(()=>[r.b("menu"),r.bm("menu",a==null?void 0:a.value)]),m=ae(d,b,p,t,R),B=_(o=>{var s;(s=e.onKeydown)==null||s.call(e,o)},o=>{const{currentTarget:s,code:k,target:P}=o;if(s.contains(P),L.tab===k&&o.stopImmediatePropagation(),o.preventDefault(),P!==T(d)||!Ue.includes(k))return;const z=w().filter(G=>!G.disabled).map(G=>G.ref);We.includes(k)&&z.reverse(),Z(z)});return{size:a,rovingFocusGroupRootStyle:n,tabIndex:l,dropdownKls:x,role:i,triggerId:v,dropdownListWrapperRef:m,handleKeydown:o=>{B(o),u(o)},onBlur:f,onFocus:y,onMousedown:D}}}),[["render",function(e,r,c,a,p,u){return S(),U("ul",{ref:e.dropdownListWrapperRef,class:J(e.dropdownKls),style:Ne(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:e.onBlur,onFocus:e.onFocus,onKeydown:j(e.handleKeydown,["self"]),onMousedown:j(e.onMousedown,["self"])},[$(e.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}],["__file","dropdown-menu.vue"]]);const ro=Ye(to,{DropdownItem:ve,DropdownMenu:fe}),ao=de(ve),io=de(fe);export{ao as E,io as a,ro as b};
