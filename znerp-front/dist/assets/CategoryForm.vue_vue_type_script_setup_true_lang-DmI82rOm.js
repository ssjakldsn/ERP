import{d as J,h as P,z as Q,r as o,e as R,o as d,q as p,w as t,f as u,a,x as v,y as j,c as k,F as w,p as x,Q as G,D as H,t as K,k as W,g as X,A as Y,B as Z,C as $,U as ee,cl as ae,cc as le,ak as se,al as te,J as ue,I as re,M as oe}from"./index-CIfmhqRC.js";import{_ as de}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{C}from"./constants-A8BI3pz7.js";import{a as ie,g as me,c as ne,u as pe}from"./category-CKOb63Br.js";const ce=X("div",{style:{"font-size":"10px"},class:"pl-10px"},"\u63A8\u8350 180x180 \u56FE\u7247\u5206\u8FA8\u7387",-1),fe=J({name:"ProductCategory",__name:"CategoryForm",emits:["success"],setup(ve,{expose:h,emit:q}){const{t:f}=P(),g=Q(),i=o(!1),b=o(""),m=o(!1),V=o(""),s=o({id:void 0,name:"",picUrl:"",status:C.ENABLE}),I=R({parentId:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u5206\u7C7B",trigger:"blur"}],name:[{required:!0,message:"\u5206\u7C7B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],picUrl:[{required:!0,message:"\u5206\u7C7B\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u5206\u7C7B\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u5F00\u542F\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=o(),_=o([]);h({open:async(r,l)=>{if(i.value=!0,b.value=f("action."+r),V.value=r,B(),l){m.value=!0;try{s.value=await ie(l)}finally{m.value=!1}}_.value=await me({parentId:0})}});const S=q,A=async()=>{if(c&&await c.value.validate()){m.value=!0;try{const r=s.value;V.value==="create"?(await ne(r),g.success(f("common.createSuccess"))):(await pe(r),g.success(f("common.updateSuccess"))),i.value=!1,S("success")}finally{m.value=!1}}},B=()=>{var r;s.value={id:void 0,name:"",picUrl:"",status:C.ENABLE},(r=c.value)==null||r.resetFields()};return(r,l)=>{const y=Y,E=Z,n=$,F=ee,M=ae,N=le,L=se,O=te,z=ue,U=re,D=de,T=oe;return d(),p(D,{title:a(b),modelValue:a(i),"onUpdate:modelValue":l[6]||(l[6]=e=>W(i)?i.value=e:null)},{footer:t(()=>[u(U,{onClick:A,type:"primary",disabled:a(m)},{default:t(()=>[v("\u786E \u5B9A")]),_:1},8,["disabled"]),u(U,{onClick:l[5]||(l[5]=e=>i.value=!1)},{default:t(()=>[v("\u53D6 \u6D88")]),_:1})]),default:t(()=>[j((d(),p(z,{ref_key:"formRef",ref:c,model:a(s),rules:a(I),"label-width":"120px"},{default:t(()=>[u(n,{label:"\u4E0A\u7EA7\u5206\u7C7B",prop:"parentId"},{default:t(()=>[u(E,{modelValue:a(s).parentId,"onUpdate:modelValue":l[0]||(l[0]=e=>a(s).parentId=e),placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u5206\u7C7B"},{default:t(()=>[(d(),p(y,{key:0,label:"\u9876\u7EA7\u5206\u7C7B",value:0})),(d(!0),k(w,null,x(a(_),e=>(d(),p(y,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(n,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:t(()=>[u(F,{modelValue:a(s).name,"onUpdate:modelValue":l[1]||(l[1]=e=>a(s).name=e),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(n,{label:"\u79FB\u52A8\u7AEF\u5206\u7C7B\u56FE",prop:"picUrl"},{default:t(()=>[u(M,{modelValue:a(s).picUrl,"onUpdate:modelValue":l[2]||(l[2]=e=>a(s).picUrl=e),limit:1,"is-show-tip":!1},null,8,["modelValue"]),ce]),_:1}),u(n,{label:"\u5206\u7C7B\u6392\u5E8F",prop:"sort"},{default:t(()=>[u(N,{modelValue:a(s).sort,"onUpdate:modelValue":l[3]||(l[3]=e=>a(s).sort=e),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1}),u(n,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:t(()=>[u(O,{modelValue:a(s).status,"onUpdate:modelValue":l[4]||(l[4]=e=>a(s).status=e)},{default:t(()=>[(d(!0),k(w,null,x(a(G)(a(H).COMMON_STATUS),e=>(d(),p(L,{key:e.value,value:e.value},{default:t(()=>[v(K(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[T,a(m)]])]),_:1},8,["title","modelValue"])}}});export{fe as _};
