import{d as D,h as M,z,r as c,e as H,o as q,q as I,w as o,f as e,a,x as m,y as J,g,k as j,U as L,C as R,H as B,aL as E,J as G,I as N,M as O}from"./index-CIfmhqRC.js";import{_ as P}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{g as Q,c as T,u as W}from"./index-Dsi5T0R-.js";const X=D({name:"MpAccountForm",__name:"AccountForm",emits:["success"],setup(Y,{expose:S,emit:h}){const{t:f}=M(),y=z(),n=c(!1),_=c(""),s=c(!1),b=c(""),t=c({id:void 0,name:"",account:"",appId:"",appSecret:"",token:"",aesKey:"",remark:""}),w=H({name:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],account:[{required:!0,message:"\u516C\u4F17\u53F7\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],appId:[{required:!0,message:"\u516C\u4F17\u53F7 appId \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],appSecret:[{required:!0,message:"\u516C\u4F17\u53F7\u5BC6\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],token:[{required:!0,message:"\u516C\u4F17\u53F7 token \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),i=c();S({open:async(p,l)=>{if(n.value=!0,_.value=f("action."+p),b.value=p,K(),l){s.value=!0;try{t.value=await Q(l)}finally{s.value=!1}}}});const x=h,U=async()=>{if(i&&await i.value.validate()){s.value=!0;try{const p=t.value;b.value==="create"?(await T(p),y.success(f("common.createSuccess"))):(await W(p),y.success(f("common.updateSuccess"))),n.value=!1,x("success")}finally{s.value=!1}}},K=()=>{var p;t.value={id:void 0,name:"",account:"",appId:"",appSecret:"",token:"",aesKey:"",remark:""},(p=i.value)==null||p.resetFields()};return(p,l)=>{const d=L,r=R,V=B,v=E,A=G,k=N,C=P,F=O;return q(),I(C,{modelValue:a(n),"onUpdate:modelValue":l[8]||(l[8]=u=>j(n)?n.value=u:null),title:a(_)},{footer:o(()=>[e(k,{disabled:a(s),type:"primary",onClick:U},{default:o(()=>[m("\u786E \u5B9A")]),_:1},8,["disabled"]),e(k,{onClick:l[7]||(l[7]=u=>n.value=!1)},{default:o(()=>[m("\u53D6 \u6D88")]),_:1})]),default:o(()=>[J((q(),I(A,{ref_key:"formRef",ref:i,model:a(t),rules:a(w),"label-width":"120px"},{default:o(()=>[e(r,{label:"\u540D\u79F0",prop:"name"},{default:o(()=>[e(d,{modelValue:a(t).name,"onUpdate:modelValue":l[0]||(l[0]=u=>a(t).name=u),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u5FAE\u4FE1\u53F7",prop:"account"},{label:o(()=>[g("span",null,[e(v,{content:"\u5728\u5FAE\u4FE1\u516C\u4F17\u5E73\u53F0\uFF08mp.weixin.qq.com\uFF09\u7684\u83DC\u5355 [\u8BBE\u7F6E\u4E0E\u5F00\u53D1 - \u516C\u4F17\u53F7\u8BBE\u7F6E - \u8D26\u53F7\u8BE6\u60C5] \u4E2D\u80FD\u627E\u5230\u300C\u5FAE\u4FE1\u53F7\u300D",placement:"top"},{default:o(()=>[e(V,{icon:"ep:question-filled",style:{"vertical-align":"middle"}})]),_:1}),m(" \u5FAE\u4FE1\u53F7 ")])]),default:o(()=>[e(d,{modelValue:a(t).account,"onUpdate:modelValue":l[1]||(l[1]=u=>a(t).account=u),placeholder:"\u8BF7\u8F93\u5165\u5FAE\u4FE1\u53F7"},null,8,["modelValue"])]),_:1}),e(r,{label:"appId",prop:"appId"},{label:o(()=>[g("span",null,[e(v,{content:"\u5728\u5FAE\u4FE1\u516C\u4F17\u5E73\u53F0\uFF08mp.weixin.qq.com\uFF09\u7684\u83DC\u5355 [\u8BBE\u7F6E\u4E0E\u5F00\u53D1 - \u516C\u4F17\u53F7\u8BBE\u7F6E - \u57FA\u672C\u8BBE\u7F6E] \u4E2D\u80FD\u627E\u5230\u300C\u5F00\u53D1\u8005ID(AppID)\u300D",placement:"top"},{default:o(()=>[e(V,{icon:"ep:question-filled",style:{"vertical-align":"middle"}})]),_:1}),m(" appId ")])]),default:o(()=>[e(d,{modelValue:a(t).appId,"onUpdate:modelValue":l[2]||(l[2]=u=>a(t).appId=u),placeholder:"\u8BF7\u8F93\u5165\u516C\u4F17\u53F7 appId"},null,8,["modelValue"])]),_:1}),e(r,{label:"appSecret",prop:"appSecret"},{label:o(()=>[g("span",null,[e(v,{content:"\u5728\u5FAE\u4FE1\u516C\u4F17\u5E73\u53F0\uFF08mp.weixin.qq.com\uFF09\u7684\u83DC\u5355 [\u8BBE\u7F6E\u4E0E\u5F00\u53D1 - \u516C\u4F17\u53F7\u8BBE\u7F6E - \u57FA\u672C\u8BBE\u7F6E] \u4E2D\u80FD\u627E\u5230\u300C\u5F00\u53D1\u8005\u5BC6\u7801(AppSecret)\u300D",placement:"top"},{default:o(()=>[e(V,{icon:"ep:question-filled",style:{"vertical-align":"middle"}})]),_:1}),m(" appSecret ")])]),default:o(()=>[e(d,{modelValue:a(t).appSecret,"onUpdate:modelValue":l[3]||(l[3]=u=>a(t).appSecret=u),placeholder:"\u8BF7\u8F93\u5165\u516C\u4F17\u53F7 appSecret"},null,8,["modelValue"])]),_:1}),e(r,{label:"token",prop:"token"},{default:o(()=>[e(d,{modelValue:a(t).token,"onUpdate:modelValue":l[4]||(l[4]=u=>a(t).token=u),placeholder:"\u8BF7\u8F93\u5165\u516C\u4F17\u53F7token"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u6D88\u606F\u52A0\u89E3\u5BC6\u5BC6\u94A5",prop:"aesKey"},{default:o(()=>[e(d,{modelValue:a(t).aesKey,"onUpdate:modelValue":l[5]||(l[5]=u=>a(t).aesKey=u),placeholder:"\u8BF7\u8F93\u5165\u6D88\u606F\u52A0\u89E3\u5BC6\u5BC6\u94A5"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u5907\u6CE8",prop:"remark"},{default:o(()=>[e(d,{modelValue:a(t).remark,"onUpdate:modelValue":l[6]||(l[6]=u=>a(t).remark=u),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[F,a(s)]])]),_:1},8,["modelValue","title"])}}});export{X as _};
