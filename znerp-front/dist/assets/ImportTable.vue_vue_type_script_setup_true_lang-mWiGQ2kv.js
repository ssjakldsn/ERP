import{d as L,z as M,r as d,e as N,o as f,q as b,w as a,f as e,a as l,x as v,c as P,F as Q,p as D,P as V,y as E,L as G,k as O,A as W,B as X,C as Y,U as Z,H as $,I as ee,J as ae,K as le,j as oe,M as te}from"./index-CIfmhqRC.js";import{_ as se}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{b as de,c as ne}from"./index-Cd9gjVFL.js";import{g as ue}from"./index-CFO_rqkL.js";const me=L({name:"InfraCodegenImportTable",__name:"ImportTable",emits:["success"],setup(re,{expose:x,emit:S}){const k=M(),n=d(!1),_=d(!0),y=d([]),o=N({name:void 0,comment:void 0,dataSourceConfigId:0}),U=d(),m=d([]),u=async()=>{_.value=!0;try{y.value=await de(o)}finally{_.value=!1}},R=async()=>{o.name=void 0,o.comment=void 0,o.dataSourceConfigId=m.value[0].id,await u()};x({open:async()=>{m.value=await ue(),o.dataSourceConfigId=m.value[0].id,n.value=!0,await u()}});const C=()=>{n.value=!1,r.value=[]},g=d(),r=d([]),K=c=>{var t;(t=l(g))==null||t.toggleRowSelection(c)},j=c=>{r.value=c.map(t=>t.name)},q=async()=>{await ne({dataSourceConfigId:o.dataSourceConfigId,tableNames:r.value}),k.success("\u5BFC\u5165\u6210\u529F"),B("success"),C()},B=S;return(c,t)=>{const F=W,T=X,i=Y,h=Z,I=$,p=ee,z=ae,w=le,A=oe,H=se,J=te;return f(),b(H,{modelValue:l(n),"onUpdate:modelValue":t[3]||(t[3]=s=>O(n)?n.value=s:null),title:"\u5BFC\u5165\u8868",width:"800px"},{footer:a(()=>[e(p,{disabled:l(r).length===0,type:"primary",onClick:q},{default:a(()=>[v(" \u5BFC\u5165 ")]),_:1},8,["disabled"]),e(p,{onClick:C},{default:a(()=>[v("\u5173\u95ED")]),_:1})]),default:a(()=>[e(z,{ref_key:"queryFormRef",ref:U,inline:!0,model:l(o),"label-width":"68px"},{default:a(()=>[e(i,{label:"\u6570\u636E\u6E90",prop:"dataSourceConfigId"},{default:a(()=>[e(T,{modelValue:l(o).dataSourceConfigId,"onUpdate:modelValue":t[0]||(t[0]=s=>l(o).dataSourceConfigId=s),class:"!w-240px",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90"},{default:a(()=>[(f(!0),P(Q,null,D(l(m),s=>(f(),b(F,{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"\u8868\u540D\u79F0",prop:"name"},{default:a(()=>[e(h,{modelValue:l(o).name,"onUpdate:modelValue":t[1]||(t[1]=s=>l(o).name=s),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u8868\u540D\u79F0",onKeyup:V(u,["enter"])},null,8,["modelValue"])]),_:1}),e(i,{label:"\u8868\u63CF\u8FF0",prop:"comment"},{default:a(()=>[e(h,{modelValue:l(o).comment,"onUpdate:modelValue":t[2]||(t[2]=s=>l(o).comment=s),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u8868\u63CF\u8FF0",onKeyup:V(u,["enter"])},null,8,["modelValue"])]),_:1}),e(i,null,{default:a(()=>[e(p,{onClick:u},{default:a(()=>[e(I,{class:"mr-5px",icon:"ep:search"}),v(" \u641C\u7D22 ")]),_:1}),e(p,{onClick:R},{default:a(()=>[e(I,{class:"mr-5px",icon:"ep:refresh"}),v(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"]),e(A,null,{default:a(()=>[E((f(),b(l(G),{ref_key:"tableRef",ref:g,data:l(y),height:"260px",onRowClick:K,onSelectionChange:j},{default:a(()=>[e(w,{type:"selection",width:"55"}),e(w,{"show-overflow-tooltip":!0,label:"\u8868\u540D\u79F0",prop:"name"}),e(w,{"show-overflow-tooltip":!0,label:"\u8868\u63CF\u8FF0",prop:"comment"})]),_:1},8,["data"])),[[J,l(_)]])]),_:1})]),_:1},8,["modelValue"])}}});export{me as _};
