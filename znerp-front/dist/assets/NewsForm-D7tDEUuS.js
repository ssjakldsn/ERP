import{z as N,e8 as W,eh as H,d as X,b4 as Y,a3 as S,r as Z,o as d,q as y,w as n,f as e,g as p,c as k,F as D,p as G,a as l,W as z,t as O,a5 as g,k as J,ck as K,H as L,I as Q,j as R,b1 as $,U as ee,E as le,e2 as ae,b5 as te,a0 as oe,a1 as ne,_ as se}from"./index-CIfmhqRC.js";import ie from"./CoverSelect-dbiGXZ3f.js";const x=N(),ce=(v,V)=>({MENU_CONF:{uploadImage:{server:v,maxFileSize:5242880,maxNumberOfFiles:10,allowedFileTypes:["image/*"],meta:{accountId:V,type:"image"},metaWithUrl:!0,headers:{Accept:"*",Authorization:"Bearer "+W(),"tenant-id":H()},withCredentials:!0,timeout:5e3,fieldName:"file",onBeforeUpload:o=>(console.log(o),o),onProgress(o){console.log("progress",o)},onSuccess(o,u){console.log("onSuccess",o,u)},onFailed(o,u){x.alertError(u.message),console.log("onFailed",o,u)},onError(o,u,U){x.alertError(u.message),console.error("onError",o,u,U)},customInsert(o,u){u(o.data.url,"image",o.data.url)}}}}),re=()=>({title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}),ue={class:"select-item"},de=["onClick"],me={class:"news-content"},pe=["src"],ge={class:"news-content-title"},ve={key:0,class:"child"},he=["onClick"],fe={class:"news-content-item"},Ce={class:"news-content-item-title"},ye={class:"news-content-item-img"},ke=["src"],we={class:"child"},_e={key:0},Ve=(v=>(oe("data-v-c4606cac"),v=v(),ne(),v))(()=>p("p",null,"\u6458\u8981:",-1)),Ue=X({name:"NewsForm",__name:"NewsForm",props:{isCreating:{type:Boolean},modelValue:{}},emits:["update:modelValue"],setup(v,{emit:V}){const o=N(),u=v,U=Y("accountId"),E=ce("https://erpapi.vqmjc.cc/admin-api/mp/material/upload-permanent",U),M=V,a=S({get:()=>u.modelValue===null?[{title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}]:u.modelValue,set(s){M("update:modelValue",s)}}),m=Z(0),r=S(()=>a.value[m.value]),b=s=>{const i=a.value[s];a.value[s]=a.value[s+1],a.value[s+1]=i,m.value=s+1},F=async s=>{try{await o.confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u56FE\u6587\u5417?"),a.value.splice(s,1),m.value===s&&(m.value=0)}catch{}},P=()=>{a.value.push({title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}),m.value=a.value.length-1};return(s,i)=>{const f=L,C=Q,w=R,A=$,_=ee,I=le,B=ae,q=te;return d(),y(q,null,{default:n(()=>[e(A,{width:"40%"},{default:n(()=>[p("div",ue,[(d(!0),k(D,null,G(l(a),(t,c)=>(d(),k("div",{key:c},[c===0?(d(),k("div",{key:0,class:z(["news-main father",{activeAddNews:l(m)===c}]),onClick:h=>m.value=c},[p("div",me,[p("img",{class:"material-img",src:t.thumbUrl},null,8,pe),p("div",ge,O(t.title),1)]),l(a).length>1?(d(),k("div",ve,[e(C,{type:"info",circle:"",size:"small",onClick:()=>b(c)},{default:n(()=>[e(f,{icon:"ep:arrow-down-bold"})]),_:2},1032,["onClick"]),s.isCreating?(d(),y(C,{key:0,type:"danger",circle:"",size:"small",onClick:()=>F(c)},{default:n(()=>[e(f,{icon:"ep:delete"})]),_:2},1032,["onClick"])):g("",!0)])):g("",!0)],10,de)):g("",!0),c>0?(d(),k("div",{key:1,class:z(["news-main-item father",{activeAddNews:l(m)===c}]),onClick:h=>m.value=c},[p("div",fe,[p("div",Ce,O(t.title),1),p("div",ye,[p("img",{class:"material-img",src:t.thumbUrl,width:"100%"},null,8,ke)])]),p("div",we,[l(a).length>c+1?(d(),y(C,{key:0,circle:"",type:"info",size:"small",onClick:()=>b(c)},{default:n(()=>[e(f,{icon:"ep:arrow-down-bold"})]),_:2},1032,["onClick"])):g("",!0),c>0?(d(),y(C,{key:1,type:"info",circle:"",size:"small",onClick:()=>(h=>{const T=a.value[h];a.value[h]=a.value[h-1],a.value[h-1]=T,m.value=h-1})(c)},{default:n(()=>[e(f,{icon:"ep:arrow-up-bold"})]),_:2},1032,["onClick"])):g("",!0),s.isCreating?(d(),y(C,{key:2,type:"danger",size:"small",circle:"",onClick:()=>F(c)},{default:n(()=>[e(f,{icon:"ep:delete"})]),_:2},1032,["onClick"])):g("",!0)])],10,he)):g("",!0)]))),128)),e(w,{justify:"center",class:"ope-row"},{default:n(()=>[l(a).length<8&&s.isCreating?(d(),y(C,{key:0,type:"primary",circle:"",onClick:P},{default:n(()=>[e(f,{icon:"ep:plus"})]),_:1})):g("",!0)]),_:1})])]),_:1}),e(B,null,{default:n(()=>[l(a).length>0?(d(),k("div",_e,[e(w,{gutter:20},{default:n(()=>[e(_,{modelValue:l(r).title,"onUpdate:modelValue":i[0]||(i[0]=t=>l(r).title=t),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898\uFF08\u5FC5\u586B\uFF09"},null,8,["modelValue"]),e(_,{modelValue:l(r).author,"onUpdate:modelValue":i[1]||(i[1]=t=>l(r).author=t),placeholder:"\u8BF7\u8F93\u5165\u4F5C\u8005",style:{"margin-top":"5px"}},null,8,["modelValue"]),e(_,{modelValue:l(r).contentSourceUrl,"onUpdate:modelValue":i[2]||(i[2]=t=>l(r).contentSourceUrl=t),placeholder:"\u8BF7\u8F93\u5165\u539F\u6587\u5730\u5740",style:{"margin-top":"5px"}},null,8,["modelValue"])]),_:1}),e(w,{gutter:20},{default:n(()=>[e(I,{span:12},{default:n(()=>[e(ie,{modelValue:l(r),"onUpdate:modelValue":i[3]||(i[3]=t=>J(r)?r.value=t:null),"is-first":l(m)===0},null,8,["modelValue","is-first"])]),_:1}),e(I,{span:12},{default:n(()=>[Ve,e(_,{rows:8,type:"textarea",modelValue:l(r).digest,"onUpdate:modelValue":i[4]||(i[4]=t=>l(r).digest=t),placeholder:"\u8BF7\u8F93\u5165\u6458\u8981",class:"digest",maxlength:"120"},null,8,["modelValue"])]),_:1})]),_:1}),e(w,null,{default:n(()=>[e(l(K),{modelValue:l(r).content,"onUpdate:modelValue":i[5]||(i[5]=t=>l(r).content=t),"editor-config":l(E)},null,8,["modelValue","editor-config"])]),_:1})])):g("",!0)]),_:1})]),_:1})}}}),j=se(Ue,[["__scopeId","data-v-c4606cac"]]),be=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"}));export{j as N,be as a,re as c};
