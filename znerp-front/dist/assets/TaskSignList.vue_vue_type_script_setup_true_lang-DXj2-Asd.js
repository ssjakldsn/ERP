import{d as V,r as c,o as f,q as w,w as t,g as A,t as p,a as l,f as a,x as u,a5 as v,D as K,k as j,z as q,ay as U,H as B,I as E,K as F,L as H}from"./index-CIfmhqRC.js";import{E as I}from"./el-drawer-QOxzUn5j.js";import{_ as M}from"./DictTag.vue_vue_type_script_lang-CTpVFm77.js";import{d as b}from"./formatTime-DFFN_xWx.js";import{_ as P}from"./TaskSignDeleteForm.vue_vue_type_script_setup_true_lang-BbO0JK4E.js";const R=V({name:"TaskSignList",__name:"TaskSignList",emits:["success"],setup(G,{expose:S,emit:T}){const x=q(),m=c(!1),n=c({});S({open:async s=>{U(s.children)?x.warning("\u8BE5\u4EFB\u52A1\u6CA1\u6709\u5B50\u4EFB\u52A1"):(n.value=s,m.value=!0)}});const _=c(),z=T,g=s=>{_.value.open(s.id)},C=()=>{z("success"),m.value=!1},k=s=>s&&s.children&&!U(s.children);return(s,d)=>{const h=B,y=E,o=F,L=M,N=H,D=I;return f(),w(D,{modelValue:l(m),"onUpdate:modelValue":d[1]||(d[1]=e=>j(m)?m.value=e:null),title:"\u5B50\u4EFB\u52A1",size:"880px"},{header:t(()=>{var e,r;return[A("h4",null,"\u3010"+p(l(n).name)+" \u3011\u5BA1\u6279\u4EBA\uFF1A"+p((r=(e=l(n))==null?void 0:e.assigneeUser)==null?void 0:r.nickname),1),k(l(n))?(f(),w(y,{key:0,style:{"margin-left":"5px"},type:"danger",plain:"",onClick:d[0]||(d[0]=i=>g(l(n)))},{default:t(()=>[a(h,{icon:"ep:remove"}),u(" \u51CF\u7B7E ")]),_:1})):v("",!0)]}),default:t(()=>[a(N,{data:l(n).children,style:{width:"100%"},"row-key":"id",border:""},{default:t(()=>[a(o,{prop:"assigneeUser.nickname",label:"\u5BA1\u6279\u4EBA","min-width":"100"},{default:t(e=>{var r,i;return[u(p(((r=e.row.assigneeUser)==null?void 0:r.nickname)||((i=e.row.ownerUser)==null?void 0:i.nickname)),1)]}),_:1}),a(o,{prop:"assigneeUser.deptName",label:"\u6240\u5728\u90E8\u95E8","min-width":"100"},{default:t(e=>{var r,i;return[u(p(((r=e.row.assigneeUser)==null?void 0:r.deptName)||((i=e.row.ownerUser)==null?void 0:i.deptName)),1)]}),_:1}),a(o,{label:"\u5BA1\u6279\u72B6\u6001",prop:"status",width:"120"},{default:t(e=>[a(L,{type:l(K).BPM_TASK_STATUS,value:e.row.status},null,8,["type","value"])]),_:1}),a(o,{label:"\u63D0\u4EA4\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:l(b)},null,8,["formatter"]),a(o,{label:"\u7ED3\u675F\u65F6\u95F4",align:"center",prop:"endTime",width:"180",formatter:l(b)},null,8,["formatter"]),a(o,{label:"\u64CD\u4F5C",prop:"operation",width:"90"},{default:t(e=>[k(e.row)?(f(),w(y,{key:0,type:"danger",plain:"",size:"small",onClick:r=>g(e.row)},{default:t(()=>[a(h,{icon:"ep:remove"}),u(" \u51CF\u7B7E ")]),_:2},1032,["onClick"])):v("",!0)]),_:1})]),_:1},8,["data"]),a(P,{ref_key:"taskSignDeleteFormRef",ref:_,onSuccess:C},null,512)]),_:1},8,["modelValue"])}}});export{R as _};
