import{d as T,r as d,o as m,q as f,w as r,f as u,x as g,a,y as q,c as B,p as A,F as J,k as j,A as D,B as M,C as R,U as z,J as E,I as G,M as H}from"./index-CIfmhqRC.js";import{_ as K}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{t as L}from"./index-C9Urw_yh.js";import{g as N}from"./index-QrlE36WK.js";const O=T({name:"TaskTransferForm",__name:"TaskTransferForm",emits:["success"],setup(P,{expose:_,emit:b}){const o=d(!1),i=d(!1),l=d({id:"",assigneeUserId:void 0,reason:""}),y=d({assigneeUserId:[{required:!0,message:"\u65B0\u5BA1\u6279\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],reason:[{required:!0,message:"\u8F6C\u6D3E\u7406\u7531\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),n=d(),p=d([]);_({open:async t=>{o.value=!0,k(),l.value.id=t,p.value=await N()}});const U=b,V=async()=>{if(n&&await n.value.validate()){i.value=!0;try{await L(l.value),o.value=!1,U("success")}finally{i.value=!1}}},k=()=>{var t;l.value={id:"",assigneeUserId:void 0,reason:""},(t=n.value)==null||t.resetFields()};return(t,s)=>{const w=D,I=M,c=R,h=z,x=E,v=G,C=K,F=H;return m(),f(C,{modelValue:a(o),"onUpdate:modelValue":s[3]||(s[3]=e=>j(o)?o.value=e:null),title:"\u8F6C\u6D3E\u4EFB\u52A1",width:"500"},{footer:r(()=>[u(v,{disabled:a(i),type:"primary",onClick:V},{default:r(()=>[g("\u786E \u5B9A")]),_:1},8,["disabled"]),u(v,{onClick:s[2]||(s[2]=e=>o.value=!1)},{default:r(()=>[g("\u53D6 \u6D88")]),_:1})]),default:r(()=>[q((m(),f(x,{ref_key:"formRef",ref:n,model:a(l),rules:a(y),"label-width":"110px"},{default:r(()=>[u(c,{label:"\u65B0\u5BA1\u6279\u4EBA",prop:"assigneeUserId"},{default:r(()=>[u(I,{modelValue:a(l).assigneeUserId,"onUpdate:modelValue":s[0]||(s[0]=e=>a(l).assigneeUserId=e),clearable:"",style:{width:"100%"}},{default:r(()=>[(m(!0),B(J,null,A(a(p),e=>(m(),f(w,{key:e.id,label:e.nickname,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(c,{label:"\u8F6C\u6D3E\u7406\u7531",prop:"reason"},{default:r(()=>[u(h,{modelValue:a(l).reason,"onUpdate:modelValue":s[1]||(s[1]=e=>a(l).reason=e),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u8F6C\u6D3E\u7406\u7531"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[F,a(i)]])]),_:1},8,["modelValue"])}}});export{O as _};
