import{d as G,e as H,b as S,r as m,a3 as j,ar as K,n as L,o as b,c as x,f as e,w as t,a as r,F as h,p as M,q as N,x as q,k as T,G as W,C as $,A as O,B as Q,H as X,I as Z,J as ee,l as ae,m as le,E as re}from"./index-CIfmhqRC.js";import{_ as te}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{E as oe}from"./el-tree-select-CYFGeiEt.js";import{g as se}from"./index-C34hh2Ad.js";import{g as me}from"./index-QrlE36WK.js";import{f as i,e as g,g as R}from"./formatTime-DFFN_xWx.js";import{h as Y,d as ue}from"./tree-BMqZf9_I.js";import{_ as de}from"./ContractCountPerformance.vue_vue_type_script_setup_true_lang-BUuphiM4.js";import{_ as ne}from"./ContractPricePerformance.vue_vue_type_script_setup_true_lang-CWkg-bXS.js";import{_ as pe}from"./ReceivablePricePerformance.vue_vue_type_script_setup_true_lang-BReJqVO-.js";import"./el-card-DyMugU68.js";import"./el-skeleton-item-Dm6LwaUQ.js";import"./Echart.vue_vue_type_script_setup_true_lang-C-1NoClp.js";import"./echarts-D6KrxhA1.js";import"./performance-B1Yvw-_L.js";const ce=G({name:"CrmStatisticsCustomer",__name:"index",setup(fe){const a=H({deptId:S().getUser.deptId,userId:void 0,times:[i(g(new Date(new Date().getFullYear(),0,1))),i(R(new Date(new Date().getFullYear(),11,31)))]}),v=m(),C=m([]),P=m([]),F=j(()=>a.deptId?P.value.filter(n=>n.deptId===a.deptId):[]),d=m("ContractCountPerformance"),w=m(),I=m(),k=m(),_=()=>{var l,p,s,c,u,f;const n=parseInt(a.times[0]);switch(a.times[0]=i(g(new Date(n,0,1))),a.times[1]=i(R(new Date(n,11,31))),d.value){case"ContractCountPerformance":(p=(l=w.value)==null?void 0:l.loadData)==null||p.call(l);break;case"ContractPricePerformance":(c=(s=I.value)==null?void 0:s.loadData)==null||c.call(s);break;case"ReceivablePricePerformance":(f=(u=k.value)==null?void 0:u.loadData)==null||f.call(u)}};K(d,()=>{_()});const U=()=>{v.value.resetFields(),_()};return L(async()=>{C.value=Y(await se()),P.value=Y(await me())}),(n,l)=>{const p=W,s=$,c=oe,u=O,f=Q,D=X,V=Z,z=ee,B=te,y=ae,E=le,J=re;return b(),x(h,null,[e(B,null,{default:t(()=>[e(z,{class:"-mb-15px",model:r(a),ref_key:"queryFormRef",ref:v,inline:!0,"label-width":"68px"},{default:t(()=>[e(s,{label:"\u9009\u62E9\u5E74\u4EFD",prop:"orderDate"},{default:t(()=>[e(p,{modelValue:r(a).times[0],"onUpdate:modelValue":l[0]||(l[0]=o=>r(a).times[0]=o),class:"!w-240px",type:"year","value-format":"YYYY","default-time":[new Date().getFullYear()]},null,8,["modelValue","default-time"])]),_:1}),e(s,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"deptId"},{default:t(()=>[e(c,{modelValue:r(a).deptId,"onUpdate:modelValue":l[1]||(l[1]=o=>r(a).deptId=o),class:"!w-240px",data:r(C),props:r(ue),"check-strictly":"","node-key":"id",placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E\u90E8\u95E8",onChange:l[2]||(l[2]=o=>r(a).userId=void 0)},null,8,["modelValue","data","props"])]),_:1}),e(s,{label:"\u5458\u5DE5",prop:"userId"},{default:t(()=>[e(f,{modelValue:r(a).userId,"onUpdate:modelValue":l[3]||(l[3]=o=>r(a).userId=o),class:"!w-240px",placeholder:"\u5458\u5DE5",clearable:""},{default:t(()=>[(b(!0),x(h,null,M(r(F),(o,A)=>(b(),N(u,{label:o.nickname,value:o.id,key:A},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(V,{onClick:_},{default:t(()=>[e(D,{icon:"ep:search",class:"mr-5px"}),q(" \u641C\u7D22 ")]),_:1}),e(V,{onClick:U},{default:t(()=>[e(D,{icon:"ep:refresh",class:"mr-5px"}),q(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(J,null,{default:t(()=>[e(E,{modelValue:r(d),"onUpdate:modelValue":l[4]||(l[4]=o=>T(d)?d.value=o:null)},{default:t(()=>[e(y,{label:"\u5458\u5DE5\u5408\u540C\u6570\u91CF\u7EDF\u8BA1",name:"ContractCountPerformance",lazy:""},{default:t(()=>[e(de,{"query-params":r(a),ref_key:"ContractCountPerformanceRef",ref:w},null,8,["query-params"])]),_:1}),e(y,{label:"\u5458\u5DE5\u5408\u540C\u91D1\u989D\u7EDF\u8BA1",name:"ContractPricePerformance",lazy:""},{default:t(()=>[e(ne,{"query-params":r(a),ref_key:"ContractPricePerformanceRef",ref:I},null,8,["query-params"])]),_:1}),e(y,{label:"\u5458\u5DE5\u56DE\u6B3E\u91D1\u989D\u7EDF\u8BA1",name:"ReceivablePricePerformance",lazy:""},{default:t(()=>[e(pe,{"query-params":r(a),ref_key:"ReceivablePricePerformanceRef",ref:k},null,8,["query-params"])]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}});export{ce as default};
