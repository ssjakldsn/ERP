import{d as S,h as j,z as D,r as n,e as I,o as _,q as N,w as o,f as t,a as l,x as c,y as J,k as M,U as R,C as Z,ae as B,ca as E,J as G,I as H,M as K}from"./index-CIfmhqRC.js";import{_ as L}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{Z as C}from"./index-H3f_2XHj.js";const O=S({name:"ClearancelForm",__name:"ClearancelForm",emits:["success"],setup(P,{expose:U,emit:x}){const{t:g}=j(),b=D(),r=n(!1),f=n(""),i=n(!1),h=n(""),a=n({id:void 0,name:"",zhName:"",enName:"",taxAmount:"",grossWeight:"",material:"",used:"",customsCode:"",attributes:[]}),y=I({name:[{required:!0,message:"\u81EA\u5B9A\u4E49\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],zhName:[{required:!0,message:"\u4E2D\u6587\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],enName:[{required:!0,message:"\u82F1\u6587\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],taxAmount:[{required:!0,message:"\u7533\u62A5\u91D1\u989D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],grossWeight:[{required:!0,message:"\u7533\u62A5\u91CD\u91CF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),p=n(),z=()=>{var s;a.value={id:void 0,name:"",zhName:"",enName:"",taxAmount:"",grossWeight:"",material:"",used:"",customsCode:"",attributes:[]},(s=p.value)==null||s.resetFields()};U({open:async(s,e)=>{if(r.value=!0,f.value=g("action."+s),h.value=s,z(),e){i.value=!0;try{a.value={id:e.id,name:e.name,zhName:e.zhName,enName:e.enName,taxAmount:e.taxAmount,grossWeight:e.grossWeight,material:e.material,used:e.used,customsCode:e.customsCode,attributes:e.attributes.split(",")}}finally{i.value=!1}}}});const A=x,W=async()=>{if(p&&await p.value.validate()){i.value=!0;try{let s={...a.value,attributes:a.value.attributes.join(",")};h.value==="create"?(await C.logisticsCustomsCreate(s),b.success(g("common.createSuccess"))):(await C.logisticsCustomsUpdate(s),b.success(g("common.updateSuccess"))),r.value=!1,A("success")}finally{i.value=!1}}};return(s,e)=>{const d=R,m=Z,V=B,q=E,w=G,v=H,k=L,F=K;return _(),N(k,{modelValue:l(r),"onUpdate:modelValue":e[10]||(e[10]=u=>M(r)?r.value=u:null),title:l(f)},{footer:o(()=>[t(v,{disabled:l(i),type:"primary",onClick:W},{default:o(()=>[c("\u786E \u5B9A")]),_:1},8,["disabled"]),t(v,{onClick:e[9]||(e[9]=u=>r.value=!1)},{default:o(()=>[c("\u53D6 \u6D88")]),_:1})]),default:o(()=>[J((_(),N(w,{ref_key:"formRef",ref:p,model:l(a),rules:l(y),"label-width":"110px"},{default:o(()=>[t(m,{label:"\u81EA\u5B9A\u4E49\u540D\u79F0",prop:"name"},{default:o(()=>[t(d,{modelValue:l(a).name,"onUpdate:modelValue":e[0]||(e[0]=u=>l(a).name=u),placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(m,{label:"\u4E2D\u6587\u540D\u79F0",prop:"zhName"},{default:o(()=>[t(d,{modelValue:l(a).zhName,"onUpdate:modelValue":e[1]||(e[1]=u=>l(a).zhName=u),placeholder:"\u8BF7\u8F93\u5165\u4E2D\u6587\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(m,{label:"\u82F1\u6587\u540D\u79F0",prop:"enName"},{default:o(()=>[t(d,{modelValue:l(a).enName,"onUpdate:modelValue":e[2]||(e[2]=u=>l(a).enName=u),placeholder:"\u8BF7\u8F93\u5165\u82F1\u6587\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(m,{label:"\u7533\u62A5\u91D1\u989D",prop:"taxAmount"},{default:o(()=>[t(d,{modelValue:l(a).taxAmount,"onUpdate:modelValue":e[3]||(e[3]=u=>l(a).taxAmount=u),placeholder:"\u8BF7\u8F93\u5165\u7533\u62A5\u91D1\u989D"},{append:o(()=>[c("USD")]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"\u7533\u62A5\u91CD\u91CF",prop:"grossWeight"},{default:o(()=>[t(d,{modelValue:l(a).grossWeight,"onUpdate:modelValue":e[4]||(e[4]=u=>l(a).grossWeight=u),placeholder:"\u8BF7\u8F93\u5165\u7533\u62A5\u91CD\u91CF"},{append:o(()=>[c("g")]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"\u6750\u8D28"},{default:o(()=>[t(d,{modelValue:l(a).material,"onUpdate:modelValue":e[5]||(e[5]=u=>l(a).material=u),placeholder:"\u8BF7\u8F93\u5165\u6750\u8D28"},null,8,["modelValue"])]),_:1}),t(m,{label:"\u7528\u9014"},{default:o(()=>[t(d,{modelValue:l(a).used,"onUpdate:modelValue":e[6]||(e[6]=u=>l(a).used=u),placeholder:"\u8BF7\u8F93\u5165\u7528\u9014"},null,8,["modelValue"])]),_:1}),t(m,{label:"\u6D77\u5173\u7F16\u7801"},{default:o(()=>[t(d,{modelValue:l(a).customsCode,"onUpdate:modelValue":e[7]||(e[7]=u=>l(a).customsCode=u),placeholder:"\u8BF7\u8F93\u5165\u6D77\u5173\u7F16\u7801"},null,8,["modelValue"])]),_:1}),t(m,{label:"\u62A5\u5173\u5C5E\u6027"},{default:o(()=>[t(q,{modelValue:l(a).attributes,"onUpdate:modelValue":e[8]||(e[8]=u=>l(a).attributes=u)},{default:o(()=>[t(V,{label:"\u542B\u7535",value:"1"}),t(V,{label:"\u542B\u975E\u6DB2\u4F53\u5316\u5986\u54C1",value:"2"}),t(V,{label:"\u7279\u8D27 (\u654F\u611F\u8D27) ",value:"3"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[F,l(i)]])]),_:1},8,["modelValue","title"])}}});export{O as _};
