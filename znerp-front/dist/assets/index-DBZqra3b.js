import{d as z,z as A,h as D,r as _,e as H,u as J,n as L,O as N,o as n,c as j,f as a,w as e,a as r,P as B,x as i,y as p,q as c,g as E,D as G,a5 as Q,F as W,U as X,C as Y,H as Z,I as $,J as aa,K as ea,L as la,M as ra}from"./index-CIfmhqRC.js";import{_ as ta}from"./DictTag.vue_vue_type_script_lang-CTpVFm77.js";import{_ as oa}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{_ as sa}from"./index-2RHHZ-Zv.js";import{h as na}from"./tree-BMqZf9_I.js";import{d as ia}from"./formatTime-DFFN_xWx.js";import{g as pa,d as ca}from"./category-CKOb63Br.js";import{_ as da}from"./CategoryForm.vue_vue_type_script_setup_true_lang-DmI82rOm.js";import"./color-BN7ZL7BD.js";import"./el-card-DyMugU68.js";import"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import"./constants-A8BI3pz7.js";const ua=["src"],ma=z({name:"ProductCategory",__name:"index",setup(fa){const g=A(),{t:q}=D(),w=_(!0),C=_([]),d=H({name:void 0}),b=_(),u=async()=>{w.value=!0;try{const m=await pa(d);C.value=na(m,"id","parentId")}finally{w.value=!1}},h=()=>{u()},I=()=>{b.value.resetFields(),h()},x=_(),v=(m,t)=>{x.value.open(m,t)},M=J();return L(()=>{u()}),(m,t)=>{const F=sa,O=X,P=Y,k=Z,o=$,R=aa,S=oa,s=ea,T=ta,V=la,f=N("hasPermi"),K=ra;return n(),j(W,null,[a(F,{title:"\u3010\u5546\u54C1\u3011\u5546\u54C1\u5206\u7C7B",url:"https://doc.iocoder.cn/mall/product-category/"}),a(S,null,{default:e(()=>[a(R,{class:"-mb-15px",model:r(d),ref_key:"queryFormRef",ref:b,inline:!0,"label-width":"68px"},{default:e(()=>[a(P,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:e(()=>[a(O,{modelValue:r(d).name,"onUpdate:modelValue":t[0]||(t[0]=l=>r(d).name=l),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:"",onKeyup:B(h,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(P,null,{default:e(()=>[a(o,{onClick:h},{default:e(()=>[a(k,{icon:"ep:search",class:"mr-5px"}),i(" \u641C\u7D22")]),_:1}),a(o,{onClick:I},{default:e(()=>[a(k,{icon:"ep:refresh",class:"mr-5px"}),i(" \u91CD\u7F6E")]),_:1}),p((n(),c(o,{type:"primary",plain:"",onClick:t[1]||(t[1]=l=>v("create"))},{default:e(()=>[a(k,{icon:"ep:plus",class:"mr-5px"}),i(" \u65B0\u589E ")]),_:1})),[[f,["product:category:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(S,null,{default:e(()=>[p((n(),c(V,{data:r(C),"row-key":"id","default-expand-all":""},{default:e(()=>[a(s,{label:"\u540D\u79F0","min-width":"240",prop:"name",sortable:""}),a(s,{label:"\u5206\u7C7B\u56FE\u6807",align:"center","min-width":"80",prop:"picUrl"},{default:e(l=>[E("img",{src:l.row.picUrl,alt:"\u79FB\u52A8\u7AEF\u5206\u7C7B\u56FE",class:"h-36px"},null,8,ua)]),_:1}),a(s,{label:"\u6392\u5E8F",align:"center","min-width":"150",prop:"sort"}),a(s,{label:"\u72B6\u6001",align:"center","min-width":"150",prop:"status"},{default:e(l=>[a(T,{type:r(G).COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),a(s,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:r(ia)},null,8,["formatter"]),a(s,{label:"\u64CD\u4F5C",align:"center","min-width":"180"},{default:e(l=>[p((n(),c(o,{link:"",type:"primary",onClick:U=>v("update",l.row.id)},{default:e(()=>[i(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[f,["product:category:update"]]]),l.row.parentId>0?p((n(),c(o,{key:0,link:"",type:"primary",onClick:U=>{return y=l.row.id,void M.push({name:"ProductSpu",query:{categoryId:y}});var y}},{default:e(()=>[i(" \u67E5\u770B\u5546\u54C1 ")]),_:2},1032,["onClick"])),[[f,["product:spu:query"]]]):Q("",!0),p((n(),c(o,{link:"",type:"danger",onClick:U=>(async y=>{try{await g.delConfirm(),await ca(y),g.success(q("common.delSuccess")),await u()}catch{}})(l.row.id)},{default:e(()=>[i(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[f,["product:category:delete"]]])]),_:1})]),_:1},8,["data"])),[[K,r(w)]])]),_:1}),a(da,{ref_key:"formRef",ref:x,onSuccess:u},null,512)],64)}}});export{ma as default};
