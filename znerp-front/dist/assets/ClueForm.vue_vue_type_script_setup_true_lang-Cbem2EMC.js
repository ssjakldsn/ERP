import{d as B,r as i,e as G,o as r,q as f,w as a,f as e,x as E,a as d,y as J,c as w,p as h,Q as k,D as q,F as y,k as Y,h as H,z as K,b as P,U as W,C as X,E as Z,A as $,B as ee,j as le,cd as ae,G as de,J as oe,I as ue,M as te}from"./index-CIfmhqRC.js";import{_ as se}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{g as re,c as ne,u as me}from"./index-IYA49QTG.js";import{g as ie}from"./index-w2FCJT7Q.js";import{d as pe}from"./tree-BMqZf9_I.js";import{g as ce}from"./index-QrlE36WK.js";const ve=B({__name:"ClueForm",emits:["success"],setup(fe,{expose:M,emit:S}){const{t:I}=H(),x=K(),c=i(!1),C=i(""),v=i(!1),_=i(""),g=i([]),R=i([]),u=i({id:void 0,name:void 0,contactNextTime:void 0,ownerUserId:0,mobile:void 0,telephone:void 0,qq:void 0,wechat:void 0,email:void 0,areaId:void 0,detailAddress:void 0,industryId:void 0,level:void 0,source:void 0,remark:void 0}),N=G({name:[{required:!0,message:"\u7EBF\u7D22\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],ownerUserId:[{required:!0,message:"\u8D1F\u8D23\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),V=i();M({open:async(n,o)=>{if(c.value=!0,C.value=I("action."+n),_.value=n,O(),o){v.value=!0;try{u.value=await re(o)}finally{v.value=!1}}g.value=await ie(),R.value=await ce(),_.value==="create"&&(u.value.ownerUserId=P().getUser.id)}});const A=S,Q=async()=>{if(V&&await V.value.validate()){v.value=!0;try{const n=u.value;_.value==="create"?(await ne(n),x.success(I("common.createSuccess"))):(await me(n),x.success(I("common.updateSuccess"))),c.value=!1,A("success")}finally{v.value=!1}}},O=()=>{var n;u.value={id:void 0,name:void 0,contactNextTime:void 0,ownerUserId:0,mobile:void 0,telephone:void 0,qq:void 0,wechat:void 0,email:void 0,areaId:void 0,detailAddress:void 0,industryId:void 0,level:void 0,source:void 0,remark:void 0},(n=V.value)==null||n.resetFields()};return(n,o)=>{const m=W,t=X,s=Z,b=$,U=ee,p=le,F=ae,j=de,D=oe,T=ue,L=se,z=te;return r(),f(L,{modelValue:d(c),"onUpdate:modelValue":o[15]||(o[15]=l=>Y(c)?c.value=l:null),title:d(C)},{footer:a(()=>[e(T,{disabled:d(v),type:"primary",onClick:Q},{default:a(()=>[E("\u786E \u5B9A")]),_:1},8,["disabled"]),e(T,{onClick:o[14]||(o[14]=l=>c.value=!1)},{default:a(()=>[E("\u53D6 \u6D88")]),_:1})]),default:a(()=>[J((r(),f(D,{ref_key:"formRef",ref:V,model:d(u),rules:d(N),"label-width":"100px"},{default:a(()=>[e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u7EBF\u7D22\u540D\u79F0",prop:"name"},{default:a(()=>[e(m,{modelValue:d(u).name,"onUpdate:modelValue":o[0]||(o[0]=l=>d(u).name=l),placeholder:"\u8BF7\u8F93\u5165\u7EBF\u7D22\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u5BA2\u6237\u6765\u6E90",prop:"source"},{default:a(()=>[e(U,{modelValue:d(u).source,"onUpdate:modelValue":o[1]||(o[1]=l=>d(u).source=l),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237\u6765\u6E90",class:"w-1/1"},{default:a(()=>[(r(!0),w(y,null,h(d(k)(d(q).CRM_CUSTOMER_SOURCE),l=>(r(),f(b,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u624B\u673A",prop:"mobile"},{default:a(()=>[e(m,{modelValue:d(u).mobile,"onUpdate:modelValue":o[2]||(o[2]=l=>d(u).mobile=l),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserId"},{default:a(()=>[e(U,{modelValue:d(u).ownerUserId,"onUpdate:modelValue":o[3]||(o[3]=l=>d(u).ownerUserId=l),disabled:d(_)!=="create",class:"w-1/1"},{default:a(()=>[(r(!0),w(y,null,h(d(R),l=>(r(),f(b,{key:l.id,label:l.nickname,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u7535\u8BDD",prop:"telephone"},{default:a(()=>[e(m,{modelValue:d(u).telephone,"onUpdate:modelValue":o[4]||(o[4]=l=>d(u).telephone=l),placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u90AE\u7BB1",prop:"email"},{default:a(()=>[e(m,{modelValue:d(u).email,"onUpdate:modelValue":o[5]||(o[5]=l=>d(u).email=l),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u5FAE\u4FE1",prop:"wechat"},{default:a(()=>[e(m,{modelValue:d(u).wechat,"onUpdate:modelValue":o[6]||(o[6]=l=>d(u).wechat=l),placeholder:"\u8BF7\u8F93\u5165\u5FAE\u4FE1"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"QQ",prop:"qq"},{default:a(()=>[e(m,{modelValue:d(u).qq,"onUpdate:modelValue":o[7]||(o[7]=l=>d(u).qq=l),placeholder:"\u8BF7\u8F93\u5165 QQ"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u5BA2\u6237\u884C\u4E1A",prop:"industryId"},{default:a(()=>[e(U,{modelValue:d(u).industryId,"onUpdate:modelValue":o[8]||(o[8]=l=>d(u).industryId=l),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237\u884C\u4E1A",class:"w-1/1"},{default:a(()=>[(r(!0),w(y,null,h(d(k)(d(q).CRM_CUSTOMER_INDUSTRY),l=>(r(),f(b,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u5BA2\u6237\u7EA7\u522B",prop:"level"},{default:a(()=>[e(U,{modelValue:d(u).level,"onUpdate:modelValue":o[9]||(o[9]=l=>d(u).level=l),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237\u7EA7\u522B",class:"w-1/1"},{default:a(()=>[(r(!0),w(y,null,h(d(k)(d(q).CRM_CUSTOMER_LEVEL),l=>(r(),f(b,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u5730\u5740",prop:"areaId"},{default:a(()=>[e(F,{modelValue:d(u).areaId,"onUpdate:modelValue":o[10]||(o[10]=l=>d(u).areaId=l),options:d(g),props:d(pe),class:"w-1/1",clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u57CE\u5E02"},null,8,["modelValue","options","props"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u8BE6\u7EC6\u5730\u5740",prop:"detailAddress"},{default:a(()=>[e(m,{modelValue:d(u).detailAddress,"onUpdate:modelValue":o[11]||(o[11]=l=>d(u).detailAddress=l),placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",prop:"contactNextTime"},{default:a(()=>[e(j,{modelValue:d(u).contactNextTime,"onUpdate:modelValue":o[12]||(o[12]=l=>d(u).contactNextTime=l),placeholder:"\u9009\u62E9\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",type:"datetime","value-format":"x",class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u5907\u6CE8",prop:"remark"},{default:a(()=>[e(m,{type:"textarea",modelValue:d(u).remark,"onUpdate:modelValue":o[13]||(o[13]=l=>d(u).remark=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[z,d(v)]])]),_:1},8,["modelValue","title"])}}});export{ve as _};
