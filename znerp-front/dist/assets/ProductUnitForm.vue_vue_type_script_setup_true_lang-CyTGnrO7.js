import{d as E,h as N,z as O,r as d,e as T,o as m,q as v,w as t,f as i,a as e,x as f,y as j,c as z,F as B,p as D,Q as I,D as J,t as L,k as Q,U as R,C as G,ak as H,al as K,J as W,I as X,M as Y}from"./index-CIfmhqRC.js";import{_ as Z}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{P as p}from"./index-DKjClyJm.js";import{C as $}from"./constants-A8BI3pz7.js";const ee=E({name:"ProductUnitForm",__name:"ProductUnitForm",emits:["success"],setup(ae,{expose:g,emit:k}){const{t:n}=N(),_=O(),o=d(!1),y=d(""),r=d(!1),U=d(""),u=d({id:void 0,name:void 0,status:void 0}),w=T({name:[{required:!0,message:"\u5355\u4F4D\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u5355\u4F4D\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=d();g({open:async(s,a)=>{if(o.value=!0,y.value=n("action."+s),U.value=s,F(),a){r.value=!0;try{u.value=await p.getProductUnit(a)}finally{r.value=!1}}}});const P=k,C=async()=>{await c.value.validate(),r.value=!0;try{const s=u.value;U.value==="create"?(await p.createProductUnit(s),_.success(n("common.createSuccess"))):(await p.updateProductUnit(s),_.success(n("common.updateSuccess"))),o.value=!1,P("success")}finally{r.value=!1}},F=()=>{var s;u.value={id:void 0,name:void 0,status:$.ENABLE},(s=c.value)==null||s.resetFields()};return(s,a)=>{const h=R,V=G,q=H,x=K,S=W,b=X,M=Z,A=Y;return m(),v(M,{title:e(y),modelValue:e(o),"onUpdate:modelValue":a[3]||(a[3]=l=>Q(o)?o.value=l:null)},{footer:t(()=>[i(b,{onClick:C,type:"primary",disabled:e(r)},{default:t(()=>[f("\u786E \u5B9A")]),_:1},8,["disabled"]),i(b,{onClick:a[2]||(a[2]=l=>o.value=!1)},{default:t(()=>[f("\u53D6 \u6D88")]),_:1})]),default:t(()=>[j((m(),v(S,{ref_key:"formRef",ref:c,model:e(u),rules:e(w),"label-width":"100px"},{default:t(()=>[i(V,{label:"\u5355\u4F4D\u540D\u5B57",prop:"name"},{default:t(()=>[i(h,{modelValue:e(u).name,"onUpdate:modelValue":a[0]||(a[0]=l=>e(u).name=l),placeholder:"\u8BF7\u8F93\u5165\u5355\u4F4D\u540D\u5B57"},null,8,["modelValue"])]),_:1}),i(V,{label:"\u5355\u4F4D\u72B6\u6001",prop:"status"},{default:t(()=>[i(x,{modelValue:e(u).status,"onUpdate:modelValue":a[1]||(a[1]=l=>e(u).status=l)},{default:t(()=>[(m(!0),z(B,null,D(e(I)(e(J).COMMON_STATUS),l=>(m(),v(q,{key:l.value,value:l.value},{default:t(()=>[f(L(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[A,e(r)]])]),_:1},8,["title","modelValue"])}}});export{ee as _};
