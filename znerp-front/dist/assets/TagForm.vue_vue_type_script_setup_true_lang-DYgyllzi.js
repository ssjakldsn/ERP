import{d as M,h as S,z as T,r as o,o as _,q as w,w as r,f as d,a as s,x as V,y as z,k as j,U as J,C as R,J as A,I as B,M as D}from"./index-CIfmhqRC.js";import{_ as E}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{g as G,c as H,u as K}from"./index-C0ch1YxQ.js";const L=M({name:"MpTagForm",__name:"TagForm",emits:["success"],setup(N,{expose:g,emit:x}){const{t:i}=S(),f=T(),u=o(!1),v=o(""),t=o(!1),p=o(""),l=o({accountId:-1,name:""}),b={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0",trigger:"blur"}]},c=o(null),k=x;g({open:async(a,e,n)=>{if(u.value=!0,v.value=i("action."+a),p.value=a,h(),l.value.accountId=e,n){t.value=!0;try{l.value=await G(n)}finally{t.value=!1}}}});const I=async()=>{var a;if(c&&await((a=c.value)==null?void 0:a.validate())){t.value=!0;try{const e=l.value;p.value==="create"?(await H(e),f.success(i("common.createSuccess"))):(await K(e),f.success(i("common.updateSuccess"))),u.value=!1,k("success")}finally{t.value=!1}}},h=()=>{var a;l.value={accountId:-1,name:""},(a=c.value)==null||a.resetFields()};return(a,e)=>{const n=J,C=R,F=A,y=B,U=E,q=D;return _(),w(U,{modelValue:s(u),"onUpdate:modelValue":e[2]||(e[2]=m=>j(u)?u.value=m:null),title:s(v)},{footer:r(()=>[d(y,{disabled:s(t),type:"primary",onClick:I},{default:r(()=>[V("\u786E \u5B9A")]),_:1},8,["disabled"]),d(y,{onClick:e[1]||(e[1]=m=>u.value=!1)},{default:r(()=>[V("\u53D6 \u6D88")]),_:1})]),default:r(()=>[z((_(),w(F,{ref_key:"formRef",ref:c,model:s(l),rules:b,"label-width":"80px"},{default:r(()=>[d(C,{label:"\u6807\u7B7E\u540D\u79F0",prop:"name"},{default:r(()=>[d(n,{modelValue:s(l).name,"onUpdate:modelValue":e[0]||(e[0]=m=>s(l).name=m),placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[q,s(t)]])]),_:1},8,["modelValue","title"])}}});export{L as _};
