import{_ as se}from"./ComponentContainerProperty-C4nJhSya.js";import{fg as ae,fh as re,ej as ie,d as Y,b3 as pe,fi as ne,r as H,o as T,c as b,f as s,w as v,x as U,g as Z,F as D,p as J,a as c,at as S,t as ue,k as me,H as de,I as q,_ as B,cl as ce,C as fe,J as he}from"./index-CIfmhqRC.js";import{E as ye}from"./el-text-DMgoq9G3.js";import{u as ve}from"./util-jDjqY1ok.js";import{_ as ge}from"./AppLinkSelectDialog.vue_vue_type_script_setup_true_lang-D-PlfotM.js";import{_ as we}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{E as xe}from"./el-image-DLpquQe6.js";import"./el-card-DyMugU68.js";import"./index-DSV6ZkbZ.js";import"./color-BN7ZL7BD.js";import"./Qrcode-DR4gTqIE.js";import"./IFrame.vue_vue_type_script_setup_true_lang-CiSUdYeS.js";import"./vuedraggable.umd-CcTr7I5e.js";import"./el-collapse-item-BgajxfOI.js";import"./ProductCategorySelect.vue_vue_type_script_setup_true_lang-Dn8UypNC.js";import"./el-tree-select-CYFGeiEt.js";import"./tree-BMqZf9_I.js";import"./category-CKOb63Br.js";var _e=Array.prototype.splice;function ke(t,f){var g=[];if(!t||!t.length)return g;var h=-1,l=[],r=t.length;for(f=ie(f);++h<r;){var i=t[h];f(i,h,t)&&(g.push(i),l.push(h))}return function(p,a){for(var n=p?a.length:0,w=n-1;n--;){var m=a[n];if(n==w||m!==E){var E=m;ae(m)?_e.call(p,m,1):re(p,m)}}}(t,l),g}const I=100;var k=(t=>(t[t.LEFT=0]="LEFT",t[t.TOP=1]="TOP",t[t.WIDTH=2]="WIDTH",t[t.HEIGHT=3]="HEIGHT",t))(k||{});const Ve=[{position:"\u5DE6\u4E0A\u89D2",types:[0,1,2,3],style:{left:"-5px",top:"-5px",cursor:"nwse-resize"}},{position:"\u4E0A\u65B9\u4E2D\u95F4",types:[1,3],style:{left:"50%",top:"-5px",cursor:"n-resize",transform:"translateX(-50%)"}},{position:"\u53F3\u4E0A\u89D2",types:[1,2,3],style:{right:"-5px",top:"-5px",cursor:"nesw-resize"}},{position:"\u53F3\u4FA7\u4E2D\u95F4",types:[2],style:{right:"-5px",top:"50%",cursor:"e-resize",transform:"translateX(-50%)"}},{position:"\u53F3\u4E0B\u89D2",types:[2,3],style:{right:"-5px",bottom:"-5px",cursor:"nwse-resize"}},{position:"\u4E0B\u65B9\u4E2D\u95F4",types:[3],style:{left:"50%",bottom:"-5px",cursor:"s-resize",transform:"translateX(-50%)"}},{position:"\u5DE6\u4E0B\u89D2",types:[0,2,3],style:{left:"-5px",bottom:"-5px",cursor:"nesw-resize"}},{position:"\u5DE6\u4FA7\u4E2D\u95F4",types:[0,2],style:{left:"-5px",top:"50%",cursor:"w-resize",transform:"translateX(-50%)"}}],K=(t,f,g)=>{f.stopPropagation();const{clientX:h,clientY:l}=f,{left:r,top:i,width:p,height:a}=t;document.onmousemove=n=>{const w=n.clientX-h,m=n.clientY-l;g(r,i,p,a,w,m)},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}},He=["onMousedown","onDblclick"],Te={class:"pointer-events-none select-none"},be=["onMousedown"],Ee=B(Y({name:"HotZoneEditDialog",__name:"index",props:{modelValue:pe(),imgUrl:ne().def("")},emits:["update:modelValue"],setup(t,{expose:f,emit:g}){const h=t,l=g,r=H([]),i=H(!1);f({open:()=>{var o;r.value=(o=h.modelValue,(o==null?void 0:o.map(e=>({...e,left:e.left*=2,top:e.top*=2,width:e.width*=2,height:e.height*=2})))||[]),i.value=!0}});const p=H(),a=()=>{r.value.push({width:I,height:I,top:0,left:0})},n=(o,e)=>{e>=0&&e<=p.value.offsetWidth-o.width&&(o.left=e)},w=(o,e)=>{e>=0&&e<=p.value.offsetHeight-o.height&&(o.top=e)},m=(o,e)=>{e>=I&&o.left+e<=p.value.offsetWidth&&(o.width=e)},E=(o,e)=>{e>=I&&o.top+e<=p.value.offsetHeight&&(o.height=e)},C=()=>{i.value=!1},L=()=>{const o=(e=>(e==null?void 0:e.map(x=>({...x,left:x.left/=2,top:x.top/=2,width:x.width/=2,height:x.height/=2})))||[])(r.value);l("update:modelValue",o)},y=H(),W=H(),N=o=>{o&&y.value&&(y.value.name=o.name,y.value.url=o.path)};return(o,e)=>{const x=xe,P=de,$=q,Q=we,ee=ge;return T(),b(D,null,[s(Q,{modelValue:c(i),"onUpdate:modelValue":e[0]||(e[0]=d=>me(i)?i.value=d:null),title:"\u8BBE\u7F6E\u70ED\u533A",width:"780",onClose:L},{footer:v(()=>[s($,{onClick:a,type:"primary",plain:""},{default:v(()=>[s(P,{icon:"ep:plus",class:"mr-5px"}),U(" \u6DFB\u52A0\u70ED\u533A ")]),_:1}),s($,{onClick:C,type:"primary",plain:""},{default:v(()=>[s(P,{icon:"ep:check",class:"mr-5px"}),U(" \u786E\u5B9A ")]),_:1})]),default:v(()=>[Z("div",{ref_key:"container",ref:p,class:"relative h-full w-750px"},[s(x,{src:t.imgUrl,class:"pointer-events-none h-full w-750px select-none"},null,8,["src"]),(T(!0),b(D,null,J(c(r),(d,te)=>(T(),b("div",{key:te,class:"hot-zone",style:S({width:`${d.width}px`,height:`${d.height}px`,top:`${d.top}px`,left:`${d.left}px`}),onMousedown:V=>((u,X)=>{K(u,X,(_,z,G,j,F,M)=>{n(u,_+F),w(u,z+M)})})(d,V),onDblclick:V=>{return u=d,y.value=u,void W.value.open(u.url);var u}},[Z("span",Te,ue(d.name||"\u53CC\u51FB\u9009\u62E9\u94FE\u63A5"),1),s(P,{icon:"ep:close",class:"delete",size:14,onClick:V=>{return u=d,void ke(r.value,u);var u}},null,8,["onClick"]),(T(!0),b(D,null,J(c(Ve),(V,u)=>(T(),b("span",{class:"ctrl-dot",key:u,style:S(V.style),onMousedown:X=>((_,z,G)=>{K(_,G,(j,F,M,oe,A,R)=>{z.types.forEach(le=>{switch(le){case k.LEFT:n(_,j+A);break;case k.TOP:w(_,F+R);break;case k.WIDTH:{const O=z.types.includes(k.LEFT)?-1:1;m(_,M+A*O)}break;case k.HEIGHT:{const O=z.types.includes(k.TOP)?-1:1;E(_,oe+R*O)}}})})})(d,V,X)},null,44,be))),128))],44,He))),128))],512)]),_:1},8,["modelValue"]),s(ee,{ref_key:"appLinkDialogRef",ref:W,onAppLinkChange:N},null,512)],64)}}}),[["__scopeId","data-v-85e5873f"]]),ze=B(Y({name:"HotZoneProperty",__name:"property",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:f}){const g=t,h=f,{formData:l}=ve(g.modelValue,h),r=H(),i=()=>{r.value.open()};return(p,a)=>{const n=ye,w=ce,m=fe,E=he,C=q,L=se;return T(),b(D,null,[s(L,{modelValue:c(l).style,"onUpdate:modelValue":a[1]||(a[1]=y=>c(l).style=y)},{default:v(()=>[s(E,{"label-width":"80px",model:c(l),class:"m-t-8px"},{default:v(()=>[s(m,{label:"\u4E0A\u4F20\u56FE\u7247",prop:"imgUrl"},{default:v(()=>[s(w,{modelValue:c(l).imgUrl,"onUpdate:modelValue":a[0]||(a[0]=y=>c(l).imgUrl=y),height:"50px",width:"auto",class:"min-w-80px"},{tip:v(()=>[s(n,{type:"info",size:"small"},{default:v(()=>[U(" \u63A8\u8350\u5BBD\u5EA6 750")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),s(C,{type:"primary",plain:"",class:"w-full",onClick:i},{default:v(()=>[U(" \u8BBE\u7F6E\u70ED\u533A ")]),_:1})]),_:1},8,["modelValue"]),s(Ee,{ref_key:"editDialogRef",ref:r,modelValue:c(l).list,"onUpdate:modelValue":a[2]||(a[2]=y=>c(l).list=y),"img-url":c(l).imgUrl},null,8,["modelValue","img-url"])],64)}}}),[["__scopeId","data-v-053ffb33"]]);export{ze as default};
