import{d as re,r as n,e as te,n as oe,O as ie,o as i,c as v,f as l,w as r,a,F as x,p as P,q as u,y as f,a4 as pe,x as h,aD as L,g as T,t as y,az as se,D as j,G as ne,C as ue,A as me,B as ce,U as de,H as fe,I as ve,J as ye,E as _e,j as be,K as ge,av as we,L as xe,M as he,_ as ke}from"./index-CIfmhqRC.js";import{_ as Ue}from"./index.vue_vue_type_script_setup_true_lang-DYHi04Tm.js";import{_ as Se}from"./DictTag.vue_vue_type_script_lang-CTpVFm77.js";import{E as Pe}from"./el-image-DLpquQe6.js";import{_ as Ie}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{_ as Ne}from"./index-2RHHZ-Zv.js";import{f as Ve,e as De}from"./index-DDOznnSc.js";import{a as Te}from"./index-D2ap44TW.js";import{f as qe}from"./formatter-CHMUnmj-.js";import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-D_t4NQ-2.js";import{d as Ce}from"./formatTime-DFFN_xWx.js";import{D as Oe}from"./constants-A8BI3pz7.js";import{_ as Ee}from"./OrderPickUpForm.vue_vue_type_script_setup_true_lang-C-r1oFwR.js";import"./index-CrBeVHKs.js";import"./color-BN7ZL7BD.js";import"./el-card-DyMugU68.js";import"./CountTo.vue_vue_type_script_setup_true_lang-Sjd3MeH7.js";import"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import"./index-olceuYTn.js";import"./el-timeline-item-r9TewDuU.js";import"./el-descriptions-item-BL6ba85F.js";import"./OrderUpdateRemarkForm.vue_vue_type_script_setup_true_lang-CQkrnmSJ.js";import"./OrderDeliveryForm.vue_vue_type_script_setup_true_lang-D-MWCEIO.js";import"./index-CqFYyUKb.js";import"./OrderUpdateAddressForm.vue_vue_type_script_setup_true_lang-Cq4AcZcs.js";import"./el-tree-select-CYFGeiEt.js";import"./index-w2FCJT7Q.js";import"./tree-BMqZf9_I.js";import"./OrderUpdatePriceForm.vue_vue_type_script_setup_true_lang-B5gmOpOG.js";import"./tagsView-CqxiFcdS.js";const Re={class:"mr-10px"},Ae={class:"flex flex-col flex-wrap gap-1"},Fe=ke(re({name:"PickUpOrder",__name:"index",setup(Me){const c=n(!0),q=n(2),C=n([]),O=n(),E={pageNo:1,pageSize:10,createTime:void 0,deliveryType:Oe.PICK_UP.type,pickUpStoreId:void 0},t=n({...E}),_=te({queryParam:"no"}),b=n(),R=n([{value:"no",label:"\u8BA2\u5355\u53F7"},{value:"userId",label:"\u7528\u6237UID"},{value:"userNickname",label:"\u7528\u6237\u6635\u79F0"},{value:"userMobile",label:"\u7528\u6237\u7535\u8BDD"}]),B=m=>{var o;(o=R.value.filter(d=>d.value!==m))==null||o.forEach(d=>{t.value.hasOwnProperty(d.value)&&delete t.value[d.value]})},k=async()=>{c.value=!0;try{b.value=await Ve(a(t));const m=await De(a(t));C.value=m.list,q.value=m.total}finally{c.value=!1}},A=async()=>{t.value.pageNo=1,await k()},G=()=>{var m;(m=O.value)==null||m.resetFields(),t.value={...E},A()},N=n([]),F=n(),K=()=>{F.value.open()};return oe(()=>{k(),(async()=>N.value=await Te())()}),(m,o)=>{const d=Ne,J=ne,U=ue,M=me,Y=ce,W=de,V=fe,D=ve,Q=ye,z=Ie,S=_e,X=be,p=ge,Z=Pe,$=we,H=Se,ee=xe,ae=Ue,le=ie("hasPermi"),g=he;return i(),v(x,null,[l(d,{title:"\u3010\u4EA4\u6613\u3011\u4EA4\u6613\u8BA2\u5355",url:"https://doc.iocoder.cn/mall/trade-order/"}),l(d,{title:"\u3010\u4EA4\u6613\u3011\u8D2D\u7269\u8F66",url:"https://doc.iocoder.cn/mall/trade-cart/"}),l(z,null,{default:r(()=>[l(Q,{ref_key:"queryFormRef",ref:O,inline:!0,model:a(t),class:"-mb-15px","label-width":"68px"},{default:r(()=>[l(U,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:r(()=>[l(J,{modelValue:a(t).createTime,"onUpdate:modelValue":o[0]||(o[0]=e=>a(t).createTime=e),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-280px","end-placeholder":"\u81EA\u5B9A\u4E49\u65F6\u95F4","start-placeholder":"\u81EA\u5B9A\u4E49\u65F6\u95F4",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),l(U,{label:"\u81EA\u63D0\u95E8\u5E97",prop:"pickUpStoreId"},{default:r(()=>[l(Y,{modelValue:a(t).pickUpStoreId,"onUpdate:modelValue":o[1]||(o[1]=e=>a(t).pickUpStoreId=e),class:"!w-280px",clearable:"",multiple:"",placeholder:"\u5168\u90E8"},{default:r(()=>[(i(!0),v(x,null,P(a(N),e=>(i(),u(M,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(U,{label:"\u805A\u5408\u641C\u7D22"},{default:r(()=>[f(l(W,{modelValue:a(t)[a(_).queryParam],"onUpdate:modelValue":o[3]||(o[3]=e=>a(t)[a(_).queryParam]=e),class:"!w-280px",clearable:"",placeholder:"\u8BF7\u8F93\u5165",type:a(_).queryParam==="userId"?"number":"text"},{prepend:r(()=>[l(Y,{modelValue:a(_).queryParam,"onUpdate:modelValue":o[2]||(o[2]=e=>a(_).queryParam=e),class:"!w-110px",placeholder:"\u5168\u90E8",onChange:B},{default:r(()=>[(i(!0),v(x,null,P(a(R),e=>(i(),u(M,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","type"]),[[pe,!0]])]),_:1}),l(U,null,{default:r(()=>[l(D,{onClick:A},{default:r(()=>[l(V,{class:"mr-5px",icon:"ep:search"}),h(" \u641C\u7D22 ")]),_:1}),l(D,{onClick:G},{default:r(()=>[l(V,{class:"mr-5px",icon:"ep:refresh"}),h(" \u91CD\u7F6E ")]),_:1}),f((i(),u(D,{onClick:K,type:"success",plain:""},{default:r(()=>[l(V,{class:"mr-5px",icon:"ep:check"}),h(" \u6838\u9500 ")]),_:1})),[[le,["trade:order:pick-up"]]])]),_:1})]),_:1},8,["model"])]),_:1}),l(X,{gutter:16,class:"summary"},{default:r(()=>[f((i(),u(S,{sm:6,xs:12},{default:r(()=>{var e;return[l(I,{title:"\u8BA2\u5355\u6570\u91CF",icon:"icon-park-outline:transaction-order","icon-color":"bg-blue-100","icon-bg-color":"text-blue-500",value:((e=a(b))==null?void 0:e.orderCount)||0},null,8,["value"])]}),_:1})),[[g,a(c)]]),f((i(),u(S,{sm:6,xs:12},{default:r(()=>{var e;return[l(I,{title:"\u8BA2\u5355\u91D1\u989D",icon:"streamline:money-cash-file-dollar-common-money-currency-cash-file","icon-color":"bg-purple-100","icon-bg-color":"text-purple-500",prefix:"\uFFE5",decimals:2,value:a(L)(((e=a(b))==null?void 0:e.orderPayPrice)||0)},null,8,["value"])]}),_:1})),[[g,a(c)]]),f((i(),u(S,{sm:6,xs:12},{default:r(()=>{var e;return[l(I,{title:"\u9000\u6B3E\u5355\u6570",icon:"heroicons:receipt-refund","icon-color":"bg-yellow-100","icon-bg-color":"text-yellow-500",value:((e=a(b))==null?void 0:e.afterSaleCount)||0},null,8,["value"])]}),_:1})),[[g,a(c)]]),f((i(),u(S,{sm:6,xs:12},{default:r(()=>{var e;return[l(I,{title:"\u9000\u6B3E\u91D1\u989D",icon:"ri:refund-2-line","icon-color":"bg-green-100","icon-bg-color":"text-green-500",prefix:"\uFFE5",decimals:2,value:a(L)(((e=a(b))==null?void 0:e.afterSalePrice)||0)},null,8,["value"])]}),_:1})),[[g,a(c)]])]),_:1}),l(z,null,{default:r(()=>[f((i(),u(ee,{data:a(C)},{default:r(()=>[l(p,{label:"\u8BA2\u5355\u53F7",align:"center",prop:"no","min-width":"180"}),l(p,{label:"\u7528\u6237\u4FE1\u606F",align:"center",prop:"user.nickname","min-width":"80"}),l(p,{label:"\u63A8\u8350\u4EBA\u4FE1\u606F",align:"center",prop:"brokerageUser.nickname","min-width":"100"}),l(p,{label:"\u5546\u54C1\u4FE1\u606F",align:"center",prop:"spuName","min-width":"300"},{default:r(({row:e})=>[(i(!0),v(x,null,P(e.items,s=>(i(),v("div",{class:"flex items-center",key:s.id},[l(Z,{src:s.picUrl,class:"mr-10px h-30px w-30px flex-shrink-0","preview-src-list":[s.picUrl],"preview-teleported":""},null,8,["src","preview-src-list"]),T("span",Re,y(s.spuName),1),T("div",Ae,[(i(!0),v(x,null,P(s.properties,w=>(i(),u($,{key:w.propertyId,class:"mr-10px"},{default:r(()=>[h(y(w.propertyName)+": "+y(w.valueName),1)]),_:2},1024))),128)),T("span",null,y(a(se)(s.price))+" \u5143 x "+y(s.count),1)])]))),128))]),_:1}),l(p,{label:"\u5B9E\u4ED8\u91D1\u989D(\u5143)",align:"center",prop:"payPrice","min-width":"110",formatter:a(qe)},null,8,["formatter"]),l(p,{label:"\u6838\u9500\u5458",align:"center",prop:"storeStaffName","min-width":"70"}),l(p,{label:"\u6838\u9500\u95E8\u5E97",align:"center",prop:"pickUpStoreId","min-width":"80"},{default:r(({row:e})=>{var s;return[h(y((s=a(N).find(w=>w.id===e.pickUpStoreId))==null?void 0:s.name),1)]}),_:1}),l(p,{label:"\u652F\u4ED8\u72B6\u6001",align:"center",prop:"payStatus","min-width":"80"},{default:r(({row:e})=>[l(H,{type:a(j).INFRA_BOOLEAN_STRING,value:e.payStatus||!1},null,8,["type","value"])]),_:1}),l(p,{align:"center",label:"\u8BA2\u5355\u72B6\u6001",prop:"status",width:"120"},{default:r(({row:e})=>[l(H,{type:a(j).TRADE_ORDER_STATUS,value:e.status},null,8,["type","value"])]),_:1}),l(p,{label:"\u4E0B\u5355\u65F6\u95F4",align:"center",prop:"createTime","min-width":"170",formatter:a(Ce)},null,8,["formatter"])]),_:1},8,["data"])),[[g,a(c)]]),l(ae,{limit:a(t).pageSize,"onUpdate:limit":o[4]||(o[4]=e=>a(t).pageSize=e),page:a(t).pageNo,"onUpdate:page":o[5]||(o[5]=e=>a(t).pageNo=e),total:a(q),onPagination:k},null,8,["limit","page","total"])]),_:1}),l(Ee,{ref_key:"pickUpForm",ref:F,onSuccess:k},null,512)],64)}}}),[["__scopeId","data-v-170e89da"]]);export{Fe as default};
