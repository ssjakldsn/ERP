import{d as z,h as D,z as O,r as c,e as T,o as p,q as V,w as l,f as e,a,x as g,y as j,c as I,F as J,p as Q,Q as R,D as G,t as H,k as K,U as W,C as X,E as Y,cc as Z,j as $,cl as ee,ak as le,al as ae,J as ue,I as se,M as oe}from"./index-CIfmhqRC.js";import{_ as de}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{g as te,c as re,u as ne}from"./index-Nqb72Fz0.js";import{C as k}from"./constants-A8BI3pz7.js";const ie=z({name:"MemberLevelForm",__name:"LevelForm",emits:["success"],setup(ce,{expose:h,emit:q}){const{t:v}=D(),b=O(),r=c(!1),x=c(""),n=c(!1),U=c(""),o=c({id:void 0,name:void 0,experience:void 0,level:void 0,discountPercent:void 0,icon:void 0,backgroundUrl:void 0,status:k.ENABLE}),P=T({name:[{required:!0,message:"\u7B49\u7EA7\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],experience:[{required:!0,message:"\u5347\u7EA7\u7ECF\u9A8C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],level:[{required:!0,message:"\u7B49\u7EA7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],discountPercent:[{required:!0,message:"\u4EAB\u53D7\u6298\u6263\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}]}),m=c();h({open:async(d,u)=>{if(r.value=!0,x.value=v("action."+d),U.value=d,F(),u){n.value=!0;try{o.value=await te(u)}finally{n.value=!1}}}});const C=q,E=async()=>{if(m&&await m.value.validate()){n.value=!0;try{const d=o.value;U.value==="create"?(await re(d),b.success(v("common.createSuccess"))):(await ne(d),b.success(v("common.updateSuccess"))),r.value=!1,C("success")}finally{n.value=!1}}},F=()=>{var d;o.value={id:void 0,name:void 0,experience:void 0,level:void 0,discountPercent:void 0,icon:void 0,backgroundUrl:void 0,status:k.ENABLE},(d=m.value)==null||d.resetFields()};return(d,u)=>{const L=W,t=X,i=Y,f=Z,_=$,w=ee,M=le,S=ae,A=ue,y=se,B=de,N=oe;return p(),V(B,{title:a(x),modelValue:a(r),"onUpdate:modelValue":u[8]||(u[8]=s=>K(r)?r.value=s:null),width:"800"},{footer:l(()=>[e(y,{onClick:E,type:"primary",disabled:a(n)},{default:l(()=>[g("\u786E \u5B9A")]),_:1},8,["disabled"]),e(y,{onClick:u[7]||(u[7]=s=>r.value=!1)},{default:l(()=>[g("\u53D6 \u6D88")]),_:1})]),default:l(()=>[j((p(),V(A,{ref_key:"formRef",ref:m,model:a(o),rules:a(P),"label-width":"110px"},{default:l(()=>[e(_,null,{default:l(()=>[e(i,{span:12},{default:l(()=>[e(t,{label:"\u7B49\u7EA7\u540D\u79F0",prop:"name"},{default:l(()=>[e(L,{modelValue:a(o).name,"onUpdate:modelValue":u[0]||(u[0]=s=>a(o).name=s),placeholder:"\u8BF7\u8F93\u5165\u7B49\u7EA7\u540D\u79F0",class:"!w-240px"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(t,{label:"\u7B49\u7EA7",prop:"level"},{default:l(()=>[e(f,{modelValue:a(o).level,"onUpdate:modelValue":u[1]||(u[1]=s=>a(o).level=s),min:0,precision:0,placeholder:"\u8BF7\u8F93\u5165\u7B49\u7EA7",class:"!w-240px"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{span:12},{default:l(()=>[e(t,{label:"\u5347\u7EA7\u7ECF\u9A8C",prop:"experience"},{default:l(()=>[e(f,{modelValue:a(o).experience,"onUpdate:modelValue":u[2]||(u[2]=s=>a(o).experience=s),min:0,precision:0,placeholder:"\u8BF7\u8F93\u5165\u5347\u7EA7\u7ECF\u9A8C",class:"!w-240px"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(t,{label:"\u4EAB\u53D7\u6298\u6263(%)",prop:"discountPercent"},{default:l(()=>[e(f,{modelValue:a(o).discountPercent,"onUpdate:modelValue":u[3]||(u[3]=s=>a(o).discountPercent=s),min:0,max:100,precision:0,placeholder:"\u8BF7\u8F93\u5165\u4EAB\u53D7\u6298\u6263",class:"!w-240px"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{span:12},{default:l(()=>[e(t,{label:"\u7B49\u7EA7\u56FE\u6807"},{default:l(()=>[e(w,{modelValue:a(o).icon,"onUpdate:modelValue":u[4]||(u[4]=s=>a(o).icon=s)},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(t,{label:"\u80CC\u666F\u56FE"},{default:l(()=>[e(w,{modelValue:a(o).backgroundUrl,"onUpdate:modelValue":u[5]||(u[5]=s=>a(o).backgroundUrl=s)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(t,{label:"\u72B6\u6001",prop:"status"},{default:l(()=>[e(S,{modelValue:a(o).status,"onUpdate:modelValue":u[6]||(u[6]=s=>a(o).status=s)},{default:l(()=>[(p(!0),I(J,null,Q(a(R)(a(G).COMMON_STATUS),s=>(p(),V(M,{key:s.value,value:s.value},{default:l(()=>[g(H(s.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[N,a(n)]])]),_:1},8,["title","modelValue"])}}});export{ie as _};
