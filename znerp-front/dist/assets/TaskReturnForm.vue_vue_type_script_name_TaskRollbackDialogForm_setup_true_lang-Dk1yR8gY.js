import{d as C,r as o,o as f,q as c,w as t,f as n,x as g,a,y as F,c as R,p as A,F as z,k as j,z as B,A as I,B as J,C as M,U as E,J as G,I as H,M as L}from"./index-CIfmhqRC.js";import{_ as N}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{b as O,c as P}from"./index-C9Urw_yh.js";const Q=C({__name:"TaskReturnForm",emits:["success"],setup(S,{expose:k,emit:_}){const p=B(),i=o(!1),u=o(!1),l=o({id:"",targetTaskDefinitionKey:void 0,reason:""}),b=o({targetTaskDefinitionKey:[{required:!0,message:"\u5FC5\u987B\u9009\u62E9\u56DE\u9000\u8282\u70B9",trigger:"change"}],reason:[{required:!0,message:"\u56DE\u9000\u7406\u7531\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),d=o(),m=o([]);k({open:async r=>{if(m.value=await O(r),m.value.length===0)return p.warning("\u5F53\u524D\u6CA1\u6709\u53EF\u56DE\u9000\u7684\u8282\u70B9"),!1;i.value=!0,K(),l.value.id=r}});const V=_,w=async()=>{if(d&&await d.value.validate()){u.value=!0;try{await P(l.value),p.success("\u56DE\u9000\u6210\u529F"),i.value=!1,V("success")}finally{u.value=!1}}},K=()=>{var r;l.value={id:"",targetTaskDefinitionKey:void 0,reason:""},(r=d.value)==null||r.resetFields()};return(r,s)=>{const D=I,T=J,v=M,h=E,x=G,y=H,U=N,q=L;return f(),c(U,{modelValue:a(i),"onUpdate:modelValue":s[3]||(s[3]=e=>j(i)?i.value=e:null),title:"\u56DE\u9000\u4EFB\u52A1",width:"500"},{footer:t(()=>[n(y,{disabled:a(u),type:"primary",onClick:w},{default:t(()=>[g("\u786E \u5B9A")]),_:1},8,["disabled"]),n(y,{onClick:s[2]||(s[2]=e=>i.value=!1)},{default:t(()=>[g("\u53D6 \u6D88")]),_:1})]),default:t(()=>[F((f(),c(x,{ref_key:"formRef",ref:d,model:a(l),rules:a(b),"label-width":"110px"},{default:t(()=>[n(v,{label:"\u9000\u56DE\u8282\u70B9",prop:"targetTaskDefinitionKey"},{default:t(()=>[n(T,{modelValue:a(l).targetTaskDefinitionKey,"onUpdate:modelValue":s[0]||(s[0]=e=>a(l).targetTaskDefinitionKey=e),clearable:"",style:{width:"100%"}},{default:t(()=>[(f(!0),R(z,null,A(a(m),e=>(f(),c(D,{key:e.taskDefinitionKey,label:e.name,value:e.taskDefinitionKey},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(v,{label:"\u56DE\u9000\u7406\u7531",prop:"reason"},{default:t(()=>[n(h,{modelValue:a(l).reason,"onUpdate:modelValue":s[1]||(s[1]=e=>a(l).reason=e),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u56DE\u9000\u7406\u7531"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[q,a(u)]])]),_:1},8,["modelValue"])}}});export{Q as _};
