import{b8 as V,b9 as S,cw as X,bi as ee,d as P,bP as ae,ba as le,bn as se,a3 as n,dL as ie,dM as te,r as u,by as p,ar as oe,n as ne,o as r,c as d,aT as z,g as T,t as re,a,W as E,F as _,am as $,a5 as y,q as ce,w as ue,dN as de,bb as ve,aw as fe,dO as pe,bk as ye,dP as me,bx as j,dQ as ge,dR as be,bc as we}from"./index-CIfmhqRC.js";const he=V({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:S([String,Object])},previewSrcList:{type:S(Array),default:()=>X([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:S(String)}}),xe={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>ee(t),close:()=>!0,show:()=>!0},ke=P({name:"ElImage",inheritAttrs:!1}),Se=we(ve(P({...ke,props:he,emits:xe,setup(t,{emit:v}){const l=t;let L="";const{t:R}=ae(),o=le("image"),q=se(),O=n(()=>ie(Object.entries(q).filter(([e])=>/^(data-|on[A-Z])/i.test(e)||["id","style"].includes(e)))),F=te({excludeListeners:!0,excludeKeys:n(()=>Object.keys(O.value))}),g=u(),f=u(!1),c=u(!0),b=u(!1),m=u(),i=u(),K=p&&"loading"in HTMLImageElement.prototype;let w,h;const Y=n(()=>[o.e("inner"),x.value&&o.e("preview"),c.value&&o.is("loading")]),D=n(()=>{const{fit:e}=l;return p&&e?{objectFit:e}:{}}),x=n(()=>{const{previewSrcList:e}=l;return Array.isArray(e)&&e.length>0}),H=n(()=>{const{previewSrcList:e,initialIndex:s}=l;let M=s;return s>e.length-1&&(M=0),M}),C=n(()=>l.loading!=="eager"&&(!K&&l.loading==="lazy"||l.lazy)),k=()=>{p&&(c.value=!0,f.value=!1,g.value=l.src)};function Q(e){c.value=!1,f.value=!1,v("load",e)}function W(e){c.value=!1,f.value=!0,v("error",e)}function I(){ge(m.value,i.value)&&(k(),B())}const N=be(I,200,!0);async function A(){var e;if(!p)return;await fe();const{scrollContainer:s}=l;pe(s)?i.value=s:ye(s)&&s!==""?i.value=(e=document.querySelector(s))!=null?e:void 0:m.value&&(i.value=me(m.value)),i.value&&(w=j(i,"scroll",N),setTimeout(()=>I(),100))}function B(){p&&i.value&&N&&(w==null||w(),i.value=void 0)}function Z(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function G(){x.value&&(h=j("wheel",Z,{passive:!1}),L=document.body.style.overflow,document.body.style.overflow="hidden",b.value=!0,v("show"))}function J(){h==null||h(),document.body.style.overflow=L,b.value=!1,v("close")}function U(e){v("switch",e)}return oe(()=>l.src,()=>{C.value?(c.value=!0,f.value=!1,B(),A()):k()}),ne(()=>{C.value?A():k()}),(e,s)=>(r(),d("div",$({ref_key:"container",ref:m},a(O),{class:[a(o).b(),e.$attrs.class]}),[f.value?z(e.$slots,"error",{key:0},()=>[T("div",{class:E(a(o).e("error"))},re(a(R)("el.image.error")),3)]):(r(),d(_,{key:1},[g.value!==void 0?(r(),d("img",$({key:0},a(F),{src:g.value,loading:e.loading,style:a(D),class:a(Y),crossorigin:e.crossorigin,onClick:G,onLoad:Q,onError:W}),null,16,["src","loading","crossorigin"])):y("v-if",!0),c.value?(r(),d("div",{key:1,class:E(a(o).e("wrapper"))},[z(e.$slots,"placeholder",{},()=>[T("div",{class:E(a(o).e("placeholder"))},null,2)])],2)):y("v-if",!0)],64)),a(x)?(r(),d(_,{key:2},[b.value?(r(),ce(a(de),{key:0,"z-index":e.zIndex,"initial-index":a(H),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,crossorigin:e.crossorigin,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:J,onSwitch:U},{default:ue(()=>[e.$slots.viewer?(r(),d("div",{key:0},[z(e.$slots,"viewer")])):y("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):y("v-if",!0)],64)):y("v-if",!0)],16))}}),[["__file","image.vue"]]));export{Se as E};
