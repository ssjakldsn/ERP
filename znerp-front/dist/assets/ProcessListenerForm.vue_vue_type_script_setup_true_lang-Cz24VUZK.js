import{d as I,h as Y,z as j,r as i,e as z,o,q as r,w as t,f as s,a as l,x as P,y as D,c as p,F as c,p as y,Q as J,D as T,t as Q,dS as C,k as G,U as H,C as K,ak as W,al as X,A as Z,B as $,J as ee,I as le,M as ae}from"./index-CIfmhqRC.js";import{_ as ue}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{P as h}from"./index-BbfStrPJ.js";import{C as te}from"./constants-A8BI3pz7.js";const se=I({name:"ProcessListenerForm",__name:"ProcessListenerForm",emits:["success"],setup(oe,{expose:L,emit:q}){const{t:f}=Y(),k=j(),n=i(!1),E=i(""),m=i(!1),S=i(""),u=i({id:void 0,name:void 0,type:void 0,status:void 0,event:void 0,valueType:void 0,value:void 0}),w=z({name:[{required:!0,message:"\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],event:[{required:!0,message:"\u76D1\u542C\u4E8B\u4EF6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],valueType:[{required:!0,message:"\u503C\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],value:[{required:!0,message:"\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=i();L({open:async(d,a)=>{if(n.value=!0,E.value=f("action."+d),S.value=d,M(),a){m.value=!0;try{u.value=await h.getProcessListener(a)}finally{m.value=!1}}}});const R=q,x=async()=>{await _.value.validate(),m.value=!0;try{const d=u.value;S.value==="create"?(await h.createProcessListener(d),k.success(f("common.createSuccess"))):(await h.updateProcessListener(d),k.success(f("common.updateSuccess"))),n.value=!1,R("success")}finally{m.value=!1}},M=()=>{var d;u.value={id:void 0,name:void 0,type:void 0,status:te.ENABLE,event:void 0,valueType:void 0,value:void 0},(d=_.value)==null||d.resetFields()};return(d,a)=>{const V=H,v=K,N=W,A=X,b=Z,g=$,B=ee,U=le,F=ue,O=ae;return o(),r(F,{title:l(E),modelValue:l(n),"onUpdate:modelValue":a[9]||(a[9]=e=>G(n)?n.value=e:null)},{footer:t(()=>[s(U,{onClick:x,type:"primary",disabled:l(m)},{default:t(()=>[P("\u786E \u5B9A")]),_:1},8,["disabled"]),s(U,{onClick:a[8]||(a[8]=e=>n.value=!1)},{default:t(()=>[P("\u53D6 \u6D88")]),_:1})]),default:t(()=>[D((o(),r(B,{ref_key:"formRef",ref:_,model:l(u),rules:l(w),"label-width":"110px"},{default:t(()=>[s(v,{label:"\u540D\u5B57",prop:"name"},{default:t(()=>[s(V,{modelValue:l(u).name,"onUpdate:modelValue":a[0]||(a[0]=e=>l(u).name=e),placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57"},null,8,["modelValue"])]),_:1}),s(v,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[s(A,{modelValue:l(u).status,"onUpdate:modelValue":a[1]||(a[1]=e=>l(u).status=e)},{default:t(()=>[(o(!0),p(c,null,y(l(J)(l(T).COMMON_STATUS),e=>(o(),r(N,{key:e.value,value:e.value},{default:t(()=>[P(Q(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"\u7C7B\u578B",prop:"type"},{default:t(()=>[s(g,{modelValue:l(u).type,"onUpdate:modelValue":a[2]||(a[2]=e=>l(u).type=e),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:a[3]||(a[3]=e=>l(u).event=void 0)},{default:t(()=>[(o(!0),p(c,null,y(l(C)(l(T).BPM_PROCESS_LISTENER_TYPE),e=>(o(),r(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"\u4E8B\u4EF6",prop:"event"},{default:t(()=>[s(g,{modelValue:l(u).event,"onUpdate:modelValue":a[4]||(a[4]=e=>l(u).event=e),placeholder:"\u8BF7\u9009\u62E9\u4E8B\u4EF6"},{default:t(()=>[(o(!0),p(c,null,y(l(u).type=="execution"?["start","end"]:["create","assignment","complete","delete","update","timeout"],e=>(o(),r(b,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"\u503C\u7C7B\u578B",prop:"valueType"},{default:t(()=>[s(g,{modelValue:l(u).valueType,"onUpdate:modelValue":a[5]||(a[5]=e=>l(u).valueType=e),placeholder:"\u8BF7\u9009\u62E9\u503C\u7C7B\u578B"},{default:t(()=>[(o(!0),p(c,null,y(l(C)(l(T).BPM_PROCESS_LISTENER_VALUE_TYPE),e=>(o(),r(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u).type=="class"?(o(),r(v,{key:0,label:"\u7C7B\u8DEF\u5F84",prop:"value"},{default:t(()=>[s(V,{modelValue:l(u).value,"onUpdate:modelValue":a[6]||(a[6]=e=>l(u).value=e),placeholder:"\u8BF7\u8F93\u5165\u7C7B\u8DEF\u5F84"},null,8,["modelValue"])]),_:1})):(o(),r(v,{key:1,label:"\u8868\u8FBE\u5F0F",prop:"value"},{default:t(()=>[s(V,{modelValue:l(u).value,"onUpdate:modelValue":a[7]||(a[7]=e=>l(u).value=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F"},null,8,["modelValue"])]),_:1}))]),_:1},8,["model","rules"])),[[O,l(m)]])]),_:1},8,["title","modelValue"])}}});export{se as _};
