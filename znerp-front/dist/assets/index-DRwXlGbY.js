import{_ as b}from"./Left.vue_vue_type_script_setup_true_lang-LonM8K0s.js";import x from"./Right-p2xtJZ6E.js";import{W as S}from"./index-BCtRIZsN.js";import{W as _}from"./constants-PZ18_Kze.js";import{d as h,z as k,r as l,o as y,c as C,f,a as i,k as E,aw as R}from"./index-CIfmhqRC.js";import"./Tag.vue_vue_type_script_setup_true_lang-HxaQZCqP.js";import"./el-card-DyMugU68.js";import"./fetch-D5K_4anA.js";const W={class:"absolute top-0 left-0 right-0 bottom-0 flex"},j=h({__name:"index",setup(z){const c=k(),a=l(""),e=l(!1),s=l(),r=()=>{var t;(t=s.value)==null||t.abort(),e.value=!1},u=l(),p=t=>{s.value=new AbortController,a.value="",e.value=!0,S.writeStream({data:t,onMessage:async o=>{var m;const{code:n,data:g,msg:w}=JSON.parse(o.data);if(n!==0)return c.alert(`\u5199\u4F5C\u5F02\u5E38! ${w}`),void r();a.value=a.value+g,await R(),(m=u.value)==null||m.scrollToBottom()},ctrl:s.value,onClose:r,onError:(...o)=>{console.error("\u5199\u4F5C\u5F02\u5E38",...o),r()}})},v=t=>{a.value=_[t].data},d=()=>{a.value=""};return(t,o)=>(y(),C("div",W,[f(b,{"is-writing":i(e),class:"h-full",onSubmit:p,onReset:d,onExample:v},null,8,["is-writing"]),f(x,{"is-writing":i(e),onStopStream:r,ref_key:"rightRef",ref:u,class:"flex-grow",content:i(a),"onUpdate:content":o[0]||(o[0]=n=>E(a)?a.value=n:null)},null,8,["is-writing","content"])]))}});export{j as default};
