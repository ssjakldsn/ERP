import{d as J,z as L,h as j,u as G,r as p,e as Q,ar as W,n as X,as as Y,O as Z,o as m,c as $,f as e,w as a,a as l,P as ee,x as u,y as c,q as f,D as ae,k as le,F as te,U as oe,C as re,H as ne,I as se,J as ie,K as pe,L as me,M as ue}from"./index-CIfmhqRC.js";import{_ as de}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{_ as ce}from"./index.vue_vue_type_script_setup_true_lang-DYHi04Tm.js";import{_ as fe}from"./DictTag.vue_vue_type_script_lang-CTpVFm77.js";import{_ as _e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{_ as be}from"./index-2RHHZ-Zv.js";import{d as ge}from"./formatTime-DFFN_xWx.js";import{b as ye,d as ke,g as we}from"./index-X3qw9mzS.js";import{b as Ce}from"./formCreate-ECTif2qa.js";import"./index-CrBeVHKs.js";import"./color-BN7ZL7BD.js";import"./el-card-DyMugU68.js";const he=J({name:"BpmForm",__name:"index",setup(ve){const h=L(),{t:z}=j(),{currentRoute:O,push:M}=G(),g=p(!0),v=p(0),x=p([]),r=Q({pageNo:1,pageSize:10,name:null}),S=p(),d=async()=>{g.value=!0;try{const n=await ye(r);x.value=n.list,v.value=n.total}finally{g.value=!1}},y=()=>{r.pageNo=1,d()},P=()=>{S.value.resetFields(),y()},U=n=>{const o={name:"BpmFormEditor"};typeof n=="number"&&(o.query={id:n}),M(o)},_=p(!1),k=p({rule:[],option:{}});return W(()=>O.value,()=>{d()},{immediate:!0}),X(()=>{d()}),(n,o)=>{const R=be,T=oe,V=re,w=ne,s=se,B=ie,F=_e,i=pe,E=fe,H=me,K=ce,A=Y("form-create"),D=de,b=Z("hasPermi"),I=ue;return m(),$(te,null,[e(R,{title:"\u5BA1\u6279\u63A5\u5165\uFF08\u6D41\u7A0B\u8868\u5355\uFF09",url:"https://doc.iocoder.cn/bpm/use-bpm-form/"}),e(F,null,{default:a(()=>[e(B,{ref_key:"queryFormRef",ref:S,inline:!0,model:l(r),class:"-mb-15px","label-width":"68px"},{default:a(()=>[e(V,{label:"\u8868\u5355\u540D",prop:"name"},{default:a(()=>[e(T,{modelValue:l(r).name,"onUpdate:modelValue":o[0]||(o[0]=t=>l(r).name=t),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u8868\u5355\u540D",onKeyup:ee(y,["enter"])},null,8,["modelValue"])]),_:1}),e(V,null,{default:a(()=>[e(s,{onClick:y},{default:a(()=>[e(w,{class:"mr-5px",icon:"ep:search"}),u(" \u641C\u7D22 ")]),_:1}),e(s,{onClick:P},{default:a(()=>[e(w,{class:"mr-5px",icon:"ep:refresh"}),u(" \u91CD\u7F6E ")]),_:1}),c((m(),f(s,{plain:"",type:"primary",onClick:U},{default:a(()=>[e(w,{class:"mr-5px",icon:"ep:plus"}),u(" \u65B0\u589E ")]),_:1})),[[b,["bpm:form:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(F,null,{default:a(()=>[c((m(),f(H,{data:l(x)},{default:a(()=>[e(i,{align:"center",label:"\u7F16\u53F7",prop:"id"}),e(i,{align:"center",label:"\u8868\u5355\u540D",prop:"name"}),e(i,{align:"center",label:"\u72B6\u6001",prop:"status"},{default:a(t=>[e(E,{type:l(ae).COMMON_STATUS,value:t.row.status},null,8,["type","value"])]),_:1}),e(i,{align:"center",label:"\u5907\u6CE8",prop:"remark"}),e(i,{formatter:l(ge),align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},null,8,["formatter"]),e(i,{align:"center",label:"\u64CD\u4F5C"},{default:a(t=>[c((m(),f(s,{link:"",type:"primary",onClick:N=>U(t.row.id)},{default:a(()=>[u(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[b,["bpm:form:update"]]]),c((m(),f(s,{link:"",onClick:N=>(async C=>{const q=await we(C);Ce(k,q.conf,q.fields),_.value=!0})(t.row.id)},{default:a(()=>[u(" \u8BE6\u60C5 ")]),_:2},1032,["onClick"])),[[b,["bpm:form:query"]]]),c((m(),f(s,{link:"",type:"danger",onClick:N=>(async C=>{try{await h.delConfirm(),await ke(C),h.success(z("common.delSuccess")),await d()}catch{}})(t.row.id)},{default:a(()=>[u(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[b,["bpm:form:delete"]]])]),_:1})]),_:1},8,["data"])),[[I,l(g)]]),e(K,{limit:l(r).pageSize,"onUpdate:limit":o[1]||(o[1]=t=>l(r).pageSize=t),page:l(r).pageNo,"onUpdate:page":o[2]||(o[2]=t=>l(r).pageNo=t),total:l(v),onPagination:d},null,8,["limit","page","total"])]),_:1}),e(D,{modelValue:l(_),"onUpdate:modelValue":o[3]||(o[3]=t=>le(_)?_.value=t:null),title:"\u8868\u5355\u8BE6\u60C5",width:"800"},{default:a(()=>[e(A,{option:l(k).option,rule:l(k).rule},null,8,["option","rule"])]),_:1},8,["modelValue"])],64)}}});export{he as default};
