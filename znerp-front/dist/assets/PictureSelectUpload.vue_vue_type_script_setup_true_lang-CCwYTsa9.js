import S from"./picture-CTjip5lJ.js";import{d as x,z as C,o as P,c as _,g as b,a as k,eB as E}from"./index-CIfmhqRC.js";const T=["src"],U=x({name:"PictureSelectUpload",__name:"PictureSelectUpload",emits:["send-picture"],setup(j,{emit:p}){const d=C(),u=p,f=async()=>{const n=await async function(g={}){const{multiple:y,accept:l,limit:h,fileSize:w}={multiple:!0,accept:"image/jpeg, image/png, image/gif",limit:1,fileSize:500,...g},e=document.createElement("input");e.type="file",e.style.display="none",y&&(e.multiple=!0),l&&(e.accept=l),document.body.appendChild(e),e.click();try{return await new Promise((i,s)=>{e.addEventListener("change",a=>{var m;const t=Array.from(((m=a==null?void 0:a.target)==null?void 0:m.files)||[]);if(document.body.removeChild(e),t.length>h)return void s({errorType:"limit",files:t});const o=t.filter(c=>c.size/1048576>w);if(o.length>0)return void s({errorType:"fileSize",files:o});const v=t.map((c,z)=>({file:c,uid:Date.now()+z}));i(v)})})}catch(i){throw console.error("\u9009\u62E9\u6587\u4EF6\u51FA\u9519:",i),i}}();d.success("\u56FE\u7247\u53D1\u9001\u4E2D\u8BF7\u7A0D\u7B49\u3002\u3002\u3002");const r=await E({file:n[0].file});u("send-picture",r.data)};return(n,r)=>(P(),_("div",null,[b("img",{src:k(S),class:"w-35px h-35px",onClick:f},null,8,T)]))}});export{U as _};
