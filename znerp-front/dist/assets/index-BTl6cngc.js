import{d as ee,z as ae,r as p,e as re,n as le,O as te,o as m,c as oe,f as e,w as r,a,P as ne,x as u,y as F,q as c,a5 as _,F as de,U as ie,C as se,A as pe,B as me,G as ue,H as be,I as ce,J as fe,K as ge,ce as ke,L as we,M as he}from"./index-CIfmhqRC.js";import{_ as _e}from"./index.vue_vue_type_script_setup_true_lang-DYHi04Tm.js";import{E as xe,a as Ue,b as ye}from"./el-dropdown-item-CvgBZuG7.js";import{E as ve}from"./el-avatar-Cbg-oQZd.js";import{_ as Ee}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{_ as Ve}from"./index-2RHHZ-Zv.js";import{d as O}from"./formatTime-DFFN_xWx.js";import{g as Ce,c as Be,b as Te}from"./index-C5AE-Gtu.js";import{c as f}from"./permission-CNSsVK1N.js";import{f as x}from"./formatter-CHMUnmj-.js";import{_ as Ie}from"./UpdateBindUserForm.vue_vue_type_script_setup_true_lang-BdZZDd4K.js";import{_ as qe}from"./BrokerageUserListDialog.vue_vue_type_script_setup_true_lang-CjKYitCq.js";import{_ as ze}from"./BrokerageOrderListDialog.vue_vue_type_script_setup_true_lang-B3zPKTmu.js";import"./index-CrBeVHKs.js";import"./el-card-DyMugU68.js";import"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import"./el-descriptions-item-BL6ba85F.js";import"./DictTag.vue_vue_type_script_lang-CTpVFm77.js";import"./color-BN7ZL7BD.js";import"./index-BNxgj32s.js";import"./constants-A8BI3pz7.js";const De=ee({name:"TradeBrokerageUser",__name:"index",setup(Fe){const g=ae(),U=p(!0),V=p(0),C=p([]),o=re({pageNo:1,pageSize:10,bindUserId:null,brokerageEnabled:!0,createTime:[]}),B=p(),b=async()=>{U.value=!0;try{const n=await Ce(o);C.value=n.list,V.value=n.total}finally{U.value=!1}},y=()=>{o.pageNo=1,b()},P=()=>{B.value.resetFields(),y()},T=p(),L=n=>{T.value.open(n)},I=p(),M=n=>{I.value.open(n)},q=p(),N=n=>{q.value.open(n)},R=async n=>{try{await g.confirm(`\u786E\u8BA4\u8981\u6E05\u9664"${n.nickname}"\u7684\u4E0A\u7EA7\u63A8\u5E7F\u4EBA\u5417\uFF1F`),await Be({id:n.id}),g.success("\u6E05\u9664\u6210\u529F"),await b()}catch{}};return le(()=>{b()}),(n,d)=>{const S=Ve,Y=ie,k=se,z=pe,H=me,$=ue,v=be,E=ce,K=fe,D=Ee,t=ge,A=ve,G=ke,w=xe,J=Ue,j=ye,Q=we,W=_e,X=te("hasPermi"),Z=he;return m(),oe(de,null,[e(S,{title:"\u3010\u4EA4\u6613\u3011\u5206\u9500\u8FD4\u4F63",url:"https://doc.iocoder.cn/mall/trade-brokerage/"}),e(D,null,{default:r(()=>[e(K,{class:"-mb-15px",model:a(o),ref_key:"queryFormRef",ref:B,inline:!0,"label-width":"85px"},{default:r(()=>[e(k,{label:"\u63A8\u5E7F\u5458\u7F16\u53F7",prop:"bindUserId"},{default:r(()=>[e(Y,{modelValue:a(o).bindUserId,"onUpdate:modelValue":d[0]||(d[0]=l=>a(o).bindUserId=l),placeholder:"\u8BF7\u8F93\u5165\u63A8\u5E7F\u5458\u7F16\u53F7",clearable:"",onKeyup:ne(y,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(k,{label:"\u63A8\u5E7F\u8D44\u683C",prop:"brokerageEnabled"},{default:r(()=>[e(H,{modelValue:a(o).brokerageEnabled,"onUpdate:modelValue":d[1]||(d[1]=l=>a(o).brokerageEnabled=l),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u63A8\u5E7F\u8D44\u683C"},{default:r(()=>[e(z,{label:"\u6709",value:!0}),e(z,{label:"\u65E0",value:!1})]),_:1},8,["modelValue"])]),_:1}),e(k,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:r(()=>[e($,{modelValue:a(o).createTime,"onUpdate:modelValue":d[2]||(d[2]=l=>a(o).createTime=l),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),e(k,null,{default:r(()=>[e(E,{onClick:y},{default:r(()=>[e(v,{icon:"ep:search",class:"mr-5px"}),u(" \u641C\u7D22")]),_:1}),e(E,{onClick:P},{default:r(()=>[e(v,{icon:"ep:refresh",class:"mr-5px"}),u(" \u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(D,null,{default:r(()=>[F((m(),c(Q,{data:a(C),stripe:!0,"show-overflow-tooltip":!0},{default:r(()=>[e(t,{label:"\u7528\u6237\u7F16\u53F7",align:"center",prop:"id","min-width":"80px"}),e(t,{label:"\u5934\u50CF",align:"center",prop:"avatar",width:"70px"},{default:r(l=>[e(A,{src:l.row.avatar},null,8,["src"])]),_:1}),e(t,{label:"\u6635\u79F0",align:"center",prop:"nickname","min-width":"80px"}),e(t,{label:"\u63A8\u5E7F\u4EBA\u6570",align:"center",prop:"brokerageUserCount",width:"80px"}),e(t,{label:"\u63A8\u5E7F\u8BA2\u5355\u6570\u91CF",align:"center",prop:"brokerageOrderCount","min-width":"110px"}),e(t,{label:"\u63A8\u5E7F\u8BA2\u5355\u91D1\u989D",align:"center",prop:"brokerageOrderPrice","min-width":"110px",formatter:a(x)},null,8,["formatter"]),e(t,{label:"\u5DF2\u63D0\u73B0\u91D1\u989D",align:"center",prop:"withdrawPrice","min-width":"100px",formatter:a(x)},null,8,["formatter"]),e(t,{label:"\u5DF2\u63D0\u73B0\u6B21\u6570",align:"center",prop:"withdrawCount","min-width":"100px"}),e(t,{label:"\u672A\u63D0\u73B0\u91D1\u989D",align:"center",prop:"price","min-width":"100px",formatter:a(x)},null,8,["formatter"]),e(t,{label:"\u51BB\u7ED3\u4E2D\u4F63\u91D1",align:"center",prop:"frozenPrice","min-width":"100px",formatter:a(x)},null,8,["formatter"]),e(t,{label:"\u63A8\u5E7F\u8D44\u683C",align:"center",prop:"brokerageEnabled","min-width":"80px"},{default:r(l=>[e(G,{modelValue:l.row.brokerageEnabled,"onUpdate:modelValue":h=>l.row.brokerageEnabled=h,"active-text":"\u6709","inactive-text":"\u65E0","inline-prompt":"",disabled:!a(f)(["trade:brokerage-user:update-bind-user"]),onChange:h=>(async i=>{try{const s=i.brokerageEnabled?"\u5F00\u901A":"\u5173\u95ED";await g.confirm(`\u786E\u8BA4\u8981${s}"${i.nickname}"\u7684\u63A8\u5E7F\u8D44\u683C\u5417\uFF1F`),await Te({id:i.id,enabled:i.brokerageEnabled}),g.success(s+"\u6210\u529F"),await b()}catch{i.brokerageEnabled=!i.brokerageEnabled}})(l.row)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:1}),e(t,{label:"\u6210\u4E3A\u63A8\u5E7F\u5458\u65F6\u95F4",align:"center",prop:"brokerageTime",formatter:a(O),width:"180px"},null,8,["formatter"]),e(t,{label:"\u4E0A\u7EA7\u63A8\u5E7F\u5458\u7F16\u53F7",align:"center",prop:"bindUserId",width:"150px"}),e(t,{label:"\u63A8\u5E7F\u5458\u7ED1\u5B9A\u65F6\u95F4",align:"center",prop:"bindUserTime",formatter:a(O),width:"180px"},null,8,["formatter"]),e(t,{label:"\u64CD\u4F5C",align:"center",width:"150px",fixed:"right"},{default:r(l=>[F((m(),c(j,{onCommand:h=>((i,s)=>{switch(i){case"openBrokerageUserTable":L(s.id);break;case"openBrokerageOrderTable":M(s.id);break;case"openUpdateBindUserForm":N(s);break;case"handleClearBindUser":R(s)}})(h,l.row)},{dropdown:r(()=>[e(J,null,{default:r(()=>[a(f)(["trade:brokerage-user:user-query"])?(m(),c(w,{key:0,command:"openBrokerageUserTable"},{default:r(()=>[u(" \u63A8\u5E7F\u4EBA ")]),_:1})):_("",!0),a(f)(["trade:brokerage-user:order-query"])?(m(),c(w,{key:1,command:"openBrokerageOrderTable"},{default:r(()=>[u(" \u63A8\u5E7F\u8BA2\u5355 ")]),_:1})):_("",!0),a(f)(["trade:brokerage-user:update-bind-user"])?(m(),c(w,{key:2,command:"openUpdateBindUserForm"},{default:r(()=>[u(" \u4FEE\u6539\u4E0A\u7EA7\u63A8\u5E7F\u4EBA ")]),_:1})):_("",!0),l.row.bindUserId&&a(f)(["trade:brokerage-user:clear-bind-user"])?(m(),c(w,{key:3,command:"handleClearBindUser"},{default:r(()=>[u(" \u6E05\u9664\u4E0A\u7EA7\u63A8\u5E7F\u4EBA ")]),_:1})):_("",!0)]),_:2},1024)]),default:r(()=>[e(E,{link:"",type:"primary"},{default:r(()=>[e(v,{icon:"ep:d-arrow-right"}),u(" \u66F4\u591A ")]),_:1})]),_:2},1032,["onCommand"])),[[X,["trade:brokerage-user:user-query","trade:brokerage-user:order-query","trade:brokerage-user:update-bind-user","trade:brokerage-user:clear-bind-user"]]])]),_:1})]),_:1},8,["data"])),[[Z,a(U)]]),e(W,{total:a(V),page:a(o).pageNo,"onUpdate:page":d[3]||(d[3]=l=>a(o).pageNo=l),limit:a(o).pageSize,"onUpdate:limit":d[4]||(d[4]=l=>a(o).pageSize=l),onPagination:b},null,8,["total","page","limit"])]),_:1}),e(Ie,{ref_key:"updateBindUserFormRef",ref:q,onSuccess:b},null,512),e(qe,{ref_key:"brokerageUserListDialogRef",ref:T},null,512),e(ze,{ref_key:"brokerageOrderListDialogRef",ref:I},null,512)],64)}}});export{De as default};
