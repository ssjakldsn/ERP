import{d as A,h as E,z as O,r as i,e as j,o as n,q as v,w as t,f as u,a as e,x as f,y as z,c as B,F as D,p as I,Q as J,D as L,t as Q,k as R,U as G,C as K,cg as W,cm as X,ak as Y,al as Z,J as $,I as ee,M as le}from"./index-CIfmhqRC.js";import{_ as ae}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{S as g}from"./seckillConfig-BkprWdBq.js";import{C as se}from"./constants-A8BI3pz7.js";const te=A({name:"SeckillConfigForm",__name:"SeckillConfigForm",emits:["success"],setup(ue,{expose:k,emit:y}){const{t:c}=E(),V=O(),d=i(!1),_=i(""),r=i(!1),T=i(""),s=i({id:void 0,name:void 0,startTime:void 0,endTime:void 0,sliderPicUrls:void 0,status:void 0}),C=j({name:[{required:!0,message:"\u79D2\u6740\u65F6\u6BB5\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],startTime:[{required:!0,message:"\u5F00\u59CB\u65F6\u95F4\u70B9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],endTime:[{required:!0,message:"\u7ED3\u675F\u65F6\u95F4\u70B9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u6D3B\u52A8\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),p=i();k({open:async(o,l)=>{if(d.value=!0,_.value=c("action."+o),T.value=o,q(),l){r.value=!0;try{s.value=await g.getSeckillConfig(l)}finally{r.value=!1}}}});const S=y,h=async()=>{await p.value.validate(),r.value=!0;try{const o=s.value;T.value==="create"?(await g.createSeckillConfig(o),V.success(c("common.createSuccess"))):(await g.updateSeckillConfig(o),V.success(c("common.updateSuccess"))),d.value=!1,S("success")}finally{r.value=!1}},q=()=>{var o;s.value={id:void 0,name:void 0,startTime:void 0,endTime:void 0,sliderPicUrls:[],status:se.ENABLE},(o=p.value)==null||o.resetFields()};return(o,l)=>{const w=G,m=K,b=W,P=X,H=Y,x=Z,F=$,U=ee,M=ae,N=le;return n(),v(M,{title:e(_),modelValue:e(d),"onUpdate:modelValue":l[6]||(l[6]=a=>R(d)?d.value=a:null)},{footer:t(()=>[u(U,{onClick:h,type:"primary",disabled:e(r)},{default:t(()=>[f("\u786E \u5B9A")]),_:1},8,["disabled"]),u(U,{onClick:l[5]||(l[5]=a=>d.value=!1)},{default:t(()=>[f("\u53D6 \u6D88")]),_:1})]),default:t(()=>[z((n(),v(F,{ref_key:"formRef",ref:p,model:e(s),rules:e(C),"label-width":"120px"},{default:t(()=>[u(m,{label:"\u79D2\u6740\u65F6\u6BB5\u540D\u79F0",prop:"name"},{default:t(()=>[u(w,{modelValue:e(s).name,"onUpdate:modelValue":l[0]||(l[0]=a=>e(s).name=a),placeholder:"\u8BF7\u8F93\u5165\u79D2\u6740\u65F6\u6BB5\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(m,{label:"\u5F00\u59CB\u65F6\u95F4\u70B9",prop:"startTime"},{default:t(()=>[u(b,{modelValue:e(s).startTime,"onUpdate:modelValue":l[1]||(l[1]=a=>e(s).startTime=a),"value-format":"HH:mm:ss",placeholder:"\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\u70B9"},null,8,["modelValue"])]),_:1}),u(m,{label:"\u7ED3\u675F\u65F6\u95F4\u70B9",prop:"endTime"},{default:t(()=>[u(b,{modelValue:e(s).endTime,"onUpdate:modelValue":l[2]||(l[2]=a=>e(s).endTime=a),"value-format":"HH:mm:ss",placeholder:"\u9009\u62E9\u7ED3\u675F\u65F6\u95F4\u70B9"},null,8,["modelValue"])]),_:1}),u(m,{label:"\u79D2\u6740\u8F6E\u64AD\u56FE",prop:"sliderPicUrls"},{default:t(()=>[u(P,{modelValue:e(s).sliderPicUrls,"onUpdate:modelValue":l[3]||(l[3]=a=>e(s).sliderPicUrls=a),placeholder:"\u8BF7\u8F93\u5165\u79D2\u6740\u8F6E\u64AD\u56FE"},null,8,["modelValue"])]),_:1}),u(m,{label:"\u6D3B\u52A8\u72B6\u6001",prop:"status"},{default:t(()=>[u(x,{modelValue:e(s).status,"onUpdate:modelValue":l[4]||(l[4]=a=>e(s).status=a)},{default:t(()=>[(n(!0),B(D,null,I(e(J)(e(L).COMMON_STATUS),a=>(n(),v(H,{key:a.value,value:a.value},{default:t(()=>[f(Q(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[N,e(r)]])]),_:1},8,["title","modelValue"])}}});export{te as _};
