import{d as C,r as t,o as n,q as p,w as d,f as o,x as g,a,y as D,c as T,p as B,F as A,k as J,A as j,B as M,C as R,U as z,J as E,I as G,M as H}from"./index-CIfmhqRC.js";import{_ as K}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{d as L}from"./index-C9Urw_yh.js";import{g as N}from"./index-QrlE36WK.js";const O=C({name:"BpmTaskDelegateForm",__name:"TaskDelegateForm",emits:["success"],setup(P,{expose:_,emit:b}){const r=t(!1),i=t(!1),l=t({id:"",delegateUserId:void 0,reason:""}),y=t({delegateUserId:[{required:!0,message:"\u63A5\u6536\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],reason:[{required:!0,message:"\u59D4\u6D3E\u7406\u7531\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),m=t(),f=t([]);_({open:async u=>{r.value=!0,k(),l.value.id=u,f.value=await N()}});const U=b,V=async()=>{if(m&&await m.value.validate()){i.value=!0;try{await L(l.value),r.value=!1,U("success")}finally{i.value=!1}}},k=()=>{var u;l.value={id:"",delegateUserId:void 0,reason:""},(u=m.value)==null||u.resetFields()};return(u,s)=>{const w=j,I=M,c=R,h=z,x=E,v=G,F=K,q=H;return n(),p(F,{modelValue:a(r),"onUpdate:modelValue":s[3]||(s[3]=e=>J(r)?r.value=e:null),title:"\u59D4\u6D3E\u4EFB\u52A1",width:"500"},{footer:d(()=>[o(v,{disabled:a(i),type:"primary",onClick:V},{default:d(()=>[g("\u786E \u5B9A")]),_:1},8,["disabled"]),o(v,{onClick:s[2]||(s[2]=e=>r.value=!1)},{default:d(()=>[g("\u53D6 \u6D88")]),_:1})]),default:d(()=>[D((n(),p(x,{ref_key:"formRef",ref:m,model:a(l),rules:a(y),"label-width":"110px"},{default:d(()=>[o(c,{label:"\u63A5\u6536\u4EBA",prop:"delegateUserId"},{default:d(()=>[o(I,{modelValue:a(l).delegateUserId,"onUpdate:modelValue":s[0]||(s[0]=e=>a(l).delegateUserId=e),clearable:"",style:{width:"100%"}},{default:d(()=>[(n(!0),T(A,null,B(a(f),e=>(n(),p(w,{key:e.id,label:e.nickname,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(c,{label:"\u59D4\u6D3E\u7406\u7531",prop:"reason"},{default:d(()=>[o(h,{modelValue:a(l).reason,"onUpdate:modelValue":s[1]||(s[1]=e=>a(l).reason=e),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u59D4\u6D3E\u7406\u7531"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[q,a(i)]])]),_:1},8,["modelValue"])}}});export{O as _};
