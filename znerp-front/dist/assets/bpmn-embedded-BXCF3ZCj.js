import{_ as jl}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{dw as _r,dx as Dh,dy as lx,d as ue,r as G,c8 as Ka,a3 as Ll,dz as ux,n as Sr,cy as Cn,O as px,o as Y,c as Pt,g as Ot,aT as dx,F as ne,f as P,w as L,a as I,q as ut,a5 as wt,x as ft,t as Bh,y as Cr,k as Me,aI as hx,dA as Tr,aL as mx,aW as fx,I as Tn,b4 as ui,ar as ie,aw as Re,p as Xe,bN as Nt,A as pi,B as di,C as Ke,J as un,e as Vl,U as pn,K as Ar,L as kr,M as Oh,Q as Fl,D as So,a4 as zl,z as jh,cG as Co,aU as vx,aV as yx,a_ as gx,ae as Lh,H as Ya,i as $l,at as bx,ay as xx}from"./index-CIfmhqRC.js";import{_ as Ex}from"./XTextButton-eNQK5rLc.js";import{_ as Pr}from"./XButton-CPWgIV2x.js";import{E as wx,a as _x}from"./el-collapse-item-BgajxfOI.js";import{a as Sx}from"./index-X3qw9mzS.js";import{E as Cx}from"./el-tree-select-CYFGeiEt.js";import{h as Tx,d as Ax}from"./tree-BMqZf9_I.js";import{g as kx}from"./index-CSBlvrKl.js";import{g as Px}from"./index-C34hh2Ad.js";import{g as Mx}from"./index-5G2YP0dG.js";import{g as Rx}from"./index-QrlE36WK.js";import{g as Nx}from"./index-DoOVXCWW.js";import{_ as Vh}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{_ as Fh}from"./index.vue_vue_type_script_setup_true_lang-DYHi04Tm.js";import{C as zh}from"./constants-A8BI3pz7.js";import{P as Ix}from"./index-D8KNv32A.js";import{E as $h}from"./el-drawer-QOxzUn5j.js";import{_ as Dx}from"./DictTag.vue_vue_type_script_lang-CTpVFm77.js";import{P as Bx}from"./index-BbfStrPJ.js";import{f as Mr}from"./formatTime-DFFN_xWx.js";var Gl={exports:{}};typeof Object.create=="function"?Gl.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Gl.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}};const at=_r(Gl.exports);var Gh,Ul,Ox=(Gh=function(t){var e=t.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),o=2;r===1/0;o*=2)r=Math.log(Math.pow(2,n/o))/Math.log(i)*o;var a=r-Math.floor(r),c="";for(o=0;o<Math.floor(r);o++)c=Math.floor(Math.random()*i).toString(i)+c;if(a){var l=Math.pow(i,a);c=Math.floor(Math.random()*l).toString(i)+c}var u=parseInt(c,i);return u!==1/0&&u>=Math.pow(2,n)?e(n,i):c};e.rack=function(n,i,r){var o=function(c){var l=0;do{if(l++>10){if(!r)throw new Error("too many ID collisions, use more bits");n+=r}var u=e(n,i)}while(Object.hasOwnProperty.call(a,u));return a[u]=c,u},a=o.hats={};return o.get=function(c){return o.hats[c]},o.set=function(c,l){return o.hats[c]=l,o},o.bits=n||128,o.base=i||16,o}},Gh(Ul={exports:{}},Ul.exports),Ul.exports);function An(t){if(!(this instanceof An))return new An(t);t=t||[128,36,1],this._seed=t.length?Ox.rack(t[0],t[1],t[2]):t}function Ja(t){return Array.prototype.concat.apply([],t)}An.prototype.next=function(t){return this._seed(t||!0)},An.prototype.nextPrefixed=function(t,e){var n;do n=t+this.next(!0);while(this.assigned(n));return this.claim(n,e),n},An.prototype.claim=function(t,e){this._seed.set(t,e||!0)},An.prototype.assigned=function(t){return this._seed.get(t)||!1},An.prototype.unclaim=function(t){delete this._seed.hats[t]},An.prototype.clear=function(){var t,e=this._seed.hats;for(t in e)this.unclaim(t)};var To=Object.prototype.toString,jx=Object.prototype.hasOwnProperty;function Ao(t){return t===void 0}function kn(t){return t!==void 0}function Uh(t){return t==null}function _t(t){return To.call(t)==="[object Array]"}function Se(t){return To.call(t)==="[object Object]"}function mt(t){return To.call(t)==="[object Number]"}function Ce(t){var e=To.call(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"||e==="[object Proxy]"}function Rr(t){return To.call(t)==="[object String]"}function hi(t,e){return jx.call(t,e)}function jt(t,e){var n;return e=Wl(e),F(t,function(i,r){if(e(i,r))return n=i,!1}),n}function Et(t,e){var n=[];return F(t,function(i,r){e(i,r)&&n.push(i)}),n}function F(t,e){var n;if(!Ao(t)){var i=_t(t)?zx:Fx;for(var r in t)if(hi(t,r)&&e(n=t[r],i(r))===!1)return n}}function Lx(t,e){return Ao(t)?[]:(function(n){if(!_t(n))throw new Error("must supply array")}(t),e=Wl(e),t.filter(function(n,i){return!e(n,i)}))}function $e(t,e,n){return F(t,function(i,r){n=e(n,i,r)}),n}function Nr(t,e){return!!$e(t,function(n,i,r){return n&&e(i,r)},!0)}function Wi(t,e){return!!jt(t,e)}function pe(t,e){var n=[];return F(t,function(i,r){n.push(e(i,r))}),n}function Za(t){return t&&Object.keys(t)||[]}function ko(t){return Za(t).length}function Hl(t){return pe(t,function(e){return e})}function Ir(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=ql(e),F(t,function(i){var r=e(i)||"_",o=n[r];o||(o=n[r]=[]),o.push(i)}),n}function Hh(t){t=ql(t);for(var e={},n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return F(i,function(o){return Ir(o,t,e)}),pe(e,function(o,a){return o[0]})}var Vx=Hh;function dn(t,e){e=ql(e);var n=[];return F(t,function(i,r){for(var o=e(i,r),a={d:o,v:i},c=0;c<n.length;c++)if(o<n[c].d)return void n.splice(c,0,a);n.push(a)}),pe(n,function(i){return i.v})}function hn(t){return function(e){return Nr(t,function(n,i){return e[i]===n})}}function ql(t){return Ce(t)?t:function(e){return e[t]}}function Wl(t){return Ce(t)?t:function(e){return e===t}}function Fx(t){return t}function zx(t){return Number(t)}function qh(t,e){var n,i,r,o;function a(p){var h=Date.now(),v=p?0:o+e-h;if(v>0)return c(v);t.apply(r,i),l()}function c(p){n=setTimeout(a,p)}function l(){n&&clearTimeout(n),n=o=i=r=void 0}function u(){o=Date.now();for(var p=arguments.length,h=new Array(p),v=0;v<p;v++)h[v]=arguments[v];i=h,r=this,n||c(e)}return u.flush=function(){n&&a(!0),l()},u.cancel=l,u}function Po(t,e){return t.bind(e)}function Xl(){return Xl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xl.apply(this,arguments)}function $(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Xl.apply(void 0,[t].concat(n))}function mi(t,e){var n={},i=Object(t);return F(e,function(r){r in i&&(n[r]=t[r])}),n}function fi(t,e){var n={};return F(Object(t),function(i,r){e.indexOf(r)===-1&&(n[r]=i)}),n}function Ge(t,e,n){return arguments.length==2?t.getAttribute(e):n===null?t.removeAttribute(e):(t.setAttribute(e,n),t)}var $x=[].indexOf,Kl=function(t,e){if($x)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1},Gx=/\s+/,Ux=Object.prototype.toString;function re(t){return new vi(t)}function vi(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}function Qa(t){for(var e;t.childNodes.length;)e=t.childNodes[0],t.removeChild(e);return t}vi.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~Kl(e,t)||e.push(t),this.el.className=e.join(" "),this},vi.prototype.remove=function(t){if(Ux.call(t)=="[object RegExp]")return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=Kl(e,t);return~n&&e.splice(n,1),this.el.className=e.join(" "),this},vi.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},vi.prototype.toggle=function(t,e){return this.list?(e!==void 0?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(e!==void 0?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},vi.prototype.array=function(){var t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(Gx);return t[0]===""&&t.shift(),t},vi.prototype.has=vi.prototype.contains=function(t){return this.list?this.list.contains(t):!!~Kl(this.array(),t)};var Dr=typeof Element<"u"?Element.prototype:{},Wh=Dr.matches||Dr.matchesSelector||Dr.webkitMatchesSelector||Dr.mozMatchesSelector||Dr.msMatchesSelector||Dr.oMatchesSelector,ts=function(t,e){if(!t||t.nodeType!==1)return!1;if(Wh)return Wh.call(t,e);for(var n=t.parentNode.querySelectorAll(e),i=0;i<n.length;i++)if(n[i]==t)return!0;return!1};function Xi(t,e,n){for(var i=n?t:t.parentNode;i&&i.nodeType!==document.DOCUMENT_NODE&&i.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(ts(i,e))return i;i=i.parentNode}return ts(i,e)?i:null}var Xh=window.addEventListener?"addEventListener":"attachEvent",Hx=window.removeEventListener?"removeEventListener":"detachEvent",Kh=Xh!=="addEventListener"?"on":"",lt={bind:function(t,e,n,i){return t[Xh](Kh+e,n,i||!1),n},unbind:function(t,e,n,i){return t[Hx](Kh+e,n,i||!1),n}},Yh=["focus","blur"],Yl,Ue={bind:function(t,e,n,i,r){return Yh.indexOf(n)!==-1&&(r=!0),lt.bind(t,n,function(o){var a=o.target||o.srcElement;o.delegateTarget=Xi(a,e,!0),o.delegateTarget&&i.call(t,o)},r)},unbind:function(t,e,n,i){return Yh.indexOf(e)!==-1&&(i=!0),lt.unbind(t,e,n,i)}},Ft=function(t,e){if(typeof t!="string")throw new TypeError("String expected");e||(e=document);var n=/<([\w:]+)/.exec(t);if(!n)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body")return(r=e.createElement("html")).innerHTML=t,r.removeChild(r.lastChild);var r,o=oe[i]||oe._default,a=o[0],c=o[1],l=o[2];for((r=e.createElement("div")).innerHTML=c+t+l;a--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);for(var u=e.createDocumentFragment();r.firstChild;)u.appendChild(r.removeChild(r.firstChild));return u},Jh=!1;typeof document<"u"&&((Yl=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Jh=!Yl.getElementsByTagName("link").length,Yl=void 0);var oe={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Jh?[1,"X<div>","</div>"]:[0,"",""]};function qt(t,e){return(e=e||document).querySelector(t)}function Jl(t,e){return(e=e||document).querySelectorAll(t)}function Pn(t){t.parentNode&&t.parentNode.removeChild(t)}function pt(t,e){return function(n,i){i.appendChild(function(r,o){if(r.ownerDocument!==o.ownerDocument)try{return o.ownerDocument.importNode(r,!0)}catch{}return r}(n,i))}(e,t),t}oe.td=oe.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],oe.option=oe.optgroup=[1,'<select multiple="multiple">',"</select>"],oe.thead=oe.tbody=oe.colgroup=oe.caption=oe.tfoot=[1,"<table>","</table>"],oe.polyline=oe.ellipse=oe.polygon=oe.circle=oe.text=oe.line=oe.path=oe.rect=oe.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Zh={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Qh(t,e,n){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=Zh[i];r?(r===2&&typeof n=="number"&&(n=String(n)+"px"),t.style[i]=n):t.setAttributeNS(null,e,n)}function W(t,e,n){if(typeof e=="string"){if(n===void 0)return function(i,r){return Zh[r]?i.style[r]:i.getAttributeNS(null,r)}(t,e);Qh(t,e,n)}else(function(i,r){var o,a,c=Object.keys(r);for(o=0;a=c[o];o++)Qh(i,a,r[a])})(t,e);return t}function Zl(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}var qx=/\s+/,Wx=Object.prototype.toString;function Ql(t){return t!==void 0}function St(t){return new yi(t)}function yi(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}function Zt(t){var e=t.parentNode;return e&&e.removeChild(t),t}function tm(t){for(var e;e=t.firstChild;)Zt(e);return t}function em(t){return t.cloneNode(!0)}yi.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~Zl(e,t)||e.push(t),Ql(this.el.className.baseVal)?this.el.className.baseVal=e.join(" "):this.el.className=e.join(" "),this},yi.prototype.remove=function(t){if(Wx.call(t)==="[object RegExp]")return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=Zl(e,t);return~n&&e.splice(n,1),this.el.className.baseVal=e.join(" "),this},yi.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},yi.prototype.toggle=function(t,e){return this.list?(Ql(e)?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(Ql(e)?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},yi.prototype.array=function(){var t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(qx);return t[0]===""&&t.shift(),t},yi.prototype.has=yi.prototype.contains=function(t){return this.list?this.list.contains(t):!!~Zl(this.array(),t)};var tu="http://www.w3.org/2000/svg",nm='<svg xmlns="'+tu+'"';function Xx(t){var e=!1;t.substring(0,4)==="<svg"?t.indexOf(tu)===-1&&(t=nm+t.substring(4)):(t=nm+">"+t+"</svg>",e=!0);var n=function(o){var a;return(a=new DOMParser).async=!1,a.parseFromString(o,"text/xml")}(t);if(!e)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function st(t,e){var n;return t.charAt(0)==="<"?(n=Xx(t).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(tu,t),e&&W(n,e),n}var eu=null;function im(){return eu===null&&(eu=st("svg")),eu}function rm(t,e){var n,i,r=Object.keys(e);for(n=0;i=r[n];n++)t[i]=e[i];return t}function Mo(t){return im().createSVGTransform()}var om=/([&<>]{1})/g,Kx=/([\n\r"]{1})/g,Yx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function nu(t,e){return t.replace(e,function(n,i){return Yx[i]||i})}function am(t,e){var n,i,r,o,a;switch(t.nodeType){case 3:e.push(nu(t.textContent,om));break;case 1:if(e.push("<",t.tagName),t.hasAttributes())for(n=0,i=(r=t.attributes).length;n<i;++n)o=r.item(n),e.push(" ",o.name,'="',nu(o.value,Kx),'"');if(t.hasChildNodes()){for(e.push(">"),n=0,i=(a=t.childNodes).length;n<i;++n)am(a.item(n),e);e.push("</",t.tagName,">")}else e.push("/>");break;case 8:e.push("<!--",nu(t.nodeValue,om),"-->");break;case 4:e.push("<![CDATA[",t.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+t.nodeType)}return e}function sm(t,e){return function(n){for(var i=n.firstChild,r=[];i;)am(i,r),i=i.nextSibling;return r.join("")}(t)}function Jx(t,e){return e instanceof SVGMatrix?t.createSVGTransformFromMatrix(e):e}function Ro(t,e){var n=t.transform.baseVal;return e&&(Array.isArray(e)||(e=[e]),function(i,r){var o,a;for(i.clear(),o=0;a=r[o];o++)i.appendItem(Jx(i,a))}(n,e)),n.consolidate()}var Zx=/^class /;function iu(t){return Object.prototype.toString.call(t)==="[object Array]"}function ru(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function es(){var t=Array.prototype.slice.call(arguments);t.length===1&&iu(t[0])&&(t=t[0]);var e=t.pop();return e.$inject=t,e}var Qx=/constructor\s*[^(]*\(\s*([^)]*)\)/m,tE=/^(?:async )?(?:function\s*)?[^(]*\(\s*([^)]*)\)/m,eE=/\/\*([^*]*)\*\//m;function nE(t){if(typeof t!="function")throw new Error('Cannot annotate "'+t+'". Expected a function!');var e=t.toString().match(function(n){return Zx.test(n.toString())}(t)?Qx:tE);return e&&e[1]&&e[1].split(",").map(function(n){return(e=n.match(eE))?e[1].trim():n.trim()})||[]}function iE(){var t=[];this.factory=function(e,n){return t.push([e,"factory",n]),this},this.value=function(e,n){return t.push([e,"value",n]),this},this.type=function(e,n){return t.push([e,"type",n]),this},this.forEach=function(e){t.forEach(e)}}function ou(t,e){e=e||{get:function(f,y){if(n.push(f),y===!1)return null;throw a('No provider for "'+f+'"!')}};var n=[],i=this._providers=Object.create(e._providers||null),r=this._instances=Object.create(null),o=r.injector=this,a=function(f){var y=n.join(" -> ");return n.length=0,new Error(y?f+" (Resolving: "+y+")":f)},c=function(f,y){if(!i[f]&&f.indexOf(".")!==-1){for(var b=f.split("."),w=c(b.shift());b.length;)w=w[b.shift()];return w}if(ru(r,f))return r[f];if(ru(i,f)){if(n.indexOf(f)!==-1)throw n.push(f),a("Cannot resolve circular dependency!");return n.push(f),r[f]=i[f][0](i[f][1]),n.pop(),r[f]}return e.get(f,y)},l=function(f,y){if(y===void 0&&(y={}),typeof f!="function"){if(!iu(f))throw new Error('Cannot invoke "'+f+'". Expected a function!');f=es(f.slice())}return{fn:f,dependencies:(f.$inject||nE(f)).map(function(b){return ru(y,b)?y[b]:c(b)})}},u=function(f){var y=l(f),b=y.fn,w=y.dependencies;return new(Function.prototype.bind.apply(b,[null].concat(w)))},p=function(f,y,b){var w=l(f,b),g=w.fn,_=w.dependencies;return g.apply(y,_)},h=function(f){return es(function(y){return f.get(y)})},v={factory:p,type:u,value:function(f){return f}};t.forEach(function(f){function y(_,E){return _!=="value"&&iu(E)&&(E=es(E.slice())),E}if(f instanceof iE)f.forEach(function(_){var E=_[0],S=_[1],D=_[2];i[E]=[v[S],y(S,D),S]});else if(typeof f=="object")if(f.__exports__){var b=Object.keys(f).reduce(function(_,E){return E.substring(0,2)!=="__"&&(_[E]=f[E]),_},Object.create(null)),w=new ou((f.__modules__||[]).concat([b]),o),g=es(function(_){return w.get(_)});f.__exports__.forEach(function(_){i[_]=[g,_,"private",w]})}else Object.keys(f).forEach(function(_){if(f[_][2]!=="private"){var E=f[_][0],S=f[_][1];i[_]=[v[E],y(E,S),E]}else i[_]=f[_]})}),this.get=c,this.invoke=p,this.instantiate=u,this.createChild=function(f,y){if(y&&y.length){var b,w,g,_,E=Object.create(null),S=Object.create(null),D=[],s=[],d=[];for(var m in i)b=i[m],y.indexOf(m)!==-1&&(b[2]==="private"?(w=D.indexOf(b[3]))===-1?(g=b[3].createChild([],y),_=h(g),D.push(b[3]),s.push(g),d.push(_),E[m]=[_,m,"private",g]):E[m]=[d[w],m,"private",s[w]]:E[m]=[b[2],b[1]],S[m]=!0),b[2]!=="factory"&&b[2]!=="type"||!b[1].$scope||y.forEach(function(C){b[1].$scope.indexOf(C)!==-1&&(E[m]=[b[2],b[1]],S[C]=!0)});y.forEach(function(C){if(!S[C])throw new Error('No provider for "'+C+'". Cannot use provider from the parent!')}),f.unshift(E)}return new ou(f,o)}}function $n(t,e){var n=this;e=e||1e3,t.on(["render.shape","render.connection"],e,function(i,r){var o=i.type,a=r.element,c=r.gfx,l=r.attrs;if(n.canRender(a))return o==="render.shape"?n.drawShape(c,a,l):n.drawConnection(c,a,l)}),t.on(["render.getShapePath","render.getConnectionPath"],e,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}function Br(t){return t.join(",").replace(/,?([A-z]),?/g,"$1")}function cm(t){for(var e,n="",i=0;e=t[i];i++)n+=e.x+","+e.y+" ";return n}function au(t,e){var n=st("polyline");return W(n,{points:cm(t)}),e&&W(n,e),n}function lm(t){return Et(t,function(e){return!jt(t,function(n){return n!==e&&um(e,n)})})}function um(t,e){if(e){if(t===e)return e;if(t.parent)return um(t.parent,e)}}function pm(t,e,n){var i=!n||t.indexOf(e)===-1;return i&&t.push(e),i}function Ki(t,e,n){n=n||0,_t(t)||(t=[t]),F(t,function(i,r){var o=e(i,r,n);_t(o)&&o.length&&Ki(o,e,n+1)})}function ns(t,e){return function(n,i){var r=[],o=[];return Ki(n,function(a,c,l){pm(r,a,i);var u=a.children;if(u&&pm(o,u,i))return u}),r}(t,!e)}function ve(t,e){var n,i,r,o;return e=!!e,_t(t)||(t=[t]),F(t,function(a){var c=a;a.waypoints&&!e&&(c=ve(a.waypoints,!0));var l=c.x,u=c.y,p=c.height||0,h=c.width||0;(l<n||n===void 0)&&(n=l),(u<i||i===void 0)&&(i=u),(l+h>r||r===void 0)&&(r=l+h),(u+p>o||o===void 0)&&(o=u+p)}),{x:n,y:i,height:o-i,width:r-n}}function dm(t){return"waypoints"in t?"connection":"x"in t?"shape":"root"}function hm(t){return!(!t||!t.isFrame)}function No(t,e){return $({},t||{},e||{})}$n.prototype.canRender=function(){},$n.prototype.drawShape=function(){},$n.prototype.drawConnection=function(){},$n.prototype.getShapePath=function(){},$n.prototype.getConnectionPath=function(){};function gi(t,e){$n.call(this,t,1),this.CONNECTION_STYLE=e.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=e.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=e.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}at(gi,$n),gi.prototype.canRender=function(){return!0},gi.prototype.drawShape=function(t,e,n){var i=st("rect");return W(i,{x:0,y:0,width:e.width||0,height:e.height||0}),hm(e)?W(i,$({},this.FRAME_STYLE,n||{})):W(i,$({},this.SHAPE_STYLE,n||{})),pt(t,i),i},gi.prototype.drawConnection=function(t,e,n){var i=au(e.waypoints,$({},this.CONNECTION_STYLE,n||{}));return pt(t,i),i},gi.prototype.getShapePath=function(t){var e=t.x,n=t.y,i=t.width;return Br([["M",e,n],["l",i,0],["l",0,t.height],["l",-i,0],["z"]])},gi.prototype.getConnectionPath=function(t){var e,n,i=t.waypoints,r=[];for(e=0;n=i[e];e++)n=n.original||n,r.push([e===0?"M":"L",n.x,n.y]);return Br(r)},gi.$inject=["eventBus","styles"];const rE={__init__:["defaultRenderer"],defaultRenderer:["type",gi],styles:["type",function(){var t={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},e=this;this.cls=function(n,i,r){return $(this.style(i,r),{class:n})},this.style=function(n,i){_t(n)||i||(i=n,n=[]);var r=$e(n,function(o,a){return $(o,t[a]||{})},{});return i?$(r,i):r},this.computeStyle=function(n,i,r){return _t(i)||(r=i,i=[]),e.style(i||[],$({},r,n||{}))}}]};function Wt(t,e){if(!t||!e)return-1;var n=t.indexOf(e);return n!==-1&&t.splice(n,1),n}function Xt(t,e,n){if(t&&e){typeof n!="number"&&(n=-1);var i=t.indexOf(e);if(i!==-1){if(i===n||n===-1)return;t.splice(i,1)}n!==-1?t.splice(n,0,e):t.push(e)}}function su(t,e){return t&&e?t.indexOf(e):-1}function Io(t,e){return t&&e?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):-1}function cu(t,e,n,i){if(i===void 0&&(i=5),!t||!e||!n)return!1;var r=(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x),o=Io(t,e);return Math.abs(r/o)<=i}function Gn(t,e){var n;return function(i,r){var o;o=_t(i)?i:[i,r];var a=o.slice().shift();return Nr(o,function(c){return Math.abs(a.y-c.y)<=2})}(n=_t(t)?t:[t,e])?"h":!!function(i,r){var o;o=_t(i)?i:[i,r];var a=o.slice().shift();return Nr(o,function(c){return Math.abs(a.x-c.x)<=2})}(n)&&"v"}function mm(t,e,n){return n=n||0,t.x>e.x-n&&t.y>e.y-n&&t.x<e.x+e.width+n&&t.y<e.y+e.height+n}function lu(t,e){return{x:Math.round(t.x+(e.x-t.x)/2),y:Math.round(t.y+(e.y-t.y)/2)}}var oE=/,?([a-z]),?/gi,fm=parseFloat,Kt=Math,bi=Kt.PI,Mn=Kt.min,Rn=Kt.max,vm=Kt.pow,xi=Kt.abs,aE=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,sE=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/gi,is=Array.isArray||function(t){return t instanceof Array};function uu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Do(t){if(typeof t=="function"||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)uu(t,n)&&(e[n]=Do(t[n]));return e}function Or(t){var e=Or.ps=Or.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var n in e)uu(e,n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])}),e[t]}function pu(t,e,n,i){return arguments.length===1&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,width:n,height:i,x2:t+n,y2:e+i}}function ym(){return this.join(",").replace(oE,"$1")}function rs(t){var e=Do(t);return e.toString=ym,e}function gm(t,e,n,i,r,o,a,c,l){var u=1-l,p=vm(u,3),h=vm(u,2),v=l*l*l,f=p*e+3*h*l*i+3*u*l*l*o+v*c;return{x:os(p*t+3*h*l*n+3*u*l*l*r+v*a),y:os(f)}}function bm(t){var e=pE.apply(null,t);return pu(e.x0,e.y0,e.x1-e.x0,e.y1-e.y0)}function Ei(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height}function xm(t,e,n,i,r){return t*(t*(-3*e+9*n-9*i+3*r)+6*e-12*n+6*i)-3*e+3*n}function Em(t,e,n,i,r,o,a,c,l){l==null&&(l=1);for(var u=(l=l>1?1:l<0?0:l)/2,p=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],v=0,f=0;f<12;f++){var y=u*p[f]+u,b=xm(y,t,n,r,a),w=xm(y,e,i,o,c),g=b*b+w*w;v+=h[f]*Kt.sqrt(g)}return u*v}function cE(t,e,n,i,r,o,a,c){if(!(Rn(t,n)<Mn(r,a)||Mn(t,n)>Rn(r,a)||Rn(e,i)<Mn(o,c)||Mn(e,i)>Rn(o,c))){var l=(t*i-e*n)*(o-c)-(e-i)*(r*c-o*a),u=(t-n)*(o-c)-(e-i)*(r-a);if(u){var p=os(((t*i-e*n)*(r-a)-(t-n)*(r*c-o*a))/u),h=os(l/u),v=+p.toFixed(2),f=+h.toFixed(2);if(!(v<+Mn(t,n).toFixed(2)||v>+Rn(t,n).toFixed(2)||v<+Mn(r,a).toFixed(2)||v>+Rn(r,a).toFixed(2)||f<+Mn(e,i).toFixed(2)||f>+Rn(e,i).toFixed(2)||f<+Mn(o,c).toFixed(2)||f>+Rn(o,c).toFixed(2)))return{x:p,y:h}}}}function os(t){return Math.round(1e11*t)/1e11}function lE(t,e,n){if(!function(m,C){return m=pu(m),Ei(C=pu(C),m.x,m.y)||Ei(C,m.x2,m.y)||Ei(C,m.x,m.y2)||Ei(C,m.x2,m.y2)||Ei(m,C.x,C.y)||Ei(m,C.x2,C.y)||Ei(m,C.x,C.y2)||Ei(m,C.x2,C.y2)||(m.x<C.x2&&m.x>C.x||C.x<m.x2&&C.x>m.x)&&(m.y<C.y2&&m.y>C.y||C.y<m.y2&&C.y>m.y)}(bm(t),bm(e)))return n?0:[];for(var i=Em.apply(0,t),r=Em.apply(0,e),o=wm(t)?1:~~(i/5)||1,a=wm(e)?1:~~(r/5)||1,c=[],l=[],u={},p=n?0:[],h=0;h<o+1;h++){var v=gm.apply(0,t.concat(h/o));c.push({x:v.x,y:v.y,t:h/o})}for(h=0;h<a+1;h++)v=gm.apply(0,e.concat(h/a)),l.push({x:v.x,y:v.y,t:h/a});for(h=0;h<o;h++)for(var f=0;f<a;f++){var y,b=c[h],w=c[h+1],g=l[f],_=l[f+1],E=xi(w.x-b.x)<.01?"y":"x",S=xi(_.x-g.x)<.01?"y":"x",D=cE(b.x,b.y,w.x,w.y,g.x,g.y,_.x,_.y);if(D){if(u[y=D.x.toFixed(9)+"#"+D.y.toFixed(9)])continue;u[y]=!0;var s=b.t+xi((D[E]-b[E])/(w[E]-b[E]))*(w.t-b.t),d=g.t+xi((D[S]-g[S])/(_[S]-g[S]))*(_.t-g.t);s>=0&&s<=1&&d>=0&&d<=1&&(n?p++:p.push({x:D.x,y:D.y,t1:s,t2:d}))}}return p}function uE(t){var e=Or(t);if(e.abs)return rs(e.abs);if(is(t)&&is(t&&t[0])||(t=function(g){if(!g)return null;var _=Or(g);if(_.arr)return Do(_.arr);var E={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},S=[];return is(g)&&is(g[0])&&(S=Do(g)),S.length||String(g).replace(aE,function(D,s,d){var m=[],C=s.toLowerCase();for(d.replace(sE,function(M,N){N&&m.push(+N)}),C=="m"&&m.length>2&&(S.push([s].concat(m.splice(0,2))),C="l",s=s=="m"?"l":"L");m.length>=E[C]&&(S.push([s].concat(m.splice(0,E[C]))),E[C]););}),S.toString=Or.toString,_.arr=Do(S),S}(t)),!t||!t.length)return[["M",0,0]];var n,i=[],r=0,o=0,a=0,c=0,l=0;t[0][0]=="M"&&(a=r=+t[0][1],c=o=+t[0][2],l++,i[0]=["M",r,o]);for(var u,p,h=l,v=t.length;h<v;h++){if(i.push(u=[]),(n=(p=t[h])[0])!=n.toUpperCase())switch(u[0]=n.toUpperCase(),u[0]){case"A":u[1]=p[1],u[2]=p[2],u[3]=p[3],u[4]=p[4],u[5]=p[5],u[6]=+p[6]+r,u[7]=+p[7]+o;break;case"V":u[1]=+p[1]+o;break;case"H":u[1]=+p[1]+r;break;case"M":a=+p[1]+r,c=+p[2]+o;default:for(var f=1,y=p.length;f<y;f++)u[f]=+p[f]+(f%2?r:o)}else for(var b=0,w=p.length;b<w;b++)u[b]=p[b];switch(n=n.toUpperCase(),u[0]){case"Z":r=+a,o=+c;break;case"H":r=u[1];break;case"V":o=u[1];break;case"M":a=u[u.length-2],c=u[u.length-1];default:r=u[u.length-2],o=u[u.length-1]}}return i.toString=ym,e.abs=rs(i),i}function wm(t){return t[0]===t[2]&&t[1]===t[3]&&t[4]===t[6]&&t[5]===t[7]}function as(t,e,n,i){return[t,e,n,i,n,i]}function _m(t,e,n,i,r,o){var a=.3333333333333333,c=2/3;return[a*t+c*n,a*e+c*i,a*r+c*n,a*o+c*i,r,o]}function Sm(t,e,n,i,r,o,a,c,l,u){var p,h,v=120*bi/180,f=bi/180*(+r||0),y=[],b=(h=function(Tt,$t,yt){return{x:Tt*Kt.cos(yt)-$t*Kt.sin(yt),y:Tt*Kt.sin(yt)+$t*Kt.cos(yt)}},function Tt(){var $t=Array.prototype.slice.call(arguments,0),yt=$t.join("\u2400"),se=Tt.cache=Tt.cache||{},ce=Tt.count=Tt.count||[];return uu(se,yt)?(function(Dt,me){for(var At=0,ke=Dt.length;At<ke;At++)if(Dt[At]===me)return Dt.push(Dt.splice(At,1)[0])}(ce,yt),se[yt]):(ce.length>=1e3&&delete se[ce.shift()],ce.push(yt),se[yt]=h.apply(0,$t),se[yt])});if(u)m=u[0],C=u[1],s=u[2],d=u[3];else{t=(p=b(t,e,-f)).x,e=p.y;var w=(t-(c=(p=b(c,l,-f)).x))/2,g=(e-(l=p.y))/2,_=w*w/(n*n)+g*g/(i*i);_>1&&(n*=_=Kt.sqrt(_),i*=_);var E=n*n,S=i*i,D=(o==a?-1:1)*Kt.sqrt(xi((E*S-E*g*g-S*w*w)/(E*g*g+S*w*w))),s=D*n*g/i+(t+c)/2,d=D*-i*w/n+(e+l)/2,m=Kt.asin(((e-d)/i).toFixed(9)),C=Kt.asin(((l-d)/i).toFixed(9));(m=t<s?bi-m:m)<0&&(m=2*bi+m),(C=c<s?bi-C:C)<0&&(C=2*bi+C),a&&m>C&&(m-=2*bi),!a&&C>m&&(C-=2*bi)}var M=C-m;if(xi(M)>v){var N=C,R=c,j=l;C=m+v*(a&&C>m?1:-1),y=Sm(c=s+n*Kt.cos(C),l=d+i*Kt.sin(C),n,i,r,0,a,R,j,[C,N,s,d])}M=C-m;var T=Kt.cos(m),x=Kt.sin(m),B=Kt.cos(C),V=Kt.sin(C),H=Kt.tan(M/4),q=4/3*n*H,J=4/3*i*H,Q=[t,e],it=[t+q*x,e-J*T],ot=[c+q*V,l-J*B],vt=[c,l];if(it[0]=2*Q[0]-it[0],it[1]=2*Q[1]-it[1],u)return[it,ot,vt].concat(y);for(var Yt=[],et=0,Z=(y=[it,ot,vt].concat(y).join().split(",")).length;et<Z;et++)Yt[et]=et%2?b(y[et-1],y[et],f).y:b(y[et],y[et+1],f).x;return Yt}function pE(t,e,n,i,r,o,a,c){for(var l,u,p,h,v,f,y,b,w=[],g=[[],[]],_=0;_<2;++_)if(_==0?(u=6*t-12*n+6*r,l=-3*t+9*n-9*r+3*a,p=3*n-3*t):(u=6*e-12*i+6*o,l=-3*e+9*i-9*o+3*c,p=3*i-3*e),xi(l)<1e-12){if(xi(u)<1e-12)continue;0<(h=-p/u)&&h<1&&w.push(h)}else y=u*u-4*p*l,b=Kt.sqrt(y),y<0||(0<(v=(-u+b)/(2*l))&&v<1&&w.push(v),0<(f=(-u-b)/(2*l))&&f<1&&w.push(f));for(var E,S=w.length,D=S;S--;)E=1-(h=w[S]),g[0][S]=E*E*E*t+3*E*E*h*n+3*E*h*h*r+h*h*h*a,g[1][S]=E*E*E*e+3*E*E*h*i+3*E*h*h*o+h*h*h*c;return g[0][D]=t,g[1][D]=e,g[0][D+1]=a,g[1][D+1]=c,g[0].length=g[1].length=D+2,{x0:Mn.apply(0,g[0]),y0:Mn.apply(0,g[1]),x1:Rn.apply(0,g[0]),y1:Rn.apply(0,g[1])}}function Cm(t){var e=Or(t);if(e.curve)return rs(e.curve);for(var n=uE(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(f,y,b){var w,g;if(!f)return["C",y.x,y.y,y.x,y.y,y.x,y.y];switch(!(f[0]in{T:1,Q:1})&&(y.qx=y.qy=null),f[0]){case"M":y.X=f[1],y.Y=f[2];break;case"A":f=["C"].concat(Sm.apply(0,[y.x,y.y].concat(f.slice(1))));break;case"S":b=="C"||b=="S"?(w=2*y.x-y.bx,g=2*y.y-y.by):(w=y.x,g=y.y),f=["C",w,g].concat(f.slice(1));break;case"T":b=="Q"||b=="T"?(y.qx=2*y.x-y.qx,y.qy=2*y.y-y.qy):(y.qx=y.x,y.qy=y.y),f=["C"].concat(_m(y.x,y.y,y.qx,y.qy,f[1],f[2]));break;case"Q":y.qx=f[1],y.qy=f[2],f=["C"].concat(_m(y.x,y.y,f[1],f[2],f[3],f[4]));break;case"L":f=["C"].concat(as(y.x,y.y,f[1],f[2]));break;case"H":f=["C"].concat(as(y.x,y.y,f[1],y.y));break;case"V":f=["C"].concat(as(y.x,y.y,y.x,f[1]));break;case"Z":f=["C"].concat(as(y.x,y.y,y.X,y.Y))}return f},o=function(f,y){if(f[y].length>7){f[y].shift();for(var b=f[y];b.length;)a[y]="A",f.splice(y++,0,["C"].concat(b.splice(0,6)));f.splice(y,1),p=n.length}},a=[],c="",l="",u=0,p=n.length;u<p;u++){n[u]&&(c=n[u][0]),c!="C"&&(a[u]=c,u&&(l=a[u-1])),n[u]=r(n[u],i,l),a[u]!="A"&&c=="C"&&(a[u]="C"),o(n,u);var h=n[u],v=h.length;i.x=h[v-2],i.y=h[v-1],i.bx=fm(h[v-4])||i.x,i.by=fm(h[v-3])||i.y}return e.curve=rs(n),n}const Tm=_r(function(t,e,n){t=Cm(t),e=Cm(e);for(var i,r,o,a,c,l,u,p,h,v,f=n?0:[],y=0,b=t.length;y<b;y++){var w=t[y];if(w[0]=="M")i=c=w[1],r=l=w[2];else{w[0]=="C"?(h=[i,r].concat(w.slice(1)),i=h[6],r=h[7]):(h=[i,r,i,r,c,l,c,l],i=c,r=l);for(var g=0,_=e.length;g<_;g++){var E=e[g];if(E[0]=="M")o=u=E[1],a=p=E[2];else{E[0]=="C"?(v=[o,a].concat(E.slice(1)),o=v[6],a=v[7]):(v=[o,a,o,a,u,p,u,p],o=u,a=p);var S=lE(h,v,n);if(n)f+=S;else{for(var D=0,s=S.length;D<s;D++)S[D].segment1=y,S[D].segment2=g,S[D].bez1=h,S[D].bez2=v;f=f.concat(S)}}}}}return f});function Am(t){return{x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}}function Yi(t){return{x:Math.round(t.x),y:Math.round(t.y)}}function ct(t){return{top:t.y,right:t.x+(t.width||0),bottom:t.y+(t.height||0),left:t.x}}function du(t){return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}function gt(t){return Yi({x:t.x+(t.width||0)/2,y:t.y+(t.height||0)/2})}function ye(t,e,n){Se(n=n||0)||(n={x:n,y:n});var i=ct(t),r=ct(e),o=i.bottom+n.y<=r.top,a=i.left-n.x>=r.right,c=i.top-n.y>=r.bottom,l=o?"top":c?"bottom":null,u=i.right+n.x<=r.left?"left":a?"right":null;return u&&l?l+"-"+u:u||l||"intersect"}function hu(t,e,n){var i=Tm(t,e);return i.length===1||i.length===2&&Io(i[0],i[1])<1?Yi(i[0]):i.length>1?(i=dn(i,function(r){var o=Math.floor(100*r.t2)||1;return o=((o=100-o)<10?"0":"")+o,r.segment2+"#"+o}),Yi(i[n?0:i.length-1])):null}function ss(t,e){return Math.round(t*e)/e}function km(t){return mt(t)?t+"px":t}function Pm(t,e,n){var i=st("g");St(i).add(e);var r=n!==void 0?n:t.childNodes.length-1;return t.insertBefore(i,t.childNodes[r]||null),i}var cs="base",mu="djs-element-hidden",dE={shape:["x","y","width","height"],connection:["waypoints"]};function bt(t,e,n,i){this._eventBus=e,this._elementRegistry=i,this._graphicsFactory=n,this._init(t||{})}function Mm(t,e){var n="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttribute("transform",n)}bt.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],bt.prototype._init=function(t){var e=this._eventBus,n=this._container=function(o){var a=(o=$({},{width:"100%",height:"100%"},o)).container||document.body,c=document.createElement("div");return c.setAttribute("class","djs-container"),$(c.style,{position:"relative",overflow:"hidden",width:km(o.width),height:km(o.height)}),a.appendChild(c),c}(t),i=this._svg=st("svg");W(i,{width:"100%",height:"100%"}),pt(n,i);var r=this._viewport=Pm(i,"viewport");this._layers={},this._planes={},t.deferUpdate!==!1&&(this._viewboxChanged=qh(Po(this._viewboxChanged,this),300)),e.on("diagram.init",function(){e.fire("canvas.init",{svg:i,viewport:r})},this),e.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","plane.set"],function(){delete this._cachedViewbox},this),e.on("diagram.destroy",500,this._destroy,this),e.on("diagram.clear",500,this._clear,this)},bt.prototype._destroy=function(t){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._activePlane,delete this._viewport},bt.prototype._clear=function(){var t=this;this._elementRegistry.getAll().forEach(function(e){var n=dm(e);n==="root"?t.setRootElementForPlane(null,t.findPlane(e),!0):t._removeElement(e,n)}),this._activePlane=null,this._planes={},delete this._cachedViewbox},bt.prototype.getDefaultLayer=function(){return this.getLayer(cs,0)},bt.prototype.getLayer=function(t,e){if(!t)throw new Error("must specify a name");var n=this._layers[t];if(n||(n=this._layers[t]=this._createLayer(t,e)),e!==void 0&&n.index!==e)throw new Error("layer <"+t+"> already created at index <"+e+">");return n.group},bt.prototype._createLayer=function(t,e){e===void 0&&(e=1);var n=$e(this._layers,function(i,r){return e>=r.index&&i++,i},0);return{group:Pm(this._viewport,"layer-"+t,n),index:e}},bt.prototype.getPlane=function(t){if(!t)throw new Error("must specify a name");return this._planes[t]},bt.prototype.createPlane=function(t,e){if(!t)throw new Error("must specify a name");if(this._planes[t])throw new Error("plane "+t+" already exists");e||(e={id:"__implicitroot"+t,children:[],isImplicit:!0});var n=this.getLayer(t,0);St(n).add(mu);var i=this._planes[t]={layer:n,name:t,rootElement:null};return this.setRootElementForPlane(e,i),i},bt.prototype.setActivePlane=function(t){if(!t)throw new Error("must specify a plane");return typeof t=="string"&&(t=this.getPlane(t)),this._activePlane&&St(this._activePlane.layer).add(mu),this._activePlane=t,St(t.layer).remove(mu),t.rootElement&&this._elementRegistry.updateGraphics(t.rootElement,this._svg,!0),this._eventBus.fire("plane.set",{plane:t}),t},bt.prototype.getActiveLayer=function(){return this.getActivePlane().layer},bt.prototype.getActivePlane=function(){var t=this._activePlane;return t||(t=this.createPlane(cs),this.setActivePlane(cs)),t},bt.prototype.findPlane=function(t){typeof t=="string"&&(t=this._elementRegistry.get(t));var e=function(n){for(;n.parent;)n=n.parent;return n}(t);return jt(this._planes,function(n){return n.rootElement===e})},bt.prototype.getContainer=function(){return this._container},bt.prototype._updateMarker=function(t,e,n){var i;t.id||(t=this._elementRegistry.get(t)),(i=this._elementRegistry._elements[t.id])&&(F([i.gfx,i.secondaryGfx],function(r){r&&(n?St(r).add(e):St(r).remove(e))}),this._eventBus.fire("element.marker.update",{element:t,gfx:i.gfx,marker:e,add:!!n}))},bt.prototype.addMarker=function(t,e){this._updateMarker(t,e,!0)},bt.prototype.removeMarker=function(t,e){this._updateMarker(t,e,!1)},bt.prototype.hasMarker=function(t,e){return t.id||(t=this._elementRegistry.get(t)),St(this.getGraphics(t)).has(e)},bt.prototype.toggleMarker=function(t,e){this.hasMarker(t,e)?this.removeMarker(t,e):this.addMarker(t,e)},bt.prototype.getRootElement=function(){return this.getActivePlane().rootElement},bt.prototype.setRootElement=function(t,e){var n=this._activePlane;if(n)return this.setRootElementForPlane(t,n,e);var i=this.createPlane(cs,t);return this.setActivePlane(i),i.rootElement},bt.prototype.setRootElementForPlane=function(t,e,n){typeof e=="string"&&(e=this.getPlane(e)),t&&this._ensureValid("root",t);var i=e.rootElement,r=this._elementRegistry,o=this._eventBus;if(i){if(!n)throw new Error("rootElement already set, need to specify override");o.fire("root.remove",{element:i}),o.fire("root.removed",{element:i}),r.remove(i)}if(t){var a=e.layer;o.fire("root.add",{element:t}),r.add(t,a),o.fire("root.added",{element:t,gfx:a}),e===this._activePlane&&this._elementRegistry.updateGraphics(t,this._svg,!0)}return e.rootElement=t,t},bt.prototype._ensureValid=function(t,e){if(!e.id)throw new Error("element must have an id");if(this._elementRegistry.get(e.id))throw new Error("element with id "+e.id+" already exists");var n=dE[t],i=Nr(n,function(r){return e[r]!==void 0});if(!i)throw new Error("must supply { "+n.join(", ")+" } with "+t)},bt.prototype._setParent=function(t,e,n){Xt(e.children,t,n),t.parent=e},bt.prototype._addElement=function(t,e,n,i){n=n||this.getRootElement();var r=this._eventBus,o=this._graphicsFactory;this._ensureValid(t,e),r.fire(t+".add",{element:e,parent:n}),this._setParent(e,n,i);var a=o.create(t,e,i);return this._elementRegistry.add(e,a),o.update(t,e,a),r.fire(t+".added",{element:e,gfx:a}),e},bt.prototype.addShape=function(t,e,n){return this._addElement("shape",t,e,n)},bt.prototype.addConnection=function(t,e,n){return this._addElement("connection",t,e,n)},bt.prototype._removeElement=function(t,e){var n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(t=n.get(t.id||t))return r.fire(e+".remove",{element:t}),i.remove(t),Wt(t.parent&&t.parent.children,t),t.parent=null,r.fire(e+".removed",{element:t}),n.remove(t),t},bt.prototype.removeShape=function(t){return this._removeElement(t,"shape")},bt.prototype.removeConnection=function(t){return this._removeElement(t,"connection")},bt.prototype.getGraphics=function(t,e){return this._elementRegistry.getGraphics(t,e)},bt.prototype._changeViewbox=function(t){this._eventBus.fire("canvas.viewbox.changing"),t.apply(this),this._cachedViewbox=null,this._viewboxChanged()},bt.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},bt.prototype.viewbox=function(t){if(t===void 0&&this._cachedViewbox)return this._cachedViewbox;var e,n,i,r,o,a,c=this._viewport,l=this.getSize();return t?(this._changeViewbox(function(){r=Math.min(l.width/t.width,l.height/t.height);var u=this._svg.createSVGMatrix().scale(r).translate(-t.x,-t.y);Ro(c,u)}),t):(e=this._activePlane&&this._activePlane.layer.getBBox()||{},n=(i=Ro(c))?i.matrix:function(u,p,h,v,f,y){var b=im().createSVGMatrix();switch(arguments.length){case 0:return b;case 1:return rm(b,u);case 6:return rm(b,{a:u,b:p,c:h,d:v,e:f,f:y})}}(),r=ss(n.a,1e3),o=ss(-n.e||0,1e3),a=ss(-n.f||0,1e3),t=this._cachedViewbox={x:o?o/r:0,y:a?a/r:0,width:l.width/r,height:l.height/r,scale:r,inner:{width:e.width||0,height:e.height||0,x:e.x||0,y:e.y||0},outer:l})},bt.prototype.scroll=function(t){var e=this._viewport,n=e.getCTM();return t&&this._changeViewbox(function(){t=$({dx:0,dy:0},t||{}),n=this._svg.createSVGMatrix().translate(t.dx,t.dy).multiply(n),Mm(e,n)}),{x:n.e,y:n.f}},bt.prototype.scrollToElement=function(t,e){var n=100;typeof t=="string"&&(t=this._elementRegistry.get(t));var i=this.findPlane(t);i!==this._activePlane&&this.setActivePlane(i),e||(e={}),typeof e=="number"&&(n=e),e={top:e.top||n,right:e.right||n,bottom:e.bottom||n,left:e.left||n};var r,o,a=ve(t),c=ct(a),l=this.viewbox(),u=this.zoom();l.y+=e.top/u,l.x+=e.left/u,l.width-=(e.right+e.left)/u,l.height-=(e.bottom+e.top)/u;var p=ct(l);if(a.width<l.width&&a.height<l.height){var h=Math.max(0,c.right-p.right),v=Math.min(0,c.left-p.left),f=Math.max(0,c.bottom-p.bottom),y=Math.min(0,c.top-p.top);r=h||v,o=f||y}else r=a.x-l.x,o=a.y-l.y;this.scroll({dx:-r*u,dy:-o*u})},bt.prototype.zoom=function(t,e){return t?t==="fit-viewport"?this._fitViewport(e):(this._changeViewbox(function(){typeof e!="object"&&(n=this.viewbox().outer,e={x:n.width/2,y:n.height/2}),i=this._setZoom(t,e)}),ss(i.a,1e3)):this.viewbox(t).scale;var n,i},bt.prototype._fitViewport=function(t){var e,n,i=this.viewbox(),r=i.outer,o=i.inner;return o.x>=0&&o.y>=0&&o.x+o.width<=r.width&&o.y+o.height<=r.height&&!t?n={x:0,y:0,width:Math.max(o.width+o.x,r.width),height:Math.max(o.height+o.y,r.height)}:(e=Math.min(1,r.width/o.width,r.height/o.height),n={x:o.x+(t?o.width/2-r.width/e/2:0),y:o.y+(t?o.height/2-r.height/e/2:0),width:r.width/e,height:r.height/e}),this.viewbox(n),this.viewbox(!1).scale},bt.prototype._setZoom=function(t,e){var n,i,r,o,a=this._svg,c=this._viewport,l=a.createSVGMatrix(),u=a.createSVGPoint(),p=(i=c.getCTM()).a;return e?(n=$(u,e).matrixTransform(i.inverse()),r=l.translate(n.x,n.y).scale(1/p*t).translate(-n.x,-n.y),o=i.multiply(r)):o=l.scale(t),Mm(this._viewport,o),o},bt.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},bt.prototype.getAbsoluteBBox=function(t){var e,n=this.viewbox();return t.waypoints?e=this.getGraphics(t).getBBox():e=t,{x:e.x*n.scale-n.x*n.scale,y:e.y*n.scale-n.y*n.scale,width:e.width*n.scale,height:e.height*n.scale}},bt.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var jr="data-element-id";function He(t){this._elements={},this._eventBus=t}He.$inject=["eventBus"],He.prototype.add=function(t,e,n){var i=t.id;this._validateId(i),W(e,jr,i),n&&W(n,jr,i),this._elements[i]={element:t,gfx:e,secondaryGfx:n}},He.prototype.remove=function(t){var e=this._elements,n=t.id||t,i=n&&e[n];i&&(W(i.gfx,jr,""),i.secondaryGfx&&W(i.secondaryGfx,jr,""),delete e[n])},He.prototype.updateId=function(t,e){this._validateId(e),typeof t=="string"&&(t=this.get(t)),this._eventBus.fire("element.updateId",{element:t,newId:e});var n=this.getGraphics(t),i=this.getGraphics(t,!0);this.remove(t),t.id=e,this.add(t,n,i)},He.prototype.updateGraphics=function(t,e,n){var i=t.id||t,r=this._elements[i];return n?r.secondaryGfx=e:r.gfx=e,W(e,jr,i),e},He.prototype.get=function(t){var e;e=typeof t=="string"?t:t&&W(t,jr);var n=this._elements[e];return n&&n.element},He.prototype.filter=function(t){var e=[];return this.forEach(function(n,i){t(n,i)&&e.push(n)}),e},He.prototype.find=function(t){for(var e=this._elements,n=Object.keys(e),i=0;i<n.length;i++){var r=e[n[i]],o=r.element;if(t(o,r.gfx))return o}},He.prototype.getAll=function(){return this.filter(function(t){return t})},He.prototype.forEach=function(t){var e=this._elements;Object.keys(e).forEach(function(n){var i=e[n],r=i.element,o=i.gfx;return t(r,o)})},He.prototype.getGraphics=function(t,e){var n=t.id||t,i=this._elements[n];return i&&(e?i.secondaryGfx:i.gfx)},He.prototype._validateId=function(t){if(!t)throw new Error("element must have an id");if(this._elements[t])throw new Error("element with id "+t+" already added")};var fu={exports:{}},ls={};ls.extend=function(t,e,n,i){var r=n.inverse;return Object.defineProperty(t,"remove",{value:function(o){var a=this.indexOf(o);return a!==-1&&(this.splice(a,1),e.unset(o,r,i)),o}}),Object.defineProperty(t,"contains",{value:function(o){return this.indexOf(o)!==-1}}),Object.defineProperty(t,"add",{value:function(o,a){var c=this.indexOf(o);if(a===void 0){if(c!==-1)return;a=this.length}c!==-1&&this.splice(c,1),this.splice(a,0,o),c===-1&&e.set(o,r,i)}}),Object.defineProperty(t,"__refs_collection",{value:!0}),t},ls.isExtended=function(t){return t.__refs_collection===!0};var Rm=ls;function Nm(t,e,n){var i=Rm.extend(n[e.name]||[],t,e,n);Object.defineProperty(n,e.name,{enumerable:e.enumerable,value:i}),i.length&&i.forEach(function(r){t.set(r,e.inverse,n)})}function wi(t,e){if(!(this instanceof wi))return new wi(t,e);t.inverse=e,e.inverse=t,this.props={},this.props[t.name]=t,this.props[e.name]=e}wi.prototype.bind=function(t,e){if(typeof e=="string"){if(!this.props[e])throw new Error("no property <"+e+"> in ref");e=this.props[e]}e.collection?Nm(this,e,t):function(n,i,r){var o=i.inverse,a=r[i.name];Object.defineProperty(r,i.name,{configurable:i.configurable,enumerable:i.enumerable,get:function(){return a},set:function(c){if(c!==a){var l=a;a=null,l&&n.unset(l,o,r),a=c,n.set(a,o,r)}}})}(this,e,t)},wi.prototype.ensureRefsCollection=function(t,e){var n=t[e.name];return Rm.isExtended(n)||Nm(this,e,t),n},wi.prototype.ensureBound=function(t,e){(function(n,i){return Object.prototype.hasOwnProperty.call(n,i.name||i)})(t,e)||this.bind(t,e)},wi.prototype.unset=function(t,e,n){t&&(this.ensureBound(t,e),e.collection?this.ensureRefsCollection(t,e).remove(n):t[e.name]=void 0)},wi.prototype.set=function(t,e,n){t&&(this.ensureBound(t,e),e.collection?this.ensureRefsCollection(t,e).add(n):t[e.name]=n)};var hE=wi;fu.exports=hE,fu.exports.Collection=ls;const Lr=_r(fu.exports);var Im=new Lr({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Dm=new Lr({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Bm=new Lr({name:"attachers",collection:!0},{name:"host"}),Om=new Lr({name:"outgoing",collection:!0},{name:"source"}),jm=new Lr({name:"incoming",collection:!0},{name:"target"});function Bo(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(t){var e=this.label,n=this.labels;!t&&e?n.remove(e):n.add(t,0)}}),Im.bind(this,"parent"),Dm.bind(this,"labels"),Om.bind(this,"outgoing"),jm.bind(this,"incoming")}function Vr(){Bo.call(this),Im.bind(this,"children"),Bm.bind(this,"host"),Bm.bind(this,"attachers")}function Lm(){Vr.call(this)}function us(){Vr.call(this),Dm.bind(this,"labelTarget")}function Vm(){Bo.call(this),Om.bind(this,"source"),jm.bind(this,"target")}at(Vr,Bo),at(Lm,Vr),at(us,Vr),at(Vm,Bo);var mE={connection:Vm,shape:Vr,label:us,root:Lm};function Un(){this._uid=12}Un.prototype.createRoot=function(t){return this.create("root",t)},Un.prototype.createLabel=function(t){return this.create("label",t)},Un.prototype.createShape=function(t){return this.create("shape",t)},Un.prototype.createConnection=function(t){return this.create("connection",t)},Un.prototype.create=function(t,e){return(e=$({},e||{})).id||(e.id=t+"_"+this._uid++),function(n,i){var r=mE[n];if(!r)throw new Error("unknown type: <"+n+">");return $(new r,i)}(t,e)};var ps="__fn",fE=Array.prototype.slice;function Oe(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function Oo(){}function ds(t){return t.childNodes[0]}function vu(t,e,n,i,r){var o=Mo();o.setTranslate(e,n);var a=Mo();a.setRotate(i||0,0,0);var c=Mo();c.setScale(1,1),Ro(t,[o,a,c])}function je(t,e,n){var i=Mo();i.setTranslate(e,n),Ro(t,i)}function Fm(t,e){var n=Mo();n.setRotate(e,0,0),Ro(t,n)}function qe(t,e){this._eventBus=t,this._elementRegistry=e}function zm(t,e,n){var i=n||e.firstChild;t!==i&&e.insertBefore(t,i)}Oe.prototype.on=function(t,e,n,i){if(t=_t(t)?t:[t],Ce(e)&&(i=n,n=e,e=1e3),!mt(e))throw new Error("priority must be a number");var r=n;i&&((r=Po(n,i))[ps]=n[ps]||n);var o=this;t.forEach(function(a){o._addListener(a,{priority:e,callback:r,next:null})})},Oe.prototype.once=function(t,e,n,i){var r=this;if(Ce(e)&&(i=n,n=e,e=1e3),!mt(e))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var a=n.apply(i,arguments);return r.off(t,o),a}o[ps]=n,this.on(t,e,o)},Oe.prototype.off=function(t,e){t=_t(t)?t:[t];var n=this;t.forEach(function(i){n._removeListener(i,e)})},Oe.prototype.createEvent=function(t){var e=new Oo;return e.init(t),e},Oe.prototype.fire=function(t,e){var n,i,r,o;if(o=fE.call(arguments),typeof t=="object"&&(t=(e=t).type),!t)throw new Error("no event type specified");if(i=this._listeners[t]){n=e instanceof Oo?e:this.createEvent(e),o[0]=n;var a=n.type;t!==a&&(n.type=t);try{r=this._invokeListeners(n,o,i)}finally{t!==a&&(n.type=a)}return r===void 0&&n.defaultPrevented&&(r=!1),r}},Oe.prototype.handleError=function(t){return this.fire("error",{error:t})===!1},Oe.prototype._destroy=function(){this._listeners={}},Oe.prototype._invokeListeners=function(t,e,n){for(var i;n&&!t.cancelBubble;)i=this._invokeListener(t,e,n),n=n.next;return i},Oe.prototype._invokeListener=function(t,e,n){var i;if(n.callback.__isTomb)return i;try{i=function(r,o){return r.apply(null,o)}(n.callback,e),i!==void 0&&(t.returnValue=i,t.stopPropagation()),i===!1&&t.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i},Oe.prototype._addListener=function(t,e){var n,i=this._getListeners(t);if(i){for(;i;){if(i.priority<e.priority)return e.next=i,void(n?n.next=e:this._setListeners(t,e));n=i,i=i.next}n.next=e}else this._setListeners(t,e)},Oe.prototype._getListeners=function(t){return this._listeners[t]},Oe.prototype._setListeners=function(t,e){this._listeners[t]=e},Oe.prototype._removeListener=function(t,e){var n,i,r,o=this._getListeners(t);if(e)for(;o;)n=o.next,(r=o.callback)!==e&&r[ps]!==e||(i?i.next=n:this._setListeners(t,n)),i=o,o=n;else this._setListeners(t,null)},Oo.prototype.stopPropagation=function(){this.cancelBubble=!0},Oo.prototype.preventDefault=function(){this.defaultPrevented=!0},Oo.prototype.init=function(t){$(this,t||{})},qe.$inject=["eventBus","elementRegistry"],qe.prototype._getChildrenContainer=function(t){var e,n=this._elementRegistry.getGraphics(t);return t.parent?(e=function(i){return i.parentNode.childNodes[1]}(n),e||(St(e=st("g")).add("djs-children"),pt(n.parentNode,e))):e=n,e},qe.prototype._clear=function(t){var e=ds(t);return Qa(e),e},qe.prototype._createContainer=function(t,e,n,i){var r=st("g");St(r).add("djs-group"),n!==void 0?zm(r,e,e.childNodes[n]):pt(e,r);var o=st("g");St(o).add("djs-element"),St(o).add("djs-"+t),i&&St(o).add("djs-frame"),pt(r,o);var a=st("g");return St(a).add("djs-visual"),pt(o,a),o},qe.prototype.create=function(t,e,n){var i=this._getChildrenContainer(e.parent);return this._createContainer(t,i,n,hm(e))},qe.prototype.updateContainments=function(t){var e,n=this,i=this._elementRegistry;e=$e(t,function(r,o){return o.parent&&(r[o.parent.id]=o.parent),r},{}),F(e,function(r){var o=r.children;if(o){var a=n._getChildrenContainer(r);F(o.slice().reverse(),function(c){zm(i.getGraphics(c).parentNode,a)})}})},qe.prototype.drawShape=function(t,e){return this._eventBus.fire("render.shape",{gfx:t,element:e})},qe.prototype.getShapePath=function(t){return this._eventBus.fire("render.getShapePath",t)},qe.prototype.drawConnection=function(t,e){return this._eventBus.fire("render.connection",{gfx:t,element:e})},qe.prototype.getConnectionPath=function(t){return this._eventBus.fire("render.getConnectionPath",t)},qe.prototype.update=function(t,e,n){if(e.parent){var i=this._clear(n);if(t==="shape")this.drawShape(i,e),je(n,e.x,e.y);else{if(t!=="connection")throw new Error("unknown type: "+t);this.drawConnection(i,e)}e.hidden?W(n,"display","none"):W(n,"display","block")}},qe.prototype.remove=function(t){Zt(this._elementRegistry.getGraphics(t).parentNode)};const vE={__depends__:[rE],__init__:["canvas"],canvas:["type",bt],elementRegistry:["type",He],elementFactory:["type",Un],eventBus:["type",Oe],graphicsFactory:["type",qe]};function yE(t){var e=[],n=[];function i(o){return e.indexOf(o)>=0}t.forEach(function o(a){i(a)||((a.__depends__||[]).forEach(o),i(a)||(function(c){e.push(c)}(a),(a.__init__||[]).forEach(function(c){n.push(c)})))});var r=new ou(e);return n.forEach(function(o){try{r[typeof o=="string"?"get":"invoke"](o)}catch(a){throw console.error("Failed to instantiate component"),console.error(a.stack),a}}),r}function Fr(t,e){this.injector=e=e||function(n){return yE([{config:["value",n=n||{}]},vE].concat(n.modules||[]))}(t),this.get=e.get,this.invoke=e.invoke,this.get("eventBus").fire("diagram.init")}Fr.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Fr.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};var gE=Object.prototype.toString;function yu(){return yu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yu.apply(this,arguments)}function $m(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return yu.apply(void 0,[t].concat(n))}var gu=Object.prototype.toString,bE=Object.prototype.hasOwnProperty;function Gm(t){return gu.call(t)==="[object String]"}function xE(t,e){return bE.call(t,e)}function mn(t,e){var n;if(t!==void 0){var i=function(o){return gu.call(o)==="[object Array]"}(t)?wE:EE;for(var r in t)if(xE(t,r)&&e(n=t[r],i(r))===!1)return n}}function EE(t){return t}function wE(t){return Number(t)}function zr(t,e){return t.bind(e)}function bu(){return bu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bu.apply(this,arguments)}function Ji(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return bu.apply(void 0,[t].concat(n))}function xu(){}function Um(t,e){this.model=t,this.properties=e}xu.prototype.get=function(t){return this.$model.properties.get(this,t)},xu.prototype.set=function(t,e){this.$model.properties.set(this,t,e)},Um.prototype.createType=function(t){var e=this.model,n=this.properties,i=Object.create(xu.prototype);mn(t.properties,function(a){a.isMany||a.default===void 0||(i[a.name]=a.default)}),n.defineModel(i,e),n.defineDescriptor(i,t);var r=t.ns.name;function o(a){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),mn(a,zr(function(c,l){this.set(l,c)},this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,e),n.defineDescriptor(o,t),o};var _E={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Hm={String:function(t){return t},Boolean:function(t){return t==="true"},Integer:function(t){return parseInt(t,10)},Real:function(t){return parseFloat(t)}};function Eu(t,e){var n=Hm[t];return n?n(e):e}function wu(t){return!!_E[t]}function qm(t){return!!Hm[t]}function Ne(t,e){var n,i,r=t.split(/:/);if(r.length===1)n=t,i=e;else{if(r.length!==2)throw new Error("expected <prefix:localName> or <localName>, got "+t);n=r[1],i=r[0]}return{name:t=(i?i+":":"")+n,prefix:i,localName:n}}function Ye(t){this.ns=t,this.name=t.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function _i(t,e){this.packageMap={},this.typeMap={},this.packages=[],this.properties=e,mn(t,zr(this.registerPackage,this))}function Wm(t,e,n){var i=e[n];if(i in t)throw new Error("package with "+n+" <"+i+"> already defined")}function $r(t){this.model=t}function Xm(t,e,n){Object.defineProperty(t,e.name,{enumerable:!e.isReference,writable:!0,value:n,configurable:!0})}function Je(t){this.properties=new $r(this),this.factory=new Um(this,this.properties),this.registry=new _i(t,this.properties),this.typeCache={}}Ye.prototype.build=function(){return t=this,e=["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"],n={},i=Object(t),mn(e,function(r){r in i&&(n[r]=t[r])}),n;var t,e,n,i},Ye.prototype.addProperty=function(t,e,n){typeof e=="boolean"&&(n=e,e=void 0),this.addNamedProperty(t,n!==!1);var i=this.properties;e!==void 0?i.splice(e,0,t):i.push(t)},Ye.prototype.replaceProperty=function(t,e,n){var i=t.ns,r=this.properties,o=this.propertiesByName,a=t.name!==e.name;if(t.isId){if(!e.isId)throw new Error("property <"+e.ns.name+"> must be id property to refine <"+t.ns.name+">");this.setIdProperty(e,!1)}if(t.isBody){if(!e.isBody)throw new Error("property <"+e.ns.name+"> must be body property to refine <"+t.ns.name+">");this.setBodyProperty(e,!1)}var c=r.indexOf(t);if(c===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(c,1),this.addProperty(e,n?void 0:c,a),o[i.name]=o[i.localName]=e},Ye.prototype.redefineProperty=function(t,e,n){var i=t.ns.prefix,r=e.split("#"),o=Ne(r[0],i),a=Ne(r[1],o.prefix).name,c=this.propertiesByName[a];if(!c)throw new Error("refined property <"+a+"> not found");this.replaceProperty(c,t,n),delete t.redefines},Ye.prototype.addNamedProperty=function(t,e){var n=t.ns,i=this.propertiesByName;e&&(this.assertNotDefined(t,n.name),this.assertNotDefined(t,n.localName)),i[n.name]=i[n.localName]=t},Ye.prototype.removeNamedProperty=function(t){var e=t.ns,n=this.propertiesByName;delete n[e.name],delete n[e.localName]},Ye.prototype.setBodyProperty=function(t,e){if(e&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+t.ns.name+">)");this.bodyProperty=t},Ye.prototype.setIdProperty=function(t,e){if(e&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+t.ns.name+">)");this.idProperty=t},Ye.prototype.assertNotDefined=function(t,e){var n=t.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+t.definedBy.ns.name+"#"+t.ns.name+"> not allowed without redefines")},Ye.prototype.hasProperty=function(t){return this.propertiesByName[t]},Ye.prototype.addTrait=function(t,e){var n=this.allTypesByName,i=this.allTypes,r=t.name;r in n||(mn(t.properties,zr(function(o){o=Ji({},o,{name:o.ns.localName,inherited:e}),Object.defineProperty(o,"definedBy",{value:t});var a=o.replaces,c=o.redefines;a||c?this.redefineProperty(o,a||c,a):(o.isBody&&this.setBodyProperty(o),o.isId&&this.setIdProperty(o),this.addProperty(o))},this)),i.push(t),n[r]=t)},_i.prototype.getPackage=function(t){return this.packageMap[t]},_i.prototype.getPackages=function(){return this.packages},_i.prototype.registerPackage=function(t){t=Ji({},t);var e=this.packageMap;Wm(e,t,"prefix"),Wm(e,t,"uri"),mn(t.types,zr(function(n){this.registerType(n,t)},this)),e[t.uri]=e[t.prefix]=t,this.packages.push(t)},_i.prototype.registerType=function(t,e){var n=Ne((t=Ji({},t,{superClass:(t.superClass||[]).slice(),extends:(t.extends||[]).slice(),properties:(t.properties||[]).slice(),meta:Ji(t.meta||{})})).name,e.prefix),i=n.name,r={};mn(t.properties,zr(function(o){var a=Ne(o.name,n.prefix),c=a.name;wu(o.type)||(o.type=Ne(o.type,a.prefix).name),Ji(o,{ns:a,name:c}),r[c]=o},this)),Ji(t,{ns:n,name:i,propertiesByName:r}),mn(t.extends,zr(function(o){var a=this.typeMap[o];a.traits=a.traits||[],a.traits.push(i)},this)),this.definePackage(t,e),this.typeMap[i]=t},_i.prototype.mapTypes=function(t,e,n){var i=wu(t.name)?{name:t.name}:this.typeMap[t.name],r=this;function o(c){return a(c,!0)}function a(c,l){var u=Ne(c,wu(c)?"":t.prefix);r.mapTypes(u,e,l)}if(!i)throw new Error("unknown type <"+t.name+">");mn(i.superClass,n?o:a),e(i,!n),mn(i.traits,o)},_i.prototype.getEffectiveDescriptor=function(t){var e=Ne(t),n=new Ye(e);this.mapTypes(e,function(r,o){n.addTrait(r,o)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},_i.prototype.definePackage=function(t,e){this.properties.define(t,"$pkg",{value:e})},$r.prototype.set=function(t,e,n){if(!Gm(e)||!e.length)throw new TypeError("property name must be a non-empty string");var i=this.model.getPropertyDescriptor(t,e),r=i&&i.name;n===void 0?i?delete t[r]:delete t.$attrs[e]:i?r in t?t[r]=n:Xm(t,i,n):t.$attrs[e]=n},$r.prototype.get=function(t,e){var n=this.model.getPropertyDescriptor(t,e);if(!n)return t.$attrs[e];var i=n.name;return!t[i]&&n.isMany&&Xm(t,n,[]),t[i]},$r.prototype.define=function(t,e,n){if(!n.writable){var i=n.value;delete(n=Ji({},n,{get:function(){return i}})).value}Object.defineProperty(t,e,n)},$r.prototype.defineDescriptor=function(t,e){this.define(t,"$descriptor",{value:e})},$r.prototype.defineModel=function(t,e){this.define(t,"$model",{value:e})},Je.prototype.create=function(t,e){var n=this.getType(t);if(!n)throw new Error("unknown type <"+t+">");return new n(e)},Je.prototype.getType=function(t){var e=this.typeCache,n=Gm(t)?t:t.ns.name,i=e[n];return i||(t=this.registry.getEffectiveDescriptor(n),i=e[n]=this.factory.createType(t)),i},Je.prototype.createAny=function(t,e,n){var i=Ne(t),r={$type:t,$instanceOf:function(a){return a===this.$type}},o={name:t,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:e}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),mn(n,function(a,c){var l;l=a,gu.call(l)==="[object Object]"&&a.value!==void 0?r[a.name]=a.value:r[c]=a}),r},Je.prototype.getPackage=function(t){return this.registry.getPackage(t)},Je.prototype.getPackages=function(){return this.registry.getPackages()},Je.prototype.getElementDescriptor=function(t){return t.$descriptor},Je.prototype.hasType=function(t,e){return e===void 0&&(e=t,t=this),e in t.$model.getElementDescriptor(t).allTypesByName},Je.prototype.getPropertyDescriptor=function(t,e){return this.getElementDescriptor(t).propertiesByName[e]},Je.prototype.getTypeDescriptor=function(t){return this.registry.typeMap[t]};var _u=Object.prototype.toString,SE=Object.prototype.hasOwnProperty;function Km(t){return _u.call(t)==="[object Array]"}function hs(t){return _u.call(t)==="[object String]"}function Ym(t,e){return SE.call(t,e)}function Jm(t,e){var n;return e=Zm(e),ge(t,function(i,r){if(e(i,r))return n=i,!1}),n}function Su(t,e){var n=[];return ge(t,function(i,r){e(i,r)&&n.push(i)}),n}function ge(t,e){var n;if(t!==void 0){var i=Km(t)?TE:CE;for(var r in t)if(Ym(t,r)&&e(n=t[r],i(r))===!1)return n}}function Zm(t){return e=t,(n=_u.call(e))==="[object Function]"||n==="[object AsyncFunction]"||n==="[object GeneratorFunction]"||n==="[object AsyncGeneratorFunction]"||n==="[object Proxy]"?t:function(i){return i===t};var e,n}function CE(t){return t}function TE(t){return Number(t)}function Cu(){return Cu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Cu.apply(this,arguments)}function fn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Cu.apply(void 0,[t].concat(n))}var AE=String.fromCharCode,kE=Object.prototype.hasOwnProperty,PE=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,jo={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function ME(t,e,n,i){return i?kE.call(jo,i)?jo[i]:"&"+i+";":AE(e||parseInt(n,16))}function Zi(t){return t.length>3&&t.indexOf("&")!==-1?t.replace(PE,ME):t}Object.keys(jo).forEach(function(t){jo[t.toUpperCase()]=jo[t]});var Qm="xsi:type",tf="non-whitespace outside of root node";function Gr(t){return new Error(t)}function ef(t){return"missing namespace for prefix <"+t+">"}function ms(t){return{get:t,enumerable:!0}}function RE(t){var e,n={};for(e in t)n[e]=t[e];return n}function Tu(t){return t+"$uri"}function nf(){return{line:0,column:0}}function NE(t){throw t}function rf(t){if(!this)return new rf(t);var e,n,i,r,o,a,c,l,u,p=t&&t.proxy,h=NE,v=nf,f=!1,y=!1,b=null,w=!1;function g(E){E instanceof Error||(E=Gr(E)),b=E,h(E,v)}function _(E){o&&(E instanceof Error||(E=Gr(E)),o(E,v))}this.on=function(E,S){if(typeof S!="function")throw Gr("required args <name, cb>");switch(E){case"openTag":n=S;break;case"text":e=S;break;case"closeTag":i=S;break;case"error":h=S;break;case"warn":o=S;break;case"cdata":r=S;break;case"attention":l=S;break;case"question":c=S;break;case"comment":a=S;break;default:throw Gr("unsupported event: "+E)}return this},this.ns=function(E){if(E===void 0&&(E={}),typeof E!="object")throw Gr("required args <nsMap={}>");var S,D={};for(S in E)D[S]=E[S];return D["http://www.w3.org/2001/XMLSchema-instance"]="xsi",y=!0,u=D,this},this.parse=function(E){if(typeof E!="string")throw Gr("required args <xml=string>");return b=null,function(S){var D,s,d,m,C,M,N,R,j,T,x,B=y?[]:null,V=y?function(Tt){var $t,yt,se={};for($t in Tt)se[yt=Tt[$t]]=yt,se[Tu(yt)]=$t;return se}(u):null,H=[],q=0,J=!1,Q=!1,it=0,ot=0,vt="",Yt=0;function et(){if(x!==null)return x;var Tt,$t,yt,se,ce,Dt,me,At,ke,ht,Lt,ii=y&&V.xmlns,ri=y&&f?[]:null,Jt=Yt,Pe=vt,Fn=Pe.length,oi={},$a={};t:for(;Jt<Fn;Jt++)if(ke=!1,!((ht=Pe.charCodeAt(Jt))===32||ht<14&&ht>8)){for((ht<65||ht>122||ht>90&&ht<97)&&ht!==95&&ht!==58&&(_("illegal first char attribute name"),ke=!0),Lt=Jt+1;Lt<Fn;Lt++)if(!((ht=Pe.charCodeAt(Lt))>96&&ht<123||ht>64&&ht<91||ht>47&&ht<59||ht===46||ht===45||ht===95)){if(ht===32||ht<14&&ht>8){_("missing attribute value"),Jt=Lt;continue t}if(ht===61)break;_("illegal attribute name char"),ke=!0}if((At=Pe.substring(Jt,Lt))==="xmlns:xmlns"&&(_("illegal declaration of xmlns"),ke=!0),(ht=Pe.charCodeAt(Lt+1))===34)(Lt=Pe.indexOf('"',Jt=Lt+2))===-1&&(Lt=Pe.indexOf("'",Jt))!==-1&&(_("attribute value quote missmatch"),ke=!0);else if(ht===39)(Lt=Pe.indexOf("'",Jt=Lt+2))===-1&&(Lt=Pe.indexOf('"',Jt))!==-1&&(_("attribute value quote missmatch"),ke=!0);else for(_("missing attribute value quotes"),ke=!0,Lt+=1;Lt<Fn&&!((ht=Pe.charCodeAt(Lt+1))===32||ht<14&&ht>8);Lt++);for(Lt===-1&&(_("missing closing quotes"),Lt=Fn,ke=!0),ke||(Dt=Pe.substring(Jt,Lt)),Jt=Lt;Lt+1<Fn&&!((ht=Pe.charCodeAt(Lt+1))===32||ht<14&&ht>8);Lt++)Jt===Lt&&(_("illegal character after attribute end"),ke=!0);if(Jt=Lt+1,!ke)if(At in $a)_("attribute <"+At+"> already defined");else if($a[At]=!0,y)if(f){if((ce=At==="xmlns"?"xmlns":At.charCodeAt(0)===120&&At.substr(0,6)==="xmlns:"?At.substr(6):null)!==null){if(Tt=Zi(Dt),$t=Tu(ce),!(me=u[Tt])){if(ce==="xmlns"||$t in V&&V[$t]!==Tt)do me="ns"+q++;while(V[me]!==void 0);else me=ce;u[Tt]=me}V[ce]!==me&&(se||(V=RE(V),se=!0),V[ce]=me,ce==="xmlns"&&(V[Tu(me)]=Tt,ii=me),V[$t]=Tt),oi[At]=Dt;continue}ri.push(At,Dt)}else(ht=At.indexOf(":"))!==-1?(yt=V[At.substring(0,ht)])?((At=ii===yt?At.substr(ht+1):yt+At.substr(ht))===Qm&&((ht=Dt.indexOf(":"))!==-1?(yt=Dt.substring(0,ht),Dt=(yt=V[yt]||yt)+Dt.substring(ht)):Dt=ii+":"+Dt),oi[At]=Dt):_(ef(At.substring(0,ht))):oi[At]=Dt;else oi[At]=Dt}if(f)for(Jt=0,Fn=ri.length;Jt<Fn;Jt++){if(At=ri[Jt++],Dt=ri[Jt],(ht=At.indexOf(":"))!==-1){if(!(yt=V[At.substring(0,ht)])){_(ef(At.substring(0,ht)));continue}(At=ii===yt?At.substr(ht+1):yt+At.substr(ht))===Qm&&((ht=Dt.indexOf(":"))!==-1?(yt=Dt.substring(0,ht),Dt=(yt=V[yt]||yt)+Dt.substring(ht)):Dt=ii+":"+Dt)}oi[At]=Dt}return x=oi}function Z(){for(var Tt,$t,yt=/(\r\n|\r|\n)/g,se=0,ce=0,Dt=0,me=ot;it>=Dt&&(Tt=yt.exec(S))&&!((me=Tt[0].length+Tt.index)>it);)se+=1,Dt=me;return it==-1?(ce=me,$t=S.substring(ot)):ot===0?$t=S.substring(ot,it):(ce=it-Dt,$t=ot==-1?S.substring(it):S.substring(it,ot+1)),{data:$t,line:se,column:ce}}for(v=Z,p&&(T=Object.create({},{name:ms(function(){return R}),originalName:ms(function(){return j}),attrs:ms(et),ns:ms(function(){return V})}));ot!==-1;){if((it=S.charCodeAt(ot)===60?ot:S.indexOf("<",ot))===-1)return H.length?g("unexpected end of file"):ot===0?g("missing start tag"):void(ot<S.length&&S.substring(ot).trim()&&_(tf));if(ot!==it){if(H.length){if(e&&(e(S.substring(ot,it),Zi,v),w))return}else if(S.substring(ot,it).trim()&&(_(tf),w))return}if((C=S.charCodeAt(it+1))===33){if((m=S.charCodeAt(it+2))===91&&S.substr(it+3,6)==="CDATA["){if((ot=S.indexOf("]]>",it))===-1)return g("unclosed cdata");if(r&&(r(S.substring(it+9,ot),v),w))return;ot+=3;continue}if(m===45&&S.charCodeAt(it+3)===45){if((ot=S.indexOf("-->",it))===-1)return g("unclosed comment");if(a&&(a(S.substring(it+4,ot),Zi,v),w))return;ot+=3;continue}}if(C!==63){for(s=it+1;;s++){if(M=S.charCodeAt(s),isNaN(M))return ot=-1,g("unclosed tag");if(M===34)s=(m=S.indexOf('"',s+1))!==-1?m:s;else if(M===39)s=(m=S.indexOf("'",s+1))!==-1?m:s;else if(M===62){ot=s;break}}if(C!==33){if(x={},C===47){if(J=!1,Q=!0,!H.length)return g("missing open tag");if(s=R=H.pop(),m=it+2+s.length,S.substring(it+2,m)!==s)return g("closing tag mismatch");for(;m<ot;m++)if(!((C=S.charCodeAt(m))===32||C>8&&C<14))return g("close tag")}else{if(S.charCodeAt(ot-1)===47?(s=R=S.substring(it+1,ot-1),J=!0,Q=!0):(s=R=S.substring(it+1,ot),J=!0,Q=!1),!(C>96&&C<123||C>64&&C<91||C===95||C===58))return g("illegal first char nodeName");for(m=1,d=s.length;m<d;m++)if(!((C=s.charCodeAt(m))>96&&C<123||C>64&&C<91||C>47&&C<59||C===45||C===95||C==46)){if(C===32||C<14&&C>8){R=s.substring(0,m),x=null;break}return g("invalid nodeName")}Q||H.push(R)}if(y){if(D=V,J&&(Q||B.push(D),x===null&&(f=s.indexOf("xmlns",m)!==-1)&&(Yt=m,vt=s,et(),f=!1)),j=R,(C=R.indexOf(":"))!==-1){if(!(N=V[R.substring(0,C)]))return g("missing namespace on <"+j+">");R=R.substr(C+1)}else N=V.xmlns;N&&(R=N+":"+R)}if(J&&(Yt=m,vt=s,n&&(p?n(T,Zi,Q,v):n(R,et,Zi,Q,v),w)))return;if(Q){if(i&&(i(p?T:R,Zi,J,v),w))return;y&&(V=J?D:B.pop())}ot+=1}else{if(l&&(l(S.substring(it,ot+1),Zi,v),w))return;ot+=1}}else{if((ot=S.indexOf("?>",it))===-1)return g("unclosed question");if(c&&(c(S.substring(it,ot+2),v),w))return;ot+=2}}}(E),v=nf,w=!1,b},this.stop=function(){w=!0}}function of(t){return t.xml&&t.xml.tagAlias==="lowerCase"}var IE={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},fs="xsi:type";function af(t){return t.xml&&t.xml.serialize}function sf(t){return af(t)===fs}function cf(t,e){return of(e)?t.prefix+":"+((n=t.localName).charAt(0).toUpperCase()+n.slice(1)):t.name;var n}function Si(t){return new Error(t)}function Hn(t){return t.$descriptor}function DE(t){fn(this,t),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw Si("expected element");var n,i=this.elementsById,r=Hn(e).idProperty;if(r&&(n=e.get(r.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(n))throw new Error("illegal ID <"+n+">");if(i[n])throw Si("duplicate ID <"+n+">");i[n]=e}},this.addWarning=function(e){this.warnings.push(e)}}function Lo(){}function Au(){}function Ur(){}function Vo(t,e){this.property=t,this.context=e}function ku(t,e){this.element=e,this.propertyDesc=t}function vs(){}function Te(t,e,n){this.model=t,this.type=t.getType(e),this.context=n}function Pu(t,e,n){Te.call(this,t,e,n)}function Hr(t,e,n){this.model=t,this.context=n}function Mu(t){t instanceof Je&&(t={model:t}),fn(this,{lax:!1},t)}Lo.prototype.handleEnd=function(){},Lo.prototype.handleText=function(){},Lo.prototype.handleNode=function(){},Au.prototype=Object.create(Lo.prototype),Au.prototype.handleNode=function(){return this},Ur.prototype=Object.create(Lo.prototype),Ur.prototype.handleText=function(t){this.body=(this.body||"")+t},Vo.prototype=Object.create(Ur.prototype),Vo.prototype.handleNode=function(t){if(this.element)throw Si("expected no sub nodes");return this.element=this.createReference(t),this},Vo.prototype.handleEnd=function(){this.element.id=this.body},Vo.prototype.createReference=function(t){return{property:this.property.ns.name,id:""}},ku.prototype=Object.create(Ur.prototype),ku.prototype.handleEnd=function(){var t=this.body||"",e=this.element,n=this.propertyDesc;t=Eu(n.type,t),n.isMany?e.get(n.name).push(t):e.set(n.name,t)},vs.prototype=Object.create(Ur.prototype),vs.prototype.handleNode=function(t){var e=this,n=this.element;return n?e=this.handleChild(t):(n=this.element=this.createElement(t),this.context.addElement(n)),e},Te.prototype=Object.create(vs.prototype),Te.prototype.addReference=function(t){this.context.addReference(t)},Te.prototype.handleText=function(t){if(!Hn(this.element).bodyProperty)throw Si("unexpected body text <"+t+">");Ur.prototype.handleText.call(this,t)},Te.prototype.handleEnd=function(){var t=this.body,e=this.element,n=Hn(e).bodyProperty;n&&t!==void 0&&(t=Eu(n.type,t),e.set(n.name,t))},Te.prototype.createElement=function(t){var e,n=t.attributes,i=this.type,r=Hn(i),o=this.context,a=new i({}),c=this.model;return ge(n,function(l,u){var p=r.propertiesByName[u];p&&p.isReference?p.isMany?ge(l.split(" "),function(h){o.addReference({element:a,property:p.ns.name,id:h})}):o.addReference({element:a,property:p.ns.name,id:l}):(p?l=Eu(p.type,l):u!=="xmlns"&&(e=Ne(u,r.ns.prefix),c.getPackage(e.prefix)&&o.addWarning({message:"unknown attribute <"+u+">",element:a,property:u,value:l})),a.set(u,l))}),a},Te.prototype.getPropertyForNode=function(t){var e,n,i=Ne(t.name),r=this.type,o=this.model,a=Hn(r),c=i.name,l=a.propertiesByName[c];if(l&&!l.isAttr)return sf(l)&&(e=t.attributes[fs])?(e=function(p,h){var v=Ne(p);return function(f,y){var b=f.name,w=f.localName,g=y.xml&&y.xml.typePrefix;return g&&w.indexOf(g)===0?f.prefix+":"+w.slice(g.length):b}(v,h.getPackage(v.prefix))}(e,o),fn({},l,{effectiveType:Hn(n=o.getType(e)).name})):l;var u=o.getPackage(i.prefix);if(u){if(e=cf(i,u),n=o.getType(e),l=Jm(a.properties,function(p){return!p.isVirtual&&!p.isReference&&!p.isAttribute&&n.hasType(p.type)}))return fn({},l,{effectiveType:Hn(n).name})}else if(l=Jm(a.properties,function(p){return!p.isReference&&!p.isAttribute&&p.type==="Element"}))return l;throw Si("unrecognized element <"+i.name+">")},Te.prototype.toString=function(){return"ElementDescriptor["+Hn(this.type).name+"]"},Te.prototype.valueHandler=function(t,e){return new ku(t,e)},Te.prototype.referenceHandler=function(t){return new Vo(t,this.context)},Te.prototype.handler=function(t){return t==="Element"?new Hr(this.model,t,this.context):new Te(this.model,t,this.context)},Te.prototype.handleChild=function(t){var e,n,i,r;if(e=this.getPropertyForNode(t),i=this.element,qm(n=e.effectiveType||e.type))return this.valueHandler(e,i);var o=(r=e.isReference?this.referenceHandler(e).handleNode(t):this.handler(n).handleNode(t)).element;return o!==void 0&&(e.isMany?i.get(e.name).push(o):i.set(e.name,o),e.isReference?(fn(o,{element:i}),this.context.addReference(o)):o.$parent=i),r},Pu.prototype=Object.create(Te.prototype),Pu.prototype.createElement=function(t){var e=t.name,n=Ne(e),i=this.model,r=this.type,o=i.getPackage(n.prefix),a=o&&cf(n,o)||e;if(!r.hasType(a))throw Si("unexpected element <"+t.originalName+">");return Te.prototype.createElement.call(this,t)},Hr.prototype=Object.create(vs.prototype),Hr.prototype.createElement=function(t){var e=t.name,n=Ne(e).prefix,i=t.ns[n+"$uri"],r=t.attributes;return this.model.createAny(e,i,r)},Hr.prototype.handleChild=function(t){var e=new Hr(this.model,"Element",this.context).handleNode(t),n=this.element,i=e.element;return i!==void 0&&((n.$children=n.$children||[]).push(i),i.$parent=n),e},Hr.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},Mu.prototype.fromXML=function(t,e,n){var i=e.rootHandler;e instanceof Te?(i=e,e={}):typeof e=="string"?(i=this.handler(e),e={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,o=this.lax,a=new DE(fn({},e,{rootHandler:i})),c=new rf({proxy:!0}),l=function(){var w=[];return Object.defineProperty(w,"peek",{value:function(){return this[this.length-1]}}),w}();function u(w,g,_){var E=g(),S=E.line,D=E.column,s=E.data;s.charAt(0)==="<"&&s.indexOf(" ")!==-1&&(s=s.slice(0,s.indexOf(" "))+">");var d="unparsable content "+(s?s+" ":"")+`detected
	line: `+S+`
	column: `+D+`
	nested error: `+w.message;if(_)return a.addWarning({message:d,error:w}),!0;throw Si(d)}function p(w,g){return u(w,g,!0)}i.context=a,l.push(i);var h=/^<\?xml /i,v=/ encoding="([^"]+)"/i,f=/^utf-8$/i;function y(w,g){try{l.peek().handleText(w)}catch(_){p(_,g)}}var b=r.getPackages().reduce(function(w,g){return w[g.uri]=g.prefix,w},{"http://www.w3.org/XML/1998/namespace":"xml"});return c.ns(b).on("openTag",function(w,g,_,E){var S=w.attrs||{},D=Object.keys(S).reduce(function(s,d){var m=g(S[d]);return s[d]=m,s},{});(function(s,d){var m=l.peek();try{l.push(m.handleNode(s))}catch(C){u(C,d,o)&&l.push(new Au)}})({name:w.name,originalName:w.originalName,attributes:D,ns:w.ns},E)}).on("question",function(w){if(h.test(w)){var g=v.exec(w),_=g&&g[1];_&&!f.test(_)&&a.addWarning({message:"unsupported document encoding <"+_+">, falling back to UTF-8"})}}).on("closeTag",function(){l.pop().handleEnd()}).on("cdata",y).on("text",function(w,g,_){(function(E,S){E.trim()&&y(E,S)})(g(w),_)}).on("error",u).on("warn",p),new Promise(function(w,g){var _;try{c.parse(t),function(){var d,m,C=a.elementsById,M=a.references;for(d=0;m=M[d];d++){var N=m.element,R=C[m.id],j=Hn(N).propertiesByName[m.property];if(R||a.addWarning({message:"unresolved reference <"+m.id+">",element:m.element,property:m.property,value:m.id}),j.isMany){var T=N.get(j.name),x=T.indexOf(m);x===-1&&(x=T.length),R?T[x]=R:T.splice(x,1)}else N.set(j.name,R)}}()}catch(d){_=d}var E=i.element;_||E||(_=Si("failed to parse document as <"+i.type.$descriptor.name+">"));var S=a.warnings,D=a.references,s=a.elementsById;return _?(_.warnings=S,g(_)):w({rootElement:E,elementsById:s,references:D,warnings:S})})},Mu.prototype.handler=function(t){return new Pu(this.model,t)};var BE=/<|>|'|"|&|\n\r|\n/g,lf=/<|>|&/g;function OE(t){var e={},n={},i={},r=[],o=[];this.byUri=function(a){return n[a]||t&&t.byUri(a)},this.add=function(a,c){n[a.uri]=a,c?r.push(a):o.push(a),this.mapPrefix(a.prefix,a.uri)},this.uriByPrefix=function(a){return e[a||"xmlns"]},this.mapPrefix=function(a,c){e[a||"xmlns"]=c},this.getNSKey=function(a){return a.prefix!==void 0?a.uri+"|"+a.prefix:a.uri},this.logUsed=function(a){var c=a.uri,l=this.getNSKey(a);i[l]=this.byUri(c),t&&t.logUsed(a)},this.getUsed=function(a){var c=this;return[].concat(r,o).filter(function(l){var u=c.getNSKey(l);return i[u]})}}function jE(t,e){return of(e)?(n=t).charAt(0).toLowerCase()+n.slice(1):t;var n}function uf(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function pf(t){return hs(t)?t:(t.prefix?t.prefix+":":"")+t.localName}var LE={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},VE={"<":"lt",">":"gt","&":"amp"};function df(t,e,n){return(t=hs(t)?t:""+t).replace(e,function(i){return"&"+n[i]+";"})}function Ru(t){this.tagName=t}function Qi(){}function Nu(t){this.tagName=t}function Gt(t,e){this.body=[],this.attrs=[],this.parent=t,this.propertyDescriptor=e}function ys(t,e){Gt.call(this,t,e)}function FE(){this.value="",this.write=function(t){this.value+=t}}function zE(t,e){var n=[""];this.append=function(i){return t.write(i),this},this.appendNewLine=function(){return e&&t.write(`
`),this},this.appendIndent=function(){return e&&t.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function $E(t){return t=fn({format:!1,preamble:!0},t||{}),{toXML:function(e,n){var i=n||new FE,r=new zE(i,t.format);if(t.preamble&&r.append(`<?xml version="1.0" encoding="UTF-8"?>
`),new Gt().build(e).serializeTo(r),!n)return i.value}}}function gs(t,e){Je.call(this,t,e)}Ru.prototype.build=function(t){return this.element=t,this},Ru.prototype.serializeTo=function(t){t.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},Qi.prototype.serializeValue=Qi.prototype.serializeTo=function(t){t.append(this.escape?df(this.value,lf,VE):this.value)},Qi.prototype.build=function(t,e){return this.value=e,t.type==="String"&&e.search(lf)!==-1&&(this.escape=!0),this},uf(Nu,Qi),Nu.prototype.serializeTo=function(t){t.appendIndent().append("<"+this.tagName+">"),this.serializeValue(t),t.append("</"+this.tagName+">").appendNewLine()},Gt.prototype.build=function(t){this.element=t;var e,n,i=t.$descriptor,r=this.propertyDescriptor,o=i.isGeneric;return e=o?this.parseGeneric(t):this.parseNsAttributes(t),this.ns=r?this.nsPropertyTagName(r):this.nsTagName(i),this.tagName=this.addTagName(this.ns),o||(n=function(a){return Su(a.$descriptor.properties,function(c){var l=c.name;if(c.isVirtual||!Ym(a,l))return!1;var u=a[l];return u!==c.default&&u!==null&&(!c.isMany||u.length)})}(t),this.parseAttributes(Su(n,function(a){return a.isAttr})),this.parseContainments(function(a){return Su(a,function(c){return!c.isAttr})}(n))),this.parseGenericAttributes(t,e),this},Gt.prototype.nsTagName=function(t){return function(e,n){return n.isGeneric?fn({localName:n.ns.localName},e):fn({localName:jE(n.ns.localName,n.$pkg)},e)}(this.logNamespaceUsed(t.ns),t)},Gt.prototype.nsPropertyTagName=function(t){return function(e,n){return fn({localName:n.ns.localName},e)}(this.logNamespaceUsed(t.ns),t)},Gt.prototype.isLocalNs=function(t){return t.uri===this.ns.uri},Gt.prototype.nsAttributeName=function(t){var e;if(e=hs(t)?Ne(t):t.ns,t.inherited)return{localName:e.localName};var n=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:e.localName}:fn({localName:e.localName},n)},Gt.prototype.parseGeneric=function(t){var e=this,n=this.body,i=[];return ge(t,function(r,o){o==="$body"?n.push(new Qi().build({type:"String"},r)):o==="$children"?ge(r,function(a){n.push(new Gt(e).build(a))}):o.indexOf("$")!==0&&e.parseNsAttribute(t,o,r)&&i.push({name:o,value:r})}),i},Gt.prototype.parseNsAttribute=function(t,e,n){var i,r=t.$model,o=Ne(e);if(o.prefix==="xmlns"&&(i={prefix:o.localName,uri:n}),o.prefix||o.localName!=="xmlns"||(i={uri:n}),!i)return{name:e,value:n};if(r&&r.getPackage(n))this.logNamespace(i,!0,!0);else{var a=this.logNamespaceUsed(i,!0);this.getNamespaces().logUsed(a)}},Gt.prototype.parseNsAttributes=function(t,e){var n=this,i=t.$attrs,r=[];return ge(i,function(o,a){var c=n.parseNsAttribute(t,a,o);c&&r.push(c)}),r},Gt.prototype.parseGenericAttributes=function(t,e){var n=this;ge(e,function(i){if(i.name!==fs)try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){console.warn("missing namespace information for ",i.name,"=",i.value,"on",t,r)}})},Gt.prototype.parseContainments=function(t){var e=this,n=this.body,i=this.element;ge(t,function(r){var o=i.get(r.name),a=r.isReference;if(r.isMany||(o=[o]),r.isBody)n.push(new Qi().build(r,o[0]));else if(qm(r.type))ge(o,function(u){n.push(new Nu(e.addTagName(e.nsPropertyTagName(r))).build(r,u))});else if(a)ge(o,function(u){n.push(new Ru(e.addTagName(e.nsPropertyTagName(r))).build(u))});else{var c=sf(r),l=function(u){return af(u)==="property"}(r);ge(o,function(u){var p;p=c?new ys(e,r):l?new Gt(e,r):new Gt(e),n.push(p.build(u))})}})},Gt.prototype.getNamespaces=function(t){var e,n=this.namespaces,i=this.parent;return n||(e=i&&i.getNamespaces(),t||!e?this.namespaces=n=new OE(e):n=e),n},Gt.prototype.logNamespace=function(t,e,n){var i=this.getNamespaces(n),r=t.uri,o=t.prefix;return i.byUri(r)&&!n||i.add(t,e),i.mapPrefix(o,r),t},Gt.prototype.logNamespaceUsed=function(t,e){var n,i,r,o=this.element.$model,a=this.getNamespaces(e),c=t.prefix,l=t.uri;if(!c&&!l)return{localName:t.localName};if(r=IE[c]||o&&(o.getPackage(c)||{}).uri,!(l=l||r||a.uriByPrefix(c)))throw new Error("no namespace uri given for prefix <"+c+">");if(!(t=a.byUri(l))){for(n=c,i=1;a.uriByPrefix(n);)n=c+"_"+i++;t=this.logNamespace({prefix:n,uri:l},r===l)}return c&&a.mapPrefix(c,l),t},Gt.prototype.parseAttributes=function(t){var e=this,n=this.element;ge(t,function(i){var r=n.get(i.name);if(i.isReference)if(i.isMany){var o=[];ge(r,function(a){o.push(a.id)}),r=o.join(" ")}else r=r.id;e.addAttribute(e.nsAttributeName(i),r)})},Gt.prototype.addTagName=function(t){var e=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(e),pf(t)},Gt.prototype.addAttribute=function(t,e){var n=this.attrs;hs(e)&&(e=df(e,BE,LE));var i=function(o,a){a=Zm(a);var c=Km(o)?-1:void 0;return ge(o,function(l,u){if(a(l,u))return c=u,!1}),c}(n,function(o){return o.name.localName===t.localName&&o.name.uri===t.uri&&o.name.prefix===t.prefix}),r={name:t,value:e};i!==-1?n.splice(i,1,r):n.push(r)},Gt.prototype.serializeAttributes=function(t){var e=this.attrs,n=this.namespaces;n&&(e=function(i){return i.getUsed().filter(function(r){return r.prefix!=="xml"}).map(function(r){return{name:"xmlns"+(r.prefix?":"+r.prefix:""),value:r.uri}})}(n).concat(e)),ge(e,function(i){t.append(" ").append(pf(i.name)).append('="').append(i.value).append('"')})},Gt.prototype.serializeTo=function(t){var e=this.body[0],n=e&&e.constructor!==Qi;t.appendIndent().append("<"+this.tagName),this.serializeAttributes(t),t.append(e?">":" />"),e&&(n&&t.appendNewLine().indent(),ge(this.body,function(i){i.serializeTo(t)}),n&&t.unindent().appendIndent(),t.append("</"+this.tagName+">")),t.appendNewLine()},uf(ys,Gt),ys.prototype.parseNsAttributes=function(t){var e=Gt.prototype.parseNsAttributes.call(this,t),n=t.$descriptor;if(n.name===this.propertyDescriptor.type)return e;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=t.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(fs),(i.prefix?i.prefix+":":"")+o+n.ns.localName),e},ys.prototype.isLocalNs=function(t){return t.uri===(this.typeNs||this.ns).uri},gs.prototype=Object.create(Je.prototype),gs.prototype.fromXML=function(t,e,n){var i;i=e,gE.call(i)!=="[object String]"&&(n=e,e="bpmn:Definitions");var r=new Mu($m({model:this,lax:!0},n)),o=r.handler(e);return r.fromXML(t,o)},gs.prototype.toXML=function(t,e){var n=new $E(e);return new Promise(function(i,r){try{return i({xml:n.toXML(t)})}catch(o){return r(o)}})};var GE={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",prefix:"bpmn",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isAttr:!0,isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",prefix:"bpmndi",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[]},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",prefix:"dc",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",prefix:"di",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]},color:{name:"BPMN in Color",uri:"http://www.omg.org/spec/BPMN/non-normative/color/1.0",prefix:"color",types:[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};function UE(t,e){return new gs($m({},GE,t),e)}function be(t){return t?"<"+t.$type+(t.id?' id="'+t.id:"")+'" />':"<null>"}var HE=new Lr({name:"bpmnElement",enumerable:!0},{name:"di",configurable:!0});function Le(t,e){return t.$instanceOf(e)}function qE(t,e){var n={},i=[];function r(N,R){return function(j){N(j,R)}}function o(N){n[N.id]=N}function a(N,R){try{var j=N.di&&function(T,x){if(T.gfx)throw new Error(e("already rendered {element}",{element:be(T)}));return t.element(T,x)}(N,R);return o(N),j}catch(T){c(T.message,{element:N,error:T}),console.error(e("failed to import {element}",{element:be(N)})),console.error(T)}}function c(N,R){t.error(N,R)}function l(N){var R=N.bpmnElement;R?R.di?c(e("multiple DI elements defined for {element}",{element:be(R)}),{element:R}):(HE.bind(R,"di"),R.di=N):c(e("no bpmnElement referenced in {element}",{element:be(N)}),{element:N})}function u(N){var R;l(R=N.plane),F(R.planeElement,p)}function p(N){l(N)}function h(){for(;i.length;)i.shift()()}function v(N,R){C(N,R),E(N.ioSpecification,R),_(N.artifacts,R),o(N)}function f(N,R){a(N,R)}function y(N,R){a(N,R)}function b(N,R){a(N,R)}function w(N,R){a(N,R)}function g(N,R){a(N,R)}function _(N,R){F(N,function(j){Le(j,"bpmn:Association")?i.push(function(){g(j,R)}):g(j,R)})}function E(N,R){N&&(F(N.dataInputs,r(b,R)),F(N.dataOutputs,r(w,R)))}function S(N,R){C(N,R),_(N.artifacts,R)}function D(N,R){var j=a(N,R);Le(N,"bpmn:SubProcess")&&S(N,j||R),Le(N,"bpmn:Activity")&&E(N.ioSpecification,R),i.push(function(){F(N.dataInputAssociations,r(y,R)),F(N.dataOutputAssociations,r(y,R))})}function s(N,R){a(N,R)}function d(N,R){i.push(function(){var j=a(N,R);N.childLaneSet&&m(N.childLaneSet,j||R),function(T){F(T.flowNodeRef,function(x){var B=x.get("lanes");B&&B.push(T)})}(N)})}function m(N,R){F(N.lanes,r(d,R))}function C(N,R){(function(j,T){F(j,function(x){Le(x,"bpmn:SequenceFlow")?i.push(function(){(function(B,V){a(B,V)})(x,T)}):Le(x,"bpmn:BoundaryEvent")?i.unshift(function(){D(x,T)}):Le(x,"bpmn:FlowNode")?D(x,T):Le(x,"bpmn:DataObject")||(Le(x,"bpmn:DataStoreReference")||Le(x,"bpmn:DataObjectReference")?s(x,T):c(e("unrecognized flowElement {element} in context {context}",{element:be(x),context:T?be(T.businessObject):"null"}),{element:x,context:T}))})})(N.flowElements,R),N.laneSets&&function(j,T){F(j,r(m,T))}(N.laneSets,R)}function M(N,R){var j=a(N,R),T=N.processRef;T&&v(T,j||R)}return{handleDeferred:h,handleDefinitions:function(N,R){var j=N.diagrams;if(R&&j.indexOf(R)===-1)throw new Error(e("diagram not part of bpmn:Definitions"));if(!R&&j&&j.length&&(R=j[0]),!R)throw new Error(e("no diagram to display"));u(R);var T=R.plane;if(!T)throw new Error(e("no plane for {element}",{element:be(R)}));var x=T.bpmnElement;if(!x){if(x=function(H){return jt(H.rootElements,function(q){return Le(q,"bpmn:Process")||Le(q,"bpmn:Collaboration")})}(N),!x)throw new Error(e("no process or collaboration to display"));c(e("correcting missing bpmnElement on {plane} to {rootElement}",{plane:be(T),rootElement:be(x)})),T.bpmnElement=x,l(T)}var B,V=function(H,q){return t.root(H,q)}(x,T);if(Le(x,"bpmn:Process"))v(x,V);else{if(!Le(x,"bpmn:Collaboration"))throw new Error(e("unsupported bpmnElement for {plane}: {rootElement}",{plane:be(T),rootElement:be(x)}));F((B=x).participants,r(M)),_(B.artifacts),i.push(function(){var H;F(B.messageFlows,r(f,H))}),function(H,q){Et(H,function(J){return!n[J.id]&&Le(J,"bpmn:Process")&&J.laneSets}).forEach(r(v,q))}(N.rootElements,V)}h()},handleSubProcess:S,registerDi:l}}function WE(t,e,n){var i,r,o,a=[];return new Promise(function(c,l){try{return i=t.get("bpmnImporter"),r=t.get("eventBus"),o=t.get("translate"),r.fire("import.render.start",{definitions:e}),function(u,p){new qE({root:function(h){return i.add(h)},element:function(h,v){return i.add(h,v)},error:function(h,v){a.push({message:h,context:v})}},o).handleDefinitions(u,p)}(e,n),r.fire("import.render.complete",{error:void 0,warnings:a}),c({warnings:a})}catch(u){return u.warnings=a,l(u)}})}function qr(t){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var e=arguments.length;if(!(e>=1&&Ce(arguments[e-1])))return t.apply(this,arguments);var n=arguments[e-1];console.warn(new Error("Passing callbacks to "+t.name+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html"));var i=Array.prototype.slice.call(arguments,0,-1);t.apply(this,i).then(function(r){var o=Object.keys(r)[0];return n(null,r[o])},function(r){return n(r,r.warnings)})}}var hf='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21" style="vertical-align:middle"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>';function bs(t){return t.join(";")}var Fo,mf=bs(["color: #404040"]),XE='<div class="bjs-powered-by-lightbox" style="'+bs(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"])+'"><div class="backdrop" style="'+bs(["width: 100%","height: 100%","background: rgba(40,40,40,0.2)"])+'"></div><div class="notice" style="'+bs(["position: absolute","left: 50%","top: 40%","transform: translate(-50%)","width: 260px","padding: 10px","background: white","box-shadow: 0 1px 4px rgba(0,0,0,0.3)","font-family: Helvetica, Arial, sans-serif","font-size: 14px","display: flex","line-height: 1.3"])+'"><a href="https://bpmn.io" target="_blank" rel="noopener" style="margin: 15px 20px 15px 10px; align-self: center;'+mf+'">'+hf+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>';function Ut(t){var e,n;t=$({},KE,t),this._moddle=this._createModdle(t),this._container=this._createContainer(t),e=this._container,n=Ft('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100; '+mf+'">'+hf+"</a>"),e.appendChild(n),lt.bind(n,"click",function(i){Fo||(Fo=Ft(XE),Ue.bind(Fo,".backdrop","click",function(r){document.body.removeChild(Fo)})),document.body.appendChild(Fo),i.preventDefault()}),this._init(this._container,this._moddle,t)}function xs(t,e){return t.warnings=e,t}at(Ut,Fr),Ut.prototype.importXML=qr(function(t,e){var n=this;return new Promise(function(i,r){t=n._emit("import.parse.start",{xml:t})||t,n._moddle.fromXML(t,"bpmn:Definitions").then(function(o){var a=o.rootElement,c=o.references,l=o.warnings,u=o.elementsById;a=n._emit("import.parse.complete",function(p){var h=n.get("eventBus").createEvent(p);return Object.defineProperty(h,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:p.warnings,references:p.references,elementsById:p.elementsById}}}),h}({error:null,definitions:a,elementsById:u,references:c,warnings:l}))||a,n.importDefinitions(a,e).then(function(p){var h=[].concat(l,p.warnings||[]);return n._emit("import.done",{error:null,warnings:h}),i({warnings:h})}).catch(function(p){var h=[].concat(l,p.warnings||[]);return n._emit("import.done",{error:p,warnings:h}),r(xs(p,h))})}).catch(function(o){return n._emit("import.parse.complete",{error:o}),o=function(a){var c=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(a.message);return c&&(a.message="unparsable content <"+c[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+c[2]),a}(o),n._emit("import.done",{error:o,warnings:o.warnings}),r(o)})})}),Ut.prototype.importDefinitions=qr(function(t,e){var n=this;return new Promise(function(i,r){n._setDefinitions(t),n.open(e).then(function(o){var a=o.warnings;return i({warnings:a})}).catch(function(o){return r(o)})})}),Ut.prototype.open=qr(function(t){var e=this._definitions,n=t,i=this;return new Promise(function(r,o){if(!e){var a=new Error("no XML imported");return o(xs(a,[]))}if(typeof t=="string"&&(n=function(l,u){return u&&jt(l.diagrams,function(p){return p.id===u})||null}(e,t),!n)){var c=new Error("BPMNDiagram <"+t+"> not found");return o(xs(c,[]))}try{i.clear()}catch(l){return o(xs(l,[]))}WE(i,e,n).then(function(l){var u=l.warnings;return r({warnings:u})}).catch(function(l){return o(l)})})}),Ut.prototype.saveXML=qr(function(t){t=t||{};var e=this,n=this._definitions;return new Promise(function(i){if(!n)return i({error:new Error("no definitions loaded")});n=e._emit("saveXML.start",{definitions:n})||n,e._moddle.toXML(n,t).then(function(r){var o=r.xml;return o=e._emit("saveXML.serialized",{xml:o})||o,i({xml:o})})}).catch(function(i){return{error:i}}).then(function(i){e._emit("saveXML.done",i);var r=i.error;return r?Promise.reject(r):i})}),Ut.prototype.saveSVG=qr(function(t){var e=this;return new Promise(function(n,i){var r,o;e._emit("saveSVG.start");try{var a=e.get("canvas"),c=a.getDefaultLayer(),l=qt("defs",a._svg),u=sm(c),p=l?"<defs>"+sm(l)+"</defs>":"",h=c.getBBox();r=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+h.width+'" height="'+h.height+'" viewBox="'+h.x+" "+h.y+" "+h.width+" "+h.height+'" version="1.1">'+p+u+"</svg>"}catch(v){o=v}return e._emit("saveSVG.done",{error:o,svg:r}),o?i(o):n({svg:r})})}),Ut.prototype._setDefinitions=function(t){this._definitions=t},Ut.prototype.getModules=function(){return this._modules},Ut.prototype.clear=function(){this.getDefinitions()&&(this.get("elementRegistry").forEach(function(t){var e=t.businessObject;e&&e.di&&delete e.di}),Fr.prototype.clear.call(this))},Ut.prototype.destroy=function(){Fr.prototype.destroy.call(this),Pn(this._container)},Ut.prototype.on=function(t,e,n,i){return this.get("eventBus").on(t,e,n,i)},Ut.prototype.off=function(t,e){this.get("eventBus").off(t,e)},Ut.prototype.attachTo=function(t){if(!t)throw new Error("parentNode required");this.detach(),t.get&&t.constructor.prototype.jquery&&(t=t.get(0)),typeof t=="string"&&(t=qt(t)),t.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},Ut.prototype.getDefinitions=function(){return this._definitions},Ut.prototype.detach=function(){var t=this._container,e=t.parentNode;e&&(this._emit("detach",{}),e.removeChild(t))},Ut.prototype._init=function(t,e,n){var i=n.modules||this.getModules(),r=n.additionalModules||[],o=[].concat([{bpmnjs:["value",this],moddle:["value",e]}],i,r),a=$(fi(n,["additionalModules"]),{canvas:$({},n.canvas,{container:t}),modules:o});Fr.call(this,a),n&&n.container&&this.attachTo(n.container)},Ut.prototype._emit=function(t,e){return this.get("eventBus").fire(t,e)},Ut.prototype._createContainer=function(t){var e=Ft('<div class="bjs-container"></div>');return $(e.style,{width:ff(t.width),height:ff(t.height),position:t.position}),e},Ut.prototype._createModdle=function(t){return new UE($({},this._moddleExtensions,t.moddleExtensions))},Ut.prototype._modules=[];var KE={width:"100%",height:"100%",position:"relative"};function ff(t){return t+(mt(t)?"px":"")}function zo(t){Ut.call(this,t),this.on("import.parse.complete",function(e){e.error||this._collectIds(e.definitions,e.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}function A(t,e){var n=rt(t);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(e)}function rt(t){return t&&t.businessObject||t}function It(t){return!A(t,"bpmn:CallActivity")&&(A(t,"bpmn:SubProcess")?rt(t).di&&!!rt(t).di.isExpanded:!A(t,"bpmn:Participant")||!!rt(t).processRef)}function Ve(t){return t&&!!rt(t).triggeredByEvent}function Es(t,e){var n=rt(t),i=!1;return n.eventDefinitions&&F(n.eventDefinitions,function(r){A(r,e)&&(i=!0)}),i}function vf(t){return A(t,"bpmn:FlowElement")||A(t,"bpmn:Participant")||A(t,"bpmn:Lane")||A(t,"bpmn:SequenceFlow")||A(t,"bpmn:MessageFlow")||A(t,"bpmn:DataInput")||A(t,"bpmn:DataOutput")?"name":A(t,"bpmn:TextAnnotation")?"text":A(t,"bpmn:Group")?"categoryValueRef":void 0}function vn(t){var e=t.businessObject,n=vf(e);if(n)return n==="categoryValueRef"?function(i){var r=i.categoryValueRef;return r&&r.value||""}(e):e[n]||""}function Nn(t,e,n){return Wi(t.eventDefinitions,function(i){return i.$type===e&&function(r,o){return Nr(o,function(a,c){return r[c]==a})}(t,n)})}function Wr(t){return t.businessObject.di}function Ae(t){return t.businessObject}function Ct(t,e){var n=Wr(t);return n.get("color:background-color")||n.get("bioc:fill")||e||"white"}function tt(t,e){var n=Wr(t);return n.get("color:border-color")||n.get("bioc:stroke")||e||"black"}function $o(t,e,n){var i=Wr(t).get("label");return i&&i.get("color:color")||e||tt(t,n)}at(zo,Ut),zo.prototype._createModdle=function(t){var e=Ut.prototype._createModdle.call(this,t);return e.ids=new An([32,36,1]),e},zo.prototype._collectIds=function(t,e){var n,i=t.$model.ids;for(n in i.clear(),e)i.claim(n,e[n])};var YE=new An,Xr=.95;function tr(t,e,n,i,r,o,a){$n.call(this,e,a);var c=t&&t.defaultFillColor,l=t&&t.defaultStrokeColor,u=t&&t.defaultLabelColor,p=YE.next(),h={},v=n.computeStyle;function f(T,x){var B=$({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},x.attrs),V=x.ref||{x:0,y:0},H=x.scale||1;B.strokeDasharray==="none"&&(B.strokeDasharray=[1e4,1]);var q=st("marker");W(x.element,B),pt(q,x.element),W(q,{id:T,viewBox:"0 0 20 20",refX:V.x,refY:V.y,markerWidth:20*H,markerHeight:20*H,orient:"auto"});var J=qt("defs",r._svg);J||(J=st("defs"),pt(r._svg,J)),pt(J,q),h[T]=q}function y(T){return T.replace(/[^0-9a-zA-z]+/g,"_")}function b(T,x,B){var V=T+"-"+y(x)+"-"+y(B)+"-"+p;return h[V]||function(H,q,J,Q){if(q==="sequenceflow-end"){var it=st("path");W(it,{d:"M 1 5 L 11 10 L 1 15 Z"}),f(H,{element:it,ref:{x:11,y:10},scale:.5,attrs:{fill:Q,stroke:Q}})}if(q==="messageflow-start"){var ot=st("circle");W(ot,{cx:6,cy:6,r:3.5}),f(H,{element:ot,attrs:{fill:J,stroke:Q},ref:{x:6,y:6}})}if(q==="messageflow-end"){var vt=st("path");W(vt,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),f(H,{element:vt,attrs:{fill:J,stroke:Q,strokeLinecap:"butt"},ref:{x:8.5,y:5}})}if(q==="association-start"){var Yt=st("path");W(Yt,{d:"M 11 5 L 1 10 L 11 15"}),f(H,{element:Yt,attrs:{fill:"none",stroke:Q,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if(q==="association-end"){var et=st("path");W(et,{d:"M 1 5 L 11 10 L 1 15"}),f(H,{element:et,attrs:{fill:"none",stroke:Q,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if(q==="conditional-flow-marker"){var Z=st("path");W(Z,{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"}),f(H,{element:Z,attrs:{fill:J,stroke:Q},ref:{x:-1,y:10},scale:.5})}if(q==="conditional-default-flow-marker"){var Tt=st("path");W(Tt,{d:"M 6 4 L 10 16"}),f(H,{element:Tt,attrs:{stroke:Q},ref:{x:0,y:10},scale:.5})}}(V,T,x,B),"url(#"+V+")"}function w(T,x,B,V,H){Se(V)&&(H=V,V=0),V=V||0,(H=v(H,{stroke:"black",strokeWidth:2,fill:"white"})).fill==="none"&&delete H.fillOpacity;var q=x/2,J=B/2,Q=st("circle");return W(Q,{cx:q,cy:J,r:Math.round((x+B)/4-V)}),W(Q,H),pt(T,Q),Q}function g(T,x,B,V,H,q){Se(H)&&(q=H,H=0),H=H||0,q=v(q,{stroke:"black",strokeWidth:2,fill:"white"});var J=st("rect");return W(J,{x:H,y:H,width:x-2*H,height:B-2*H,rx:V,ry:V}),W(J,q),pt(T,J),J}function _(T,x,B){var V=au(x,B=v(B,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"}));return pt(T,V),V}function E(T,x,B){B=v(B,["no-fill"],{strokeWidth:2,stroke:"black"});var V=st("path");return W(V,{d:x}),W(V,B),pt(T,V),V}function S(T,x,B,V){return E(x,B,$({"data-marker":T},V))}function D(T){return function(x,B){return R[T](x,B)}}function s(T){return R[T]}function d(T,x){var B=Ae(T),V=function(H){return H.$type==="bpmn:IntermediateThrowEvent"||H.$type==="bpmn:EndEvent"}(B);return B.eventDefinitions&&B.eventDefinitions.length>1?B.parallelMultiple?s("bpmn:ParallelMultipleEventDefinition")(x,T,V):s("bpmn:MultipleEventDefinition")(x,T,V):Nn(B,"bpmn:MessageEventDefinition")?s("bpmn:MessageEventDefinition")(x,T,V):Nn(B,"bpmn:TimerEventDefinition")?s("bpmn:TimerEventDefinition")(x,T,V):Nn(B,"bpmn:ConditionalEventDefinition")?s("bpmn:ConditionalEventDefinition")(x,T):Nn(B,"bpmn:SignalEventDefinition")?s("bpmn:SignalEventDefinition")(x,T,V):Nn(B,"bpmn:EscalationEventDefinition")?s("bpmn:EscalationEventDefinition")(x,T,V):Nn(B,"bpmn:LinkEventDefinition")?s("bpmn:LinkEventDefinition")(x,T,V):Nn(B,"bpmn:ErrorEventDefinition")?s("bpmn:ErrorEventDefinition")(x,T,V):Nn(B,"bpmn:CancelEventDefinition")?s("bpmn:CancelEventDefinition")(x,T,V):Nn(B,"bpmn:CompensateEventDefinition")?s("bpmn:CompensateEventDefinition")(x,T,V):Nn(B,"bpmn:TerminateEventDefinition")?s("bpmn:TerminateEventDefinition")(x,T,V):null}function m(T,x,B){B=$({size:{width:100}},B);var V=o.createText(x||"",B);return St(V).add("djs-label"),pt(T,V),V}function C(T,x,B){return m(T,Ae(x).name,{box:x,align:B,padding:5,style:{fill:$o(x,u,l)}})}function M(T,x,B){vu(m(T,x,{box:{height:30,width:B.height},align:"center-middle",style:{fill:$o(B,u,l)}}),0,-(-1*B.height),270)}function N(T){for(var x=T.waypoints,B="m  "+x[0].x+","+x[0].y,V=1;V<x.length;V++)B+="L"+x[V].x+","+x[V].y+" ";return B}var R=this.handlers={"bpmn:Event":function(T,x,B){return"fillOpacity"in B||(B.fillOpacity=Xr),w(T,x.width,x.height,B)},"bpmn:StartEvent":function(T,x){var B={fill:Ct(x,c),stroke:tt(x,l)};Ae(x).isInterrupting||(B={strokeDasharray:"6",strokeLinecap:"round",fill:Ct(x,c),stroke:tt(x,l)});var V=s("bpmn:Event")(T,x,B);return d(x,T),V},"bpmn:MessageEventDefinition":function(T,x,B){return E(T,i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:x.width,containerHeight:x.height,position:{mx:.235,my:.315}}),{strokeWidth:1,fill:B?tt(x,l):Ct(x,c),stroke:B?Ct(x,c):tt(x,l)})},"bpmn:TimerEventDefinition":function(T,x){var B=w(T,x.width,x.height,.2*x.height,{strokeWidth:2,fill:Ct(x,c),stroke:tt(x,l)});E(T,i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:x.width,containerHeight:x.height,position:{mx:.5,my:.5}}),{strokeWidth:2,strokeLinecap:"square",stroke:tt(x,l)});for(var V=0;V<12;V++){var H=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:x.width,containerHeight:x.height,position:{mx:.5,my:.5}}),q=x.width/2;E(T,H,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+30*V+","+x.height/2+","+q+")",stroke:tt(x,l)})}return B},"bpmn:EscalationEventDefinition":function(T,x,B){return E(T,i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:B?tt(x,l):"none",stroke:tt(x,l)})},"bpmn:ConditionalEventDefinition":function(T,x){return E(T,i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:.5,my:.222}}),{strokeWidth:1,stroke:tt(x,l)})},"bpmn:LinkEventDefinition":function(T,x,B){return E(T,i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:.57,my:.263}}),{strokeWidth:1,fill:B?tt(x,l):"none",stroke:tt(x,l)})},"bpmn:ErrorEventDefinition":function(T,x,B){return E(T,i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:x.width,containerHeight:x.height,position:{mx:.2,my:.722}}),{strokeWidth:1,fill:B?tt(x,l):"none",stroke:tt(x,l)})},"bpmn:CancelEventDefinition":function(T,x,B){var V=E(T,i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:.638,my:-.055}}),{strokeWidth:1,fill:B?tt(x,l):"none",stroke:tt(x,l)});return Fm(V,45),V},"bpmn:CompensateEventDefinition":function(T,x,B){return E(T,i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:.22,my:.5}}),{strokeWidth:1,fill:B?tt(x,l):"none",stroke:tt(x,l)})},"bpmn:SignalEventDefinition":function(T,x,B){return E(T,i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:x.width,containerHeight:x.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:B?tt(x,l):"none",stroke:tt(x,l)})},"bpmn:MultipleEventDefinition":function(T,x,B){return E(T,i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:x.width,containerHeight:x.height,position:{mx:.222,my:.36}}),{strokeWidth:1,fill:B?tt(x,l):"none"})},"bpmn:ParallelMultipleEventDefinition":function(T,x){return E(T,i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:x.width,containerHeight:x.height,position:{mx:.458,my:.194}}),{strokeWidth:1,fill:tt(x,l),stroke:tt(x,l)})},"bpmn:EndEvent":function(T,x){var B=s("bpmn:Event")(T,x,{strokeWidth:4,fill:Ct(x,c),stroke:tt(x,l)});return d(x,T),B},"bpmn:TerminateEventDefinition":function(T,x){return w(T,x.width,x.height,8,{strokeWidth:4,fill:tt(x,l),stroke:tt(x,l)})},"bpmn:IntermediateEvent":function(T,x){var B=s("bpmn:Event")(T,x,{strokeWidth:1,fill:Ct(x,c),stroke:tt(x,l)});return w(T,x.width,x.height,3,{strokeWidth:1,fill:Ct(x,"none"),stroke:tt(x,l)}),d(x,T),B},"bpmn:IntermediateCatchEvent":D("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":D("bpmn:IntermediateEvent"),"bpmn:Activity":function(T,x,B){return"fillOpacity"in(B=B||{})||(B.fillOpacity=Xr),g(T,x.width,x.height,10,B)},"bpmn:Task":function(T,x){var B={fill:Ct(x,c),stroke:tt(x,l)},V=s("bpmn:Activity")(T,x,B);return C(T,x,"center-middle"),j(T,x),V},"bpmn:ServiceTask":function(T,x){var B=s("bpmn:Task")(T,x);return E(T,i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{strokeWidth:1,fill:Ct(x,c),stroke:tt(x,l)}),E(T,i.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}}),{strokeWidth:0,fill:Ct(x,c)}),E(T,i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{strokeWidth:1,fill:Ct(x,c),stroke:tt(x,l)}),B},"bpmn:UserTask":function(T,x){var B=s("bpmn:Task")(T,x);return E(T,i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Ct(x,c),stroke:tt(x,l)}),E(T,i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Ct(x,c),stroke:tt(x,l)}),E(T,i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:tt(x,l),stroke:tt(x,l)}),B},"bpmn:ManualTask":function(T,x){var B=s("bpmn:Task")(T,x);return E(T,i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{strokeWidth:.5,fill:Ct(x,c),stroke:tt(x,l)}),B},"bpmn:SendTask":function(T,x){var B=s("bpmn:Task")(T,x);return E(T,i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{strokeWidth:1,fill:tt(x,l),stroke:Ct(x,c)}),B},"bpmn:ReceiveTask":function(T,x){var B,V=Ae(x),H=s("bpmn:Task")(T,x);return V.instantiate?(w(T,28,28,4.4,{strokeWidth:1}),B=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):B=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),E(T,B,{strokeWidth:1,fill:Ct(x,c),stroke:tt(x,l)}),H},"bpmn:ScriptTask":function(T,x){var B=s("bpmn:Task")(T,x);return E(T,i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{strokeWidth:1,stroke:tt(x,l)}),B},"bpmn:BusinessRuleTask":function(T,x){var B=s("bpmn:Task")(T,x);return W(E(T,i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}})),{strokeWidth:1,fill:Ct(x,"#aaaaaa"),stroke:tt(x,l)}),W(E(T,i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}})),{strokeWidth:1,stroke:tt(x,l)}),B},"bpmn:SubProcess":function(T,x,B){B=$({fill:Ct(x,c),stroke:tt(x,l)},B);var V=s("bpmn:Activity")(T,x,B),H=It(x);return Ve(x)&&W(V,{strokeDasharray:"1,2"}),C(T,x,H?"center-top":"center-middle"),H?j(T,x):j(T,x,["SubProcessMarker"]),V},"bpmn:AdHocSubProcess":function(T,x){return s("bpmn:SubProcess")(T,x)},"bpmn:Transaction":function(T,x){var B=s("bpmn:SubProcess")(T,x),V=n.style(["no-fill","no-events"],{stroke:tt(x,l)});return g(T,x.width,x.height,8,3,V),B},"bpmn:CallActivity":function(T,x){return s("bpmn:SubProcess")(T,x,{strokeWidth:5})},"bpmn:Participant":function(T,x){var B={fillOpacity:Xr,fill:Ct(x,c),stroke:tt(x,l)},V=s("bpmn:Lane")(T,x,B);return It(x)?(_(T,[{x:30,y:0},{x:30,y:x.height}],{stroke:tt(x,l)}),M(T,Ae(x).name,x)):m(T,Ae(x).name,{box:x,align:"center-middle",style:{fill:$o(x,u,l)}}),Ae(x).participantMultiplicity&&s("ParticipantMultiplicityMarker")(T,x),V},"bpmn:Lane":function(T,x,B){var V=g(T,x.width,x.height,0,$({fill:Ct(x,c),fillOpacity:.35,stroke:tt(x,l)},B)),H=Ae(x);return H.$type==="bpmn:Lane"&&M(T,H.name,x),V},"bpmn:InclusiveGateway":function(T,x){var B=s("bpmn:Gateway")(T,x);return w(T,x.width,x.height,.24*x.height,{strokeWidth:2.5,fill:Ct(x,c),stroke:tt(x,l)}),B},"bpmn:ExclusiveGateway":function(T,x){var B=s("bpmn:Gateway")(T,x),V=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:x.width,containerHeight:x.height,position:{mx:.32,my:.3}});return Wr(x).isMarkerVisible&&E(T,V,{strokeWidth:1,fill:tt(x,l),stroke:tt(x,l)}),B},"bpmn:ComplexGateway":function(T,x){var B=s("bpmn:Gateway")(T,x);return E(T,i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:x.width,containerHeight:x.height,position:{mx:.46,my:.26}}),{strokeWidth:1,fill:tt(x,l),stroke:tt(x,l)}),B},"bpmn:ParallelGateway":function(T,x){var B=s("bpmn:Gateway")(T,x);return E(T,i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:x.width,containerHeight:x.height,position:{mx:.46,my:.2}}),{strokeWidth:1,fill:tt(x,l),stroke:tt(x,l)}),B},"bpmn:EventBasedGateway":function(T,x){var B=Ae(x),V=s("bpmn:Gateway")(T,x);w(T,x.width,x.height,.2*x.height,{strokeWidth:1,fill:"none",stroke:tt(x,l)});var H=B.eventGatewayType,q=!!B.instantiate;if(H==="Parallel"){var J=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:x.width,containerHeight:x.height,position:{mx:.474,my:.296}});W(E(T,J),{strokeWidth:1,fill:"none"})}else H==="Exclusive"&&(q||W(w(T,x.width,x.height,.26*x.height),{strokeWidth:1,fill:"none",stroke:tt(x,l)}),function(){var Q=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:x.width,containerHeight:x.height,position:{mx:.36,my:.44}}),it={strokeWidth:2,fill:Ct(x,"none"),stroke:tt(x,l)};E(T,Q,it)}());return V},"bpmn:Gateway":function(T,x){var B={fill:Ct(x,c),fillOpacity:Xr,stroke:tt(x,l)};return function(V,H,q,J){var Q=H/2,it=q/2,ot=[{x:Q,y:0},{x:H,y:it},{x:Q,y:q},{x:0,y:it}].map(function(Yt){return Yt.x+","+Yt.y}).join(" ");J=v(J,{stroke:"black",strokeWidth:2,fill:"white"});var vt=st("polygon");return W(vt,{points:ot}),W(vt,J),pt(V,vt),vt}(T,x.width,x.height,B)},"bpmn:SequenceFlow":function(T,x){var B,V=N(x),H=Ct(x,c),q=tt(x,l),J=E(T,V,{strokeLinejoin:"round",markerEnd:b("sequenceflow-end",H,q),stroke:tt(x,l)}),Q=Ae(x);return x.source&&(B=x.source.businessObject,Q.conditionExpression&&B.$instanceOf("bpmn:Activity")&&W(J,{markerStart:b("conditional-flow-marker",H,q)}),B.default&&(B.$instanceOf("bpmn:Gateway")||B.$instanceOf("bpmn:Activity"))&&B.default===Q&&W(J,{markerStart:b("conditional-default-flow-marker",H,q)})),J},"bpmn:Association":function(T,x,B){var V=Ae(x),H=Ct(x,c),q=tt(x,l);return B=$({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",stroke:tt(x,l)},B||{}),V.associationDirection!=="One"&&V.associationDirection!=="Both"||(B.markerEnd=b("association-end",H,q)),V.associationDirection==="Both"&&(B.markerStart=b("association-start",H,q)),_(T,x.waypoints,B)},"bpmn:DataInputAssociation":function(T,x){var B=Ct(x,c),V=tt(x,l);return s("bpmn:Association")(T,x,{markerEnd:b("association-end",B,V)})},"bpmn:DataOutputAssociation":function(T,x){var B=Ct(x,c),V=tt(x,l);return s("bpmn:Association")(T,x,{markerEnd:b("association-end",B,V)})},"bpmn:MessageFlow":function(T,x){var B=Ae(x),V=Wr(x),H=Ct(x,c),q=tt(x,l),J=E(T,N(x),{markerEnd:b("messageflow-end",H,q),markerStart:b("messageflow-start",H,q),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px",stroke:tt(x,l)});if(B.messageRef){var Q=J.getPointAtLength(J.getTotalLength()/2),it=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:Q.x,y:Q.y}}),ot={strokeWidth:1};V.messageVisibleKind==="initiating"?(ot.fill="white",ot.stroke="black"):(ot.fill="#888",ot.stroke="white");var vt=E(T,it,ot),Yt=m(T,B.messageRef.name,{align:"center-top",fitBox:!0,style:{fill:tt(x,u)}}),et=vt.getBBox(),Z=Yt.getBBox();vu(Yt,Q.x-Z.width/2,Q.y+et.height/2+10,0)}return J},"bpmn:DataObject":function(T,x){var B=E(T,i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:.474,my:.296}}),{fill:Ct(x,c),fillOpacity:Xr,stroke:tt(x,l)});return function(V){var H=V.dataObjectRef;return V.isCollection||H&&H.isCollection}(Ae(x))&&function(V,H){var q=(H.height-18)/H.height,J=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:H.width,containerHeight:H.height,position:{mx:.33,my:q}});E(V,J,{strokeWidth:2})}(T,x),B},"bpmn:DataObjectReference":D("bpmn:DataObject"),"bpmn:DataInput":function(T,x){var B=i.getRawPath("DATA_ARROW"),V=s("bpmn:DataObject")(T,x);return E(T,B,{strokeWidth:1}),V},"bpmn:DataOutput":function(T,x){var B=i.getRawPath("DATA_ARROW"),V=s("bpmn:DataObject")(T,x);return E(T,B,{strokeWidth:1,fill:"black"}),V},"bpmn:DataStoreReference":function(T,x){return E(T,i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:0,my:.133}}),{strokeWidth:2,fill:Ct(x,c),fillOpacity:Xr,stroke:tt(x,l)})},"bpmn:BoundaryEvent":function(T,x){var B=Ae(x).cancelActivity,V={strokeWidth:1,fill:Ct(x,c),stroke:tt(x,l)};B||(V.strokeDasharray="6",V.strokeLinecap="round");var H=$({},V,{fillOpacity:1}),q=$({},V,{fill:"none"}),J=s("bpmn:Event")(T,x,H);return w(T,x.width,x.height,3,q),d(x,T),J},"bpmn:Group":function(T,x){return g(T,x.width,x.height,10,{stroke:tt(x,l),strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"})},label:function(T,x){return function(B,V){var H={width:90,height:30,x:V.width/2+V.x,y:V.height/2+V.y};return m(B,vn(V),{box:H,fitBox:!0,style:$({},o.getExternalStyle(),{fill:$o(V,u,l)})})}(T,x)},"bpmn:TextAnnotation":function(T,x){var B=g(T,x.width,x.height,0,0,{fill:"none",stroke:"none"});return E(T,i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:0,my:0}}),{stroke:tt(x,l)}),m(T,Ae(x).text||"",{box:x,align:"left-top",padding:5,style:{fill:$o(x,u,l)}}),B},ParticipantMultiplicityMarker:function(T,x){S("participant-multiplicity",T,i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:x.width/2/x.width,my:(x.height-15)/x.height}}),{strokeWidth:2,fill:Ct(x,c),stroke:tt(x,l)})},SubProcessMarker:function(T,x){je(g(T,14,14,0,{strokeWidth:1,fill:Ct(x,c),stroke:tt(x,l)}),x.width/2-7.5,x.height-20),S("sub-process",T,i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:x.width,containerHeight:x.height,position:{mx:(x.width/2-7.5)/x.width,my:(x.height-20)/x.height}}),{fill:Ct(x,c),stroke:tt(x,l)})},ParallelMarker:function(T,x,B){S("parallel",T,i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:(x.width/2+B.parallel)/x.width,my:(x.height-20)/x.height}}),{fill:Ct(x,c),stroke:tt(x,l)})},SequentialMarker:function(T,x,B){S("sequential",T,i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:(x.width/2+B.seq)/x.width,my:(x.height-19)/x.height}}),{fill:Ct(x,c),stroke:tt(x,l)})},CompensationMarker:function(T,x,B){S("compensation",T,i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:(x.width/2+B.compensation)/x.width,my:(x.height-13)/x.height}}),{strokeWidth:1,fill:Ct(x,c),stroke:tt(x,l)})},LoopMarker:function(T,x,B){S("loop",T,i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:(x.width/2+B.loop)/x.width,my:(x.height-7)/x.height}}),{strokeWidth:1,fill:Ct(x,c),stroke:tt(x,l),strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(T,x,B){S("adhoc",T,i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:(x.width/2+B.adhoc)/x.width,my:(x.height-15)/x.height}}),{strokeWidth:1,fill:tt(x,l),stroke:tt(x,l)})}};function j(T,x,B){var V,H=Ae(x),q=B&&B.indexOf("SubProcessMarker")!==-1;V=q?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},F(B,function(it){s(it)(T,x,V)}),H.isForCompensation&&s("CompensationMarker")(T,x,V),H.$type==="bpmn:AdHocSubProcess"&&s("AdhocMarker")(T,x,V);var J=H.loopCharacteristics,Q=J&&J.isSequential;J&&(Q===void 0&&s("LoopMarker")(T,x,V),Q===!1&&s("ParallelMarker")(T,x,V),Q===!0&&s("SequentialMarker")(T,x,V))}this._drawPath=E}at(tr,$n),tr.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],tr.prototype.canRender=function(t){return A(t,"bpmn:BaseElement")},tr.prototype.drawShape=function(t,e){var n=e.type;return(0,this.handlers[n])(t,e)},tr.prototype.drawConnection=function(t,e){var n=e.type;return(0,this.handlers[n])(t,e)},tr.prototype.getShapePath=function(t){return A(t,"bpmn:Event")?(n=(e=t).x+e.width/2,i=e.y+e.height/2,r=e.width/2,Br([["M",n,i],["m",0,-r],["a",r,r,0,1,1,0,2*r],["a",r,r,0,1,1,0,-2*r],["z"]])):A(t,"bpmn:Activity")?function(o,a){var c=o.x,l=o.y,u=o.width,p=o.height;return Br([["M",c+a,l],["l",u-2*a,0],["a",a,a,0,0,1,a,a],["l",0,p-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-u,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-p],["a",a,a,0,0,1,a,-a],["z"]])}(t,10):A(t,"bpmn:Gateway")?function(o){var a=o.width/2,c=o.height/2;return Br([["M",o.x+a,o.y],["l",a,c],["l",-a,c],["l",-a,-c],["z"]])}(t):function(o){var a=o.x,c=o.y,l=o.width;return Br([["M",a,c],["l",l,0],["l",0,o.height],["l",-l,0],["z"]])}(t);var e,n,i,r};var JE={width:150,height:50};function ZE(t,e){var n;e.textContent=t;try{var i,r=t==="";return e.textContent=r?"dummy":t,i={width:(n=e.getBBox()).width+2*n.x,height:n.height},r&&(i.width=0),i}catch{return{width:0,height:0}}}function QE(t,e,n){for(var i,r=t.shift(),o=r;;){if((i=ZE(o,n)).width=o?i.width:0,o===" "||o===""||i.width<Math.round(e)||o.length<2)return tw(t,o,r,i);o=ew(o,i.width,e)}}function tw(t,e,n,i){if(e.length<n.length){var r=n.slice(e.length).trim();t.unshift(r)}return{width:i.width,height:i.height,text:e}}var yf="\xAD";function ew(t,e,n){var i=Math.max(t.length*(n/e),1),r=function(o,a){var c,l=o.split(/(\s|-|\u00AD)/g),u=[],p=0;if(l.length>1)for(;c=l.shift();){if(!(c.length+p<a)){c!=="-"&&c!==yf||u.pop();break}u.push(c),p+=c.length}var h=u[u.length-1];return h&&h===yf&&(u[u.length-1]="-"),u.join("")}(t,i);return r||(r=t.slice(0,Math.max(Math.round(i-1),1))),r}function ws(t){this._config=$({},{size:JE,padding:0,style:{},align:"center-top"},t||{})}ws.prototype.createText=function(t,e){return this.layoutText(t,e).element},ws.prototype.getDimensions=function(t,e){return this.layoutText(t,e).dimensions},ws.prototype.layoutText=function(t,e){var n=$({},this._config.size,e.box),i=$({},this._config.style,e.style),r=function(w){var g=w.split("-");return{horizontal:g[0]||"center",vertical:g[1]||"top"}}(e.align||this._config.align),o=function(w){return Se(w)?$({top:0,left:0,right:0,bottom:0},w):{top:w,left:w,right:w,bottom:w}}(e.padding!==void 0?e.padding:this._config.padding),a=e.fitBox||!1,c=function(w){if("fontSize"in w&&"lineHeight"in w)return w.lineHeight*parseInt(w.fontSize,10)}(i),l=t.split(/\u00AD?\r?\n/),u=[],p=n.width-o.left-o.right,h=st("text");for(W(h,{x:0,y:0}),W(h,i),pt(function(){var w=document.getElementById("helper-svg");return w||(W(w=st("svg"),{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(w)),w}(),h);l.length;)u.push(QE(l,p,h));r.vertical==="middle"&&(o.top=o.bottom=0);var v=$e(u,function(w,g,_){return w+(c||g.height)},0)+o.top+o.bottom,f=$e(u,function(w,g,_){return g.width>w?g.width:w},0),y=o.top;r.vertical==="middle"&&(y+=(n.height-v)/2),y-=(c||u[0].height)/4;var b=st("text");return W(b,i),F(u,function(w){var g;switch(y+=c||w.height,r.horizontal){case"left":g=o.left;break;case"right":g=(a?f:p)-o.right-w.width;break;default:g=Math.max(((a?f:p)-w.width)/2+o.left,0)}var _=st("tspan");W(_,{x:g,y}),_.textContent=w.text,pt(b,_)}),Zt(h),{dimensions:{width:f,height:v},element:b}};function gf(t){var e=$({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},t&&t.defaultStyle||{}),n=parseInt(e.fontSize,10)-1,i=$({},e,{fontSize:n},t&&t.externalStyle||{}),r=new ws({style:e});this.getExternalLabelBounds=function(o,a){var c=r.getDimensions(a,{box:{width:90,height:30,x:o.width/2+o.x,y:o.height/2+o.y},style:i});return{x:Math.round(o.x+o.width/2-c.width/2),y:Math.round(o.y),width:Math.ceil(c.width),height:Math.ceil(c.height)}},this.getTextAnnotationBounds=function(o,a){var c=r.getDimensions(a,{box:o,style:e,align:"left-top",padding:5});return{x:o.x,y:o.y,width:o.width,height:Math.max(30,Math.round(c.height))}},this.createText=function(o,a){return r.createText(o,a||{})},this.getDefaultStyle=function(){return e},this.getExternalStyle=function(){return i}}gf.$inject=["config.textRenderer"];var nw=/\{([^{}]+)\}/g,iw=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;const rw={__init__:["bpmnRenderer"],bpmnRenderer:["type",tr],textRenderer:["type",gf],pathMap:["type",function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,e){var n,i,r=this.pathMap[t];e.abspos?(n=e.abspos.x,i=e.abspos.y):(n=e.containerWidth*e.position.mx,i=e.containerHeight*e.position.my);var o={};if(e.position){for(var a=e.containerHeight/r.height*e.yScaleFactor,c=e.containerWidth/r.width*e.xScaleFactor,l=0;l<r.heightElements.length;l++)o["y"+l]=r.heightElements[l]*a;for(var u=0;u<r.widthElements.length;u++)o["x"+u]=r.widthElements[u]*c}var p,h,v=(p=r.d,h={mx:n,my:i,e:o},String(p).replace(nw,function(f,y){return function(b,w,g){var _=g;return w.replace(iw,function(E,S,D,s,d){S=S||s,_&&(S in _&&(_=_[S]),typeof _=="function"&&d&&(_=_()))}),_=(_==null||_==g?b:_)+""}(f,y,h)}));return v}}]},_s={translate:["value",function(t,e){return e=e||{},t.replace(/{([^}]+)}/g,function(n,i){return e[i]||"{"+i+"}"})}]};var Go={width:90,height:20};function Kr(t){return A(t,"bpmn:Event")||A(t,"bpmn:Gateway")||A(t,"bpmn:DataStoreReference")||A(t,"bpmn:DataObjectReference")||A(t,"bpmn:DataInput")||A(t,"bpmn:DataOutput")||A(t,"bpmn:SequenceFlow")||A(t,"bpmn:MessageFlow")||A(t,"bpmn:Group")}function Ss(t){return xe(t.label)}function ow(t){var e=t.length/2-1,n=t[Math.floor(e)],i=t[Math.ceil(e+.01)],r=function(l){var u=l.length/2-1,p=l[Math.floor(u)],h=l[Math.ceil(u+.01)];return{x:p.x+(h.x-p.x)/2,y:p.y+(h.y-p.y)/2}}(t),o=Math.atan((i.y-n.y)/(i.x-n.x)),a=r.x,c=r.y;return Math.abs(o)<Math.PI/2?c-=15:a+=15,{x:a,y:c}}function Cs(t){return t.waypoints?ow(t.waypoints):A(t,"bpmn:Group")?{x:t.x+t.width/2,y:t.y+Go.height/2}:{x:t.x+t.width/2,y:t.y+t.height+Go.height/2}}function xe(t){return t&&!!t.labelTarget}function Ts(t,e){return $({id:t.id,type:t.$type,businessObject:t},e)}function aw(t,e,n){var i=t.di.waypoint;return!i||i.length<2?[gt(e),gt(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function bf(t,e,n,i){return new Error(t("element {element} referenced by {referenced}#{property} not yet drawn",{element:be(n),referenced:be(e),property:i}))}function qn(t,e,n,i,r,o){this._eventBus=t,this._canvas=e,this._elementFactory=n,this._elementRegistry=i,this._translate=r,this._textRenderer=o}qn.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"],qn.prototype.add=function(t,e){var n,i,r,o,a,c,l,u=t.di,p=this._translate;if(A(u,"bpmndi:BPMNPlane"))n=this._elementFactory.createRoot(Ts(t)),this._canvas.setRootElement(n);else if(A(u,"bpmndi:BPMNShape")){var h=!It(t),v=function(w){return A(w,"bpmn:Group")}(t);i=e&&(e.hidden||e.collapsed);var f=t.di.bounds;n=this._elementFactory.createShape(Ts(t,{collapsed:h,hidden:i,x:Math.round(f.x),y:Math.round(f.y),width:Math.round(f.width),height:Math.round(f.height),isFrame:v})),A(t,"bpmn:BoundaryEvent")&&this._attachBoundary(t,n),A(t,"bpmn:Lane")&&(r=0),A(t,"bpmn:DataStoreReference")&&(o=e,a=gt(f),c=a.x,l=a.y,c>=o.x&&c<=o.x+o.width&&l>=o.y&&l<=o.y+o.height||(e=this._canvas.getRootElement())),this._canvas.addShape(n,e,r)}else{if(!A(u,"bpmndi:BPMNEdge"))throw new Error(p("unknown di {di} for element {semantic}",{di:be(u),semantic:be(t)}));var y=this._getSource(t),b=this._getTarget(t);i=e&&(e.hidden||e.collapsed),n=this._elementFactory.createConnection(Ts(t,{hidden:i,source:y,target:b,waypoints:aw(t,y,b)})),A(t,"bpmn:DataAssociation")&&(e=null),A(t,"bpmn:SequenceFlow")&&(r=0),this._canvas.addConnection(n,e,r)}return Kr(t)&&vn(n)&&this.addLabel(t,n),this._eventBus.fire("bpmnElement.added",{element:n}),n},qn.prototype._attachBoundary=function(t,e){var n=this._translate,i=t.attachedToRef;if(!i)throw new Error(n("missing {semantic}#attachedToRef",{semantic:be(t)}));var r=this._elementRegistry.get(i.id),o=r&&r.attachers;if(!r)throw bf(n,t,i,"attachedToRef");e.host=r,o||(r.attachers=o=[]),o.indexOf(e)===-1&&o.push(e)},qn.prototype.addLabel=function(t,e){var n,i,r;return n=function(o,a){var c,l,u,p=o.di.label;return p&&p.bounds?(u=p.bounds,l={width:Math.max(Go.width,u.width),height:u.height},c={x:u.x+u.width/2,y:u.y+u.height/2}):(c=Cs(a),l=Go),$({x:c.x-l.width/2,y:c.y-l.height/2},l)}(t,e),(i=vn(e))&&(n=this._textRenderer.getExternalLabelBounds(n,i)),r=this._elementFactory.createLabel(Ts(t,{id:t.id+"_label",labelTarget:e,type:"label",hidden:e.hidden||!vn(e),x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)})),this._canvas.addShape(r,e.parent)},qn.prototype._getEnd=function(t,e){var n,i,r=t.$type,o=this._translate;if(i=t[e+"Ref"],e==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(e==="source"&&r==="bpmn:DataOutputAssociation"||e==="target"&&r==="bpmn:DataInputAssociation")&&(i=t.$parent),n=i&&this._getElement(i))return n;throw i?bf(o,t,i,e+"Ref"):new Error(o("{semantic}#{side} Ref not specified",{semantic:be(t),side:e}))},qn.prototype._getSource=function(t){return this._getEnd(t,"source")},qn.prototype._getTarget=function(t){return this._getEnd(t,"target")},qn.prototype._getElement=function(t){return this._elementRegistry.get(t.id)};const sw={__depends__:[rw,{__depends__:[_s],bpmnImporter:["type",qn]}]};function xf(t){t&&typeof t.stopPropagation=="function"&&t.stopPropagation()}function Yr(t){return t.originalEvent||t.srcEvent}function Iu(t,e){xf(t),xf(Yr(t))}function Ci(t){return t.pointers&&t.pointers.length&&(t=t.pointers[0]),t.touches&&t.touches.length&&(t=t.touches[0]),t?{x:t.clientX,y:t.clientY}:null}function Ef(t,e){return(Yr(t)||t).button===e}function Ti(t){return Ef(t,0)}function Jr(t){var e=Yr(t)||t;return!!Ti(t)&&(/mac/i.test(navigator.platform)?e.metaKey:e.ctrlKey)}function wf(t){var e=Yr(t)||t;return Ti(t)&&e.shiftKey}function cw(t){return!0}function As(t){return Ti(t)||function(e){return Ef(e,1)}(t)}function _f(t,e,n){var i=this;function r(g,_,E){var S,D;(function(s,d){var m=l[s]||Ti;return!m(d)})(g,_)||(E?D=e.getGraphics(E):(S=_.delegateTarget||_.target)&&(D=S,E=e.get(D)),D&&E&&t.fire(g,{element:E,gfx:D,originalEvent:_})===!1&&(_.stopPropagation(),_.preventDefault()))}var o={};function a(g){return o[g]}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},l={"element.contextmenu":cw,"element.mousedown":As,"element.mouseup":As,"element.click":As,"element.dblclick":As};function u(g,_,E,S){var D=o[E]=function(s){r(E,s)};S&&(l[E]=S),D.$delegate=Ue.bind(g,"svg, .djs-element",_,D)}function p(g,_,E){var S=a(E);S&&Ue.unbind(g,_,S.$delegate)}t.on("canvas.destroy",function(g){(function(_){F(c,function(E,S){p(_,S,E)})})(g.svg)}),t.on("canvas.init",function(g){(function(_){F(c,function(E,S){u(_,S,E)})})(g.svg)}),t.on(["shape.added","connection.added"],function(g){var _=g.element,E=g.gfx;t.fire("interactionEvents.createHit",{element:_,gfx:E})}),t.on(["shape.changed","connection.changed"],500,function(g){var _=g.element,E=g.gfx;t.fire("interactionEvents.updateHit",{element:_,gfx:E})}),t.on("interactionEvents.createHit",500,function(g){var _=g.element,E=g.gfx;i.createDefaultHit(_,E)}),t.on("interactionEvents.updateHit",function(g){var _=g.element,E=g.gfx;i.updateDefaultHit(_,E)});var h=y("djs-hit djs-hit-stroke"),v=y("djs-hit djs-hit-click-stroke"),f={all:y("djs-hit djs-hit-all"),"click-stroke":v,stroke:h};function y(g,_){return _=$({stroke:"white",strokeWidth:15},_||{}),n.cls(g,["no-fill","no-border"],_)}function b(g,_){var E=f[_];if(!E)throw new Error("invalid hit type <"+_+">");return W(g,E),g}function w(g,_){pt(g,_)}this.removeHits=function(g){F(Jl(".djs-hit",g),Zt)},this.createDefaultHit=function(g,_){var E,S=g.waypoints,D=g.isFrame;return S?this.createWaypointsHit(_,S):(E=D?"stroke":"all",this.createBoxHit(_,E,{width:g.width,height:g.height}))},this.createWaypointsHit=function(g,_){var E=au(_);return b(E,"stroke"),w(g,E),E},this.createBoxHit=function(g,_,E){E=$({x:0,y:0},E);var S=st("rect");return b(S,_),W(S,E),w(g,S),S},this.updateDefaultHit=function(g,_){var E=qt(".djs-hit",_);if(E)return g.waypoints?function(S,D){W(S,{points:cm(D)})}(E,g.waypoints):W(E,{width:g.width,height:g.height}),E},this.fire=r,this.triggerMouseEvent=function(g,_,E){var S=c[g];if(!S)throw new Error("unmapped DOM event name <"+g+">");return r(S,_,E)},this.mouseHandler=a,this.registerEvent=u,this.unregisterEvent=p}_f.$inject=["eventBus","elementRegistry","styles"];const ks={__init__:["interactionEvents"],interactionEvents:["type",_f]};function Ps(t,e,n){this.offset=6;var i=e.cls("djs-outline",["no-fill"]),r=this;function o(a,c){var l=st("rect");return W(l,$({x:10,y:10,width:100,height:100},i)),pt(a,l),l}t.on(["shape.added","shape.changed"],500,function(a){var c=a.element,l=a.gfx,u=qt(".djs-outline",l);u||(u=o(l)),r.updateShapeOutline(u,c)}),t.on(["connection.added","connection.changed"],function(a){var c=a.element,l=a.gfx,u=qt(".djs-outline",l);u||(u=o(l)),r.updateConnectionOutline(u,c)})}Ps.prototype.updateShapeOutline=function(t,e){W(t,{x:-this.offset,y:-this.offset,width:e.width+2*this.offset,height:e.height+2*this.offset})},Ps.prototype.updateConnectionOutline=function(t,e){var n=ve(e);W(t,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},Ps.$inject=["eventBus","styles","elementRegistry"];const Sf={__init__:["outline"],outline:["type",Ps]};function Zr(t,e){this._eventBus=t,this._canvas=e,this._selectedElements=[];var n=this;t.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),t.on(["diagram.clear","plane.set"],function(i){n.select(null)})}Zr.$inject=["eventBus","canvas"],Zr.prototype.deselect=function(t){var e=this._selectedElements,n=e.indexOf(t);if(n!==-1){var i=e.slice();e.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:e})}},Zr.prototype.get=function(){return this._selectedElements},Zr.prototype.isSelected=function(t){return this._selectedElements.indexOf(t)!==-1},Zr.prototype.select=function(t,e){var n=this._selectedElements,i=n.slice();_t(t)||(t=t?[t]:[]);var r=this._canvas;t=t.filter(function(o){return r.findPlane(o)===r.getActivePlane()}),e?F(t,function(o){n.indexOf(o)===-1&&n.push(o)}):this._selectedElements=n=t.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var Cf="hover",Tf="selected";function Af(t,e,n,i){function r(a,c){e.addMarker(a,c)}function o(a,c){e.removeMarker(a,c)}this._multiSelectionBox=null,t.on("element.hover",function(a){r(a.element,Cf)}),t.on("element.out",function(a){o(a.element,Cf)}),t.on("selection.changed",function(a){var c=a.oldSelection,l=a.newSelection;F(c,function(u){l.indexOf(u)===-1&&o(u,Tf)}),F(l,function(u){c.indexOf(u)===-1&&r(u,Tf)})})}function kf(t,e,n,i){t.on("create.end",500,function(r){var o=r.context,a=o.canExecute,c=o.elements,l=(o.hints||{}).autoSelect;if(a){if(l===!1)return;_t(l)?e.select(l):e.select(c.filter(lw))}}),t.on("connect.end",500,function(r){var o=r.context,a=o.canExecute,c=o.hover;a&&c&&e.select(c)}),t.on("shape.move.end",500,function(r){var o=r.previousSelection||[],a=i.get(r.context.shape.id);jt(o,function(c){return a.id===c.id})||e.select(a)}),t.on("element.click",function(r){if(Ti(r)){var o=r.element;o===n.getRootElement()&&(o=null);var a=e.isSelected(o),c=e.get().length>1,l=Jr(r)||wf(r);if(a&&c)return l?e.deselect(o):e.select(o);a?e.deselect(o):e.select(o,l)}})}function lw(t){return!t.hidden}Af.$inject=["eventBus","canvas","selection","styles"],kf.$inject=["eventBus","selection","canvas","elementRegistry"];const In={__init__:["selectionVisuals","selectionBehavior"],__depends__:[ks,Sf],selection:["type",Zr],selectionVisuals:["type",Af],selectionBehavior:["type",kf]};function Du(t){this._counter=0,this._prefix=(t?t+"-":"")+Math.floor(1e9*Math.random())+"-"}Du.prototype.next=function(){return this._prefix+ ++this._counter};var uw=new Du("ov");function de(t,e,n,i){var r,o;this._eventBus=e,this._canvas=n,this._elementRegistry=i,this._ids=uw,this._overlayDefaults=$({show:null,scale:!0},t&&t.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(r=n.getContainer(),o=Ft('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />'),r.insertBefore(o,r.firstChild),o),this._init()}function Pf(t,e,n){$(t.style,{left:e+"px",top:n+"px"})}function Uo(t,e){t.style.display=e===!1?"none":""}function Mf(t,e){t.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){t.style[n+"transform"]=e})}de.$inject=["config.overlays","eventBus","canvas","elementRegistry"],de.prototype.get=function(t){if(Rr(t)&&(t={id:t}),Rr(t.element)&&(t.element=this._elementRegistry.get(t.element)),t.element){var e=this._getOverlayContainer(t.element,!0);return e?t.type?Et(e.overlays,hn({type:t.type})):e.overlays.slice():[]}return t.type?Et(this._overlays,hn({type:t.type})):t.id?this._overlays[t.id]:null},de.prototype.add=function(t,e,n){if(Se(e)&&(n=e,e=null),t.id||(t=this._elementRegistry.get(t)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!t)throw new Error("invalid element specified");var i=this._ids.next();return n=$({},this._overlayDefaults,n,{id:i,type:e,element:t,html:n.html}),this._addOverlay(n),i},de.prototype.remove=function(t){var e=this.get(t)||[];_t(e)||(e=[e]);var n=this;F(e,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(Pn(i.html),Pn(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var o=r.overlays.indexOf(i);o!==-1&&r.overlays.splice(o,1)}})},de.prototype.show=function(){Uo(this._overlayRoot)},de.prototype.hide=function(){Uo(this._overlayRoot,!1)},de.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Qa(this._overlayRoot)},de.prototype._updateOverlayContainer=function(t){var e=t.element,n=t.html,i=e.x,r=e.y;if(e.waypoints){var o=ve(e);i=o.x,r=o.y}Pf(n,i,r),Ge(t.html,"data-container-id",e.id)},de.prototype._updateOverlay=function(t){var e,n,i=t.position,r=t.htmlContainer,o=t.element,a=i.left,c=i.top;i.right!==void 0&&(e=o.waypoints?ve(o).width:o.width,a=-1*i.right+e),i.bottom!==void 0&&(n=o.waypoints?ve(o).height:o.height,c=-1*i.bottom+n),Pf(r,a||0,c||0)},de.prototype._createOverlayContainer=function(t){var e=Ft('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(e);var n={html:e,element:t,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},de.prototype._updateRoot=function(t){var e=t.scale||1,n="matrix("+[e,0,0,e,-1*t.x*e,-1*t.y*e].join(",")+")";Mf(this._overlayRoot,n)},de.prototype._getOverlayContainer=function(t,e){var n=jt(this._overlayContainers,function(i){return i.element===t});return n||e?n:this._createOverlayContainer(t)},de.prototype._addOverlay=function(t){var e,n,i=t.id,r=t.element,o=t.html;o.get&&o.constructor.prototype.jquery&&(o=o.get(0)),Rr(o)&&(o=Ft(o)),n=this._getOverlayContainer(r),(e=Ft('<div class="djs-overlay" data-overlay-id="'+i+'" style="position: absolute">')).appendChild(o),t.type&&re(e).add("djs-overlay-"+t.type);var a=this._canvas.findPlane(r),c=this._canvas.getActivePlane();t.plane=a,a!==c&&Uo(e,!1),t.htmlContainer=e,n.overlays.push(t),n.html.appendChild(e),this._overlays[i]=t,this._updateOverlay(t),this._updateOverlayVisibilty(t,this._canvas.viewbox())},de.prototype._updateOverlayVisibilty=function(t,e){var n=t.show,i=t.plane,r=n&&n.minZoom,o=n&&n.maxZoom,a=t.htmlContainer,c=!0;(i!==this._canvas.getActivePlane()||n&&(kn(r)&&r>e.scale||kn(o)&&o<e.scale))&&(c=!1),Uo(a,c),this._updateOverlayScale(t,e)},de.prototype._updateOverlayScale=function(t,e){var n,i,r,o=t.scale,a=t.htmlContainer,c="";o!==!0&&(o===!1?(n=1,i=1):(n=o.min,i=o.max),kn(n)&&e.scale<n&&(r=(1/e.scale||1)*n),kn(i)&&e.scale>i&&(r=(1/e.scale||1)*i)),kn(r)&&(c="scale("+r+","+r+")"),Mf(a,c)},de.prototype._updateOverlaysVisibilty=function(t){var e=this;F(this._overlays,function(n){e._updateOverlayVisibilty(n,t)})},de.prototype._init=function(){var t=this._eventBus,e=this;t.on("canvas.viewbox.changing",function(n){e.hide()}),t.on("canvas.viewbox.changed",function(n){var i;i=n.viewbox,e._updateRoot(i),e._updateOverlaysVisibilty(i),e.show()}),t.on(["shape.remove","connection.remove"],function(n){var i=n.element;F(e.get({element:i}),function(a){e.remove(a.id)});var r=e._getOverlayContainer(i);if(r){Pn(r.html);var o=e._overlayContainers.indexOf(r);o!==-1&&e._overlayContainers.splice(o,1)}}),t.on("element.changed",500,function(n){var i=n.element,r=e._getOverlayContainer(i,!0);r&&(F(r.overlays,function(o){e._updateOverlay(o)}),e._updateOverlayContainer(r))}),t.on("element.marker.update",function(n){var i=e._getOverlayContainer(n.element,!0);i&&re(i.html)[n.add?"add":"remove"](n.marker)}),t.on("plane.set",function(n){F(e._overlays,function(i){Uo(i.htmlContainer,i.plane===n.plane)})}),t.on("diagram.clear",this.clear,this)};const Bu={__init__:["overlays"],overlays:["type",de]};function Wn(t){Ut.call(this,t)}at(Wn,Ut),Wn.prototype._modules=[sw,_s,In,Bu],Wn.prototype._moddleExtensions={};var pw=["c","C",67],dw=["v","V",86],hw=["y","Y",89],Rf=["z","Z",90];function We(t){return!t.altKey&&(t.ctrlKey||t.metaKey)}function yn(t,e){return(t=_t(t)?t:[t]).indexOf(e.key)!==-1||t.indexOf(e.keyCode)!==-1}function Ou(t){return t.shiftKey}var Ms="keyboard.keydown",Nf="input-handle-modified-keys";function he(t,e){var n=this;this._config=t||{},this._eventBus=e,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),e.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),e.on("diagram.init",function(){n._fire("init")}),e.on("attach",function(){t&&t.bindTo&&n.bind(t.bindTo)}),e.on("detach",function(){n.unbind()})}he.$inject=["config.keyboard","eventBus"],he.prototype._keydownHandler=function(t){this._keyHandler(t,Ms)},he.prototype._keyupHandler=function(t){this._keyHandler(t,"keyboard.keyup")},he.prototype._keyHandler=function(t,e){if(!this._isEventIgnored(t)){var n={keyEvent:t};this._eventBus.fire(e||Ms,n)&&t.preventDefault()}},he.prototype._isEventIgnored=function(t){return(e=t.target)&&(ts(e,"input, textarea")||e.contentEditable==="true")&&this._isModifiedKeyIgnored(t);var e},he.prototype._isModifiedKeyIgnored=function(t){return!We(t)||!this._getAllowedModifiers(t.target).includes(t.key)},he.prototype._getAllowedModifiers=function(t){var e=Xi(t,"["+Nf+"]",!0);return!e||this._node&&!this._node.contains(e)?[]:e.getAttribute(Nf).split(",")},he.prototype.bind=function(t){this.unbind(),this._node=t,lt.bind(t,"keydown",this._keydownHandler,!0),lt.bind(t,"keyup",this._keyupHandler,!0),this._fire("bind")},he.prototype.getBinding=function(){return this._node},he.prototype.unbind=function(){var t=this._node;t&&(this._fire("unbind"),lt.unbind(t,"keydown",this._keydownHandler,!0),lt.unbind(t,"keyup",this._keyupHandler,!0)),this._node=null},he.prototype._fire=function(t){this._eventBus.fire("keyboard."+t,{node:this._node})},he.prototype.addListener=function(t,e,n){Ce(t)&&(n=e,e=t,t=1e3),this._eventBus.on(n||Ms,t,e)},he.prototype.removeListener=function(t,e){this._eventBus.off(e||Ms,t)},he.prototype.hasModifier=function(t){return t.ctrlKey||t.metaKey||t.shiftKey||t.altKey},he.prototype.isCmd=We,he.prototype.isShift=Ou,he.prototype.isKey=yn;function Qr(t,e){var n=this;t.on("editorActions.init",500,function(i){var r=i.editorActions;n.registerBindings(e,r)})}Qr.$inject=["eventBus","keyboard"],Qr.prototype.registerBindings=function(t,e){function n(i,r){e.isRegistered(i)&&t.addListener(r)}n("undo",function(i){if(function(r){return We(r)&&!Ou(r)&&yn(Rf,r)}(i.keyEvent))return e.trigger("undo"),!0}),n("redo",function(i){if(function(r){return We(r)&&(yn(hw,r)||yn(Rf,r)&&Ou(r))}(i.keyEvent))return e.trigger("redo"),!0}),n("copy",function(i){if(function(r){return We(r)&&yn(pw,r)}(i.keyEvent))return e.trigger("copy"),!0}),n("paste",function(i){if(function(r){return We(r)&&yn(dw,r)}(i.keyEvent))return e.trigger("paste"),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(yn(["+","Add","="],r)&&We(r))return e.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(yn(["-","Subtract"],r)&&We(r))return e.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(i){var r=i.keyEvent;if(yn("0",r)&&We(r))return e.trigger("zoom",{value:1}),!0}),n("removeSelection",function(i){if(yn(["Backspace","Delete","Del"],i.keyEvent))return e.trigger("removeSelection"),!0})};const ju={__init__:["keyboard","keyboardBindings"],keyboard:["type",he],keyboardBindings:["type",Qr]};var mw={moveSpeed:50,moveSpeedAccelerated:200};function If(t,e,n){var i=this;this._config=$({},mw,t||{}),e.addListener(function(r){var o=r.keyEvent,a=i._config;if(e.isCmd(o)&&e.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],o)){var c,l=e.isShift(o)?a.moveSpeedAccelerated:a.moveSpeed;switch(o.key){case"ArrowLeft":case"Left":c="left";break;case"ArrowUp":case"Up":c="up";break;case"ArrowRight":case"Right":c="right";break;case"ArrowDown":case"Down":c="down"}return i.moveCanvas({speed:l,direction:c}),!0}}),this.moveCanvas=function(r){var o=0,a=0,c=r.speed/Math.min(Math.sqrt(n.viewbox().scale),1);switch(r.direction){case"left":o=c;break;case"up":a=c;break;case"right":o=-c;break;case"down":a=-c}n.scroll({dx:o,dy:a})}}If.$inject=["config.keyboardMove","keyboard","canvas"];const Df={__depends__:[ju],__init__:["keyboardMove"],keyboardMove:["type",If]};var fw=/^djs-cursor-.*$/;function Rs(t){var e=re(document.body);e.removeMatching(fw),t&&e.add("djs-cursor-"+t)}function Bf(){Rs(null)}function Of(t,e){function n(){return!1}return e=e||"element.click",t.once(e,5e3,n),function(){t.off(e,n)}}function Ho(t){return{x:t.x+t.width/2,y:t.y+t.height/2}}function Dn(t,e){return{x:t.x-e.x,y:t.y-e.y}}function jf(t,e){var n;function i(o){var a,c=n.start,l=n.button,u=Ci(o),p=Dn(u,c);!n.dragging&&(a=p,Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))>15)&&(n.dragging=!0,l===0&&Of(t),Rs("grab")),n.dragging&&(p=Dn(u,n.last||n.start),e.scroll({dx:p.x,dy:p.y}),n.last=u),o.preventDefault()}function r(o){lt.unbind(document,"mousemove",i),lt.unbind(document,"mouseup",r),n=null,Bf()}t.on("element.mousedown",500,function(o){return function(a){if(!Xi(a.target,".djs-draggable")){var c=a.button;if(!(c>=2||a.ctrlKey||a.shiftKey||a.altKey))return n={button:c,start:Ci(a)},lt.bind(document,"mousemove",i),lt.bind(document,"mouseup",r),!0}}(o.originalEvent)}),this.isActive=function(){return!!n}}jf.$inject=["eventBus","canvas"];const Lf={__init__:["moveCanvas"],moveCanvas:["type",jf]};function Lu(t){return Math.log(t)/Math.log(10)}function Vf(t,e){var n=Lu(t.min),i=Lu(t.max);return(Math.abs(n)+Math.abs(i))/e}var vw=Math.sign||function(t){return t>=0?1:-1},Vu={min:.2,max:4};function Bn(t,e,n){t=t||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=Po(this._handleWheel,this),this._totalDelta=0,this._scale=t.scale||.75;var i=this;e.on("canvas.init",function(r){i._init(t.enabled!==!1)})}Bn.$inject=["config.zoomScroll","eventBus","canvas"],Bn.prototype.scroll=function(t){this._canvas.scroll(t)},Bn.prototype.reset=function(){this._canvas.zoom("fit-viewport")},Bn.prototype.zoom=function(t,e){var n=Vf(Vu,20);this._totalDelta+=t,Math.abs(this._totalDelta)>.1&&(this._zoom(t,e,n),this._totalDelta=0)},Bn.prototype._handleWheel=function(t){if(!Xi(t.target,".djs-scrollable",!0)){var e=this._container;t.preventDefault();var n,i=t.ctrlKey,r=t.shiftKey,o=-1*this._scale;if(o*=i?t.deltaMode===0?.02:.32:t.deltaMode===0?1:16,i){var a=e.getBoundingClientRect(),c={x:t.clientX-a.left,y:t.clientY-a.top};n=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*vw(t.deltaY)*o,this.zoom(n,c)}else n=r?{dx:o*t.deltaY,dy:0}:{dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(n)}},Bn.prototype.stepZoom=function(t,e){var n=Vf(Vu,10);this._zoom(t,e,n)},Bn.prototype._zoom=function(t,e,n){var i=this._canvas,r=t>0?1:-1,o=Lu(i.zoom()),a=Math.round(o/n)*n;a+=n*r;var c,l,u=Math.pow(10,a);i.zoom((c=Vu,l=u,Math.max(c.min,Math.min(c.max,l))),e)},Bn.prototype.toggle=function(t){var e=this._container,n=this._handleWheel,i=this._enabled;return t===void 0&&(t=!i),i!==t&&lt[t?"bind":"unbind"](e,"wheel",n,!1),this._enabled=t,t},Bn.prototype._init=function(t){this.toggle(t)};const Ff={__init__:["zoomScroll"],zoomScroll:["type",Bn]};function qo(t){Wn.call(this,t)}at(qo,Wn),qo.prototype._navigationModules=[Df,Lf,Ff],qo.prototype._modules=[].concat(Wn.prototype._modules,qo.prototype._navigationModules);var zf={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,i,r){var o,a=["","webkit","Moz","MS","ms","o"],c=n.createElement("div"),l=Math.round,u=Math.abs,p=Date.now;function h(k,O,z){return setTimeout(_(k,z),O)}function v(k,O,z){return!!Array.isArray(k)&&(f(k,z[O],z),!0)}function f(k,O,z){var U;if(k)if(k.forEach)k.forEach(O,z);else if(k.length!==r)for(U=0;U<k.length;)O.call(z,k[U],U,k),U++;else for(U in k)k.hasOwnProperty(U)&&O.call(z,k[U],U,k)}function y(k,O,z){var U="DEPRECATED METHOD: "+O+`
`+z+` AT 
`;return function(){var X=new Error("get-stack-trace"),xt=X&&X.stack?X.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Vt=e.console&&(e.console.warn||e.console.log);return Vt&&Vt.call(e.console,U,xt),k.apply(this,arguments)}}o=typeof Object.assign!="function"?function(k){if(k===r||k===null)throw new TypeError("Cannot convert undefined or null to object");for(var O=Object(k),z=1;z<arguments.length;z++){var U=arguments[z];if(U!==r&&U!==null)for(var X in U)U.hasOwnProperty(X)&&(O[X]=U[X])}return O}:Object.assign;var b=y(function(k,O,z){for(var U=Object.keys(O),X=0;X<U.length;)(!z||z&&k[U[X]]===r)&&(k[U[X]]=O[U[X]]),X++;return k},"extend","Use `assign`."),w=y(function(k,O){return b(k,O,!0)},"merge","Use `assign`.");function g(k,O,z){var U,X=O.prototype;(U=k.prototype=Object.create(X)).constructor=k,U._super=X,z&&o(U,z)}function _(k,O){return function(){return k.apply(O,arguments)}}function E(k,O){return typeof k=="function"?k.apply(O&&O[0]||r,O):k}function S(k,O){return k===r?O:k}function D(k,O,z){f(C(O),function(U){k.addEventListener(U,z,!1)})}function s(k,O,z){f(C(O),function(U){k.removeEventListener(U,z,!1)})}function d(k,O){for(;k;){if(k==O)return!0;k=k.parentNode}return!1}function m(k,O){return k.indexOf(O)>-1}function C(k){return k.trim().split(/\s+/g)}function M(k,O,z){if(k.indexOf&&!z)return k.indexOf(O);for(var U=0;U<k.length;){if(z&&k[U][z]==O||!z&&k[U]===O)return U;U++}return-1}function N(k){return Array.prototype.slice.call(k,0)}function R(k,O,z){for(var U=[],X=[],xt=0;xt<k.length;){var Vt=k[xt][O];M(X,Vt)<0&&U.push(k[xt]),X[xt]=Vt,xt++}return U=U.sort(function(fe,Mt){return fe[O]>Mt[O]})}function j(k,O){for(var z,U,X=O[0].toUpperCase()+O.slice(1),xt=0;xt<a.length;){if((U=(z=a[xt])?z+X:O)in k)return U;xt++}return r}var T=1;function x(k){var O=k.ownerDocument||k;return O.defaultView||O.parentWindow||e}var B="ontouchstart"in e,V=j(e,"PointerEvent")!==r,H=B&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),q="touch",J="mouse",Q=24,it=["x","y"],ot=["clientX","clientY"];function vt(k,O){var z=this;this.manager=k,this.callback=O,this.element=k.element,this.target=k.options.inputTarget,this.domHandler=function(U){E(k.options.enable,[k])&&z.handler(U)},this.init()}function Yt(k,O,z){var U=z.pointers.length,X=z.changedPointers.length,xt=1&O&&U-X==0,Vt=12&O&&U-X==0;z.isFirst=!!xt,z.isFinal=!!Vt,xt&&(k.session={}),z.eventType=O,function(fe,Mt){var _e=fe.session,Xa=Mt.pointers,Ah=Xa.length;_e.firstInput||(_e.firstInput=et(Mt)),Ah>1&&!_e.firstMultiple?_e.firstMultiple=et(Mt):Ah===1&&(_e.firstMultiple=!1);var kh=_e.firstInput,xr=_e.firstMultiple,Ph=xr?xr.center:kh.center,Mh=Mt.center=Z(Xa);Mt.timeStamp=p(),Mt.deltaTime=Mt.timeStamp-kh.timeStamp,Mt.angle=se(Ph,Mh),Mt.distance=yt(Ph,Mh),function(ln,le){var ci=le.center,Ui=ln.offsetDelta||{},Hi=ln.prevDelta||{},qi=ln.prevInput||{};le.eventType!==1&&qi.eventType!==4||(Hi=ln.prevDelta={x:qi.deltaX||0,y:qi.deltaY||0},Ui=ln.offsetDelta={x:ci.x,y:ci.y}),le.deltaX=Hi.x+(ci.x-Ui.x),le.deltaY=Hi.y+(ci.y-Ui.y)}(_e,Mt),Mt.offsetDirection=$t(Mt.deltaX,Mt.deltaY);var Er=Tt(Mt.deltaTime,Mt.deltaX,Mt.deltaY);Mt.overallVelocityX=Er.x,Mt.overallVelocityY=Er.y,Mt.overallVelocity=u(Er.x)>u(Er.y)?Er.x:Er.y,Mt.scale=xr?(Dl=xr.pointers,Bl=Xa,yt(Bl[0],Bl[1],ot)/yt(Dl[0],Dl[1],ot)):1,Mt.rotation=xr?function(ln,le){return se(le[1],le[0],ot)+se(ln[1],ln[0],ot)}(xr.pointers,Xa):0,Mt.maxPointers=_e.prevInput?Mt.pointers.length>_e.prevInput.maxPointers?Mt.pointers.length:_e.prevInput.maxPointers:Mt.pointers.length,function(ln,le){var ci,Ui,Hi,qi,li=ln.lastInterval||le,Rh=le.timeStamp-li.timeStamp;if(le.eventType!=8&&(Rh>25||li.velocity===r)){var Nh=le.deltaX-li.deltaX,Ih=le.deltaY-li.deltaY,wr=Tt(Rh,Nh,Ih);Ui=wr.x,Hi=wr.y,ci=u(wr.x)>u(wr.y)?wr.x:wr.y,qi=$t(Nh,Ih),ln.lastInterval=le}else ci=li.velocity,Ui=li.velocityX,Hi=li.velocityY,qi=li.direction;le.velocity=ci,le.velocityX=Ui,le.velocityY=Hi,le.direction=qi}(_e,Mt);var Dl,Bl,Ol=fe.element;d(Mt.srcEvent.target,Ol)&&(Ol=Mt.srcEvent.target),Mt.target=Ol}(k,z),k.emit("hammer.input",z),k.recognize(z),k.session.prevInput=z}function et(k){for(var O=[],z=0;z<k.pointers.length;)O[z]={clientX:l(k.pointers[z].clientX),clientY:l(k.pointers[z].clientY)},z++;return{timeStamp:p(),pointers:O,center:Z(O),deltaX:k.deltaX,deltaY:k.deltaY}}function Z(k){var O=k.length;if(O===1)return{x:l(k[0].clientX),y:l(k[0].clientY)};for(var z=0,U=0,X=0;X<O;)z+=k[X].clientX,U+=k[X].clientY,X++;return{x:l(z/O),y:l(U/O)}}function Tt(k,O,z){return{x:O/k||0,y:z/k||0}}function $t(k,O){return k===O?1:u(k)>=u(O)?k<0?2:4:O<0?8:16}function yt(k,O,z){z||(z=it);var U=O[z[0]]-k[z[0]],X=O[z[1]]-k[z[1]];return Math.sqrt(U*U+X*X)}function se(k,O,z){z||(z=it);var U=O[z[0]]-k[z[0]],X=O[z[1]]-k[z[1]];return 180*Math.atan2(X,U)/Math.PI}vt.prototype={handler:function(){},init:function(){this.evEl&&D(this.element,this.evEl,this.domHandler),this.evTarget&&D(this.target,this.evTarget,this.domHandler),this.evWin&&D(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&s(this.element,this.evEl,this.domHandler),this.evTarget&&s(this.target,this.evTarget,this.domHandler),this.evWin&&s(x(this.element),this.evWin,this.domHandler)}};var ce={mousedown:1,mousemove:2,mouseup:4},Dt="mousedown",me="mousemove mouseup";function At(){this.evEl=Dt,this.evWin=me,this.pressed=!1,vt.apply(this,arguments)}g(At,vt,{handler:function(k){var O=ce[k.type];1&O&&k.button===0&&(this.pressed=!0),2&O&&k.which!==1&&(O=4),this.pressed&&(4&O&&(this.pressed=!1),this.callback(this.manager,O,{pointers:[k],changedPointers:[k],pointerType:J,srcEvent:k}))}});var ke={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},ht={2:q,3:"pen",4:J,5:"kinect"},Lt="pointerdown",ii="pointermove pointerup pointercancel";function ri(){this.evEl=Lt,this.evWin=ii,vt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(Lt="MSPointerDown",ii="MSPointerMove MSPointerUp MSPointerCancel"),g(ri,vt,{handler:function(k){var O=this.store,z=!1,U=k.type.toLowerCase().replace("ms",""),X=ke[U],xt=ht[k.pointerType]||k.pointerType,Vt=xt==q,fe=M(O,k.pointerId,"pointerId");1&X&&(k.button===0||Vt)?fe<0&&(O.push(k),fe=O.length-1):12&X&&(z=!0),fe<0||(O[fe]=k,this.callback(this.manager,X,{pointers:O,changedPointers:[k],pointerType:xt,srcEvent:k}),z&&O.splice(fe,1))}});var Jt={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function Pe(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,vt.apply(this,arguments)}function Fn(k,O){var z=N(k.touches),U=N(k.changedTouches);return 12&O&&(z=R(z.concat(U),"identifier")),[z,U]}g(Pe,vt,{handler:function(k){var O=Jt[k.type];if(O===1&&(this.started=!0),this.started){var z=Fn.call(this,k,O);12&O&&z[0].length-z[1].length==0&&(this.started=!1),this.callback(this.manager,O,{pointers:z[0],changedPointers:z[1],pointerType:q,srcEvent:k})}}});var oi={touchstart:1,touchmove:2,touchend:4,touchcancel:8},$a="touchstart touchmove touchend touchcancel";function Ga(){this.evTarget=$a,this.targetIds={},vt.apply(this,arguments)}function ax(k,O){var z=N(k.touches),U=this.targetIds;if(3&O&&z.length===1)return U[z[0].identifier]=!0,[z,z];var X,xt,Vt=N(k.changedTouches),fe=[],Mt=this.target;if(xt=z.filter(function(_e){return d(_e.target,Mt)}),O===1)for(X=0;X<xt.length;)U[xt[X].identifier]=!0,X++;for(X=0;X<Vt.length;)U[Vt[X].identifier]&&fe.push(Vt[X]),12&O&&delete U[Vt[X].identifier],X++;return fe.length?[R(xt.concat(fe),"identifier"),fe]:void 0}g(Ga,vt,{handler:function(k){var O=oi[k.type],z=ax.call(this,k,O);z&&this.callback(this.manager,O,{pointers:z[0],changedPointers:z[1],pointerType:q,srcEvent:k})}});function Tl(){vt.apply(this,arguments);var k=_(this.handler,this);this.touch=new Ga(this.manager,k),this.mouse=new At(this.manager,k),this.primaryTouch=null,this.lastTouches=[]}function sx(k,O){1&k?(this.primaryTouch=O.changedPointers[0].identifier,bh.call(this,O)):12&k&&bh.call(this,O)}function bh(k){var O=k.changedPointers[0];if(O.identifier===this.primaryTouch){var z={x:O.clientX,y:O.clientY};this.lastTouches.push(z);var U=this.lastTouches;setTimeout(function(){var X=U.indexOf(z);X>-1&&U.splice(X,1)},2500)}}function cx(k){for(var O=k.srcEvent.clientX,z=k.srcEvent.clientY,U=0;U<this.lastTouches.length;U++){var X=this.lastTouches[U],xt=Math.abs(O-X.x),Vt=Math.abs(z-X.y);if(xt<=25&&Vt<=25)return!0}return!1}g(Tl,vt,{handler:function(k,O,z){var U=z.pointerType==q,X=z.pointerType==J;if(!(X&&z.sourceCapabilities&&z.sourceCapabilities.firesTouchEvents)){if(U)sx.call(this,O,z);else if(X&&cx.call(this,z))return;this.callback(k,O,z)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var xh=j(c.style,"touchAction"),Eh=xh!==r,wh="compute",_h="auto",Al="manipulation",Gi="none",wo="pan-x",_o="pan-y",Ua=function(){if(!Eh)return!1;var k={},O=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(z){k[z]=!O||e.CSS.supports("touch-action",z)}),k}();function kl(k,O){this.manager=k,this.set(O)}kl.prototype={set:function(k){k==wh&&(k=this.compute()),Eh&&this.manager.element.style&&Ua[k]&&(this.manager.element.style[xh]=k),this.actions=k.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var k=[];return f(this.manager.recognizers,function(O){E(O.options.enable,[O])&&(k=k.concat(O.getTouchAction()))}),function(O){if(m(O,Gi))return Gi;var z=m(O,wo),U=m(O,_o);return z&&U?Gi:z||U?z?wo:_o:m(O,Al)?Al:_h}(k.join(" "))},preventDefaults:function(k){var O=k.srcEvent,z=k.offsetDirection;if(this.manager.session.prevented)O.preventDefault();else{var U=this.actions,X=m(U,Gi)&&!Ua[Gi],xt=m(U,_o)&&!Ua[_o],Vt=m(U,wo)&&!Ua[wo];if(X){var fe=k.pointers.length===1,Mt=k.distance<2,_e=k.deltaTime<250;if(fe&&Mt&&_e)return}if(!Vt||!xt)return X||xt&&6&z||Vt&&z&Q?this.preventSrc(O):void 0}},preventSrc:function(k){this.manager.session.prevented=!0,k.preventDefault()}};var ai=32;function zn(k){this.options=o({},this.defaults,k||{}),this.id=T++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Sh(k){return 16&k?"cancel":8&k?"end":4&k?"move":2&k?"start":""}function Ch(k){return k==16?"down":k==8?"up":k==2?"left":k==4?"right":""}function Ha(k,O){var z=O.manager;return z?z.get(k):k}function cn(){zn.apply(this,arguments)}function qa(){cn.apply(this,arguments),this.pX=null,this.pY=null}function Pl(){cn.apply(this,arguments)}function Ml(){zn.apply(this,arguments),this._timer=null,this._input=null}function Rl(){cn.apply(this,arguments)}function Nl(){cn.apply(this,arguments)}function Wa(){zn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function si(k,O){return(O=O||{}).recognizers=S(O.recognizers,si.defaults.preset),new Il(k,O)}zn.prototype={defaults:{},set:function(k){return o(this.options,k),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(k){if(v(k,"recognizeWith",this))return this;var O=this.simultaneous;return O[(k=Ha(k,this)).id]||(O[k.id]=k,k.recognizeWith(this)),this},dropRecognizeWith:function(k){return v(k,"dropRecognizeWith",this)||(k=Ha(k,this),delete this.simultaneous[k.id]),this},requireFailure:function(k){if(v(k,"requireFailure",this))return this;var O=this.requireFail;return M(O,k=Ha(k,this))===-1&&(O.push(k),k.requireFailure(this)),this},dropRequireFailure:function(k){if(v(k,"dropRequireFailure",this))return this;k=Ha(k,this);var O=M(this.requireFail,k);return O>-1&&this.requireFail.splice(O,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(k){return!!this.simultaneous[k.id]},emit:function(k){var O=this,z=this.state;function U(X){O.manager.emit(X,k)}z<8&&U(O.options.event+Sh(z)),U(O.options.event),k.additionalEvent&&U(k.additionalEvent),z>=8&&U(O.options.event+Sh(z))},tryEmit:function(k){if(this.canEmit())return this.emit(k);this.state=ai},canEmit:function(){for(var k=0;k<this.requireFail.length;){if(!(33&this.requireFail[k].state))return!1;k++}return!0},recognize:function(k){var O=o({},k);if(!E(this.options.enable,[this,O]))return this.reset(),void(this.state=ai);56&this.state&&(this.state=1),this.state=this.process(O),30&this.state&&this.tryEmit(O)},process:function(k){},getTouchAction:function(){},reset:function(){}},g(cn,zn,{defaults:{pointers:1},attrTest:function(k){var O=this.options.pointers;return O===0||k.pointers.length===O},process:function(k){var O=this.state,z=k.eventType,U=6&O,X=this.attrTest(k);return U&&(8&z||!X)?16|O:U||X?4&z?8|O:2&O?4|O:2:ai}}),g(qa,cn,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var k=this.options.direction,O=[];return 6&k&&O.push(_o),k&Q&&O.push(wo),O},directionTest:function(k){var O=this.options,z=!0,U=k.distance,X=k.direction,xt=k.deltaX,Vt=k.deltaY;return X&O.direction||(6&O.direction?(X=xt===0?1:xt<0?2:4,z=xt!=this.pX,U=Math.abs(k.deltaX)):(X=Vt===0?1:Vt<0?8:16,z=Vt!=this.pY,U=Math.abs(k.deltaY))),k.direction=X,z&&U>O.threshold&&X&O.direction},attrTest:function(k){return cn.prototype.attrTest.call(this,k)&&(2&this.state||!(2&this.state)&&this.directionTest(k))},emit:function(k){this.pX=k.deltaX,this.pY=k.deltaY;var O=Ch(k.direction);O&&(k.additionalEvent=this.options.event+O),this._super.emit.call(this,k)}}),g(Pl,cn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Gi]},attrTest:function(k){return this._super.attrTest.call(this,k)&&(Math.abs(k.scale-1)>this.options.threshold||2&this.state)},emit:function(k){if(k.scale!==1){var O=k.scale<1?"in":"out";k.additionalEvent=this.options.event+O}this._super.emit.call(this,k)}}),g(Ml,zn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[_h]},process:function(k){var O=this.options,z=k.pointers.length===O.pointers,U=k.distance<O.threshold,X=k.deltaTime>O.time;if(this._input=k,!U||!z||12&k.eventType&&!X)this.reset();else if(1&k.eventType)this.reset(),this._timer=h(function(){this.state=8,this.tryEmit()},O.time,this);else if(4&k.eventType)return 8;return ai},reset:function(){clearTimeout(this._timer)},emit:function(k){this.state===8&&(k&&4&k.eventType?this.manager.emit(this.options.event+"up",k):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),g(Rl,cn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Gi]},attrTest:function(k){return this._super.attrTest.call(this,k)&&(Math.abs(k.rotation)>this.options.threshold||2&this.state)}}),g(Nl,cn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return qa.prototype.getTouchAction.call(this)},attrTest:function(k){var O,z=this.options.direction;return 30&z?O=k.overallVelocity:6&z?O=k.overallVelocityX:z&Q&&(O=k.overallVelocityY),this._super.attrTest.call(this,k)&&z&k.offsetDirection&&k.distance>this.options.threshold&&k.maxPointers==this.options.pointers&&u(O)>this.options.velocity&&4&k.eventType},emit:function(k){var O=Ch(k.offsetDirection);O&&this.manager.emit(this.options.event+O,k),this.manager.emit(this.options.event,k)}}),g(Wa,zn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Al]},process:function(k){var O=this.options,z=k.pointers.length===O.pointers,U=k.distance<O.threshold,X=k.deltaTime<O.time;if(this.reset(),1&k.eventType&&this.count===0)return this.failTimeout();if(U&&X&&z){if(k.eventType!=4)return this.failTimeout();var xt=!this.pTime||k.timeStamp-this.pTime<O.interval,Vt=!this.pCenter||yt(this.pCenter,k.center)<O.posThreshold;if(this.pTime=k.timeStamp,this.pCenter=k.center,Vt&&xt?this.count+=1:this.count=1,this._input=k,this.count%O.taps===0)return this.hasRequireFailures()?(this._timer=h(function(){this.state=8,this.tryEmit()},O.interval,this),2):8}return ai},failTimeout:function(){return this._timer=h(function(){this.state=ai},this.options.interval,this),ai},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),si.VERSION="2.0.7",si.defaults={domEvents:!1,touchAction:wh,enable:!0,inputTarget:null,inputClass:null,preset:[[Rl,{enable:!1}],[Pl,{enable:!1},["rotate"]],[Nl,{direction:6}],[qa,{direction:6},["swipe"]],[Wa],[Wa,{event:"doubletap",taps:2},["tap"]],[Ml]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Il(k,O){var z;this.options=o({},si.defaults,O||{}),this.options.inputTarget=this.options.inputTarget||k,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=k,this.input=new((z=this).options.inputClass||(V?ri:H?Ga:B?Tl:At))(z,Yt),this.touchAction=new kl(this,this.options.touchAction),Th(this,!0),f(this.options.recognizers,function(U){var X=this.add(new U[0](U[1]));U[2]&&X.recognizeWith(U[2]),U[3]&&X.requireFailure(U[3])},this)}function Th(k,O){var z,U=k.element;U.style&&(f(k.options.cssProps,function(X,xt){z=j(U.style,xt),O?(k.oldCssProps[z]=U.style[z],U.style[z]=X):U.style[z]=k.oldCssProps[z]||""}),O||(k.oldCssProps={}))}Il.prototype={set:function(k){return o(this.options,k),k.touchAction&&this.touchAction.update(),k.inputTarget&&(this.input.destroy(),this.input.target=k.inputTarget,this.input.init()),this},stop:function(k){this.session.stopped=k?2:1},recognize:function(k){var O=this.session;if(!O.stopped){var z;this.touchAction.preventDefaults(k);var U=this.recognizers,X=O.curRecognizer;(!X||X&&8&X.state)&&(X=O.curRecognizer=null);for(var xt=0;xt<U.length;)z=U[xt],O.stopped===2||X&&z!=X&&!z.canRecognizeWith(X)?z.reset():z.recognize(k),!X&&14&z.state&&(X=O.curRecognizer=z),xt++}},get:function(k){if(k instanceof zn)return k;for(var O=this.recognizers,z=0;z<O.length;z++)if(O[z].options.event==k)return O[z];return null},add:function(k){if(v(k,"add",this))return this;var O=this.get(k.options.event);return O&&this.remove(O),this.recognizers.push(k),k.manager=this,this.touchAction.update(),k},remove:function(k){if(v(k,"remove",this))return this;if(k=this.get(k)){var O=this.recognizers,z=M(O,k);z!==-1&&(O.splice(z,1),this.touchAction.update())}return this},on:function(k,O){if(k!==r&&O!==r){var z=this.handlers;return f(C(k),function(U){z[U]=z[U]||[],z[U].push(O)}),this}},off:function(k,O){if(k!==r){var z=this.handlers;return f(C(k),function(U){O?z[U]&&z[U].splice(M(z[U],O),1):delete z[U]}),this}},emit:function(k,O){this.options.domEvents&&function(X,xt){var Vt=n.createEvent("Event");Vt.initEvent(X,!0,!0),Vt.gesture=xt,xt.target.dispatchEvent(Vt)}(k,O);var z=this.handlers[k]&&this.handlers[k].slice();if(z&&z.length){O.type=k,O.preventDefault=function(){O.srcEvent.preventDefault()};for(var U=0;U<z.length;)z[U](O),U++}},destroy:function(){this.element&&Th(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(si,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:ai,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:Q,DIRECTION_ALL:30,Manager:Il,Input:vt,TouchAction:kl,TouchInput:Ga,MouseInput:At,PointerEventInput:ri,TouchMouseInput:Tl,SingleTouchInput:Pe,Recognizer:zn,AttrRecognizer:cn,Tap:Wa,Pan:qa,Swipe:Nl,Pinch:Pl,Rotate:Rl,Press:Ml,on:D,off:s,each:f,merge:w,extend:b,assign:o,inherit:g,bindFn:_,prefixed:j}),(e!==void 0?e:typeof self<"u"?self:{}).Hammer=si,t.exports?t.exports=si:e.Hammer=si})(window,document)})(zf);const er=_r(zf.exports);var $f=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function Ns(t,e){return e.get(t,!1)}function Fu(t){t.preventDefault(),typeof t.stopPropagation=="function"?t.stopPropagation():t.srcEvent&&typeof t.srcEvent.stopPropagation=="function"&&t.srcEvent.stopPropagation(),typeof t.stopImmediatePropagation=="function"&&t.stopImmediatePropagation()}function zu(t){function e(l){setTimeout(function(){F($f,function(u){lt.unbind(t,u,Fu,!0)})},500)}lt.bind(t,"touchstart",function(l){F($f,function(u){lt.bind(t,u,Fu,!0)})},!0),lt.bind(t,"touchend",e,!0),lt.bind(t,"touchcancel",e,!0);var n=new er.Manager(t,{inputClass:er.TouchInput,recognizers:[],domEvents:!0}),i=new er.Tap,r=new er.Pan({threshold:10}),o=new er.Press,a=new er.Pinch,c=new er.Tap({event:"doubletap",taps:2});return a.requireFailure(r),a.requireFailure(o),n.add([r,o,a,c,i]),n.reset=function(l){var u=this.recognizers,p=this.session;p.stopped||(n.stop(l),setTimeout(function(){var h,v;for(h=0;v=u[h];h++)v.reset(),v.state=8;p.curRecognizer=null},0))},n.on("hammer.input",function(l){l.srcEvent.defaultPrevented&&n.reset(!0)}),n}function Gf(t,e,n,i,r){var o,a=Ns("dragging",t),c=Ns("move",t),l=Ns("contextPad",t),u=Ns("palette",t);function p(f,y){return function(b){var w=h(b.target),g=w&&i.get(w);return y&&(b.srcEvent.button=y),r.fire(f,b,g)}}function h(f){return Xi(f,"svg, .djs-element",!0)}function v(f){function y(b){var w=h(b.target),g=w&&i.get(w);if(c&&e.getRootElement()!==g)return c.start(b,g,!0);(function(){var _=0,E=0;function S(s){var d=s.deltaX-_,m=s.deltaY-E;e.scroll({dx:d,dy:m}),_=s.deltaX,E=s.deltaY}function D(s){o.off("panmove",S),o.off("panend",D),o.off("pancancel",D)}o.on("panmove",S),o.on("panend",D),o.on("pancancel",D)})()}(o=zu(f)).on("tap",p("element.click")),o.on("doubletap",p("element.dblclick",1)),o.on("panstart",y),o.on("press",y),o.on("pinchstart",function(b){var w=e.zoom(),g=b.center;function _(S){var D=1-(1-S.scale)/1.5,s=Math.max(.2,Math.min(4,D*w));e.zoom(s,g),Fu(S)}function E(S){o.off("pinchmove",_),o.off("pinchend",E),o.off("pinchcancel",E),o.reset(!0)}o.on("pinchmove",_),o.on("pinchend",E),o.on("pinchcancel",E)})}a&&n.on("drag.move",function(f){var y=f.originalEvent;if(y&&!(y instanceof MouseEvent)){var b=Ci(y),w=h(document.elementFromPoint(b.x,b.y)),g=w&&i.get(w);g!==f.hover&&(f.hover&&a.out(f),g&&(a.hover({element:g,gfx:w}),f.hover=g,f.hoverGfx=w))}}),l&&n.on("contextPad.create",function(f){var y=zu(f.pad.html);y.on("panstart",function(b){l.trigger("dragstart",b,!0)}),y.on("press",function(b){l.trigger("dragstart",b,!0)}),y.on("tap",function(b){l.trigger("click",b)})}),u&&n.on("palette.create",function(f){var y=zu(f.container);y.on("panstart",function(b){u.trigger("dragstart",b,!0)}),y.on("press",function(b){u.trigger("dragstart",b,!0)}),y.on("tap",function(b){u.trigger("click",b)})}),n.on("canvas.init",function(f){v(f.svg)})}function $u(t,e){var n=this;e.on("canvas.init",function(i){n.addBBoxMarker(i.svg)})}Gf.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"],$u.$inject=["canvas","eventBus"],$u.prototype.addBBoxMarker=function(t){var e={fill:"none",class:"outer-bound-marker"},n=st("rect");W(n,{x:-1e4,y:1e4,width:10,height:10}),W(n,e),pt(t,n);var i=st("rect");W(i,{x:1e4,y:1e4,width:10,height:10}),W(i,e),pt(t,i)};const yw={__depends__:[{__depends__:[ks],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",Gf],touchFix:["type",$u]}]};function Gu(t){return t&&t[t.length-1]}function Uf(t){return t.y}function Hf(t){return t.x}var gw={left:Hf,center:Hf,right:function(t){return t.x+t.width},top:Uf,middle:Uf,bottom:function(t){return t.y+t.height}};function to(t){this._modeling=t}to.$inject=["modeling"],to.prototype._getOrientationDetails=function(t){var e="x",n="width";return["top","bottom","middle"].indexOf(t)!==-1&&(e="y",n="height"),{axis:e,dimension:n}},to.prototype._isType=function(t,e){return e.indexOf(t)!==-1},to.prototype._alignmentPosition=function(t,e){var n,i,r,o=this._getOrientationDetails(t),a=o.axis,c=o.dimension,l={},u={},p=!1;if(this._isType(t,["left","top"]))l[t]=e[0][a];else if(this._isType(t,["right","bottom"]))r=Gu(e),l[t]=r[a]+r[c];else if(this._isType(t,["center","middle"])){if(F(e,function(h){var v=h[a]+Math.round(h[c]/2);u[v]?u[v].elements.push(h):u[v]={elements:[h],center:v}}),n=dn(u,function(h){return h.elements.length>1&&(p=!0),h.elements.length}),p)return l[t]=Gu(n).center,l;i=e[0],r=Gu(e=dn(e,function(h){return h[a]+h[c]})),l[t]=function(h,v){return Math.round((h[a]+v[a]+v[c])/2)}(i,r)}return l},to.prototype.trigger=function(t,e){var n=this._modeling,i=Et(t,function(a){return!(a.waypoints||a.host||a.labelTarget)});if(!(i.length<2)){var r=dn(i,gw[e]),o=this._alignmentPosition(e,r);n.alignElements(r,o)}};const bw={__init__:["alignElements"],alignElements:["type",to]};function Uu(t,e,n,i){for(var r;r=xw(t,n,e);)n=i(e,n,r);return n}function Hu(t){return function(e,n,i){var r={x:n.x,y:n.y};return["x","y"].forEach(function(o){var a=t[o];if(a){var c=o==="x"?"width":"height",l=a.margin,u=a.minDistance;r[o]=l<0?Math.min(i[o]+l-e[c]/2,n[o]-u+l):Math.max(i[o]+i[c]+l+e[c]/2,n[o]+u+l)}}),r}}function xw(t,e,n){var i={x:e.x-n.width/2,y:e.y-n.height/2,width:n.width,height:n.height},r=function(o){var a=qu(o);return o.host&&(a=a.concat(qu(o.host))),o.attachers&&(a=a.concat(o.attachers.reduce(function(c,l){return c.concat(qu(l))},[]))),a}(t);return jt(r,function(o){return o!==n&&ye(o,i,10)==="intersect"})}function qu(t){return(e=t,e.outgoing.map(function(n){return n.target})).concat(function(n){return n.incoming.map(function(i){return i.source})}(t));var e}function Ew(){return!0}function qf(t,e,n){t.on("autoPlace",100,function(i){var r=i.shape;return function(o,a,c){c||(c={});var l=c.defaultDistance||50,u=gt(o),p=ct(o);return{x:p.right+l+a.width/2,y:u.y}}(i.source,r)}),t.on("autoPlace.end",function(i){n.scrollToElement(i.shape)}),this.append=function(i,r,o){t.fire("autoPlace.start",{source:i,shape:r});var a=t.fire("autoPlace",{source:i,shape:r}),c=e.appendShape(i,r,a,i.parent,o);return t.fire("autoPlace.end",{source:i,shape:c}),c}}function Wf(t,e){t.on("autoPlace.end",500,function(n){e.select(n.shape)})}qf.$inject=["eventBus","modeling","canvas"],Wf.$inject=["eventBus","selection"];const ww={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",qf],autoPlaceSelectionBehavior:["type",Wf]};function kt(t,e){return Wi(e,function(n){return A(t,n)})}function Is(t,e){for(typeof e=="string"&&(e=[e]);t=t.parent;)if(kt(t,e))return t;return null}function Xf(t,e){return A(e,"bpmn:TextAnnotation")?function(n,i){var r=ct(n),o={x:r.right+i.width/2,y:r.top-50-i.height/2};return Uu(n,i,o,Hu({y:{margin:-30,minDistance:20}}))}(t,e):kt(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])?function(n,i){var r=ct(n),o={x:r.right-10+i.width/2,y:r.bottom+40+i.width/2};return Uu(n,i,o,Hu({x:{margin:30,minDistance:30}}))}(t,e):A(e,"bpmn:FlowNode")?function(n,i){var r=ct(n),o=gt(n),a=function(h,v){v||(v={});var f=v.defaultDistance||50,y=v.direction||"e",b=v.filter,w=v.getWeight||function(d){return d.source===h?1:-1},g=v.maxDistance||250,_=v.reference||"start";function E(d,m){return y==="n"?_==="start"?ct(d).top-ct(m).bottom:_==="center"?ct(d).top-gt(m).y:ct(d).top-ct(m).top:y==="w"?_==="start"?ct(d).left-ct(m).right:_==="center"?ct(d).left-gt(m).x:ct(d).left-ct(m).left:y==="s"?_==="start"?ct(m).top-ct(d).bottom:_==="center"?gt(m).y-ct(d).bottom:ct(m).bottom-ct(d).bottom:_==="start"?ct(m).left-ct(d).right:_==="center"?gt(m).x-ct(d).right:ct(m).right-ct(d).right}b||(b=Ew);var S=h.incoming.filter(b).map(function(d){var m=w(d),C=m<0?E(d.source,h):E(h,d.source);return{id:d.source.id,distance:C,weight:m}}),D=h.outgoing.filter(b).map(function(d){var m=w(d),C=m>0?E(h,d.target):E(d.target,h);return{id:d.target.id,distance:C,weight:m}}),s=$e(S.concat(D).reduce(function(d,m){return d[m.id+"__weight_"+m.weight]=m,d},{}),function(d,m){var C=m.distance,M=m.weight;return C<0||C>g||(d[String(C)]||(d[String(C)]=0),d[String(C)]+=1*M,(!d.distance||d[d.distance]<d[String(C)])&&(d.distance=C)),d},{});return s.distance||f}(n,{filter:function(h){return A(h,"bpmn:SequenceFlow")}}),c=30,l=80,u="left";A(n,"bpmn:BoundaryEvent")&&(u=ye(n,n.host,-25)).indexOf("top")!==-1&&(c*=-1);var p={x:r.right+a+i.width/2,y:o.y+_w(u,l)};return Uu(n,i,p,Hu({y:{margin:c,minDistance:l}}))}(t,e):void 0}function _w(t,e){return t.indexOf("top")!=-1?-1*e:t.indexOf("bottom")!=-1?e:0}function Kf(t){t.on("autoPlace",function(e){var n=e.shape;return Xf(e.source,n)})}Kf.$inject=["eventBus"];const Sw={__depends__:[ww],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",Kf]};function nt(t){this._eventBus=t}nt.$inject=["eventBus"],nt.prototype.on=function(t,e,n,i,r,o){if((Ce(e)||mt(e))&&(o=r,r=i,i=n,n=e,e=null),Ce(n)&&(o=r,r=i,i=n,n=1e3),Se(r)&&(o=r,r=!1),!Ce(i))throw new Error("handlerFn must be a function");_t(t)||(t=[t]);var a=this._eventBus;F(t,function(c){var l=["commandStack",c,e].filter(function(u){return u}).join(".");a.on(l,n,r?function(u,p){return function(h){return u.call(p||null,h.context,h.command,h)}}(i,o):i,o)})};function Xn(t,e,n,i){nt.call(this,t),this._elementRegistry=e,this._modeling=n,this._rules=i;var r=this;this.postExecuted(["shape.create"],function(o){var a=o.context,c=a.hints||{},l=a.shape,u=a.parent||a.newParent;c.autoResize!==!1&&r._expand([l],u)}),this.postExecuted(["elements.move"],function(o){var a=o.context,c=Ja(Hl(a.closure.topLevel)),l=a.hints,u=!l||l.autoResize;u!==!1&&F(Ir(c,function(p){return p.parent.id}),function(p,h){_t(u)&&(p=p.filter(function(v){return jt(u,hn({id:v.id}))})),r._expand(p,h)})}),this.postExecuted(["shape.toggleCollapse"],function(o){var a=o.context,c=a.hints,l=a.shape;c&&c.autoResize===!1||l.collapsed||r._expand(l.children||[],l)}),this.postExecuted(["shape.resize"],function(o){var a=o.context,c=a.hints,l=a.shape,u=l.parent;c&&c.autoResize===!1||u&&r._expand([l],u)})}function Ds(t){t.invoke(Xn,this)}function Ai(t){nt.call(this,t),this.init()}function Wo(t){Ai.call(this,t);var e=this;this.addRule("element.autoResize",function(n){return e.canResize(n.elements,n.target)})}function Bs(t,e){Wo.call(this,t),this._modeling=e}F(["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"],function(t){nt.prototype[t]=function(e,n,i,r,o){(Ce(e)||mt(e))&&(o=r,r=i,i=n,n=e,e=null),this.on(e,t,n,i,r,o)}}),Xn.$inject=["eventBus","elementRegistry","modeling","rules"],at(Xn,nt),Xn.prototype._getOptimalBounds=function(t,e){var n=this.getOffset(e),i=this.getPadding(e),r=ct(ve(t)),o=ct(e),a={};return r.top-o.top<i.top&&(a.top=r.top-n.top),r.left-o.left<i.left&&(a.left=r.left-n.left),o.right-r.right<i.right&&(a.right=r.right+n.right),o.bottom-r.bottom<i.bottom&&(a.bottom=r.bottom+n.bottom),du($({},o,a))},Xn.prototype._expand=function(t,e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),this._rules.allowed("element.autoResize",{elements:t,target:e})){var n=this._getOptimalBounds(t,e);if(function(o,a){return o.x!==a.x||o.y!==a.y||o.width!==a.width||o.height!==a.height}(n,e)){var i=function(o,a){var c="";return o=ct(o),a=ct(a),o.top>a.top&&(c=c.concat("n")),o.right<a.right&&(c=c.concat("w")),o.bottom<a.bottom&&(c=c.concat("s")),o.left>a.left&&(c=c.concat("e")),c}(mi(e,["x","y","width","height"]),n);this.resize(e,n,{autoResize:i});var r=e.parent;r&&this._expand([e],r)}}},Xn.prototype.getOffset=function(t){return{top:60,bottom:60,left:100,right:100}},Xn.prototype.getPadding=function(t){return{top:2,bottom:2,left:15,right:15}},Xn.prototype.resize=function(t,e,n){this._modeling.resizeShape(t,e,null,n)},Ds.$inject=["injector"],at(Ds,Xn),Ds.prototype.resize=function(t,e,n){A(t,"bpmn:Participant")?this._modeling.resizeLane(t,e,null,n):this._modeling.resizeShape(t,e,null,n)},Ai.$inject=["eventBus"],at(Ai,nt),Ai.prototype.addRule=function(t,e,n){var i=this;typeof t=="string"&&(t=[t]),t.forEach(function(r){i.canExecute(r,e,function(o,a,c){return n(o)},!0)})},Ai.prototype.init=function(){},Wo.$inject=["eventBus"],at(Wo,Ai),Wo.prototype.canResize=function(t,e){return!1},at(Bs,Wo),Bs.$inject=["eventBus","modeling"],Bs.prototype.canResize=function(t,e){if(!A(e,"bpmn:Participant")&&!A(e,"bpmn:Lane")&&!A(e,"bpmn:SubProcess"))return!1;var n=!0;return F(t,function(i){(A(i,"bpmn:Lane")||i.labelTarget)&&(n=!1)}),n};const Cw={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",Ds],bpmnAutoResizeProvider:["type",Bs]};function Yf(t,e,n){var i,r,o=this,a=n.get("dragging",!1);a&&e.on("drag.start",function(c){e.once("drag.move",1500,function(l){(function(u){if(!u.hover){var p=u.originalEvent,h=o._findTargetGfx(p),v=h&&t.get(h);h&&v&&(u.stopPropagation(),a.hover({element:v,gfx:h}),a.move(p))}})(l)})}),e.on("element.hover",function(c){i=c.gfx,r=c.element}),e.on("element.hover",1500,function(c){r&&e.fire("element.out",{element:r,gfx:i})}),e.on("element.out",function(){i=null,r=null}),this._findTargetGfx=function(c){var l;if(c instanceof MouseEvent)return l=Ci(c),function(u){return Xi(u,"svg, .djs-element",!0)}(document.elementFromPoint(l.x,l.y))}}Yf.$inject=["elementRegistry","eventBus","injector"];const Tw={__init__:["hoverFix"],hoverFix:["type",Yf]};var eo=Math.round,Jf="djs-drag-active";function nr(t){t.preventDefault()}function Zf(t,e,n,i){var r,o={threshold:5,trapClick:!0};function a(g){var _=e.viewbox(),E=e._container.getBoundingClientRect();return{x:_.x+(g.x-E.left)/_.scale,y:_.y+(g.y-E.top)/_.scale}}function c(g,_){_=_||r;var E=t.createEvent($({},_.payload,_.data,{isTouch:_.isTouch}));return t.fire("drag."+g,E)!==!1&&t.fire(_.prefix+"."+g,E)}function l(g,_){var E,S=r.payload,D=r.displacement,s=r.globalStart,d=Ci(g),m=Dn(d,s),C=r.localStart,M=a(d),N=Dn(M,C);if(!r.active&&(_||(E=m,Math.sqrt(Math.pow(E.x,2)+Math.pow(E.y,2))>r.threshold))){if($(S,{x:eo(C.x+D.x),y:eo(C.y+D.y),dx:0,dy:0},{originalEvent:g}),c("start")===!1)return b();r.active=!0,r.keepSelection||(S.previousSelection=n.get(),n.select(null)),r.cursor&&Rs(r.cursor),e.addMarker(e.getRootElement(),Jf)}Iu(g),r.active&&($(S,{x:eo(M.x+D.x),y:eo(M.y+D.y),dx:eo(N.x),dy:eo(N.y)},{originalEvent:g}),c("move"))}function u(g){var _=!0;r.active&&(g&&(r.payload.originalEvent=g,Iu(g)),_=c("end")),_===!1&&c("rejected"),c("ended",w(_!==!0))}function p(g){g.which===27&&(nr(g),b())}function h(g){var _;r.active&&(_=Of(t),setTimeout(_,400),nr(g)),u(g)}function v(g){l(g)}function f(g){var _=r.payload;_.hoverGfx=g.gfx,_.hover=g.element,c("hover")}function y(g){c("out");var _=r.payload;_.hoverGfx=null,_.hover=null}function b(g){var _;if(r){var E=r.active;E&&c("cancel"),_=w(g),E&&c("canceled",_)}}function w(g){var _,E;c("cleanup"),Bf(),E=r.trapClick?h:u,lt.unbind(document,"mousemove",l),lt.unbind(document,"dragstart",nr),lt.unbind(document,"selectstart",nr),lt.unbind(document,"mousedown",E,!0),lt.unbind(document,"mouseup",E,!0),lt.unbind(document,"keyup",p),lt.unbind(document,"touchstart",v,!0),lt.unbind(document,"touchcancel",b,!0),lt.unbind(document,"touchmove",l,!0),lt.unbind(document,"touchend",u,!0),t.off("element.hover",f),t.off("element.out",y),e.removeMarker(e.getRootElement(),Jf);var S=r.payload.previousSelection;return g!==!1&&S&&!n.get().length&&function(D){var s=D.filter(function(d){return i.get(d.id)});s.length&&n.select(s)}(S),_=r,r=null,_}t.on("diagram.destroy",b),this.init=function(g,_,E,S){r&&b(!1),typeof _=="string"&&(S=E,E=_,_=null);var D,s,d,m,C,M=(S=$({},o,S||{})).data||{};m=S.trapClick?h:u,g?(D=Yr(g)||g,s=Ci(g),Iu(g),D.type==="dragstart"&&nr(D)):(D=null,s={x:0,y:0}),d=a(s),_||(_=d),C=function(N){return typeof TouchEvent<"u"&&N instanceof TouchEvent}(D),r=$({prefix:E,data:M,payload:{},globalStart:s,displacement:Dn(_,d),localStart:d,isTouch:C},S),S.manual||(C?(lt.bind(document,"touchstart",v,!0),lt.bind(document,"touchcancel",b,!0),lt.bind(document,"touchmove",l,!0),lt.bind(document,"touchend",u,!0)):(lt.bind(document,"mousemove",l),lt.bind(document,"dragstart",nr),lt.bind(document,"selectstart",nr),lt.bind(document,"mousedown",m,!0),lt.bind(document,"mouseup",m,!0)),lt.bind(document,"keyup",p),t.on("element.hover",f),t.on("element.out",y)),c("init"),S.autoActivate&&l(g,!0)},this.move=l,this.hover=f,this.out=y,this.end=u,this.cancel=b,this.context=function(){return r},this.setOptions=function(g){$(o,g)}}Zf.$inject=["eventBus","canvas","selection","elementRegistry"];const Kn={__depends__:[Tw,In],dragging:["type",Zf]};function no(t,e,n){this._canvas=n,this._opts=$({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},t);var i=this;e.on("drag.move",function(r){var o=i._toBorderPoint(r);i.startScroll(o)}),e.on(["drag.cleanup"],function(){i.stopScroll()})}function Aw(t,e,n){return e<t&&t<n}no.$inject=["config.autoScroll","eventBus","canvas"],no.prototype.startScroll=function(t){var e=this._canvas,n=this._opts,i=this,r=e.getContainer().getBoundingClientRect(),o=[t.x,t.y,r.width-t.x,r.height-t.y];this.stopScroll();for(var a=0,c=0,l=0;l<4;l++)Aw(o[l],n.scrollThresholdOut[l],n.scrollThresholdIn[l])&&(l===0?a=n.scrollStep:l==1?c=n.scrollStep:l==2?a=-n.scrollStep:l==3&&(c=-n.scrollStep));a===0&&c===0||(e.scroll({dx:a,dy:c}),this._scrolling=setTimeout(function(){i.startScroll(t)},n.scrollRepeatTimeout))},no.prototype.stopScroll=function(){clearTimeout(this._scrolling)},no.prototype.setOptions=function(t){this._opts=$({},this._opts,t)},no.prototype._toBorderPoint=function(t){var e=this._canvas._container.getBoundingClientRect(),n=Ci(t.originalEvent);return{x:n.x-e.left,y:n.y-e.top}};const kw={__depends__:[Kn],__init__:["autoScroll"],autoScroll:["type",no]};function Wu(t){this._commandStack=t.get("commandStack",!1)}Wu.$inject=["injector"],Wu.prototype.allowed=function(t,e){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(t,e)),n===void 0||n};const On={__init__:["rules"],rules:["type",Wu]};var Os=Math.round,Pw=Math.max;function Xu(t,e){return function(n,i){var r,o;for(r=0;o=n[r];r++)if(Io(o,i)<=10)return{point:n[r],bendpoint:!0,index:r};return null}(t,e)||function(n,i){var r,o,a=Tm(function(u,p){return[["M",u.x,u.y],["m",0,-p],["a",p,p,0,1,1,0,2*p],["a",p,p,0,1,1,0,-2*p],["z"]]}(i,10),(r=[],n.forEach(function(u,p){r.push([p===0?"M":"L",u.x,u.y])}),r)),c=a[0],l=a[a.length-1];return c?c!==l?c.segment2!==l.segment2?{point:n[o=Pw(c.segment2,l.segment2)-1],bendpoint:!0,index:o}:{point:{x:Os(c.x+l.x)/2,y:Os(c.y+l.y)/2},index:c.segment2}:{point:{x:Os(c.x),y:Os(c.y)},index:c.segment2}:null}(t,e)}var Qf="djs-bendpoint",tv="djs-segment-dragger";function Ku(t,e,n){var i=function(r,o){var a,c=Ci(o),l=r._container.getBoundingClientRect();a={x:l.left,y:l.top};var u=r.viewbox();return{x:u.x+(c.x-a.x)/u.scale,y:u.y+(c.y-a.y)/u.scale}}(t,n);return Xu(e,i)}function Yu(t,e){var n=st("g");St(n).add(Qf),pt(t,n);var i=st("circle");W(i,{cx:0,cy:0,r:4}),St(i).add("djs-visual"),pt(n,i);var r=st("circle");return W(r,{cx:0,cy:0,r:10}),St(r).add("djs-hit"),pt(n,r),e&&St(n).add(e),n}function Mw(t,e,n,i){var r=st("g");pt(t,r);var o=function(l,u,p){var h=u.x-l.x,v=u.y-l.y;return nv(p==="h"?h:v)}(e,n,i),a=st("rect");W(a,{x:-7,y:-1.5,width:14,height:3}),St(a).add("djs-visual"),pt(r,a);var c=st("rect");return W(c,{x:-o/2,y:-7,width:o,height:14}),St(c).add("djs-hit"),pt(r,c),Fm(r,i==="v"?90:0),r}function ev(t,e,n){var i=st("g"),r=lu(e,n),o=Gn(e,n);return pt(t,i),Mw(i,e,n,o),St(i).add(tv),St(i).add(o==="h"?"horizontal":"vertical"),je(i,r.x,r.y),i}function nv(t){return Math.abs(Math.round(2*t/3))}var iv={exports:{}};/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */iv.exports=function(t){if(t.CSS&&t.CSS.escape)return t.CSS.escape;var e=function(n){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var i,r=String(n),o=r.length,a=-1,c="",l=r.charCodeAt(0);++a<o;)(i=r.charCodeAt(a))!=0?c+=i>=1&&i<=31||i==127||a==0&&i>=48&&i<=57||a==1&&i>=48&&i<=57&&l==45?"\\"+i.toString(16)+" ":a==0&&o==1&&i==45||!(i>=128||i==45||i==95||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122)?"\\"+r.charAt(a):r.charAt(a):c+="\uFFFD";return c};return t.CSS||(t.CSS={}),t.CSS.escape=e,e}(Dh);const Ju=_r(iv.exports);var Rw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function rv(t){return(t=""+t)&&t.replace(/[&<>"']/g,function(e){return Rw[e]})}function ov(t,e,n,i,r){function o(y,b){var w,g=b.waypoints,_=Ku(e,g,y);if(_)return w=function(E,S){var D,s,d=E.waypoints;return S.index<=0||S.bendpoint?null:(s=Gn((D={start:d[S.index-1],end:d[S.index]}).start,D.end))?nv(s==="h"?D.end.x-D.start.x:D.end.y-D.start.y)/2:null}(b,_),function(E,S,D){var s,d,m,C,M,N,R=E.index,j=E.point;return!(R<=0||E.bendpoint)&&(m=lu(s=S[R-1],d=S[R]),C=Gn(s,d),M=Math.abs(j.x-m.x),N=Math.abs(j.y-m.y),C&&M<=D&&N<=D)}(_,g,w)?r.start(y,b,_.index):i.start(y,b,_.index,!_.bendpoint),!0}function a(y,b,w){lt.bind(y,b,function(g){n.triggerMouseEvent(b,g,w),g.stopPropagation()})}function c(y,b){var w=e.getLayer("overlays"),g=qt('.djs-bendpoints[data-element-id="'+Ju(y.id)+'"]',w);return!g&&b&&(W(g=st("g"),{"data-element-id":y.id}),St(g).add("djs-bendpoints"),pt(w,g),a(g,"mousedown",y),a(g,"click",y),a(g,"dblclick",y)),g}function l(y,b){return qt('.djs-segment-dragger[data-segment-idx="'+y+'"]',b)}function u(y,b){b.waypoints.forEach(function(w,g){var _=Yu(y);pt(y,_),je(_,w.x,w.y)}),Yu(y,"floating")}function p(y,b){for(var w,g,_,E=b.waypoints,S=1;S<E.length;S++)Gn(w=E[S-1],g=E[S])&&(W(_=ev(y,w,g),{"data-segment-idx":S}),a(_,"mousemove",b))}function h(y){var b=c(y);return b||(u(b=c(y,!0),y),p(b,y)),b}function v(y){var b=c(y);b&&(function(w){F(Jl("."+tv,w),function(g){Zt(g)})}(b),function(w){F(Jl("."+Qf,w),function(g){Zt(g)})}(b),p(b,y),u(b,y))}function f(y,b,w){var g,_,E=l(b.index,y),S=w[b.index-1],D=w[b.index],s=b.point,d=lu(S,D),m=Gn(S,D);E&&(g=function(C){return qt(".djs-visual",C)}(E),_={x:s.x-d.x,y:s.y-d.y},m==="v"&&(_={x:_.y,y:_.x}),je(g,_.x,_.y))}t.on("connection.changed",function(y){v(y.element)}),t.on("connection.remove",function(y){var b=c(y.element);b&&Zt(b)}),t.on("element.marker.update",function(y){var b,w=y.element;w.waypoints&&(b=h(w),y.add?St(b).add(y.marker):St(b).remove(y.marker))}),t.on("element.mousemove",function(y){var b,w,g=y.element,_=g.waypoints;if(_){if(b=c(g,!0),!(w=Ku(e,_,y.originalEvent)))return;(function(E,S){var D=qt(".floating",E),s=S.point;D&&je(D,s.x,s.y)})(b,w),w.bendpoint||f(b,w,_)}}),t.on("element.mousedown",function(y){if(Ti(y)){var b=y.originalEvent,w=y.element;if(w.waypoints)return o(b,w)}}),t.on("selection.changed",function(y){var b=y.newSelection[0];b&&b.waypoints&&h(b)}),t.on("element.hover",function(y){var b=y.element;b.waypoints&&(h(b),n.registerEvent(y.gfx,"mousemove","element.mousemove"))}),t.on("element.out",function(y){n.unregisterEvent(y.gfx,"mousemove","element.mousemove")}),t.on("element.updateId",function(y){var b=y.element,w=y.newId;if(b.waypoints){var g=c(b);g&&W(g,{"data-element-id":w})}}),this.addHandles=h,this.updateHandles=v,this.getBendpointsContainer=c,this.getSegmentDragger=l}ov.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];var av=Math.round,ir="reconnectStart",rr="reconnectEnd",Xo="updateWaypoints";function Zu(t,e,n,i,r,o){this._injector=t,this.start=function(a,c,l,u){var p,h=n.getGraphics(c),v=c.source,f=c.target,y=c.waypoints,b=(p=u||l!==0?u||l!==y.length-1?Xo:rr:ir)===Xo?"connection.updateWaypoints":"connection.reconnect",w=r.allowed(b,{connection:c,source:v,target:f});w===!1&&(w=r.allowed(b,{connection:c,source:f,target:v})),w!==!1&&i.init(a,"bendpoint.move",{data:{connection:c,connectionGfx:h,context:{allowed:w,bendpointIndex:l,connection:c,source:v,target:f,insert:u,type:p}}})},e.on("bendpoint.move.hover",function(a){var c,l=a.context,u=l.connection,p=u.source,h=u.target,v=a.hover,f=l.type;if(l.hover=v,v){var y=f===Xo?"connection.updateWaypoints":"connection.reconnect";if(c=l.allowed=r.allowed(y,{connection:u,source:f===ir?v:p,target:f===rr?v:h}))return l.source=f===ir?v:p,void(l.target=f===rr?v:h);c===!1&&(c=l.allowed=r.allowed(y,{connection:u,source:f===rr?v:h,target:f===ir?v:p})),c&&(l.source=f===rr?v:h,l.target=f===ir?v:p)}}),e.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(a){var c=a.context,l=c.type;c.hover=null,c.source=null,c.target=null,l!==Xo&&(c.allowed=!1)}),e.on("bendpoint.move.end",function(a){var c=a.context,l=c.allowed,u=c.bendpointIndex,p=c.connection,h=c.insert,v=p.waypoints.slice(),f=c.source,y=c.target,b=c.type,w=c.hints||{},g={x:av(a.x),y:av(a.y)};if(!l)return!1;b===Xo?(h?v.splice(u,0,g):v[u]=g,w.bendpointMove={insert:h,bendpointIndex:u},v=this.cropWaypoints(p,v),o.updateWaypoints(p,function(_){_=_.slice();for(var E,S,D,s=0;_[s];)E=_[s],S=_[s-1],Io(E,D=_[s+1])===0||cu(S,D,E)?_.splice(s,1):s++;return _}(v),w)):(b===ir?(w.docking="source",js(c)&&(w.docking="target",w.newWaypoints=v.reverse())):b===rr&&(w.docking="target",js(c)&&(w.docking="source",w.newWaypoints=v.reverse())),o.reconnect(p,f,y,g,w))},this)}function js(t){var e=t.hover,n=t.source,i=t.target,r=t.type;return r===ir?e&&i&&e===i&&n!==i:r===rr?e&&n&&e===n&&n!==i:void 0}Zu.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],Zu.prototype.cropWaypoints=function(t,e){var n=this._injector.get("connectionDocking",!1);if(!n)return e;var i=t.waypoints;return t.waypoints=e,t.waypoints=n.getCroppedWaypoints(t),e=t.waypoints,t.waypoints=i,e};var sv="updateWaypoints",Ko="connect-ok",Ls="connect-not-ok",cv="connect-hover",lv="djs-updating",uv="djs-element-hidden";function pv(t,e,n,i){this._injector=e;var r=e.get("connectionPreview",!1);n.on("bendpoint.move.start",function(o){var a=o.context,c=a.bendpointIndex,l=a.connection,u=a.insert,p=l.waypoints,h=p.slice();a.waypoints=p,u&&h.splice(c,0,{x:o.x,y:o.y}),l.waypoints=h,St(a.draggerGfx=Yu(i.getLayer("overlays"))).add("djs-dragging"),i.addMarker(l,uv),i.addMarker(l,lv)}),n.on("bendpoint.move.hover",function(o){var a=o.context,c=a.allowed,l=a.hover,u=a.type;if(l){if(i.addMarker(l,cv),u===sv)return;c?(i.removeMarker(l,Ls),i.addMarker(l,Ko)):c===!1&&(i.removeMarker(l,Ko),i.addMarker(l,Ls))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],1100,function(o){var a=o.context,c=a.hover,l=a.target;c&&(i.removeMarker(c,cv),i.removeMarker(c,l?Ko:Ls))}),n.on("bendpoint.move.move",function(o){var a=o.context,c=a.allowed,l=a.bendpointIndex,u=a.draggerGfx,p=a.hover,h=a.type,v=a.connection,f=v.source,y=v.target,b=v.waypoints.slice(),w={x:o.x,y:o.y},g=a.hints||{},_={};r&&(g.connectionStart&&(_.connectionStart=g.connectionStart),g.connectionEnd&&(_.connectionEnd=g.connectionEnd),h==="reconnectStart"?js(a)?(_.connectionEnd=_.connectionEnd||w,_.source=y,_.target=p||f,b=b.reverse()):(_.connectionStart=_.connectionStart||w,_.source=p||f,_.target=y):h==="reconnectEnd"?js(a)?(_.connectionStart=_.connectionStart||w,_.source=p||y,_.target=f,b=b.reverse()):(_.connectionEnd=_.connectionEnd||w,_.source=f,_.target=p||y):(_.noCropping=!0,_.noLayout=!0,b[l]=w),h===sv&&(b=t.cropWaypoints(v,b)),_.waypoints=b,r.drawPreview(a,c,_)),je(u,o.x,o.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],1100,function(o){var a=o.context,c=a.connection,l=a.draggerGfx,u=a.hover,p=a.target,h=a.waypoints;c.waypoints=h,Zt(l),i.removeMarker(c,lv),i.removeMarker(c,uv),u&&(i.removeMarker(u,Ko),i.removeMarker(u,p?Ko:Ls)),r&&r.cleanUp(a)})}pv.$inject=["bendpointMove","injector","eventBus","canvas"];var dv="connect-hover",hv="djs-updating";function mv(t,e,n){return Qu(t,e,t[e]+n)}function Qu(t,e,n){return{x:e==="x"?n:t.x,y:e==="y"?n:t.y}}function fv(t){return t==="x"?"y":"x"}function vv(t,e,n){var i,r;return t.original?t.original:(i=gt(e),Qu(t,r=fv(n),i[r]))}function yv(t,e,n,i,r,o){var a=t.get("connectionDocking",!1);function c(p,h){if(!a)return h;var v,f=p.waypoints;return p.waypoints=h,v=a.getCroppedWaypoints(p),p.waypoints=f,v}function l(p){r.update("connection",p.connection,p.connectionGfx)}function u(p,h,v){var f=p.newWaypoints,y=function(b,w,g,_){var E=Math.max(w[_],g[_]),S=Math.min(w[_],g[_]);return Qu(w,_,Math.min(Math.max(S+20,b[_]),E-20))}(v,f[p.segmentStartIndex+h],f[p.segmentEndIndex+h],fv(p.axis));je(p.draggerGfx,y.x,y.y)}this.start=function(p,h,v){var f,y,b,w,g=n.getGraphics(h),_=v-1,E=v,S=h.waypoints,D=S[_],s=S[E],d=Ku(n,S,p);(y=Gn(D,s))&&(b=y==="v"?"x":"y",_===0&&(D=vv(D,h.source,b)),E===S.length-1&&(s=vv(s,h.target,b)),f={connection:h,segmentStartIndex:_,segmentEndIndex:E,segmentStart:D,segmentEnd:s,axis:b,dragPosition:w=d?d.point:{x:(D.x+s.x)/2,y:(D.y+s.y)/2}},i.init(p,w,"connectionSegment.move",{cursor:b==="x"?"resize-ew":"resize-ns",data:{connection:h,connectionGfx:g,context:f}}))},e.on("connectionSegment.move.start",function(p){var h=p.context,v=p.connection,f=n.getLayer("overlays");h.originalWaypoints=v.waypoints.slice(),h.draggerGfx=ev(f,h.segmentStart,h.segmentEnd),St(h.draggerGfx).add("djs-dragging"),n.addMarker(v,hv)}),e.on("connectionSegment.move.move",function(p){var h,v,f=p.context,y=f.connection,b=f.segmentStartIndex,w=f.segmentEndIndex,g=f.segmentStart,_=f.segmentEnd,E=f.axis,S=f.originalWaypoints.slice(),D=mv(g,E,p["d"+E]),s=mv(_,E,p["d"+E]),d=S.length,m=0;S[b]=D,S[w]=s,b<2&&(h=ye(y.source,D),b===1?h==="intersect"&&(S.shift(),S[0]=D,m--):h!=="intersect"&&(S.unshift(g),m++)),w>d-3&&(v=ye(y.target,s),w===d-2?v==="intersect"&&(S.pop(),S[S.length-1]=s):v!=="intersect"&&S.push(_)),f.newWaypoints=y.waypoints=c(y,S),u(f,m,p),f.newSegmentStartIndex=b+m,l(p)}),e.on("connectionSegment.move.hover",function(p){p.context.hover=p.hover,n.addMarker(p.hover,dv)}),e.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(p){var h=p.context.hover;h&&n.removeMarker(h,dv)}),e.on("connectionSegment.move.cleanup",function(p){var h=p.context,v=h.connection;h.draggerGfx&&Zt(h.draggerGfx),n.removeMarker(v,hv)}),e.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(p){var h=p.context;h.connection.waypoints=h.originalWaypoints,l(p)}),e.on("connectionSegment.move.end",function(p){var h=p.context,v=h.connection,f=h.newWaypoints,y=h.newSegmentStartIndex,b=function(E,S){var D=0;return{waypoints:E.filter(function(s,d){return!cu(E[d-1],E[d+1],s)||(D=d<=S?D-1:D,!1)}),segmentOffset:D}}(f=f.map(function(E){return{original:E.original,x:Math.round(E.x),y:Math.round(E.y)}}),y),w=c(v,b.waypoints),g=b.segmentOffset,_={segmentMove:{segmentStartIndex:h.segmentStartIndex,newSegmentStartIndex:y+g}};o.updateWaypoints(v,w,_)})}yv.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var Nw=Math.abs,gv=Math.round;function bv(t){return{x:t.x,y:t.y}}function xv(t){return{x:t.x+t.width,y:t.y+t.height}}function Ze(t,e){return!t||isNaN(t.x)||isNaN(t.y)?e:{x:gv(t.x+t.width/2),y:gv(t.y+t.height/2)}}function io(t,e){var n=t.snapped;return!!n&&(typeof e=="string"?n[e]:n.x&&n.y)}function ae(t,e,n){if(typeof e!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var i,r=t[e],o=t.snapped=t.snapped||{};return n===!1?o[e]=!1:(o[e]=!0,i=n-r,t[e]+=i,t["d"+e]+=i),r}function Ev(t){return t.children||[]}var Iw=Math.abs,wv=Math.round;function _v(t){function e(i,r){if(_t(i)){for(var o=i.length;o--;)if(Iw(i[o]-r)<=10)return i[o]}else{var a=r%(i=+i);if(a<10)return r-a;if(a>i-10)return r-a+i}return r}function n(i){if(i.width)return{x:wv(i.width/2+i.x),y:wv(i.height/2+i.y)}}t.on("connectionSegment.move.move",1500,function(i){var r,o,a=function(h){var v=h.snapPoints,f=h.connection,y=f.waypoints,b=h.segmentStart,w=h.segmentStartIndex,g=h.segmentEnd,_=h.segmentEndIndex,E=h.axis;if(v)return v;var S=[y[w-1],b,g,y[_+1]];return w<2&&S.unshift(n(f.source)),_>y.length-3&&S.unshift(n(f.target)),h.snapPoints=v={horizontal:[],vertical:[]},F(S,function(D){D&&(D=D.original||D,E==="y"&&v.horizontal.push(D.y),E==="x"&&v.vertical.push(D.x))}),v}(i.context),c=i.x,l=i.y;if(a){var u=c-(r=e(a.vertical,c)),p=l-(o=e(a.horizontal,l));$(i,{dx:i.dx-u,dy:i.dy-p,x:r,y:o}),(u||a.vertical.indexOf(c)!==-1)&&ae(i,"x",r),(p||a.horizontal.indexOf(l)!==-1)&&ae(i,"y",o)}}),t.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(i){var r,o,a=i.context,c=function(y){var b=y.snapPoints,w=y.connection.waypoints,g=y.bendpointIndex;if(b)return b;var _=[w[g-1],w[g+1]];return y.snapPoints=b={horizontal:[],vertical:[]},F(_,function(E){E&&(E=E.original||E,b.horizontal.push(E.y),b.vertical.push(E.x))}),b}(a),l=a.hover,u=l&&n(l),p=i.x,h=i.y;if(c){var v=p-(r=e(u?c.vertical.concat([u.x]):c.vertical,p)),f=h-(o=e(u?c.horizontal.concat([u.y]):c.horizontal,h));$(i,{dx:i.dx-v,dy:i.dy-f,x:i.x-v,y:i.y-f}),(v||c.vertical.indexOf(p)!==-1)&&ae(i,"x",r),(f||c.horizontal.indexOf(h)!==-1)&&ae(i,"y",o)}})}_v.$inject=["eventBus"];const Dw={__depends__:[Kn,On],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",ov],bendpointMove:["type",Zu],bendpointMovePreview:["type",pv],connectionSegmentMove:["type",yv],bendpointSnapping:["type",_v]};function Sv(t,e,n,i){function r(o,a){return i.allowed("connection.create",{source:o,target:a})}t.on("connect.hover",function(o){var a,c=o.context,l=c.start,u=o.hover;if(c.hover=u,!Uh(a=c.canExecute=r(l,u))){if(a!==!1)return c.source=l,void(c.target=u);Uh(a=c.canExecute=r(u,l))||a!==!1&&(c.source=u,c.target=l)}}),t.on(["connect.out","connect.cleanup"],function(o){var a=o.context;a.hover=null,a.source=null,a.target=null,a.canExecute=!1}),t.on("connect.end",function(o){var a=o.context,c=a.canExecute,l=a.connectionStart,u={x:o.x,y:o.y},p=a.source,h=a.target;if(!c)return!1;var v=null,f={connectionStart:tp(a)?u:l,connectionEnd:tp(a)?l:u};Se(c)&&(v=c),n.connect(p,h,v,f)}),this.start=function(o,a,c,l){Se(c)||(l=c,c=gt(a)),e.init(o,"connect",{autoActivate:l,data:{shape:a,context:{start:a,connectionStart:c}}})}}function tp(t){var e=t.hover,n=t.source,i=t.target;return e&&n&&e===n&&n!==i}Sv.$inject=["eventBus","dragging","modeling","rules"];var Cv="connect-ok",Tv="connect-not-ok";function Av(t,e,n){var i=t.get("connectionPreview",!1);i&&e.on("connect.move",function(r){var o=r.context,a=o.canExecute,c=o.hover,l=o.source,u=o.start,p=o.startPosition,h=o.target,v=o.connectionStart||p,f=o.connectionEnd||{x:r.x,y:r.y},y=v,b=f;tp(o)&&(y=f,b=v),i.drawPreview(o,a,{source:l||u,target:h||c,connectionStart:y,connectionEnd:b})}),e.on("connect.hover",900,function(r){var o=r.context,a=r.hover,c=o.canExecute;c!==null&&n.addMarker(a,c?Cv:Tv)}),e.on(["connect.out","connect.cleanup"],1100,function(r){var o=r.hover;o&&(n.removeMarker(o,Cv),n.removeMarker(o,Tv))}),i&&e.on("connect.cleanup",function(r){i.cleanUp(r.context)})}Av.$inject=["injector","eventBus","canvas"];const ep={__depends__:[In,On,Kn],__init__:["connectPreview"],connect:["type",Sv],connectPreview:["type",Av]};function Yn(t,e,n,i){this._canvas=e,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=t.get("connectionDocking",!1),this._layouter=t.get("layouter",!1)}Yn.$inject=["injector","canvas","graphicsFactory","elementFactory"],Yn.prototype.drawPreview=function(t,e,n){n=n||{};var i,r=t.connectionPreviewGfx,o=t.getConnection,a=n.source,c=n.target,l=n.waypoints,u=n.connectionStart,p=n.connectionEnd,h=n.noLayout,v=n.noCropping,f=n.noNoop,y=this;r||(r=t.connectionPreviewGfx=this.createConnectionPreviewGfx()),tm(r),o||(o=t.getConnection=function(b){var w={};return function(g){var _=JSON.stringify(g),E=w[_];return E||(E=w[_]=b.apply(null,arguments)),E}}(function(b,w,g){return y.getConnection(b,w,g)})),e&&(i=o(e,a,c)),i?(i.waypoints=l||[],this._layouter&&!h&&(i.waypoints=this._layouter.layoutConnection(i,{source:a,target:c,connectionStart:u,connectionEnd:p,waypoints:n.waypoints||i.waypoints})),i.waypoints&&i.waypoints.length||(i.waypoints=[a?gt(a):u,c?gt(c):p]),this._connectionDocking&&(a||c)&&!v&&(i.waypoints=this._connectionDocking.getCroppedWaypoints(i,a,c)),this._graphicsFactory.drawConnection(r,i)):!f&&this.drawNoopPreview(r,n)},Yn.prototype.drawNoopPreview=function(t,e){var n=e.source,i=e.target,r=e.connectionStart||gt(n),o=e.connectionEnd||gt(i),a=this.cropWaypoints(r,o,n,i);pt(t,this.createNoopConnection(a[0],a[1]))},Yn.prototype.cropWaypoints=function(t,e,n,i){var r=this._graphicsFactory,o=n&&r.getShapePath(n),a=i&&r.getShapePath(i),c=r.getConnectionPath({waypoints:[t,e]});return[t=n&&hu(o,c,!0)||t,e=i&&hu(a,c,!1)||e]},Yn.prototype.cleanUp=function(t){t&&t.connectionPreviewGfx&&Zt(t.connectionPreviewGfx)},Yn.prototype.getConnection=function(t){var e=function(n){return Se(n)?n:{}}(t);return this._elementFactory.createConnection(e)},Yn.prototype.createConnectionPreviewGfx=function(){var t=st("g");return W(t,{pointerEvents:"none"}),St(t).add("djs-connection-preview"),pt(this._canvas.getActiveLayer(),t),t},Yn.prototype.createNoopConnection=function(t,e){var n=st("polyline");return W(n,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),W(n,{points:[t.x,t.y,e.x,e.y]}),n};const Bw={__init__:["connectionPreview"],connectionPreview:["type",Yn]},Vs=Object.prototype.toString,Ow=Object.prototype.hasOwnProperty;function kv(t){return Vs.call(t)==="[object Array]"}function Pv(t){return Vs.call(t)==="[object Number]"}function Mv(t){const e=Vs.call(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"||e==="[object Proxy]"}function jw(t,e){return Ow.call(t,e)}function Lw(t,e){const n=function(r){return Mv(r)?r:o=>o===r}(e);let i;return Yo(t,function(r,o){if(n(r,o))return i=r,!1}),i}function Yo(t,e){let n,i;if(t===void 0)return;const r=kv(t)?Fw:Vw;for(let o in t)if(jw(t,o)&&(n=t[o],i=e(n,r(o)),i===!1))return n}function ro(t,e){return!!Lw(t,e)}function Vw(t){return t}function Fw(t){return Number(t)}function np(t,...e){return Object.assign(t,...e)}function zw(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in t)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(t)}var Fs,ip,rp,zs={};function Rv(){Fs=window.addEventListener?"addEventListener":"attachEvent",ip=window.removeEventListener?"removeEventListener":"detachEvent",rp=Fs!=="addEventListener"?"on":""}var $w=zs.bind=function(t,e,n,i){return Fs||Rv(),t[Fs](rp+e,n,i||!1),n},Gw=zs.unbind=function(t,e,n,i){return ip||Rv(),t[ip](rp+e,n,i||!1),n},Nv=zw({__proto__:null,bind:$w,unbind:Gw,default:zs},[zs]),Iv=["focus","blur"],op,Dv={bind:function(t,e,n,i,r){return Iv.indexOf(n)!==-1&&(r=!0),Nv.bind(t,n,function(o){var a=o.target||o.srcElement;o.delegateTarget=function(c,l,u){var p=u?c:c.parentNode;return p&&typeof p.closest=="function"&&p.closest(l)||null}(a,e,!0),o.delegateTarget&&i.call(t,o)},r)},unbind:function(t,e,n,i){return Iv.indexOf(e)!==-1&&(i=!0),Nv.unbind(t,e,n,i)}};function Bv(t){return t.originalEvent||t.srcEvent}function Ov(t,e){return(Bv(t)||t).button===e}function ap(t){return Ov(t,0)}function Uw(t){var e=Bv(t)||t;return!!ap(t)&&(/mac/i.test(navigator.platform)?e.metaKey:e.ctrlKey)}typeof document<"u"&&((op=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',op.getElementsByTagName("link").length,op=void 0);var jv={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Hw(t,e,n){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=jv[i];r?(r===2&&typeof n=="number"&&(n=String(n)+"px"),t.style[i]=n):t.setAttributeNS(null,e,n)}function Jo(t,e,n){return typeof e=="string"?function(i,r){return jv[r]?i.style[r]:i.getAttributeNS(null,r)}(t,e):(function(i,r){var o,a,c=Object.keys(r);for(o=0;a=c[o];o++)Hw(i,a,r[a])}(t,e),t)}var sp="http://www.w3.org/2000/svg",Lv='<svg xmlns="'+sp+'"';function qw(t){var e=!1;t.substring(0,4)==="<svg"?t.indexOf(sp)===-1&&(t=Lv+t.substring(4)):(t=Lv+">"+t+"</svg>",e=!0);var n=function(o){var a;return(a=new DOMParser).async=!1,a.parseFromString(o,"text/xml")}(t);if(!e)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function Vv(t,e){var n;return(t=t.trim()).charAt(0)==="<"?(n=qw(t).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(sp,t),e&&Jo(n,e),n}function Ww(t){var e=t.parentNode;return e&&e.removeChild(t),t}function cp(t){return["L",t.x,t.y]}function Xw(t,e){const n=t.length,i=[(r=t[0],["M",r.x,r.y])];var r,o,a,c;for(let l=1;l<n;l++){const u=t[l-1],p=t[l],h=t[l+1];if(!h||!e){i.push(cp(p));continue}const v=Math.min(e,lp(p.x-u.x,p.y-u.y),lp(h.x-p.x,h.y-p.y));if(!v){i.push(cp(p));continue}const f=$s(p,u,v),y=$s(p,u,.5*v),b=$s(p,h,v),w=$s(p,h,.5*v);i.push(cp(f)),i.push((a=w,c=b,["C",(o=y).x,o.y,a.x,a.y,c.x,c.y]))}return i}function $s(t,e,n){const i=e.x-t.x,r=e.y-t.y,o=n/lp(i,r);return{x:t.x+i*o,y:t.y+r*o}}function lp(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}function Fv(t,e){const n=parseInt(t.dataset.cornerRadius,10)||0;var i;return Jo(t,{d:(i=Xw(e,n),i.flat().join(",").replace(/,?([A-z]),?/g,"$1"))}),t}function Kw(t){return!0}function Gs(t){return ap(t)||function(e){return Ov(e,1)}(t)}function zv(t,e,n){var i=this;function r(g,_,E){var S,D;(function(s,d){var m=l[s]||ap;return!m(d)})(g,_)||(E?D=e.getGraphics(E):(S=_.delegateTarget||_.target)&&(D=S,E=e.get(D)),D&&E&&t.fire(g,{element:E,gfx:D,originalEvent:_})===!1&&(_.stopPropagation(),_.preventDefault()))}var o={};function a(g){return o[g]}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},l={"element.contextmenu":Kw,"element.mousedown":Gs,"element.mouseup":Gs,"element.click":Gs,"element.dblclick":Gs};function u(g,_,E,S){var D=o[E]=function(s){r(E,s)};S&&(l[E]=S),D.$delegate=Dv.bind(g,"svg, .djs-element",_,D)}function p(g,_,E){var S=a(E);S&&Dv.unbind(g,_,S.$delegate)}t.on("canvas.destroy",function(g){(function(_){Yo(c,function(E,S){p(_,S,E)})})(g.svg)}),t.on("canvas.init",function(g){(function(_){Yo(c,function(E,S){u(_,S,E)})})(g.svg)}),t.on(["shape.added","connection.added"],function(g){var _=g.element,E=g.gfx;t.fire("interactionEvents.createHit",{element:_,gfx:E})}),t.on(["shape.changed","connection.changed"],500,function(g){var _=g.element,E=g.gfx;t.fire("interactionEvents.updateHit",{element:_,gfx:E})}),t.on("interactionEvents.createHit",500,function(g){var _=g.element,E=g.gfx;i.createDefaultHit(_,E)}),t.on("interactionEvents.updateHit",function(g){var _=g.element,E=g.gfx;i.updateDefaultHit(_,E)});var h=y("djs-hit djs-hit-stroke"),v=y("djs-hit djs-hit-click-stroke"),f={all:y("djs-hit djs-hit-all"),"click-stroke":v,stroke:h,"no-move":y("djs-hit djs-hit-no-move")};function y(g,_){return _=np({stroke:"white",strokeWidth:15},_||{}),n.cls(g,["no-fill","no-border"],_)}function b(g,_){var E=f[_];if(!E)throw new Error("invalid hit type <"+_+">");return Jo(g,E),g}function w(g,_){(function(E,S){(function(D,s){s.appendChild(function(d,m){if(d.ownerDocument!==m.ownerDocument)try{return m.ownerDocument.importNode(d,!0)}catch{}return d}(D,s))})(S,E)})(g,_)}this.removeHits=function(g){var _;Yo((_=".djs-hit",(g||document).querySelectorAll(_)),Ww)},this.createDefaultHit=function(g,_){var E,S=g.waypoints,D=g.isFrame;return S?this.createWaypointsHit(_,S):(E=D?"stroke":"all",this.createBoxHit(_,E,{width:g.width,height:g.height}))},this.createWaypointsHit=function(g,_){var E=function(S,D,s){Pv(D)&&(s=D,D=null),D||(D={});const d=Vv("path",D);return Pv(s)&&(d.dataset.cornerRadius=String(s)),Fv(d,S)}(_);return b(E,"stroke"),w(g,E),E},this.createBoxHit=function(g,_,E){E=np({x:0,y:0},E);var S=Vv("rect");return b(S,_),Jo(S,E),w(g,S),S},this.updateDefaultHit=function(g,_){var E,S=(E=".djs-hit",(_||document).querySelector(E));if(S)return g.waypoints?Fv(S,g.waypoints):Jo(S,{width:g.width,height:g.height}),S},this.fire=r,this.triggerMouseEvent=function(g,_,E){var S=c[g];if(!S)throw new Error("unmapped DOM event name <"+g+">");return r(S,_,E)},this.mouseHandler=a,this.registerEvent=u,this.unregisterEvent=p}zv.$inject=["eventBus","elementRegistry","styles"];const Yw={__init__:["interactionEvents"],interactionEvents:["type",zv]};var $v=Object.prototype.toString,Jw=Object.prototype.hasOwnProperty;function Zw(t,e){return Jw.call(t,e)}function Qw(t,e){var n;return e=function(i){return r=i,o=$v.call(r),o==="[object Function]"||o==="[object AsyncFunction]"||o==="[object GeneratorFunction]"||o==="[object AsyncGeneratorFunction]"||o==="[object Proxy]"?i:function(a){return a===i};var r,o}(e),Gv(t,function(i,r){if(e(i,r))return n=i,!1}),n}function Gv(t,e){var n;if(t!==void 0){var i=function(o){return $v.call(o)==="[object Array]"}(t)?e_:t_;for(var r in t)if(Zw(t,r)&&e(n=t[r],i(r))===!1)return n}}function t_(t){return t}function e_(t){return Number(t)}function Us(t,e){return t.bind(e)}function up(){return up=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},up.apply(this,arguments)}function Hs(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return up.apply(void 0,[t].concat(n))}function Uv(t,e){var n={},i=Object(t);return Gv(e,function(r){r in i&&(n[r]=t[r])}),n}var Hv=Math.min,qv=Math.max;function pp(t){t.preventDefault()}function Zo(t){t.stopPropagation()}function gn(t){this.container=t.container,this.parent=Ft('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=qt("[contenteditable]",this.parent),this.keyHandler=t.keyHandler||function(){},this.resizeHandler=t.resizeHandler||function(){},this.autoResize=Us(this.autoResize,this),this.handlePaste=Us(this.handlePaste,this)}function Qe(t,e){this._eventBus=t,this._providers=[],this._textbox=new gn({container:e.getContainer(),keyHandler:Us(this._handleKey,this),resizeHandler:Us(this._handleResize,this)})}gn.prototype.create=function(t,e,n,i){var r=this.parent,o=this.content,a=this.container;i=this.options=i||{};var c=Uv(e=this.style=e||{},["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);Hs(r.style,{width:t.width+"px",height:t.height+"px",maxWidth:t.maxWidth+"px",maxHeight:t.maxHeight+"px",minWidth:t.minWidth+"px",minHeight:t.minHeight+"px",left:t.x+"px",top:t.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},c);var l=Uv(e,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return Hs(o.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},l),i.centerVertically&&Hs(o.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},l),o.innerText=n,lt.bind(o,"keydown",this.keyHandler),lt.bind(o,"mousedown",Zo),lt.bind(o,"paste",this.handlePaste),i.autoResize&&lt.bind(o,"input",this.autoResize),i.resizable&&this.resizable(e),a.appendChild(r),this.setSelection(o.lastChild,o.lastChild&&o.lastChild.length),r},gn.prototype.handlePaste=function(t){var e,n=this.options,i=this.style;if(t.preventDefault(),e=t.clipboardData?t.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),this.insertText(e),n.autoResize){var r=this.autoResize(i);r&&this.resizeHandler(r)}},gn.prototype.insertText=function(t){t=t.replace(/\r\n|\r|\n/g,`
`),document.execCommand("insertText",!1,t)||this._insertTextIE(t)},gn.prototype._insertTextIE=function(t){var e,n,i,r=this.getSelection(),o=r.startContainer,a=r.endContainer,c=r.startOffset,l=r.endOffset,u=r.commonAncestorContainer,p=(e=u.childNodes,[].slice.call(e));if(function(b){return b.nodeType===Node.TEXT_NODE}(u)){var h=o.textContent;o.textContent=h.substring(0,c)+t+h.substring(l),n=o,i=c+t.length}else if(o===this.content&&a===this.content){var v=document.createTextNode(t);this.content.insertBefore(v,p[c]),n=v,i=v.textContent.length}else{var f=p.indexOf(o),y=p.indexOf(a);p.forEach(function(b,w){w===f?b.textContent=o.textContent.substring(0,c)+t+a.textContent.substring(l):w>f&&w<=y&&Pn(b)}),n=o,i=c+t.length}n&&i!==void 0&&setTimeout(function(){self.setSelection(n,i)})},gn.prototype.autoResize=function(){var t=this.parent,e=this.content,n=parseInt(this.style.fontSize)||12;if(e.scrollHeight>t.offsetHeight||e.scrollHeight<t.offsetHeight-n){var i=t.getBoundingClientRect(),r=e.scrollHeight;t.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}},gn.prototype.resizable=function(){var t=this,e=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,a=parseInt(this.style.maxHeight)||1/0;if(!n){var c,l,u,p;n=this.resizeHandle=Ft('<div class="djs-direct-editing-resize-handle"></div>');var h=function(f){pp(f),Zo(f);var y=Hv(qv(u+f.clientX-c,i),o),b=Hv(qv(p+f.clientY-l,r),a);e.style.width=y+"px",e.style.height=b+"px",t.resizeHandler({width:u,height:p,dx:f.clientX-c,dy:f.clientY-l})},v=function(f){pp(f),Zo(f),lt.unbind(document,"mousemove",h,!1),lt.unbind(document,"mouseup",v,!1)};lt.bind(n,"mousedown",function(f){pp(f),Zo(f),c=f.clientX,l=f.clientY;var y=e.getBoundingClientRect();u=y.width,p=y.height,lt.bind(document,"mousemove",h),lt.bind(document,"mouseup",v)})}Hs(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),e.appendChild(n)},gn.prototype.destroy=function(){var t=this.parent,e=this.content,n=this.resizeHandle;e.innerText="",t.removeAttribute("style"),e.removeAttribute("style"),lt.unbind(e,"keydown",this.keyHandler),lt.unbind(e,"mousedown",Zo),lt.unbind(e,"input",this.autoResize),lt.unbind(e,"paste",this.handlePaste),n&&(n.removeAttribute("style"),Pn(n)),Pn(t)},gn.prototype.getValue=function(){return this.content.innerText.trim()},gn.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},gn.prototype.setSelection=function(t,e){var n=document.createRange();t===null?n.selectNodeContents(this.content):(n.setStart(t,e),n.setEnd(t,e));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)},Qe.$inject=["eventBus","canvas"],Qe.prototype.registerProvider=function(t){this._providers.push(t)},Qe.prototype.isActive=function(t){return!(!this._active||t&&this._active.element!==t)},Qe.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},Qe.prototype._fire=function(t,e){this._eventBus.fire("directEditing."+t,e||{active:this._active})},Qe.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0},Qe.prototype.complete=function(){var t=this._active;if(t){var e,n=t.context.bounds,i=this.$textbox.getBoundingClientRect(),r=this.getValue();r===t.context.text&&i.height===n.height&&i.width===n.width||(e=this._textbox.container.getBoundingClientRect(),t.provider.update(t.element,r,t.context.text,{x:i.left-e.left,y:i.top-e.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}},Qe.prototype.getValue=function(){return this._textbox.getValue()},Qe.prototype._handleKey=function(t){t.stopPropagation();var e=t.keyCode||t.charCode;return e===27?(t.preventDefault(),this.cancel()):e!==13||t.shiftKey?void 0:(t.preventDefault(),this.complete())},Qe.prototype._handleResize=function(t){this._fire("resize",t)},Qe.prototype.activate=function(t){var e;this.isActive()&&this.cancel();var n=Qw(this._providers,function(i){return(e=i.activate(t))?i:null});return e&&(this.$textbox=this._textbox.create(e.bounds,e.style,e.text,e.options),this._active={element:t,context:e,provider:n},e.options&&e.options.resizable&&(this.resizable=!0),this._fire("activate")),!!e};const Wv={__depends__:[Yw],__init__:["directEditing"],directEditing:["type",Qe]};var Xv=".entry";function tn(t,e,n){this._eventBus=e,this._overlays=n;var i=kn(t&&t.scale)?t.scale:{min:1,max:1.5};this._overlaysConfig={position:{right:-9,top:-6},scale:i},this._current=null,this._init()}tn.$inject=["config.contextPad","eventBus","overlays"],tn.prototype._init=function(){var t=this._eventBus,e=this;t.on("selection.changed",function(n){var i=n.newSelection;i.length===1?e.open(i[0]):e.close()}),t.on("elements.delete",function(n){F(n.elements,function(i){e.isOpen(i)&&e.close()})}),t.on("element.changed",function(n){var i=n.element,r=e._current;r&&r.element===i&&e.open(i,!0)})},tn.prototype.registerProvider=function(t,e){e||(e=t,t=1e3),this._eventBus.on("contextPad.getProviders",t,function(n){n.providers.push(e)})},tn.prototype.getEntries=function(t){var e=this._getProviders(),n={};return F(e,function(i){var r=i.getContextPadEntries(t);Ce(r)?n=r(n):F(r,function(o,a){n[a]=o})}),n},tn.prototype.trigger=function(t,e,n){var i,r,o=this._current.element,a=this._current.entries,c=e.delegateTarget||e.target;if(!c)return e.preventDefault();if(i=a[Ge(c,"data-action")].action,r=e.originalEvent||e,Ce(i)){if(t==="click")return i(r,o,n)}else if(i[t])return i[t](r,o,n);e.preventDefault()},tn.prototype.open=function(t,e){!e&&this.isOpen(t)||(this.close(),this._updateAndOpen(t))},tn.prototype._getProviders=function(){var t=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},tn.prototype._updateAndOpen=function(t){var e=this.getEntries(t),n=this.getPad(t),i=n.html;F(e,function(r,o){var a,c=r.group||"default",l=Ft(r.html||'<div class="entry" draggable="true"></div>');Ge(l,"data-action",o),(a=qt("[data-group="+c+"]",i))||(a=Ft('<div class="group" data-group="'+c+'"></div>'),i.appendChild(a)),a.appendChild(l),r.className&&function(u,p){var h=re(u);(_t(p)?p:p.split(/\s+/g)).forEach(function(v){h.add(v)})}(l,r.className),r.title&&Ge(l,"title",r.title),r.imageUrl&&l.appendChild(Ft('<img src="'+r.imageUrl+'">'))}),re(i).add("open"),this._current={element:t,pad:n,entries:e},this._eventBus.fire("contextPad.open",{current:this._current})},tn.prototype.getPad=function(t){if(this.isOpen())return this._current.pad;var e=this,n=this._overlays,i=Ft('<div class="djs-context-pad"></div>'),r=$({html:i},this._overlaysConfig);Ue.bind(i,Xv,"click",function(a){e.trigger("click",a)}),Ue.bind(i,Xv,"dragstart",function(a){e.trigger("dragstart",a)}),lt.bind(i,"mousedown",function(a){a.stopPropagation()}),this._overlayId=n.add(t,"context-pad",r);var o=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:t,pad:o}),o},tn.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},tn.prototype.isOpen=function(t){return!(!this._current||t&&this._current.element!==t)};const n_={__depends__:[ks,Bu],contextPad:["type",tn]};var i_=["marker-start","marker-mid","marker-end"],r_=["circle","ellipse","line","path","polygon","polyline","rect"];function or(t,e,n,i){this._elementRegistry=t,this._canvas=n,this._styles=i,this._clonedMarkers={};var r=this;e.on("drag.cleanup",function(){F(r._clonedMarkers,function(o){Zt(o)}),r._clonedMarkers={}})}or.$inject=["elementRegistry","eventBus","canvas","styles"],or.prototype.getGfx=function(t){return this._elementRegistry.getGraphics(t)},or.prototype.addDragger=function(t,e,n){var i=em(n=n||this.getGfx(t)),r=n.getBoundingClientRect();return this._cloneMarkers(ds(i)),W(i,this._styles.cls("djs-dragger",[],{x:r.top,y:r.left})),pt(e,i),i},or.prototype.addFrame=function(t,e){var n=st("rect",{class:"djs-resize-overlay",width:t.width,height:t.height,x:t.x,y:t.y});return pt(e,n),n},or.prototype._cloneMarkers=function(t){var e=this;if(t.childNodes)for(var n=0;n<t.childNodes.length;n++)e._cloneMarkers(t.childNodes[n]);(function(i){return r_.indexOf(i.nodeName)!==-1})(t)&&i_.forEach(function(i){if(W(t,i)){var r=function(o,a,c){var l=(u=W(o,a),u.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]),u;return qt("marker#"+l,c||document)}(t,i,e._canvas.getContainer());e._cloneMarker(t,r,i)}})},or.prototype._cloneMarker=function(t,e,n){var i=e.id,r=this._clonedMarkers[i];if(!r){var o=i+"-clone";(r=em(e)).id=o,St(r).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[i]=r;var a=qt("defs",this._canvas._svg);a||(a=st("defs"),pt(this._canvas._svg,a)),pt(a,r)}W(t,n,"url(#"+this._clonedMarkers[i].id+")")};const Qo={__init__:["previewSupport"],previewSupport:["type",or]};var o_="drop-ok",Kv="drop-not-ok",Yv="attach-ok",Jv="new-parent",Zv="create";function Qv(t,e,n,i,r){function o(c,l){[Yv,o_,Kv,Jv].forEach(function(u){u===l?t.addMarker(c,u):t.removeMarker(c,u)})}function a(){var c=e.context();c&&c.prefix===Zv&&e.cancel()}n.on(["create.move","create.hover"],function(c){var l=c.context,u=l.elements,p=c.hover,h=l.source,v=l.hints||{};if(!p)return l.canExecute=!1,void(l.target=null);ty(c);var f={x:c.x,y:c.y},y=l.canExecute=p&&function(b,w,g,_,E){if(!w)return!1;var S=jt(b=Et(b,function(C){var M=C.labelTarget;return!(C.parent||function(N){return!!N.labelTarget}(C)&&b.indexOf(M)!==-1)}),function(C){return!ta(C)}),D=!1,s=!1,d=!1;ey(b)&&(D=r.allowed("shape.attach",{position:g,shape:S,target:w})),D||(d=ey(b)?r.allowed("shape.create",{position:g,shape:S,source:_,target:w}):r.allowed("elements.create",{elements:b,position:g,target:w}));var m=E.connectionTarget;return d||D?(S&&_&&(s=r.allowed("connection.create",{source:m===_?S:_,target:m===_?_:S,hints:{targetParent:w,targetAttach:D}})),{attach:D,connect:s}):(d===null||D===null)&&null}(u,p,f,h,v);p&&y!==null&&(l.target=p,y&&y.attach?o(p,Yv):o(p,y?Jv:Kv))}),n.on(["create.end","create.out","create.cleanup"],function(c){var l=c.hover;l&&o(l,null)}),n.on("create.end",function(c){var l=c.context,u=l.source,p=l.shape,h=l.elements,v=l.target,f=l.canExecute,y=f&&f.attach,b=f&&f.connect,w=l.hints||{};if(f===!1||!v)return!1;ty(c);var g={x:c.x,y:c.y};p=b?i.appendShape(u,p,g,v,{attach:y,connection:b===!0?{}:b,connectionTarget:w.connectionTarget}):jt(h=i.createElements(h,g,v,$({},w,{attach:y})),function(_){return!ta(_)}),$(l,{elements:h,shape:p}),$(c,{elements:h,shape:p})}),n.on("create.init",function(){n.on("elements.changed",a),n.once(["create.cancel","create.end"],2e3,function(){n.off("elements.changed",a)})}),this.start=function(c,l,u){_t(l)||(l=[l]);var p=jt(l,function(v){return!ta(v)});if(p){u=$({elements:l,hints:{},shape:p},u||{}),F(l,function(v){mt(v.x)||(v.x=0),mt(v.y)||(v.y=0)});var h=ve(l);F(l,function(v){ta(v)&&(v.waypoints=pe(v.waypoints,function(f){return{x:f.x-h.x-h.width/2,y:f.y-h.y-h.height/2}})),$(v,{x:v.x-h.x-h.width/2,y:v.y-h.y-h.height/2})}),e.init(c,Zv,{cursor:"grabbing",autoActivate:!0,data:{shape:p,elements:l,context:u}})}}}function ty(t){var e=t.context.createConstraints;e&&(e.left&&(t.x=Math.max(t.x,e.left)),e.right&&(t.x=Math.min(t.x,e.right)),e.top&&(t.y=Math.max(t.y,e.top)),e.bottom&&(t.y=Math.min(t.y,e.bottom)))}function ta(t){return!!t.waypoints}function ey(t){return t&&t.length===1&&!ta(t[0])}Qv.$inject=["canvas","dragging","eventBus","modeling","rules"];function ny(t,e,n,i,r){e.on("create.move",750,function(o){var a=o.hover,c=o.context,l=c.elements,u=c.dragGroup;u||(u=c.dragGroup=function(p){var h=st("g");W(h,r.cls("djs-drag-group",["no-events"]));var v=st("g");return p.forEach(function(f){var y;f.hidden||(f.waypoints?(y=n._createContainer("connection",v),n.drawConnection(ds(y),f)):(y=n._createContainer("shape",v),n.drawShape(ds(y),f),je(y,f.x,f.y)),i.addDragger(f,h,y))}),h}(l)),a?(u.parentNode||pt(t.getActiveLayer(),u),je(u,o.x,o.y)):Zt(u)}),e.on("create.cleanup",function(o){var a=o.context.dragGroup;a&&Zt(a)})}ny.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const qs={__depends__:[Kn,Qo,On,In],__init__:["create","createPreview"],create:["type",Qv],createPreview:["type",ny]};var iy="data-id",ry=["contextPad.close","canvas.viewbox.changing","commandStack.changed"];function Qt(t,e,n){var i=kn(t&&t.scale)?t.scale:{min:1,max:1.5};this._config={scale:i},this._eventBus=e,this._canvas=n,this._providers={},this._current={}}Qt.$inject=["config.popupMenu","eventBus","canvas"],Qt.prototype.registerProvider=function(t,e,n){n||(n=e,e=1e3),this._eventBus.on("popupMenu.getProviders."+t,e,function(i){i.providers.push(n)})},Qt.prototype.isEmpty=function(t,e){if(!t)throw new Error("element parameter is missing");if(!e)throw new Error("providerId parameter is missing");var n=this._getProviders(e);if(!n)return!0;var i=this._getEntries(t,n),r=this._getHeaderEntries(t,n),o=ko(i)>0,a=r&&ko(r)>0;return!o&&!a},Qt.prototype.open=function(t,e,n){var i=this._getProviders(e);if(!t)throw new Error("Element is missing");if(!i||!i.length)throw new Error("No registered providers for: "+e);if(!n)throw new Error("the position argument is missing");this.isOpen()&&this.close(),this._emit("open");var r=this._current={className:e,element:t,position:n},o=this._getEntries(t,i),a=this._getHeaderEntries(t,i);r.entries=$({},o,a),r.container=this._createContainer(),ko(a)&&r.container.appendChild(this._createEntries(a,"djs-popup-header")),ko(o)&&r.container.appendChild(this._createEntries(o,"djs-popup-body"));var c=this._canvas.getContainer();this._attachContainer(r.container,c,n.cursor),this._bindAutoClose()},Qt.prototype.close=function(){this.isOpen()&&(this._emit("close"),this._unbindAutoClose(),Pn(this._current.container),this._current.container=null)},Qt.prototype.isOpen=function(){return!!this._current.container},Qt.prototype.trigger=function(t){t.preventDefault();var e=Ge(t.delegateTarget||t.target,iy),n=this._getEntry(e);if(n.action)return n.action.call(null,t,n)},Qt.prototype._getProviders=function(t){var e=this._eventBus.createEvent({type:"popupMenu.getProviders."+t,providers:[]});return this._eventBus.fire(e),e.providers},Qt.prototype._getEntries=function(t,e){var n={};return F(e,function(i){if(i.getPopupMenuEntries){var r=i.getPopupMenuEntries(t);Ce(r)?n=r(n):F(r,function(o,a){n[a]=o})}else F(i.getEntries(t),function(o){var a=o.id;if(!a)throw new Error("every entry must have the id property set");n[a]=fi(o,["id"])})}),n},Qt.prototype._getHeaderEntries=function(t,e){var n={};return F(e,function(i){if(i.getPopupMenuHeaderEntries){var r=i.getPopupMenuHeaderEntries(t);Ce(r)?n=r(n):F(r,function(o,a){n[a]=o})}else{if(!i.getHeaderEntries)return;F(i.getHeaderEntries(t),function(o){var a=o.id;if(!a)throw new Error("every entry must have the id property set");n[a]=fi(o,["id"])})}}),n},Qt.prototype._getEntry=function(t){var e=this._current.entries[t];if(!e)throw new Error("entry not found");return e},Qt.prototype._emit=function(t){this._eventBus.fire("popupMenu."+t)},Qt.prototype._createContainer=function(){var t=Ft('<div class="djs-popup">'),e=this._current.position,n=this._current.className;return $(t.style,{position:"absolute",left:e.x+"px",top:e.y+"px",visibility:"hidden"}),re(t).add(n),t},Qt.prototype._attachContainer=function(t,e,n){var i=this;Ue.bind(t,".entry","click",function(r){i.trigger(r)}),this._updateScale(t),e.appendChild(t),n&&this._assureIsInbounds(t,n)},Qt.prototype._updateScale=function(t){var e,n,i=this._canvas.zoom(),r=this._config.scale,o=i;r!==!0&&(r===!1?(e=1,n=1):(e=r.min,n=r.max),kn(e)&&i<e&&(o=e),kn(n)&&i>n&&(o=n)),function(a,c){a.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(l){a.style[l+"transform"]=c})}(t,"scale("+o+")")},Qt.prototype._assureIsInbounds=function(t,e){var n,i,r=this._canvas._container.getBoundingClientRect(),o=t.offsetLeft,a=t.offsetTop,c=t.scrollWidth,l=t.scrollHeight,u={},p=e.x-r.left,h=e.y-r.top;o+c>r.width&&(u.x=!0),a+l>r.height&&(u.y=!0),u.x&&u.y?(n=p-c+"px",i=h-l+"px"):u.x?(n=p-c+"px",i=h+"px"):u.y&&h<l?(n=p+"px",i="10px"):u.y&&(n=p+"px",i=h-l+"px"),$(t.style,{left:n,top:i},{visibility:"visible","z-index":1e3})},Qt.prototype._createEntries=function(t,e){var n=Ft("<div>"),i=this;return re(n).add(e),F(t,function(r,o){var a=i._createEntry(r,o);n.appendChild(a)}),n},Qt.prototype._createEntry=function(t,e){var n=Ft("<div>"),i=re(n);if(i.add("entry"),t.className&&t.className.split(" ").forEach(function(o){i.add(o)}),Ge(n,iy,e),t.label){var r=Ft("<span>");r.textContent=t.label,n.appendChild(r)}return t.imageUrl&&n.appendChild(Ft('<img src="'+t.imageUrl+'" />')),t.active===!0&&i.add("active"),t.disabled===!0&&i.add("disabled"),t.title&&(n.title=t.title),n},Qt.prototype._bindAutoClose=function(){this._eventBus.once(ry,this.close,this)},Qt.prototype._unbindAutoClose=function(){this._eventBus.off(ry,this.close,this)};const a_={__init__:["popupMenu"],popupMenu:["type",Qt]};function ea(){}ea.prototype.get=function(){return this._data},ea.prototype.set=function(t){this._data=t},ea.prototype.clear=function(){var t=this._data;return delete this._data,t},ea.prototype.isEmpty=function(){return!this._data};const s_={clipboard:["type",ea]};function dp(t){var e=this;function n(i){e._lastMoveEvent=i}this._lastMoveEvent=null,t.on("canvas.init",function(i){(e._svg=i.svg).addEventListener("mousemove",n)}),t.on("canvas.destroy",function(){e._lastMouseEvent=null,e._svg.removeEventListener("mousemove",n)})}dp.$inject=["eventBus"],dp.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||function(t,e){var n=document.createEvent("MouseEvent"),i=t,r=e,o=t,a=e;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,r,o,a,!1,!1,!1,!1,0,null),n}(0,0)};const na={__init__:["mouse"],mouse:["type",dp]};function bn(t,e,n,i,r,o,a,c){this._canvas=t,this._create=e,this._clipboard=n,this._elementFactory=i,this._eventBus=r,this._modeling=o,this._mouse=a,this._rules=c,r.on("copyPaste.copyElement",function(l){var u=l.descriptor,p=l.element,h=l.elements;u.priority=1,u.id=p.id,jt(h,function(v){return v===p.parent})&&(u.parent=p.parent.id),function(v){return!!v.host}(p)&&(u.priority=2,u.host=p.host.id),Ws(p)&&(u.priority=3,u.source=p.source.id,u.target=p.target.id,u.waypoints=function(v){return pe(v.waypoints,function(f){return(f=oy(f)).original&&(f.original=oy(f.original)),f})}(p)),Xs(p)&&(u.priority=4,u.labelTarget=p.labelTarget.id),F(["x","y","width","height"],function(v){mt(p[v])&&(u[v]=p[v])}),u.hidden=p.hidden,u.collapsed=p.collapsed}),r.on("copyPaste.pasteElements",function(l){$(l.hints,{createElementsBehavior:!1})})}function Ws(t){return!!t.waypoints}function Xs(t){return!!t.labelTarget}function oy(t){return $({},t)}function ay(t,e){var n=e.indexOf(t);return n===-1?e:e.splice(n,1)}bn.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],bn.prototype.copy=function(t){var e,n;return _t(t)||(t=t?[t]:[]),n=(e=this._eventBus.fire("copyPaste.canCopyElements",{elements:t}))===!1?{}:this.createTree(_t(e)?e:t),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:t,tree:n}),n},bn.prototype.paste=function(t){var e=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=t&&t.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(e);if(t&&t.element&&t.point)return this._paste(i,t.element,t.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}},bn.prototype._paste=function(t,e,n,i){F(t,function(o){mt(o.x)||(o.x=0),mt(o.y)||(o.y=0)});var r=ve(t);return F(t,function(o){Ws(o)&&(o.waypoints=pe(o.waypoints,function(a){return{x:a.x-r.x-r.width/2,y:a.y-r.y-r.height/2}})),$(o,{x:o.x-r.x-r.width/2,y:o.y-r.y-r.height/2})}),this._modeling.createElements(t,n,e,$({},i))},bn.prototype._createElements=function(t){var e=this,n=this._eventBus,i={},r=[];return F(t,function(o,a){F(o=dn(o,"priority"),function(c){var l,u=$({},fi(c,["priority"]));return i[c.parent]?u.parent=i[c.parent]:delete u.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:u}),Ws(u)?(u.source=i[c.source],u.target=i[c.target],l=i[c.id]=e.createConnection(u),void r.push(l)):Xs(u)?(u.labelTarget=i[u.labelTarget],l=i[c.id]=e.createLabel(u),void r.push(l)):(u.host&&(u.host=i[u.host]),l=i[c.id]=e.createShape(u),void r.push(l))})}),r},bn.prototype.createConnection=function(t){return this._elementFactory.createConnection(fi(t,["id"]))},bn.prototype.createLabel=function(t){return this._elementFactory.createLabel(fi(t,["id"]))},bn.prototype.createShape=function(t){return this._elementFactory.createShape(fi(t,["id"]))},bn.prototype.hasRelations=function(t,e){var n,i;return!(Ws(t)&&(n=jt(e,hn({id:t.source.id})),i=jt(e,hn({id:t.target.id})),!n||!i))&&!(Xs(t)&&!jt(e,hn({id:t.labelTarget.id})))},bn.prototype.createTree=function(t){var e=this._rules,n=this,i={},r=[];function o(a,c){var l=jt(r,function(u){return a===u.element});l?l.depth<c&&(r=function(u,p){var h=p.indexOf(u);return h!==-1&&p.splice(h,1),p}(l,r),r.push({element:l.element,depth:c})):r.push({element:a,depth:c})}return Ki(lm(t),function(a,c,l){if(!Xs(a))return F(a.labels,function(u){o(u,l)}),F([a.attachers,a.incoming,a.outgoing],function(u){u&&u.length&&F(u,function(p){F(p.labels,function(h){o(h,l)}),o(p,l)})}),o(a,l),a.children}),t=pe(r,function(a){return a.element}),r=pe(r,function(a){return a.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:a.descriptor,element:a.element,elements:t}),a}),r=dn(r,function(a){return a.descriptor.priority}),t=pe(r,function(a){return a.element}),F(r,function(a){var c=a.depth;n.hasRelations(a.element,t)&&function(l,u){return e.allowed("element.copy",{element:l,elements:u})}(a.element,t)?(i[c]||(i[c]=[]),i[c].push(a.descriptor)):ay(a.element,t)}),i};const c_={__depends__:[s_,qs,na,On],__init__:["copyPaste"],copyPaste:["type",bn]};function Ks(t,e,n){_t(n)||(n=[n]),F(n,function(i){Ao(t[i])||(e[i]=t[i])})}function sy(t,e,n){var i;e.on("copyPaste.copyElement",750,function(r){var o=r.descriptor,a=r.element,c=o.oldBusinessObject=rt(a);if(o.type=a.type,Ks(c,o,"name"),o.di={},Ks(c.di,o.di,["fill","stroke","background-color","border-color","color"]),Ks(c.di,o,"isExpanded"),cy(o))return o;c.default&&(o.default=c.default.id)}),e.on("moddleCopy.canCopyProperty",function(r){var o,a=r.parent,c=r.property;if(r.propertyName==="processRef"&&A(a,"bpmn:Participant")&&A(c,"bpmn:Process"))return o=t.create("bpmn:Process"),n.copyElement(c,o)}),e.on("copyPaste.pasteElements",function(){i={}}),e.on("copyPaste.pasteElement",function(r){var o,a,c,l=r.cache,u=r.descriptor,p=u.oldBusinessObject;cy(u)?u.businessObject=rt(l[u.labelTarget]):(o=t.create(p.$type),u.businessObject=n.copyElement(p,o),function(h,v){var f=rt(h);h.default&&(i[h.default]={element:f,property:"default"}),h.host&&(rt(h).attachedToRef=rt(v[h.host])),i=fi(i,$e(i,function(y,b,w){var g=b.element,_=b.property;return w===h.id&&(g[_]=f,y.push(h.id)),y},[]))}(u,l),Ks(u,o,["isExpanded","name"]),a=u,_t(c="oldBusinessObject")||(c=[c]),F(c,function(h){a[h]&&delete a[h]}))})}function cy(t){return!!t.labelTarget}sy.$inject=["bpmnFactory","eventBus","moddleCopy"];var l_=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing"];function ia(t,e,n){this._bpmnFactory=e,this._eventBus=t,this._moddle=n,t.on("moddleCopy.canCopyProperties",function(i){var r=i.propertyNames;if(r&&r.length)return dn(r,function(o){return o==="extensionElements"})}),t.on("moddleCopy.canCopyProperty",function(i){var r=i.parent,o=Se(r)&&r.$descriptor,a=i.propertyName;return(!a||l_.indexOf(a)===-1)&&!(a&&o&&!jt(o.properties,hn({name:a})))&&void 0}),t.on("moddleCopy.canSetCopiedProperty",function(i){var r,o,a=i.property;if(o="bpmn:ExtensionElements",(r=a)&&typeof r.$instanceOf=="function"&&r.$instanceOf(o)&&(!a.values||!a.values.length))return!1})}function hp(t,e){return $e(t.properties,function(n,i){return e&&i.default?n:n.concat(i.name)},[])}ia.$inject=["eventBus","bpmnFactory","moddle"],ia.prototype.copyElement=function(t,e,n){var i=this;n&&!_t(n)&&(n=[n]),n=n||hp(t.$descriptor);var r=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:t,targetElement:e});return r===!1||(_t(r)&&(n=r),F(n,function(o){var a;hi(t,o)&&(a=t.get(o));var c=i.copyProperty(a,e,o);i._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:e,property:c,propertyName:o})!==!1&&kn(c)&&e.set(o,c)})),e},ia.prototype.copyProperty=function(t,e,n){var i=this,r=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:e,property:t,propertyName:n});if(r!==!1){if(r)return Se(r)&&r.$type&&!r.$parent&&(r.$parent=e),r;var o=this._moddle.getPropertyDescriptor(e,n);if(!o.isReference)return o.isId?this._copyId(t,e):_t(t)?$e(t,function(a,c){return(r=i.copyProperty(c,e,n))?(r.$parent=e,a.concat(r)):a},[]):Se(t)&&t.$type?this._moddle.getElementDescriptor(t).isGeneric?void 0:((r=i._bpmnFactory.create(t.$type)).$parent=e,r=i.copyElement(t,r)):t}},ia.prototype._copyId=function(t,e){return this._moddle.ids.assigned(t)?void 0:(this._moddle.ids.claim(t,e),t)};const ly={__depends__:[c_],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",sy],moddleCopy:["type",ia]};var uy=Math.round;function mp(t){this._modeling=t}mp.$inject=["modeling"],mp.prototype.replaceElement=function(t,e,n){if(t.waypoints)return null;var i=this._modeling,r=e.width||t.width,o=e.height||t.height,a=e.x||t.x,c=e.y||t.y,l=uy(a+r/2),u=uy(c+o/2);return i.replaceShape(t,$({},e,{x:l,y:u,width:r,height:o}),n)};const u_={__init__:["replace"],replace:["type",mp]};var p_=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function py(t,e,n,i,r,o,a){this.replaceElement=function(c,l,u){u=u||{};var p=l.type,h=c.businessObject;if(Ys(h)&&p==="bpmn:SubProcess"&&function(E,S){var D=E&&hi(E,"collapsed")?E.collapsed:!It(E);return D!==(S&&(hi(S,"collapsed")||hi(S,"isExpanded"))?hi(S,"collapsed")?S.collapsed:!S.isExpanded:D)&&(E.collapsed=D,!0)}(c,l))return i.toggleCollapse(c),c;var v,f=t.create(p),y={type:p,businessObject:f},b=hp(h.$descriptor),w=hp(f.$descriptor,!0),g=(v=w,b.filter(function(E){return v.indexOf(E)!==-1}));$(f,mi(l,p_));var _=Et(g,function(E){return E==="eventDefinitions"?dy(c,l.eventDefinitionType):E==="loopCharacteristics"?!Ve(f):!hi(f,E)&&(E!=="processRef"||l.isExpanded!==!1)&&E!=="triggeredByEvent"});return f=n.copyElement(h,f,_),l.eventDefinitionType&&(dy(f,l.eventDefinitionType)||(y.eventDefinitionType=l.eventDefinitionType,y.eventDefinitionAttrs=l.eventDefinitionAttrs)),A(h,"bpmn:Activity")&&(Ys(h)?y.isExpanded=It(h):l&&hi(l,"isExpanded")&&(y.isExpanded=l.isExpanded),It(h)&&!A(h,"bpmn:Task")&&y.isExpanded&&(y.width=c.width,y.height=c.height)),Ys(h)&&!Ys(f)&&(u.moveChildren=!1),A(h,"bpmn:Participant")&&(l.isExpanded===!0?f.processRef=t.create("bpmn:Process"):u.moveChildren=!1,y.width=c.width,y.height=e._getDefaultSize(f).height),o.allowed("shape.resize",{shape:f})||(y.height=e._getDefaultSize(f).height,y.width=e._getDefaultSize(f).width),f.name=h.name,kt(h,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&kt(f,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(f.default=h.default),l.host&&!A(h,"bpmn:BoundaryEvent")&&A(f,"bpmn:BoundaryEvent")&&(y.host=l.host),y.type!=="bpmn:DataStoreReference"&&y.type!=="bpmn:DataObjectReference"||(y.x=c.x+(c.width-y.width)/2),y.di={},function(E,S,D){_t(D)||(D=[D]),F(D,function(s){Ao(E[s])||(S[s]=E[s])})}(h.di,y.di,["fill","stroke","background-color","border-color","color"]),y=r.replaceElement(c,y,u),u.select!==!1&&a.select(y),y}}function Ys(t){return A(t,"bpmn:SubProcess")}function dy(t,e){var n=rt(t);return e&&n.get("eventDefinitions").some(function(i){return A(i,e)})}py.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules","selection"];const hy={__depends__:[ly,u_,In],bpmnReplace:["type",py]};function my(t){return function(e){var n=e.target,i=rt(t),r=i.eventDefinitions&&i.eventDefinitions[0],o=i.$type===n.type,a=(r&&r.$type)===n.eventDefinitionType,c=i.triggeredByEvent===n.triggeredByEvent,l=n.isExpanded===void 0||n.isExpanded===It(i);return!(o&&a&&c&&l)}}var d_=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],h_=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],m_=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Intermediate Catch Event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link Intermediate Throw Event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation Intermediate Throw Event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],f_=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message End Event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],v_=[{label:"Exclusive Gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex Gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event based Gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],y_=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],g_=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],b_=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}}],fy=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"Send Task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive Task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"User Task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Manual Task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business Rule Task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Service Task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Script Task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],x_=[{label:"Data Store Reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],E_=[{label:"Data Object Reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],w_=[{label:"Message Boundary Event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],__=[{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Error Start Event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Escalation Start Event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Compensation Start Event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],S_=[{label:"Sequence Flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default Flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional Flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],C_=[{label:"Expanded Pool",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(t){var e="Empty Pool";return t.children&&t.children.length&&(e+=" (removes content)"),e},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];function en(t,e,n,i,r,o,a){this._bpmnFactory=t,this._popupMenu=e,this._modeling=n,this._moddle=i,this._bpmnReplace=r,this._rules=o,this._translate=a,this.register()}en.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate"],en.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},en.prototype.getEntries=function(t){var e,n=t.businessObject;if(!this._rules.allowed("shape.replace",{element:t}))return[];var i=my(t);return A(n,"bpmn:DataObjectReference")?this._createEntries(t,x_):A(n,"bpmn:DataStoreReference")?this._createEntries(t,E_):A(n,"bpmn:StartEvent")&&!A(n.$parent,"bpmn:SubProcess")?(e=Et(d_,i),this._createEntries(t,e)):A(n,"bpmn:Participant")?(e=Et(C_,function(r){return It(n)!==r.target.isExpanded}),this._createEntries(t,e)):A(n,"bpmn:StartEvent")&&Ve(n.$parent)?(e=Et(__,function(r){var o=r.target.isInterrupting!==!1,a=rt(t).isInterrupting===o;return i(r)||!i(r)&&!a}),this._createEntries(t,e)):A(n,"bpmn:StartEvent")&&!Ve(n.$parent)&&A(n.$parent,"bpmn:SubProcess")?(e=Et(h_,i),this._createEntries(t,e)):A(n,"bpmn:EndEvent")?(e=Et(f_,function(r){return!(r.target.eventDefinitionType=="bpmn:CancelEventDefinition"&&!A(n.$parent,"bpmn:Transaction"))&&i(r)}),this._createEntries(t,e)):A(n,"bpmn:BoundaryEvent")?(e=Et(w_,function(r){var o=r.target;if(o.eventDefinitionType=="bpmn:CancelEventDefinition"&&!A(n.attachedToRef,"bpmn:Transaction"))return!1;var a=o.cancelActivity!==!1,c=n.cancelActivity==a;return i(r)||!i(r)&&!c}),this._createEntries(t,e)):A(n,"bpmn:IntermediateCatchEvent")||A(n,"bpmn:IntermediateThrowEvent")?(e=Et(m_,i),this._createEntries(t,e)):A(n,"bpmn:Gateway")?(e=Et(v_,i),this._createEntries(t,e)):A(n,"bpmn:Transaction")?(e=Et(g_,i),this._createEntries(t,e)):Ve(n)&&It(n)?(e=Et(b_,i),this._createEntries(t,e)):A(n,"bpmn:SubProcess")&&It(n)?(e=Et(y_,i),this._createEntries(t,e)):A(n,"bpmn:AdHocSubProcess")&&!It(n)?(e=Et(fy,function(r){var o=r.target,a=o.type==="bpmn:SubProcess",c=o.isExpanded===!0;return my(t)&&(!a||c)}),this._createEntries(t,e)):A(n,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(t,S_):A(n,"bpmn:FlowNode")?(e=Et(fy,i),A(n,"bpmn:SubProcess")&&!It(n)&&(e=Et(e,function(r){return r.label!=="Sub Process (collapsed)"})),this._createEntries(t,e)):[]},en.prototype.getHeaderEntries=function(t){var e=[];return A(t,"bpmn:Activity")&&!Ve(t)&&(e=e.concat(this._getLoopEntries(t))),A(t,"bpmn:DataObjectReference")&&(e=e.concat(this._getDataObjectIsCollection(t))),A(t,"bpmn:Participant")&&(e=e.concat(this._getParticipantMultiplicity(t))),!A(t,"bpmn:SubProcess")||A(t,"bpmn:Transaction")||Ve(t)||e.push(this._getAdHocEntry(t)),e},en.prototype._createEntries=function(t,e){var n=[],i=this;return F(e,function(r){var o=i._createMenuEntry(r,t);n.push(o)}),n},en.prototype._createSequenceFlowEntries=function(t,e){var n=rt(t),i=[],r=this._modeling,o=this._moddle,a=this;return F(e,function(c){switch(c.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(A(n.sourceRef,"bpmn:ExclusiveGateway")||A(n.sourceRef,"bpmn:InclusiveGateway")||A(n.sourceRef,"bpmn:ComplexGateway")||A(n.sourceRef,"bpmn:Activity"))&&i.push(a._createMenuEntry(c,t,function(){r.updateProperties(t.source,{default:n})}));break;case"replace-with-conditional-flow":!n.conditionExpression&&A(n.sourceRef,"bpmn:Activity")&&i.push(a._createMenuEntry(c,t,function(){var l=o.create("bpmn:FormalExpression",{body:""});r.updateProperties(t,{conditionExpression:l})}));break;default:if(A(n.sourceRef,"bpmn:Activity")&&n.conditionExpression)return i.push(a._createMenuEntry(c,t,function(){r.updateProperties(t,{conditionExpression:void 0})}));if((A(n.sourceRef,"bpmn:ExclusiveGateway")||A(n.sourceRef,"bpmn:InclusiveGateway")||A(n.sourceRef,"bpmn:ComplexGateway")||A(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n)return i.push(a._createMenuEntry(c,t,function(){r.updateProperties(t.source,{default:void 0})}))}}),i},en.prototype._createMenuEntry=function(t,e,n){var i=this._translate,r=this._bpmnReplace.replaceElement,o=t.label;return o&&typeof o=="function"&&(o=o(e)),n=n||function(){return r(e,t.target)},{label:i(o),className:t.className,id:t.actionName,action:n}},en.prototype._getLoopEntries=function(t){var e=this,n=this._translate;function i(l,u){var p;u.active?p=void 0:(p=e._moddle.create(u.options.loopCharacteristics),u.options.isSequential&&(p.isSequential=u.options.isSequential)),e._modeling.updateProperties(t,{loopCharacteristics:p})}var r,o,a,c=rt(t).loopCharacteristics;return c&&(r=c.isSequential,o=c.isSequential===void 0,a=c.isSequential!==void 0&&!c.isSequential),[{id:"toggle-parallel-mi",className:"bpmn-icon-parallel-mi-marker",title:n("Parallel Multi Instance"),active:a,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},{id:"toggle-sequential-mi",className:"bpmn-icon-sequential-mi-marker",title:n("Sequential Multi Instance"),active:r,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},{id:"toggle-loop",className:"bpmn-icon-loop-marker",title:n("Loop"),active:o,action:i,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}]},en.prototype._getDataObjectIsCollection=function(t){var e=this,n=this._translate,i=t.businessObject.dataObjectRef,r=i.isCollection;return[{id:"toggle-is-collection",className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:r,action:function(o,a){e._modeling.updateModdleProperties(t,i,{isCollection:!a.active})}}]},en.prototype._getParticipantMultiplicity=function(t){var e=this,n=this._bpmnFactory,i=this._translate,r=t.businessObject.participantMultiplicity,o=[{id:"toggle-participant-multiplicity",className:"bpmn-icon-parallel-mi-marker",title:i("Participant Multiplicity"),active:!!r,action:function(a,c){var l;c.active||(l=n.create("bpmn:ParticipantMultiplicity")),e._modeling.updateProperties(t,{participantMultiplicity:l})}}];return o},en.prototype._getAdHocEntry=function(t){var e=this._translate,n=A(rt(t),"bpmn:AdHocSubProcess"),i=this._bpmnReplace.replaceElement;return{id:"toggle-adhoc",className:"bpmn-icon-ad-hoc-marker",title:e("Ad-hoc"),active:n,action:function(r,o){return i(t,n?{type:"bpmn:SubProcess"}:{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}};const T_={__depends__:[a_,hy],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",en]};var Js=Math.max,Zs=Math.min;function vy(t,e){return{top:t.top-e.top,right:t.right-e.right,bottom:t.bottom-e.bottom,left:t.left-e.left}}function Qs(t,e,n){var i=e[t],r=n.min&&n.min[t],o=n.max&&n.max[t];return mt(r)&&(i=(/top|left/.test(t)?Zs:Js)(i,r)),mt(o)&&(i=(/top|left/.test(t)?Js:Zs)(i,o)),i}function ra(t,e){return t!==void 0?t:20}function A_(t){return!t.waypoints&&t.type!=="label"}function yy(t,e){var n;if((n=t.length===void 0?Et(t.children,A_):t).length)return function(i,r){var o,a,c,l;return typeof r=="object"?(o=ra(r.left),a=ra(r.right),c=ra(r.top),l=ra(r.bottom)):o=a=c=l=ra(r),{x:i.x-o,y:i.y-c,width:i.width+o+a,height:i.height+c+l}}(ve(n),e)}var tc=Math.abs,k_=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],oo=30;function ec(t,e){return e=e||[],t.children.filter(function(n){A(n,"bpmn:Lane")&&(ec(n,e),e.push(n))}),e}function ki(t){return t.children.filter(function(e){return A(e,"bpmn:Lane")})}function xn(t){return Is(t,k_)||t}function P_(t,e){var n=xn(t),i=ec(n,A(n,"bpmn:Process")?[]:[n]),r=ct(t),o=ct(e),a=function(l,u){return vy(ct(u),ct(l))}(t,e),c=[];return i.forEach(function(l){if(l!==t){var u,p,h=0,v=a.right,f=0,y=a.left,b=ct(l);a.top&&(tc(b.bottom-r.top)<10&&(f=o.top-b.bottom),tc(b.top-r.top)<5&&(h=o.top-b.top)),a.bottom&&(tc(b.top-r.bottom)<10&&(h=o.bottom-b.top),tc(b.bottom-r.bottom)<5&&(f=o.bottom-b.bottom)),(h||v||f||y)&&c.push({shape:l,newBounds:(u=l,p={top:h,right:v,bottom:f,left:y},{x:u.x+(p.left||0),y:u.y+(p.top||0),width:u.width-(p.left||0)+(p.right||0),height:u.height-(p.top||0)+(p.bottom||0)})})}}),c}function fp(t,e,n,i,r,o,a,c,l,u,p,h){t=t||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=o,this._connect=a,this._create=c,this._popupMenu=l,this._canvas=u,this._rules=p,this._translate=h,t.autoPlace!==!1&&(this._autoPlace=e.get("autoPlace",!1)),n.on("create.end",250,function(v){var f=v.context.shape;if(Jr(v)&&i.isOpen(f)){var y=i.getEntries(f);y.replace&&y.replace.action.click(v,f)}})}function gy(t,e,n){var i=t.$instanceOf(e),r=!1;return F(t.eventDefinitions||[],function(o){o.$type===n&&(r=!0)}),i&&r}fp.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"],fp.prototype.getContextPadEntries=function(t){var e=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,o=this._create,a=this._popupMenu,c=this._canvas,l=this._rules,u=this._autoPlace,p=this._translate,h={};if(t.type==="label")return h;var v=t.businessObject;function f(_,E){r.start(_,E)}function y(_,E,S,D){function s(m,C){var M=i.createShape($({type:_},D));o.start(m,M,{source:C})}typeof S!="string"&&(D=S,S=p("Append {type}",{type:_.replace(/^bpmn:/,"")}));var d=u?function(m,C){var M=i.createShape($({type:_},D));u.append(C,M)}:s;return{group:"model",className:E,title:S,action:{dragstart:s,click:d}}}function b(_){return function(E,S){n.splitLane(S,_),e.open(S,!0)}}if(kt(v,["bpmn:Lane","bpmn:Participant"])&&It(v)){var w=ki(t);$(h,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:p("Add Lane above"),action:{click:function(_,E){n.addLane(E,"top")}}}}),w.length<2&&(t.height>=120&&$(h,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:p("Divide into two Lanes"),action:{click:b(2)}}}),t.height>=180&&$(h,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:p("Divide into three Lanes"),action:{click:b(3)}}})),$(h,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:p("Add Lane below"),action:{click:function(_,E){n.addLane(E,"bottom")}}}})}A(v,"bpmn:FlowNode")&&(A(v,"bpmn:EventBasedGateway")?$(h,{"append.receive-task":y("bpmn:ReceiveTask","bpmn-icon-receive-task",p("Append ReceiveTask")),"append.message-intermediate-event":y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",p("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",p("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",p("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",p("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):gy(v,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?$(h,{"append.compensation-activity":y("bpmn:Task","bpmn-icon-task",p("Append compensation activity"),{isForCompensation:!0})}):A(v,"bpmn:EndEvent")||v.isForCompensation||gy(v,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||Ve(v)||$(h,{"append.end-event":y("bpmn:EndEvent","bpmn-icon-end-event-none",p("Append EndEvent")),"append.gateway":y("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",p("Append Gateway")),"append.append-task":y("bpmn:Task","bpmn-icon-task",p("Append Task")),"append.intermediate-event":y("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",p("Append Intermediate/Boundary Event"))})),a.isEmpty(t,"bpmn-replace")||$(h,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:p("Change type"),action:{click:function(_,E){var S=$(function(D){var s=c.getContainer(),d=e.getPad(D).html,m=s.getBoundingClientRect(),C=d.getBoundingClientRect(),M=C.top-m.top;return{x:C.left-m.left,y:M+C.height+5}}(E),{cursor:{x:_.x,y:_.y}});a.open(E,"bpmn-replace",S)}}}}),kt(v,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&$(h,{"append.text-annotation":y("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect using "+(v.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:f,dragstart:f}}}),A(v,"bpmn:TextAnnotation")&&$(h,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect using Association"),action:{click:f,dragstart:f}}}),kt(v,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&$(h,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect using DataInputAssociation"),action:{click:f,dragstart:f}}}),A(v,"bpmn:Group")&&$(h,{"append.text-annotation":y("bpmn:TextAnnotation","bpmn-icon-text-annotation")});var g=l.allowed("elements.delete",{elements:[t]});return _t(g)&&(g=g[0]===t),g&&$(h,{delete:{group:"edit",className:"bpmn-icon-trash",title:p("Remove"),action:{click:function(_){n.removeElements([t])}}}}),h};const M_={__depends__:[Wv,n_,In,ep,qs,T_],__init__:["contextPadProvider"],contextPadProvider:["type",fp]};var R_={horizontal:["x","width"],vertical:["y","height"]};function Jn(t){this._modeling=t,this._filters=[],this.registerFilter(function(e,n,i){var r,o=0,a=0;return F(e,function(c){c.waypoints||c.labelTarget||(o+=c[i],a+=1)}),r=Math.round(o/a),Et(e,function(c){return c[i]<r+50})})}Jn.$inject=["modeling"],Jn.prototype.registerFilter=function(t){if(typeof t!="function")throw new Error("the filter has to be a function");this._filters.push(t)},Jn.prototype.trigger=function(t,e){var n,i,r=this._modeling;if(!(t.length<3||(this._setOrientation(e),i=this._filterElements(t),(n=this._createGroups(i)).length<=2)))return r.distributeElements(n,this._axis,this._dimension),n},Jn.prototype._filterElements=function(t){var e=this._filters,n=this._axis,i=this._dimension,r=[].concat(t);return e.length?(F(e,function(o){r=o(r,n,i)}),r):t},Jn.prototype._createGroups=function(t){var e=[],n=this,i=this._axis,r=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');return F(dn(t,i),function(o,a){var c,l=n._findRange(o,i,r),u=e[e.length-1];u&&n._hasIntersection(u.range,l)?e[e.length-1].elements.push(o):(c={range:l,elements:[o]},e.push(c))}),e},Jn.prototype._setOrientation=function(t){var e=R_[t];this._axis=e[0],this._dimension=e[1]},Jn.prototype._hasIntersection=function(t,e){return Math.max(t.min,t.max)>=Math.min(e.min,e.max)&&Math.min(t.min,t.max)<=Math.max(e.min,e.max)},Jn.prototype._findRange=function(t){var e=t[this._axis];return{min:e+5,max:e+t[this._dimension]-5}};const N_={__init__:["distributeElements"],distributeElements:["type",Jn]};function by(t){t.registerFilter(function(e){return Et(e,function(n){var i=kt(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:Participant","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||i)})})}by.$inject=["distributeElements"];const I_={__depends__:[N_],__init__:["bpmnDistributeElements"],bpmnDistributeElements:["type",by]};var xy="is not a registered action";function nn(t,e){this._actions={};var n=this;t.on("diagram.init",function(){n._registerDefaultActions(e),t.fire("editorActions.init",{editorActions:n})})}function vp(t,e){return new Error(t+" "+e)}nn.$inject=["eventBus","injector"],nn.prototype._registerDefaultActions=function(t){var e=t.get("commandStack",!1),n=t.get("modeling",!1),i=t.get("selection",!1),r=t.get("zoomScroll",!1),o=t.get("copyPaste",!1),a=t.get("canvas",!1),c=t.get("rules",!1),l=t.get("keyboardMove",!1),u=t.get("keyboardMoveSelection",!1);e&&(this.register("undo",function(){e.undo()}),this.register("redo",function(){e.redo()})),o&&i&&this.register("copy",function(){var p=i.get();o.copy(p)}),o&&this.register("paste",function(){o.paste()}),r&&this.register("stepZoom",function(p){r.stepZoom(p.value)}),a&&this.register("zoom",function(p){a.zoom(p.value)}),n&&i&&c&&this.register("removeSelection",function(){var p=i.get();if(p.length){var h,v=c.allowed("elements.delete",{elements:p});v!==!1&&(h=_t(v)?v:p).length&&n.removeElements(h.slice())}}),l&&this.register("moveCanvas",function(p){l.moveCanvas(p)}),u&&this.register("moveSelection",function(p){u.moveSelection(p.direction,p.accelerated)})},nn.prototype.trigger=function(t,e){if(!this._actions[t])throw vp(t,xy);return this._actions[t](e)},nn.prototype.register=function(t,e){var n=this;if(typeof t=="string")return this._registerAction(t,e);F(t,function(i,r){n._registerAction(r,i)})},nn.prototype._registerAction=function(t,e){if(this.isRegistered(t))throw vp(t,"is already registered");this._actions[t]=e},nn.prototype.unregister=function(t){if(!this.isRegistered(t))throw vp(t,xy);this._actions[t]=void 0},nn.prototype.getActions=function(){return Object.keys(this._actions)},nn.prototype.isRegistered=function(t){return!!this._actions[t]};const D_={__init__:["editorActions"],editorActions:["type",nn]};function nc(t){t.invoke(nn,this)}at(nc,nn),nc.$inject=["injector"],nc.prototype._registerDefaultActions=function(t){nn.prototype._registerDefaultActions.call(this,t);var e=t.get("canvas",!1),n=t.get("elementRegistry",!1),i=t.get("selection",!1),r=t.get("spaceTool",!1),o=t.get("lassoTool",!1),a=t.get("handTool",!1),c=t.get("globalConnect",!1),l=t.get("distributeElements",!1),u=t.get("alignElements",!1),p=t.get("directEditing",!1),h=t.get("searchPad",!1),v=t.get("modeling",!1);e&&n&&i&&this._registerAction("selectElements",function(){var f=e.getRootElement(),y=n.filter(function(b){return b!==f});return i.select(y),y}),r&&this._registerAction("spaceTool",function(){r.toggle()}),o&&this._registerAction("lassoTool",function(){o.toggle()}),a&&this._registerAction("handTool",function(){a.toggle()}),c&&this._registerAction("globalConnectTool",function(){c.toggle()}),i&&l&&this._registerAction("distributeElements",function(f){var y=i.get(),b=f.type;y.length&&l.trigger(y,b)}),i&&u&&this._registerAction("alignElements",function(f){var y=i.get(),b=[],w=f.type;y.length&&(b=Et(y,function(g){return!A(g,"bpmn:Lane")}),u.trigger(b,w))}),i&&v&&this._registerAction("setColor",function(f){var y=i.get();y.length&&v.setColor(y,f)}),i&&p&&this._registerAction("directEditing",function(){var f=i.get();f.length&&p.activate(f[0])}),h&&this._registerAction("find",function(){h.toggle()}),e&&v&&this._registerAction("moveToOrigin",function(){var f,y,b=e.getRootElement();f=ve(y=A(b,"bpmn:Collaboration")?n.filter(function(w){return A(w.parent,"bpmn:Collaboration")}):n.filter(function(w){return w!==b&&!A(w.parent,"bpmn:SubProcess")})),v.moveElements(y,{x:-f.x,y:-f.y},b)})};const B_={__depends__:[D_],editorActions:["type",nc]};function Ey(t){t.on(["create.init","shape.move.init"],function(e){var n=e.context;kt(e.shape,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}Ey.$inject=["eventBus"];function yp(t,e,n){return n||(n="round"),Math[n](t/e)*e}function Pi(t,e,n){var i=!n||n.active!==!1;this._eventBus=e;var r=this;e.on("diagram.init",800,function(){r.setActive(i)}),e.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],1200,function(o){var a=o.originalEvent;if(!(!r.active||a&&We(a))){var c=o.context,l=c.gridSnappingContext;l||(l=c.gridSnappingContext={}),["x","y"].forEach(function(u){var p={},h=function(f,y,b){var w=f.context,g=f.shape,_=w.gridSnappingContext,E=_.snapLocation,S=_.snapOffset;return S&&mt(S[y])||(S||(S=_.snapOffset={}),mt(S[y])||(S[y]=0),!g)||(b.get(g.id)||(ic(y)?S[y]+=g[y]+g.width/2:S[y]+=g[y]+g.height/2),!E)||(y==="x"?/left/.test(E)?S[y]-=g.width/2:/right/.test(E)&&(S[y]+=g.width/2):/top/.test(E)?S[y]-=g.height/2:/bottom/.test(E)&&(S[y]+=g.height/2)),S[y]}(o,u,t);h&&(p.offset=h);var v=function(f,y){var b=f.context,w=b.createConstraints,g=b.resizeConstraints||{},_=b.gridSnappingContext,E=_.snapConstraints;if(E&&E[y])return E[y];E||(E=_.snapConstraints={}),E[y]||(E[y]={});var S=b.direction;w&&(ic(y)?(E.x.min=w.left,E.x.max=w.right):(E.y.min=w.top,E.y.max=w.bottom));var D=g.min,s=g.max;return D&&(ic(y)?_y(S)?E.x.max=D.left:E.x.min=D.right:wy(S)?E.y.max=D.top:E.y.min=D.bottom),s&&(ic(y)?_y(S)?E.x.min=s.left:E.x.max=s.right:wy(S)?E.y.min=s.top:E.y.max=s.bottom),E[y]}(o,u);v&&$(p,v),io(o,u)||r.snapEvent(o,u,p)})}})}function ic(t){return t==="x"}function wy(t){return t.indexOf("n")!==-1}function _y(t){return t.indexOf("w")!==-1}function ar(t,e){nt.call(this,t),this._gridSnapping=e;var n=this;this.preExecute("shape.resize",function(i){var r=i.context,o=(r.hints||{}).autoResize;if(o){var a=r.shape,c=r.newBounds;Rr(o)?r.newBounds=n.snapComplex(c,o):r.newBounds=n.snapSimple(a,c)}})}Pi.prototype.snapEvent=function(t,e,n){ae(t,e,this.snapValue(t[e],n))},Pi.prototype.getGridSpacing=function(){return 10},Pi.prototype.snapValue=function(t,e){var n,i,r=0;return e&&e.offset&&(r=e.offset),t=yp(t+=r,10),e&&e.min&&mt(n=e.min)&&(n=yp(n+r,10,"ceil"),t=Math.max(t,n)),e&&e.max&&mt(i=e.max)&&(i=yp(i+r,10,"floor"),t=Math.min(t,i)),t-=r},Pi.prototype.isActive=function(){return this.active},Pi.prototype.setActive=function(t){this.active=t,this._eventBus.fire("gridSnapping.toggle",{active:t})},Pi.prototype.toggleActive=function(){this.setActive(!this.active)},Pi.$inject=["elementRegistry","eventBus","config.gridSnapping"],ar.$inject=["eventBus","gridSnapping","modeling"],at(ar,nt),ar.prototype.snapSimple=function(t,e){var n=this._gridSnapping;return e.width=n.snapValue(e.width,{min:e.width}),e.height=n.snapValue(e.height,{min:e.height}),e.x=t.x+t.width/2-e.width/2,e.y=t.y+t.height/2-e.height/2,e},ar.prototype.snapComplex=function(t,e){return/w|e/.test(e)&&(t=this.snapHorizontally(t,e)),/n|s/.test(e)&&(t=this.snapVertically(t,e)),t},ar.prototype.snapHorizontally=function(t,e){var n=this._gridSnapping,i=/w/.test(e),r=/e/.test(e),o={};return o.width=n.snapValue(t.width,{min:t.width}),r&&(i?(o.x=n.snapValue(t.x,{max:t.x}),o.width+=n.snapValue(t.x-o.x,{min:t.x-o.x})):t.x=t.x+t.width-o.width),$(t,o),t},ar.prototype.snapVertically=function(t,e){var n=this._gridSnapping,i=/n/.test(e),r=/s/.test(e),o={};return o.height=n.snapValue(t.height,{min:t.height}),i&&(r?(o.y=n.snapValue(t.y,{max:t.y}),o.height+=n.snapValue(t.y-o.y,{min:t.y-o.y})):t.y=t.y+t.height-o.height),$(t,o),t};function Sy(t,e){t.on(["spaceTool.move","spaceTool.end"],2e3,function(n){var i,r=n.context;r.initialized&&(r.axis==="x"?(i=e.snapValue(n.dx),n.x=n.x+i-n.dx,n.dx=i):(i=e.snapValue(n.dy),n.y=n.y+i-n.dy,n.dy=i))})}Sy.$inject=["eventBus","gridSnapping"];const O_={__depends__:[{__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",ar],gridSnappingSpaceToolBehavior:["type",Sy]}],__init__:["gridSnapping"],gridSnapping:["type",Pi]};function Cy(t,e){t.on("autoPlace",2e3,function(n){var i=n.source,r=gt(i),o=n.shape,a=Xf(i,o);return["x","y"].forEach(function(c){var l={};a[c]!==r[c]&&(a[c]>r[c]?l.min=a[c]:l.max=a[c],A(o,"bpmn:TextAnnotation")&&(function(u){return u==="x"}(c)?l.offset=-o.width/2:l.offset=-o.height/2),a[c]=e.snapValue(a[c],l))}),a})}Cy.$inject=["eventBus","gridSnapping"];function Ty(t,e,n){e.on(["create.start","shape.move.start"],1750,function(i){var r=i.context,o=r.shape,a=t.getRootElement();A(o,"bpmn:Participant")&&A(a,"bpmn:Process")&&a.children.length&&r.createConstraints&&(o.width=n.snapValue(o.width,{min:o.width}),o.height=n.snapValue(o.height,{min:o.height}))})}Ty.$inject=["canvas","eventBus","gridSnapping"];function rc(t,e,n){nt.call(this,t),this._gridSnapping=e;var i=this;this.postExecuted(["connection.create","connection.layout"],3e3,function(r){var o=r.context,a=o.connection,c=o.hints||{},l=a.waypoints;c.connectionStart||c.connectionEnd||c.createElementsBehavior===!1||function(u){return u.length>3}(l)&&n.updateWaypoints(a,i.snapMiddleSegments(l))})}function j_(t,e,n){var i=Gn(e,n),r={};return function(o){return o==="h"}(i)&&(r.y=t.snapValue(e.y)),function(o){return o==="v"}(i)&&(r.x=t.snapValue(e.x)),("x"in r||"y"in r)&&(e=$({},e,r),n=$({},n,r)),[e,n]}rc.$inject=["eventBus","gridSnapping","modeling"],at(rc,nt),rc.prototype.snapMiddleSegments=function(t){var e,n=this._gridSnapping;t=t.slice();for(var i=1;i<t.length-2;i++)e=j_(n,t[i],t[i+1]),t[i]=e[0],t[i+1]=e[1];return t};const L_={__depends__:[O_,{__init__:["gridSnappingAutoPlaceBehavior","gridSnappingCreateParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",Cy],gridSnappingCreateParticipantBehavior:["type",Ty],gridSnappingLayoutConnectionBehavior:["type",rc]}],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",Ey]};function oa(t,e){this._interactionEvents=e;var n=this;t.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(i){var r=i.element,o=i.gfx;return A(r,"bpmn:Lane")?n.createParticipantHit(r,o):A(r,"bpmn:Participant")?It(r)?n.createParticipantHit(r,o):n.createDefaultHit(r,o):A(r,"bpmn:SubProcess")?It(r)?n.createSubProcessHit(r,o):n.createDefaultHit(r,o):void 0})}oa.$inject=["eventBus","interactionEvents"],oa.prototype.createDefaultHit=function(t,e){return this._interactionEvents.removeHits(e),this._interactionEvents.createDefaultHit(t,e),!0},oa.prototype.createParticipantHit=function(t,e){return this._interactionEvents.removeHits(e),this._interactionEvents.createBoxHit(e,"click-stroke",{width:t.width,height:t.height}),this._interactionEvents.createBoxHit(e,"all",{width:30,height:t.height}),!0},oa.prototype.createSubProcessHit=function(t,e){return this._interactionEvents.removeHits(e),this._interactionEvents.createBoxHit(e,"click-stroke",{width:t.width,height:t.height}),this._interactionEvents.createBoxHit(e,"all",{width:t.width,height:30}),!0};const V_={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",oa]};function oc(t){t.invoke(Qr,this)}at(oc,Qr),oc.$inject=["injector"],oc.prototype.registerBindings=function(t,e){function n(i,r){e.isRegistered(i)&&t.addListener(r)}Qr.prototype.registerBindings.call(this,t,e),n("selectElements",function(i){var r=i.keyEvent;if(t.isKey(["a","A"],r)&&t.isCmd(r))return e.trigger("selectElements"),!0}),n("find",function(i){var r=i.keyEvent;if(t.isKey(["f","F"],r)&&t.isCmd(r))return e.trigger("find"),!0}),n("spaceTool",function(i){var r=i.keyEvent;if(!t.hasModifier(r))return t.isKey(["s","S"],r)?(e.trigger("spaceTool"),!0):void 0}),n("lassoTool",function(i){var r=i.keyEvent;if(!t.hasModifier(r))return t.isKey(["l","L"],r)?(e.trigger("lassoTool"),!0):void 0}),n("handTool",function(i){var r=i.keyEvent;if(!t.hasModifier(r))return t.isKey(["h","H"],r)?(e.trigger("handTool"),!0):void 0}),n("globalConnectTool",function(i){var r=i.keyEvent;if(!t.hasModifier(r))return t.isKey(["c","C"],r)?(e.trigger("globalConnectTool"),!0):void 0}),n("directEditing",function(i){var r=i.keyEvent;if(!t.hasModifier(r))return t.isKey(["e","E"],r)?(e.trigger("directEditing"),!0):void 0})};const F_={__depends__:[ju],__init__:["keyboardBindings"],keyboardBindings:["type",oc]};var z_={moveSpeed:1,moveSpeedAccelerated:10},Ay="left",ky="right",Py="down",$_={ArrowLeft:Ay,Left:Ay,ArrowUp:"up",Up:"up",ArrowRight:ky,Right:ky,ArrowDown:Py,Down:Py},G_={left:function(t){return{x:-t,y:0}},up:function(t){return{x:0,y:-t}},right:function(t){return{x:t,y:0}},down:function(t){return{x:0,y:t}}};function My(t,e,n,i,r){var o=this;this._config=$({},z_,t||{}),e.addListener(1500,function(a){var c=a.keyEvent,l=$_[c.key];if(l&&!e.isCmd(c)){var u=e.isShift(c);return o.moveSelection(l,u),!0}}),this.moveSelection=function(a,c){var l=r.get();if(l.length){var u=this._config[c?"moveSpeedAccelerated":"moveSpeed"],p=G_[a](u);i.allowed("elements.move",{shapes:l})&&n.moveElements(l,p)}}}My.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const U_={__depends__:[ju,In],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",My]};function Ry(t,e,n,i){t.on("element.changed",function(r){var o=r.element;(o.parent||o===e.getRootElement())&&(r.gfx=n.getGraphics(o)),r.gfx&&t.fire(dm(o)+".changed",r)}),t.on("elements.changed",function(r){var o=r.elements;o.forEach(function(a){t.fire("element.changed",{element:a})}),i.updateContainments(o)}),t.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),t.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}Ry.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const Ny={__init__:["changeSupport"],changeSupport:["type",Ry]};function aa(t,e,n,i){this._dragging=i,this._rules=e;var r=this;function o(a,c){var l,u=a.shape,p=a.direction,h=a.resizeConstraints;a.delta=c,l=function(v,f,y){var b=y.x,w=y.y,g={x:v.x,y:v.y,width:v.width,height:v.height};return f.indexOf("n")!==-1?(g.y=v.y+w,g.height=v.height-w):f.indexOf("s")!==-1&&(g.height=v.height+w),f.indexOf("e")!==-1?g.width=v.width+b:f.indexOf("w")!==-1&&(g.x=v.x+b,g.width=v.width-b),g}(u,p,c),a.newBounds=function(v,f){if(!f)return v;var y=ct(v);return du({top:Qs("top",y,f),right:Qs("right",y,f),bottom:Qs("bottom",y,f),left:Qs("left",y,f)})}(l,h),a.canExecute=r.canResize(a)}t.on("resize.start",function(a){var c,l,u;c=a.context,l=c.resizeConstraints,u=c.minBounds,l===void 0&&(u===void 0&&(u=r.computeMinResizeBox(c)),c.resizeConstraints={min:ct(u)})}),t.on("resize.move",function(a){var c={x:a.dx,y:a.dy};o(a.context,c)}),t.on("resize.end",function(a){(function(c){var l=c.shape,u=c.canExecute,p=c.newBounds;if(u){if(!function(h,v){return h.x!==v.x||h.y!==v.y||h.width!==v.width||h.height!==v.height}(l,p=Am(p)))return;n.resizeShape(l,p)}})(a.context)})}function Iy(t,e){var n=gt(t),i=ct(t),r={x:n.x,y:n.y};return e.indexOf("n")!==-1?r.y=i.top:e.indexOf("s")!==-1&&(r.y=i.bottom),e.indexOf("e")!==-1?r.x=i.right:e.indexOf("w")!==-1&&(r.x=i.left),r}function H_(t){var e="resize-";return t==="n"||t==="s"?e+"ns":t==="e"||t==="w"?e+"ew":t==="nw"||t==="se"?e+"nwse":e+"nesw"}aa.prototype.canResize=function(t){var e=this._rules,n=mi(t,["newBounds","shape","delta","direction"]);return e.allowed("shape.resize",n)},aa.prototype.activate=function(t,e,n){var i,r,o=this._dragging;if(typeof n=="string"&&(n={direction:n}),!(r=(i=$({shape:e},n)).direction))throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");o.init(t,Iy(e,r),"resize",{autoActivate:!0,cursor:H_(r),data:{shape:e,context:i}})},aa.prototype.computeMinResizeBox=function(t){var e=t.shape;return function(n,i,r,o){var a=ct(i),c={top:/n/.test(n)?a.bottom-r.height:a.top,left:/w/.test(n)?a.right-r.width:a.left,bottom:/s/.test(n)?a.top+r.height:a.bottom,right:/e/.test(n)?a.left+r.width:a.right},l=o?ct(o):c;return du({top:Zs(c.top,l.top),left:Zs(c.left,l.left),bottom:Js(c.bottom,l.bottom),right:Js(c.right,l.right)})}(t.direction,e,t.minDimensions||{width:10,height:10},yy(e,t.childrenBoxPadding))},aa.$inject=["eventBus","rules","modeling","dragging"];var Dy="djs-resizing",By="resize-not-ok";function Oy(t,e,n){t.on("resize.move",500,function(i){var r,o,a,c;r=i.context,o=r.shape,a=r.newBounds,(c=r.frame)||(c=r.frame=n.addFrame(o,e.getActiveLayer()),e.addMarker(o,Dy)),a.width>5&&W(c,{x:a.x,width:a.width}),a.height>5&&W(c,{y:a.y,height:a.height}),r.canExecute?St(c).remove(By):St(c).add(By)}),t.on("resize.cleanup",function(i){var r,o;r=i.context,o=r.shape,r.frame&&Zt(r.frame),e.removeMarker(o,Dy)})}Oy.$inject=["eventBus","canvas","previewSupport"];var jy=-6,sa="djs-resizer",q_=["n","w","s","e","nw","ne","se","sw"];function Mi(t,e,n,i){this._resize=i,this._canvas=e;var r=this;t.on("selection.changed",function(o){var a=o.newSelection;r.removeResizers(),a.length===1&&F(a,Po(r.addResizer,r))}),t.on("shape.changed",function(o){var a=o.element;n.isSelected(a)&&(r.removeResizers(),r.addResizer(a))})}Mi.prototype.makeDraggable=function(t,e,n){var i=this._resize;function r(o){Ti(o)&&i.activate(o,t,n)}lt.bind(e,"mousedown",r),lt.bind(e,"touchstart",r)},Mi.prototype._createResizer=function(t,e,n,i){var r=this._getResizersParent(),o=function(u){var p={x:0,y:0};return u.indexOf("e")!==-1?p.x=6:u.indexOf("w")!==-1&&(p.x=jy),u.indexOf("s")!==-1?p.y=6:u.indexOf("n")!==-1&&(p.y=jy),p}(i),a=st("g");St(a).add(sa),St(a).add(sa+"-"+t.id),St(a).add(sa+"-"+i),pt(r,a);var c=st("rect");W(c,{x:-2+o.x,y:-2+o.y,width:4,height:4}),St(c).add(sa+"-visual"),pt(a,c);var l=st("rect");return W(l,{x:-10+o.x,y:-10+o.y,width:20,height:20}),St(l).add(sa+"-hit"),pt(a,l),vu(a,e,n),a},Mi.prototype.createResizer=function(t,e){var n=Iy(t,e),i=this._createResizer(t,n.x,n.y,e);this.makeDraggable(t,i,e)},Mi.prototype.addResizer=function(t){var e=this;this._resize.canResize({shape:t})&&F(q_,function(n){e.createResizer(t,n)})},Mi.prototype.removeResizers=function(){tm(this._getResizersParent())},Mi.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},Mi.$inject=["eventBus","canvas","selection","resize"];const Ly={__depends__:[On,Kn,Qo],__init__:["resize","resizePreview","resizeHandles"],resize:["type",aa],resizePreview:["type",Oy],resizeHandles:["type",Mi]};function gp(t,e){var n=e.create("bpmn:CategoryValue"),i=e.create("bpmn:Category",{categoryValue:[n]});return Xt(t.get("rootElements"),i),rt(i).$parent=t,rt(n).$parent=i,n}function ca(t,e,n,i,r,o,a){function c(l,u){(u||kt(l,["bpmn:Task","bpmn:TextAnnotation"])||bp(l))&&i.activate(l)}this._bpmnFactory=e,this._canvas=n,this._modeling=r,this._textRenderer=a,i.registerProvider(this),t.on("element.dblclick",function(l){c(l.element,!0)}),t.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open"],function(l){i.isActive()&&i.complete()}),t.on(["commandStack.changed"],function(l){i.isActive()&&i.cancel()}),t.on("directEditing.activate",function(l){o.removeResizers()}),t.on("create.end",500,function(l){var u=l.context,p=u.shape,h=l.context.canExecute;l.isTouch||h&&(u.hints&&u.hints.createElementsBehavior===!1||c(p))}),t.on("autoPlace.end",500,function(l){c(l.shape)})}function bp(t){return A(t,"bpmn:SubProcess")&&!It(t)}ca.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"],ca.prototype.activate=function(t){var e=vn(t);if(e!==void 0){var n={text:e};$(n,this.getEditingBBox(t));var i={};return(kt(t,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||bp(t))&&$(i,{centerVertically:!0}),Kr(t)&&$(i,{autoResize:!0}),A(t,"bpmn:TextAnnotation")&&$(i,{resizable:!0,autoResize:!0}),$(n,{options:i}),n}},ca.prototype.getEditingBBox=function(t){var e=this._canvas,n=t.label||t,i=e.getAbsoluteBBox(n),r=i.x+i.width/2,o=i.y+i.height/2,a={x:i.x,y:i.y},c=e.zoom(),l=this._textRenderer.getDefaultStyle(),u=this._textRenderer.getExternalStyle(),p=u.fontSize*c,h=u.lineHeight,v=l.fontSize*c,f=l.lineHeight,y={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};(A(t,"bpmn:Lane")||function(D){return A(D,"bpmn:Participant")&&It(D)}(t))&&($(a,{width:i.height,height:30*c,x:i.x-i.height/2+15*c,y:o-30*c/2}),$(y,{fontSize:v+"px",lineHeight:f,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px",transform:"rotate(-90deg)"})),(kt(t,["bpmn:Task","bpmn:CallActivity"])||function(D){return A(D,"bpmn:Participant")&&!It(D)}(t)||bp(t))&&($(a,{width:i.width,height:i.height}),$(y,{fontSize:v+"px",lineHeight:f,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px"})),function(D){return A(D,"bpmn:SubProcess")&&It(D)}(t)&&($(a,{width:i.width,x:i.x}),$(y,{fontSize:v+"px",lineHeight:f,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px"}));var b=90*c,w=7*c,g=4*c;if(n.labelTarget&&($(a,{width:b,height:i.height+w+g,x:r-b/2,y:i.y-w}),$(y,{fontSize:p+"px",lineHeight:h,paddingTop:w+"px",paddingBottom:g+"px"})),Kr(n)&&!Ss(n)&&!xe(n)){var _=Cs(t),E=e.getAbsoluteBBox({x:_.x,y:_.y,width:0,height:0}),S=p+w+g;$(a,{width:b,height:S,x:E.x-b/2,y:E.y-S/2}),$(y,{fontSize:p+"px",lineHeight:h,paddingTop:w+"px",paddingBottom:g+"px"})}return A(t,"bpmn:TextAnnotation")&&($(a,{width:i.width,height:i.height,minWidth:30*c,minHeight:10*c}),$(y,{textAlign:"left",paddingTop:5*c+"px",paddingBottom:7*c+"px",paddingLeft:7*c+"px",paddingRight:5*c+"px",fontSize:v+"px",lineHeight:f})),{bounds:a,style:y}},ca.prototype.update=function(t,e,n,i){var r,o,a;if(A(t,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(t),r={x:t.x,y:t.y,width:t.width/o.width*i.width,height:t.height/o.height*i.height}),A(t,"bpmn:Group")&&!rt(t).categoryValueRef){var c=gp(rt(this._canvas.getRootElement()).$parent,this._bpmnFactory);rt(t).categoryValueRef=c}(a=e)&&a.trim()||(e=null),this._modeling.updateLabel(t,e,r)};var Vy="djs-element-hidden",Fy="djs-label-hidden";function zy(t,e,n,i){var r,o,a,c=this,l=e.getDefaultLayer();t.on("directEditing.activate",function(u){var p=u.active;if(A(r=p.element.label||p.element,"bpmn:TextAnnotation")){o=e.getAbsoluteBBox(r),a=st("g");var h=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:r.width,containerHeight:r.height,position:{mx:0,my:0}}),v=c.path=st("path");W(v,{d:h,strokeWidth:2,stroke:W_(r)}),pt(a,v),pt(l,a),je(a,r.x,r.y)}A(r,"bpmn:TextAnnotation")||r.labelTarget?e.addMarker(r,Vy):(A(r,"bpmn:Task")||A(r,"bpmn:CallActivity")||A(r,"bpmn:SubProcess")||A(r,"bpmn:Participant"))&&e.addMarker(r,Fy)}),t.on("directEditing.resize",function(u){if(A(r,"bpmn:TextAnnotation")){var p=u.height,h=u.dy,v=Math.max(r.height/o.height*(p+h),0),f=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:r.width,containerHeight:v,position:{mx:0,my:0}});W(c.path,{d:f})}}),t.on(["directEditing.complete","directEditing.cancel"],function(u){var p=u.active;p&&(e.removeMarker(p.element.label||p.element,Vy),e.removeMarker(r,Fy)),r=void 0,o=void 0,a&&(Zt(a),a=void 0)})}function W_(t,e){return rt(t).di.get("stroke")||e||"black"}zy.$inject=["eventBus","canvas","elementRegistry","pathMap"];const X_={__depends__:[Ny,Ly,Wv],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",ca],labelEditingPreview:["type",zy]};var xp=["top","bottom","left","right"],ac=10;function Ep(t,e){function n(i){if(Ss(i)){var r=function(o){var a=gt(o.label),c=gt(o),l=$y(c,a);if(u=l,xp.indexOf(u)!==-1){var u,p=function(f){var y=gt(f),b=[].concat(f.incoming.map(function(w){return w.waypoints[w.waypoints.length-2]}),f.outgoing.map(function(w){return w.waypoints[1]})).map(function(w){return $y(y,w)});return b}(o);if(o.host){var h=function(f){var y,b=f.host,w=gt(f),g=ye(w,b);y=g.indexOf("-")>=0?g.split("-"):[g];var _=xp.filter(function(E){return y.indexOf(E)===-1});return _}(o);p=p.concat(h)}var v=xp.filter(function(f){return p.indexOf(f)===-1});if(v.indexOf(l)===-1)return v[0]}}(i);r&&function(o,a){var c=gt(o),l=o.label,u=gt(l);if(l.parent){var p,h=ct(o);switch(a){case"top":p={x:c.x,y:h.top-ac-l.height/2};break;case"left":p={x:h.left-ac-l.width/2,y:c.y};break;case"bottom":p={x:c.x,y:h.bottom+ac+l.height/2};break;case"right":p={x:h.right+ac+l.width/2,y:c.y}}var v=Dn(p,u);e.moveShape(l,v)}}(i,r)}}nt.call(this,t),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(i){var r=i.context,o=r.connection,a=o.source,c=o.target;(r.hints||{}).createElementsBehavior!==!1&&(n(a),n(c))}),this.postExecuted(["label.create"],function(i){var r=i.context,o=r.shape;(r.hints||{}).createElementsBehavior!==!1&&n(o.labelTarget)}),this.postExecuted(["elements.create"],function(i){var r=i.context,o=r.elements;(r.hints||{}).createElementsBehavior!==!1&&o.forEach(function(a){n(a)})})}function $y(t,e){return ye(e,t,5)}function wp(t,e,n){nt.call(this,t),this.preExecute("shape.append",function(i){var r=i.source,o=i.shape;i.position||(A(o,"bpmn:TextAnnotation")?i.position={x:r.x+r.width/2+75,y:r.y-50-o.height/2}:i.position={x:r.x+r.width+80+o.width/2,y:r.y+r.height/2})},!0)}function _p(t,e){t.invoke(nt,this),this.postExecute("shape.move",function(n){var i=n.newParent,r=n.shape;F(Et(r.incoming.concat(r.outgoing),function(o){return A(o,"bpmn:Association")}),function(o){e.moveConnection(o,{x:0,y:0},i)})},!0)}at(Ep,nt),Ep.$inject=["eventBus","modeling"],at(wp,nt),wp.$inject=["eventBus","elementFactory","bpmnRules"],at(_p,nt),_p.$inject=["injector","modeling"];function sc(t,e){e.invoke(nt,this),this._bpmnReplace=t;var n=this;this.postExecuted("elements.create",500,function(i){var r=i.elements;(r=r.filter(function(o){return Gy(o,o.host)})).length===1&&r.map(function(o){return r.indexOf(o)}).forEach(function(o){var a=r[o];i.elements[o]=n.replaceShape(r[o],a)})},!0),this.preExecute("elements.move",500,function(i){var r=i.shapes,o=i.newHost;if(r.length===1){var a=r[0];Gy(a,o)&&(i.shapes=[n.replaceShape(a,o)])}},!0)}function Gy(t,e){return!xe(t)&&kt(t,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!e}sc.$inject=["bpmnReplace","injector"],at(sc,nt),sc.prototype.replaceShape=function(t,e){var n,i=(n=rt(t).eventDefinitions)&&n[0],r={type:"bpmn:BoundaryEvent",host:e};return i&&(r.eventDefinitionType=i.$type),this._bpmnReplace.replaceElement(t,r,{layoutConnection:!1})};function Sp(t,e,n){function i(r){return Et(r.attachers,function(o){return A(o,"bpmn:BoundaryEvent")})}nt.call(this,t),this.postExecute("connection.create",function(r){var o=r.context.source,a=r.context.target,c=i(a);A(o,"bpmn:EventBasedGateway")&&A(a,"bpmn:ReceiveTask")&&c.length>0&&n.removeElements(c)}),this.postExecute("connection.reconnect",function(r){var o=r.context.oldSource,a=r.context.newSource;A(o,"bpmn:Gateway")&&A(a,"bpmn:EventBasedGateway")&&F(a.outgoing,function(c){var l=c.target,u=i(l);A(l,"bpmn:ReceiveTask")&&u.length>0&&n.removeElements(u)})}),t.on("moddleCopy.canCopyProperty",2e3,function(r){var o=r.parent,a=r.property,c=r.propertyName,l=e.getPropertyDescriptor(o,c);l&&l.isReference&&A(a,"bpmn:RootElement")&&o.set(c,a)})}Sp.$inject=["eventBus","moddle","modeling"],at(Sp,nt);function Cp(t,e,n,i,r){function o(u){return kt(u,["bpmn:ReceiveTask","bpmn:SendTask"])||function(p,h){return _t(h)||(h=[h]),Wi(h,function(v){return Es(p,v)})}(u,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function a(u){return!!jt(t.getDefinitions().get("rootElements"),hn({id:u.id}))}function c(u){return A(u,"bpmn:ErrorEventDefinition")?"errorRef":A(u,"bpmn:EscalationEventDefinition")?"escalationRef":A(u,"bpmn:MessageEventDefinition")?"messageRef":A(u,"bpmn:SignalEventDefinition")?"signalRef":void 0}function l(u){if(kt(u,["bpmn:ReceiveTask","bpmn:SendTask"]))return u.get("messageRef");var p=u.get("eventDefinitions")[0];return p.get(c(p))}n.invoke(nt,this),this.executed("shape.create",function(u){var p=u.shape;if(o(p)){var h=l(rt(p));h&&!a(h)&&(Xt(t.getDefinitions().get("rootElements"),h),u.addedRootElement=h)}},!0),this.reverted("shape.create",function(u){var p=u.addedRootElement;p&&Wt(t.getDefinitions().get("rootElements"),p)},!0),e.on("copyPaste.copyElement",function(u){var p=u.descriptor,h=u.element;if(o(h)){var v=l(rt(h));v&&(p.referencedRootElement=v)}}),e.on("copyPaste.pasteElement",500,function(u){var p=u.descriptor,h=p.businessObject;if(o(h)){var v=p.referencedRootElement;v&&(a(v)||(v=i.copyElement(v,r.create(v.$type))),function(f,y){if(kt(f,["bpmn:ReceiveTask","bpmn:SendTask"]))return f.set("messageRef",y);var b=f.get("eventDefinitions")[0];b.set(c(b),y)}(h,v))}})}function Tp(t){t.invoke(nt,this),this.preExecute("shape.create",1500,function(e){var n=e.context,i=n.parent,r=n.shape;A(i,"bpmn:Lane")&&!A(r,"bpmn:Lane")&&(n.parent=Is(i,"bpmn:Participant"))})}Cp.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"],at(Cp,nt),Tp.$inject=["injector"],at(Tp,nt);var cc=1500;function Uy(t,e,n){e.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],cc,function(i){var r=i.context.shape||i.shape,o=i.hover;A(o,"bpmn:Lane")&&!kt(r,["bpmn:Lane","bpmn:Participant"])&&(i.hover=xn(o),i.hoverGfx=t.getGraphics(i.hover));var a=n.getRootElement();o!==a&&(r.labelTarget||A(r,"bpmn:Group"))&&(i.hover=a,i.hoverGfx=t.getGraphics(i.hover))}),e.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],cc,function(i){var r=i.hover;A(r,"bpmn:Lane")&&(i.hover=xn(r)||r,i.hoverGfx=t.getGraphics(i.hover))}),e.on(["bendpoint.move.hover"],cc,function(i){var r=i.context,o=i.hover,a=r.type;A(o,"bpmn:Lane")&&/reconnect/.test(a)&&(i.hover=xn(o)||o,i.hoverGfx=t.getGraphics(i.hover))}),e.on(["connect.start"],cc,function(i){var r=i.context,o=r.start;A(o,"bpmn:Lane")&&(r.start=xn(o)||o)}),e.on("shape.move.start",2e3,function(i){var r=i.shape;A(r,"bpmn:Lane")&&(i.shape=xn(r)||r)})}function Ap(t,e,n){nt.call(this,t),this.preExecute("shape.create",function(i){var r=i.context.shape;if(A(r,"bpmn:DataObjectReference")&&r.type!=="label"){var o=e.create("bpmn:DataObject");r.businessObject.dataObjectRef=o}})}Uy.$inject=["elementRegistry","eventBus","canvas"],Ap.$inject=["eventBus","bpmnFactory","moddle"],at(Ap,nt);var Hy=20,qy=20,lc=2e3;function kp(t,e,n){function i(r){var o,a=r.parent,c=t.getRootElement();A(c,"bpmn:Collaboration")?o=c:(o=n.makeCollaboration(),r.process=a),r.parent=o}nt.call(this,e),e.on(["create.start","shape.move.start"],lc,function(r){var o=r.context,a=o.shape,c=t.getRootElement();if(A(a,"bpmn:Participant")&&A(c,"bpmn:Process")&&c.children.length){var l=c.children.filter(function(h){return!A(h,"bpmn:Group")&&!xe(h)&&!function(v){return!!v.waypoints}(h)});if(l.length){var u=ve(l),p=function(h,v){v={width:v.width+40+30,height:v.height+40};var f=Math.max(h.width,v.width),y=Math.max(h.height,v.height);return{x:-f/2,y:-y/2,width:f,height:y}}(a,u);$(a,p),o.createConstraints=function(h,v){return v=ct(v),{bottom:v.top+h.height/2-qy,left:v.right-h.width/2+Hy,top:v.bottom-h.height/2+qy,right:v.left+h.width/2-Hy-30}}(a,u)}}}),e.on("create.start",lc,function(r){var o=r.context.shape,a=t.getRootElement(),c=t.getGraphics(a);function l(u){u.element=a,u.gfx=c}A(o,"bpmn:Participant")&&A(a,"bpmn:Process")&&(e.on("element.hover",lc,l),e.once("create.cleanup",function(){e.off("element.hover",l)}))}),this.preExecute("shape.create",function(r){var o=r.parent;A(r.shape,"bpmn:Participant")&&A(o,"bpmn:Process")&&i(r)},!0),this.execute("shape.create",function(r){var o=r.process,a=r.shape;o&&(r.oldProcessRef=a.businessObject.processRef,a.businessObject.processRef=o.businessObject)},!0),this.revert("shape.create",function(r){var o=r.process,a=r.shape;o&&(a.businessObject.processRef=r.oldProcessRef)},!0),this.postExecute("shape.create",function(r){var o=r.process,a=r.shape;if(o){var c=o.children.slice();n.moveElements(c,{x:0,y:0},a)}},!0),this.preExecute("elements.create",lc,function(r){var o,a=r.elements,c=r.parent;uc(a)&&A(c,"bpmn:Process")&&(i(r),o=uc(a),r.oldProcessRef=o.businessObject.processRef,o.businessObject.processRef=c.businessObject)},!0),this.revert("elements.create",function(r){var o=r.elements;r.process&&(uc(o).businessObject.processRef=r.oldProcessRef)},!0),this.postExecute("elements.create",function(r){var o,a=r.elements,c=r.process;if(c){o=uc(a);var l=c.children.slice();n.moveElements(l,{x:0,y:0},o)}},!0)}function uc(t){return jt(t,function(e){return A(e,"bpmn:Participant")})}kp.$inject=["canvas","eventBus","modeling"],at(kp,nt);var Wy="__targetRef_placeholder";function Pp(t,e){function n(o,a){var c=o.get("properties"),l=jt(c,function(u){return u.name===Wy});return!l&&a&&Xt(c,l=e.create("bpmn:Property",{name:Wy})),l}function i(o,a){var c=n(o);c&&(function(l,u,p){return jt(l.get("dataInputAssociations"),function(h){return h!==p&&h.targetRef===u})}(o,c,a)||Wt(o.get("properties"),c))}function r(o){var a,c=o.context,l=c.connection,u=l.businessObject,p=l.target,h=p&&p.businessObject,v=c.newTarget,f=v&&v.businessObject,y=c.oldTarget||c.target,b=y&&y.businessObject,w=l.businessObject;b&&b!==h&&i(b,u),f&&f!==h&&i(f,u),h?(a=n(h,!0),w.targetRef=a):w.targetRef=null}nt.call(this,t),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],Xy(r)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],Xy(r))}function Xy(t){return function(e){if(A(e.context.connection,"bpmn:DataInputAssociation"))return t(e)}}function pc(t){this._bpmnUpdater=t}function Mp(t,e,n,i){function r(a){return a.children.filter(function(c){return A(c,"bpmn:DataStoreReference")&&!c.labelTarget})}function o(a,c){var l=a.businessObject||a;if(c=c||n.filter(function(p){return A(p,"bpmn:Participant")&&rt(p).processRef})[0]){var u=c.businessObject||c;e.execute("dataStore.updateContainment",{dataStoreBo:l,newSemanticParent:u.processRef||u,newDiParent:u.di})}}nt.call(this,i),e.registerHandler("dataStore.updateContainment",pc),this.preExecute("shape.create",function(a){var c=a.context,l=c.shape;A(l,"bpmn:DataStoreReference")&&l.type!=="label"&&(c.hints||(c.hints={}),c.hints.autoResize=!1)}),this.preExecute("elements.move",function(a){var c=a.context,l=c.shapes;l.filter(function(u){return A(u,"bpmn:DataStoreReference")}).length&&(c.hints||(c.hints={}),c.hints.autoResize=l.filter(function(u){return!A(u,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(a){var c=a.context.shape,l=c.parent;A(c,"bpmn:DataStoreReference")&&c.type!=="label"&&A(l,"bpmn:Collaboration")&&o(c)}),this.postExecute("shape.move",function(a){var c=a.context,l=c.shape,u=c.oldParent,p=l.parent;A(u,"bpmn:Collaboration")||A(l,"bpmn:DataStoreReference")&&l.type!=="label"&&A(p,"bpmn:Collaboration")&&o(l,A(u,"bpmn:Participant")?u:function(h,v){for(;h.parent;){if(A(h.parent,v))return h.parent;h=h.parent}}(u,"bpmn:Participant"))}),this.postExecute("shape.delete",function(a){var c=a.context.shape,l=t.getRootElement();kt(c,["bpmn:Participant","bpmn:SubProcess"])&&A(l,"bpmn:Collaboration")&&r(l).filter(function(u){return function(p,h){for(var v=p.businessObject||p,f=h.businessObject||h;v.$parent;){if(v.$parent===f.processRef||f)return!0;v=v.$parent}return!1}(u,c)}).forEach(function(u){o(u)})}),this.postExecute("canvas.updateRoot",function(a){var c=a.context,l=c.oldRoot,u=c.newRoot;r(l).forEach(function(p){A(u,"bpmn:Process")&&o(p,u)})})}Pp.$inject=["eventBus","bpmnFactory"],at(Pp,nt),pc.$inject=["bpmnUpdater"],pc.prototype.execute=function(t){var e=t.dataStoreBo,n=t.newSemanticParent,i=t.newDiParent;t.oldSemanticParent=e.$parent,t.oldDiParent=e.di.$parent,this._bpmnUpdater.updateSemanticParent(e,n),this._bpmnUpdater.updateDiParent(e.di,i)},pc.prototype.revert=function(t){var e=t.dataStoreBo,n=t.oldSemanticParent,i=t.oldDiParent;this._bpmnUpdater.updateSemanticParent(e,n),this._bpmnUpdater.updateDiParent(e.di,i)},Mp.$inject=["canvas","commandStack","elementRegistry","eventBus"],at(Mp,nt);function Rp(t,e,n){nt.call(this,t),this.postExecuted("shape.delete",500,function(i){var r=i.context,o=r.hints,a=r.shape,c=r.oldParent;A(a,"bpmn:Lane")&&(o&&o.nested||function(l,u){var p,h,v,f=ki(u),y=[],b=[];Ki(f,function(w){return w.y>l.y?b.push(w):y.push(w),w.children}),f.length&&(p=b.length&&y.length?l.height/2:l.height,y.length&&(h=n.calculateAdjustments(y,"y",p,l.y-10),n.makeSpace(h.movingShapes,h.resizingShapes,{x:0,y:p},"s")),b.length&&(v=n.calculateAdjustments(b,"y",-p,l.y+l.height+10),n.makeSpace(v.movingShapes,v.resizingShapes,{x:0,y:-p},"n")))}(a,c))})}Rp.$inject=["eventBus","modeling","spaceTool"],at(Rp,nt);function dc(t,e){e.invoke(nt,this),this._bpmnReplace=t;var n=this;this.postExecuted("elements.create",500,function(i){var r=i.elements;r.filter(function(o){return Ky(o,o.host)}).map(function(o){return r.indexOf(o)}).forEach(function(o){i.elements[o]=n.replaceShape(r[o])})},!0),this.preExecute("elements.move",500,function(i){var r=i.shapes,o=i.newHost;r.forEach(function(a,c){var l,u=a.host;Ky(a,(l=u,r.indexOf(l)!==-1?u:o))&&(r[c]=n.replaceShape(a))})},!0)}function Ky(t,e){return!xe(t)&&A(t,"bpmn:BoundaryEvent")&&!e}function Np(t,e,n){function i(r,o,a){var c,l,u,p,h,v,f,y,b=o.waypoints,w=r.outgoing.slice(),g=r.incoming.slice(),_=Xu(b,y=mt(a.width)?gt(a):a);if(_){if(c=b.slice(0,_.index),l=b.slice(_.index+(_.bendpoint?1:0)),!c.length||!l.length)return;u=_.bendpoint?b[_.index]:y,c.length!==1&&Yy(r,c[c.length-1])||c.push(Jy(u)),l.length!==1&&Yy(r,l[0])||l.unshift(Jy(u))}p=o.source,h=o.target,e.canConnect(p,r,o)&&(n.reconnectEnd(o,r,c||y),v=o),e.canConnect(r,h,o)&&(v?f=n.connect(r,h,{type:o.type,waypoints:l}):(n.reconnectStart(o,r,l||y),f=o));var E=[].concat(v&&Et(g,function(S){return S.source===v.source})||[],f&&Et(w,function(S){return S.target===f.target})||[]);E.length&&n.removeElements(E)}nt.call(this,t),this.preExecute("elements.move",function(r){var o=r.newParent,a=r.shapes,c=r.delta,l=a[0];if(l&&o){o&&o.waypoints&&(r.newParent=o=o.parent);var u=gt(l),p={x:u.x+c.x,y:u.y+c.y},h=jt(o.children,function(v){return e.canInsert(a,v)&&Xu(v.waypoints,p)});h&&(r.targetFlow=h,r.position=p)}},!0),this.postExecuted("elements.move",function(r){var o=r.shapes,a=r.targetFlow,c=r.position;a&&i(o[0],a,c)},!0),this.preExecute("shape.create",function(r){var o=r.parent,a=r.shape;e.canInsert(a,o)&&(r.targetFlow=o,r.parent=o.parent)},!0),this.postExecuted("shape.create",function(r){var o=r.shape,a=r.targetFlow,c=r.position;a&&i(o,a,c)},!0)}function Yy(t,e){var n=e.x,i=e.y;return n>=t.x&&n<=t.x+t.width&&i>=t.y&&i<=t.y+t.height}function Jy(t){return $({},t)}function Ip(t,e){nt.call(this,t),this.preExecuted("connection.create",function(n){var i=n.context,r=i.source,o=i.target,a=o.incoming.slice();i.hints&&i.hints.createElementsBehavior===!1||A(r,"bpmn:EventBasedGateway")&&o.incoming.length&&a.filter(Dp).forEach(function(c){e.removeConnection(c)})}),this.preExecuted("shape.replace",function(n){var i=n.context.newShape;A(i,"bpmn:EventBasedGateway")&&i.outgoing.filter(Dp).map(function(r){return r.target}).reduce(function(r,o){var a=o.incoming.filter(Dp);return r.concat(a)},[]).forEach(function(r){r.source!==i&&e.removeConnection(r)})})}function Dp(t){return A(t,"bpmn:SequenceFlow")}dc.$inject=["bpmnReplace","injector"],at(dc,nt),dc.prototype.replaceShape=function(t){var e,n,i=(n=rt(t).eventDefinitions)&&n[0];return e=i?{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:i.$type}:{type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(t,e,{layoutConnection:!1})},at(Np,nt),Np.$inject=["eventBus","bpmnRules","modeling"],Ip.$inject=["eventBus","modeling"],at(Ip,nt);function Bp(t,e,n,i,r,o){function a(){return rt(e.getRootElement()).$parent}function c(l){var u=rt(l).categoryValueRef;if(u){var p=u.$parent;u&&(Wt(p.categoryValue,u),p&&!p.categoryValue.length&&function(h){Wt(a().get("rootElements"),h)}(p))}}r.invoke(nt,this),this.executed("shape.delete",function(l){var u,p=l.context.shape;if(A(p,"bpmn:Group")){var h=rt(p).categoryValueRef,v=n.filter(function(f){return A(f,"bpmn:Group")});u=h,v.some(function(f){var y=rt(f);return y.categoryValueRef&&y.categoryValueRef===u})||c(p)}}),this.reverted("shape.delete",function(l){var u=l.context.shape;if(A(u,"bpmn:Group")){var p=rt(u).categoryValueRef,h=a(),v=p?p.$parent:null;Xt(v.get("categoryValue"),p),Xt(h.get("rootElements"),v)}}),this.execute("shape.create",function(l){var u=rt(l.context.shape);if(A(u,"bpmn:Group")&&!u.categoryValueRef){var p=gp(a(),t);u.categoryValueRef=p}}),this.revert("shape.create",function(l){var u=l.context.shape;A(u,"bpmn:Group")&&(c(u),delete rt(u).categoryValueRef)}),i.on("moddleCopy.canCopyProperty",2e3,function(l){var u,p=l.property;if(A(p,"bpmn:CategoryValue"))return u=gp(a(),t),o.copyElement(p,u)})}function Op(t,e,n,i){var r,o,a,c;return(r=(i.y-n.y)*(e.x-t.x)-(i.x-n.x)*(e.y-t.y))==0?null:(o=t.y-n.y,a=t.x-n.x,c=((i.x-n.x)*o-(i.y-n.y)*a)/r,{x:Math.round(t.x+c*(e.x-t.x)),y:Math.round(t.y+c*(e.y-t.y))})}function Zy(t){function e(n,i,r){var o,a={x:r.x,y:r.y-50},c={x:r.x-50,y:r.y},l=Op(n,i,r,a),u=Op(n,i,r,c);o=l&&u?Qy(l,r)>Qy(u,r)?u:l:l||u,n.original=o}t.on("bpmnElement.added",function(n){var i,r,o=n.element;o.waypoints&&(e((r=(i=o).waypoints)[0],r[1],gt(i.source)),e(r[r.length-1],r[r.length-2],gt(i.target)))})}function Qy(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function jp(t){nt.call(this,t);var e=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var i=rt(n.context.shape);kt(i,e)&&!i.di.get("isHorizontal")&&i.di.set("isHorizontal",!0)})}function tg(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function eg(t){return Math.atan((t[1].y-t[0].y)/(t[1].x-t[0].x))}function ng(t,e){var n=e[0],i=e[1],r={x:i.x-n.x,y:i.y-n.y},o=function(a,c,l){var u=[{n:a[0]-l[0],lambda:c[0]},{n:a[1]-l[1],lambda:c[1]}];return-(u[0].n*c[0]+u[1].n*c[1])/(u[0].lambda*c[0]+u[1].lambda*c[1])}([n.x,n.y],[r.x,r.y],[t.x,t.y]);return{x:n.x+o*r.x,y:n.y+o*r.y}}function K_(t,e){var n=ng(t,e);return tg({x:n.x-t.x,y:n.y-t.y})}function hc(t,e){return tg({x:t.x-e.x,y:t.y-e.y})}Bp.$inject=["bpmnFactory","canvas","elementRegistry","eventBus","injector","moddleCopy"],at(Bp,nt),Zy.$inject=["eventBus"],jp.$inject=["eventBus"],at(jp,nt);var ig=Math.sqrt,rg=Math.min,Y_=Math.max,og=Math.abs;function ag(t){return Math.pow(t,2)}function la(t,e){return ig(ag(t.x-e.x)+ag(t.y-e.y))}function J_(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,a=n.x-t.x,c=n.y-t.y,l=r*r+o*o,u=(r*a+o*c)/l,p=u*u-(a*a+c*c-i*i)/l;if(p<0&&p>-1e-6&&(p=0),p<0)return[];var h=ig(p),v=-u+h,f=-u-h,y={x:t.x-r*v,y:t.y-o*v};return p===0?[y]:[y,{x:t.x-r*f,y:t.y-o*f}].filter(function(b){return function(w,g,_){return sg(w.x,g.x,_.x)&&sg(w.y,g.y,_.y)}(b,t,e)})}function sg(t,e,n){return t>=rg(e,n)-mc&&t<=Y_(e,n)+mc}var mc=.1;function cg(t,e){return og(t.x-e.x)<=mc&&og(t.y-e.y)<=mc}function Z_(t,e,n,i){var r=0,o=0,a=function(M){return{x:M.x+M.width/2,y:M.y+M.height/2}}(t),c=function(M,N){var R,j,T,x,B,V,H,q,J,Q,it,ot,vt=0;for(vt=0;vt<N.length-1;vt++){if(cg(R=N[vt],j=N[vt+1])?V=[R]:(T=la(M,R),x=la(M,j),V=J_(R,j,M,rg(T,x))),V.length<1)throw new Error("expected between [1, 2] circle -> line intersections");V.length===1&&(H={type:"bendpoint",position:V[0],segmentIndex:vt,bendpointIndex:cg(R,V[0])?vt:vt+1}),V.length===2&&(it=V[0],ot=V[1],H={type:"segment",position:B={x:(it.x+ot.x)/2,y:(it.y+ot.y)/2},segmentIndex:vt,relativeLocation:la(R,B)/la(R,j)}),q=la(H.position,M),(!Q||J>q)&&(Q=H,J=q)}return Q}(a,n),l=c.segmentIndex,u=function(M,N,R,j){var T=R.segmentIndex,x=N.length-M.length;if(j.segmentMove){var B=j.segmentMove.segmentStartIndex,V=j.segmentMove.newSegmentStartIndex;return T===B?V:T>=V?T+x<V?V:T+x:T}if(j.bendpointMove){var H,q=j.bendpointMove.insert,J=j.bendpointMove.bendpointIndex;return x===0?T:(T>=J&&(H=q?T+1:T-1),T<J&&(H=T,q&&R.type!=="bendpoint"&&J-1===T&&lg(N,J)<R.relativeLocation&&H++),H)}return x===0?T:j.connectionStart?T===0?0:null:j.connectionEnd&&T===M.length-2?N.length-2:null}(n,e,c,i);if(u===null)return{x:r,y:o};if(u<0||u>e.length-2)return{x:r,y:o};var p,h,v=ug(n,l),f=ug(e,u),y=c.position,b=function(M,N){var R=hc(M[0],M[1]),j=hc(M[0],N);return R===0?0:j/R}(v,y),w=(p=f,h=eg(v),eg(p)-h);if(c.type==="bendpoint"){var g=e.length-n.length,_=c.bendpointIndex,E=n[_];if(e.indexOf(E)!==-1)return{x:r,y:o};if(g===0){var S=e[_];return{x:S.x-c.position.x,y:S.y-c.position.y}}g<0&&_!==0&&_<n.length-1&&(b=lg(n,_))}var D,s,d=(f[1].x-f[0].x)*b+f[0].x,m=(f[1].y-f[0].y)*b+f[0].y,C=(D={x:a.x-y.x,y:a.y-y.y},(s=w)?{x:Math.cos(s)*D.x-Math.sin(s)*D.y,y:Math.sin(s)*D.x+Math.cos(s)*D.y}:D);return Yi({x:r=d+C.x-a.x,y:o=m+C.y-a.y})}function lg(t,e){var n=hc(t[e-1],t[e]);return n/(n+hc(t[e],t[e+1]))}function ug(t,e){return[t[e],t[e+1]]}function ua(t,e,n){var i=Ho(e),r=Ho(n),o=Dn(t,i),a=o.x*(n.width/e.width),c=o.y*(n.height/e.height);return Yi({x:r.x+a,y:r.y+c})}function pg(t,e,n){var i=Ho(t),r=Ho(e),o=Ho(n),a=Dn(t,i),c=Dn(i,r),l=function(f,y,b){var w=ct(y),g=ct(b);if(function(s,d){return function(m,C){return m.right!==C.right&&m.left!==C.left}(s,d)||function(m,C){return m.top!==C.top&&m.bottom!==C.bottom}(s,d)}(w,g))return null;var _,E,S,D=ye(y,f);if(D==="top")_={x:0,y:g.bottom-w.bottom};else if(D==="bottom")_={x:0,y:g.top-w.top};else if(D==="right")_={x:g.left-w.left,y:0};else{if(D!=="left")return null;_={x:g.right-w.right,y:0}}return E={x:f.x+_.x,y:f.y+_.y},S=ye(b,E),S!==D?null:_}(i,e,n);if(l)return l;var u=c.x*(n.width/e.width),p=c.y*(n.height/e.height),h=o.x+u,v=o.y+p;return Yi({x:h+a.x-t.x,y:v+a.y-t.y})}var Q_={width:90,height:20},dg="name",hg="text";function Lp(t,e,n,i){nt.call(this,t),this.postExecute("element.updateProperties",function(r){var o=r.context,a=o.element,c=o.properties;if(dg in c&&e.updateLabel(a,c[dg]),hg in c&&A(a,"bpmn:TextAnnotation")){var l=i.getTextAnnotationBounds({x:a.x,y:a.y,width:a.width,height:a.height},c[hg]||"");e.updateLabel(a,c.text,l)}}),this.postExecute(["shape.create","connection.create"],function(r){var o=r.context;if((o.hints||{}).createElementsBehavior!==!1){var a=o.shape||o.connection,c=a.businessObject;if(!xe(a)&&Kr(a)&&vn(a)){var l=Cs(a),u=i.getExternalLabelBounds(Q_,vn(a));e.createLabel(a,l,{id:c.id+"_label",businessObject:c,width:u.width,height:u.height})}}}),this.postExecute("shape.delete",function(r){var o=r.context,a=o.labelTarget,c=o.hints||{};a&&c.unsetLabel!==!1&&e.updateLabel(a,null,null,{removeShape:!1})}),this.postExecute(["label.create"],function(r){var o,a=r.context.shape;a.labelTarget&&A(a.labelTarget||a,"bpmn:BaseElement")&&((o=a.businessObject.di).label||(o.label=n.create("bpmndi:BPMNLabel",{bounds:n.create("dc:Bounds")})),$(o.label.bounds,{x:a.x,y:a.y,width:a.width,height:a.height}))}),this.postExecute(["connection.layout","connection.updateWaypoints"],function(r){var o=r.context;if((o.hints||{}).labelBehavior!==!1){var a,c=o.connection.label;c&&c.parent&&(a=function(l){var u=l.context,p=u.connection,h=p.label,v=$({},u.hints),f=u.newWaypoints||p.waypoints,y=u.oldWaypoints;return v.startChanged===void 0&&(v.startChanged=!!v.connectionStart),v.endChanged===void 0&&(v.endChanged=!!v.connectionEnd),Z_(h,f,y,v)}(r),e.moveShape(c,a))}}),this.postExecute(["shape.replace"],function(r){var o=r.context,a=o.newShape,c=o.oldShape,l=rt(a);l&&Kr(l)&&c.label&&a.label&&(a.label.x=c.label.x,a.label.y=c.label.y)}),this.postExecute("shape.resize",function(r){var o,a=r.context,c=a.shape,l=a.newBounds,u=a.oldBounds;if(Ss(c)){var p=c.label,h=t1(function(v,f){if(f.length){var y=function(b,w){var g=w.map(function(_){return{line:_,distance:K_(b,_)}});return dn(g,"distance")[0].line}(v,f);return ng(v,y)}}(gt(p),[[{x:(o=u).x,y:o.y},{x:o.x+(o.width||0),y:o.y}],[{x:o.x+(o.width||0),y:o.y},{x:o.x+(o.width||0),y:o.y+(o.height||0)}],[{x:o.x,y:o.y+(o.height||0)},{x:o.x+(o.width||0),y:o.y+(o.height||0)}],[{x:o.x,y:o.y},{x:o.x,y:o.y+(o.height||0)}]]),u,l);e.moveShape(p,h)}})}function t1(t,e,n){return Yi(Dn(ua(t,e,n),t))}function fc(t,e,n){var i=yc(t),r=fg(i,e),o=i[0];return r.length?r[r.length-1]:ua(o.original||o,n,e)}function vc(t,e,n){var i=yc(t),r=fg(i,e),o=i[i.length-1];return r.length?r[0]:ua(o.original||o,n,e)}function Vp(t,e,n){var i=yc(t),r=mg(e,n),o=i[0];return ua(o.original||o,r,e)}function Fp(t,e,n){var i=yc(t),r=mg(e,n),o=i[i.length-1];return ua(o.original||o,r,e)}function mg(t,e){return{x:t.x-e.x,y:t.y-e.y,width:t.width,height:t.height}}function yc(t){var e=t.waypoints;if(!e.length)throw new Error("connection#"+t.id+": no waypoints");return e}function fg(t,e){return Et(pe(t,e1),function(n){return function(i,r){return ye(r,i,1)==="intersect"}(n,e)})}function e1(t){return t.original||t}function zp(t,e){nt.call(this,t),this.postExecute("shape.replace",function(n){var i=n.oldShape,r=n.newShape;if(function(p,h){return A(p,"bpmn:Participant")&&It(p)&&A(h,"bpmn:Participant")&&!It(h)}(i,r)){var o,a,c,l,u=(a=ns([o=i],!1),c=[],l=[],a.forEach(function(p){p!==o&&(p.incoming.forEach(function(h){A(h,"bpmn:MessageFlow")&&c.push(h)}),p.outgoing.forEach(function(h){A(h,"bpmn:MessageFlow")&&l.push(h)}))},[]),{incoming:c,outgoing:l});u.incoming.forEach(function(p){var h=vc(p,r,i);e.reconnectEnd(p,r,h)}),u.outgoing.forEach(function(p){var h=fc(p,r,i);e.reconnectStart(p,r,h)})}},!0)}at(Lp,nt),Lp.$inject=["eventBus","modeling","bpmnFactory","textRenderer"],zp.$inject=["eventBus","modeling"],at(zp,nt);function vg(t,e,n){t.on(["shape.move.rejected","create.rejected"],function(i){var r,o,a=i.context,c=a.shape;A(a.target,"bpmn:Collaboration")&&A(c,"bpmn:FlowNode")&&(r=i,o=n("flow elements must be children of pools/participants"),e.add({position:{x:r.x+5,y:r.y+5},type:"error",timeout:2e3,html:"<div>"+o+"</div>"}))})}function $p(t,e,n,i){nt.call(this,t);var r=i.get("dragging",!1);function o(a){var c,l,u=a.source,p=a.target;a.parent&&(A(a,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(u,p)||(l=!0),n.canConnectMessageFlow(u,p)&&(c="bpmn:MessageFlow")),A(a,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(u,p)||(l=!0),n.canConnectSequenceFlow(u,p)&&(c="bpmn:SequenceFlow")),A(a,"bpmn:Association")&&!n.canConnectAssociation(u,p)&&(l=!0),l&&e.removeConnection(a),c&&e.connect(u,p,{type:c,waypoints:a.waypoints.slice()}))}this.postExecuted("elements.move",function(a){F(a.closure.allConnections,o)},!0),this.preExecute("connection.reconnect",function(a){var c,l,u=a.context,p=u.connection,h=u.newSource||p.source,v=u.newTarget||p.target;(c=n.canConnect(h,v))&&c.type!==p.type&&(l=e.connect(h,v,{type:c.type,waypoints:p.waypoints.slice()}),e.removeConnection(p),u.connection=l,r&&function(f,y){var b,w=r.context(),g=w&&w.payload.previousSelection;!g||!g.length||(b=g.indexOf(f),b!==-1&&g.splice(b,1,y))}(p,l))}),this.postExecuted("element.updateProperties",function(a){var c,l=a.context,u=l.properties,p=l.element,h=p.businessObject;u.default&&(c=jt(p.outgoing,hn({id:p.businessObject.default.id})))&&e.updateProperties(c,{conditionExpression:void 0}),u.conditionExpression&&h.sourceRef.default===h&&e.updateProperties(p.source,{default:void 0})})}function Gp(t,e){nt.call(this,t),this.preExecute("shape.delete",function(n){var i=n.shape,r=i.parent;A(i,"bpmn:Participant")&&(n.collaborationRoot=r)},!0),this.postExecute("shape.delete",function(n){var i=n.collaborationRoot;i&&!i.businessObject.participants.length&&e.makeProcess()},!0)}function gc(t,e,n,i,r,o){i.invoke(nt,this),this._bpmnReplace=t,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.create"],500,function(a){var c=a.context,l=c.parent,u=c.elements,p=e.canReplace(u,l);p&&this.replaceElements(u,p.replacements)},this),this.postExecuted(["elements.move"],500,function(a){var c=a.context,l=c.newParent,u=c.newHost,p=[];F(c.closure.topLevel,function(v){p=Ve(v)?p.concat(v.children):p.concat(v)}),p.length===1&&u&&(l=u);var h=e.canReplace(p,l);h&&this.replaceElements(p,h.replacements,u)},this),this.postExecute(["shape.replace"],1500,function(a){var c,l=a.context,u=l.oldShape,p=l.newShape,h=u.attachers;h&&h.length&&(c=e.canReplace(h,p),this.replaceElements(h,c.replacements))},this),this.postExecuted(["shape.replace"],1500,function(a){var c=a.context,l=c.oldShape,u=c.newShape;r.unclaimId(l.businessObject.id,l.businessObject),r.updateProperties(u,{id:l.id})})}vg.$inject=["eventBus","tooltips","translate"],at($p,nt),$p.$inject=["eventBus","modeling","bpmnRules","injector"],Gp.$inject=["eventBus","modeling"],at(Gp,nt),at(gc,nt),gc.prototype.replaceElements=function(t,e){var n=this._elementRegistry,i=this._bpmnReplace,r=this._selection;F(e,function(o){var a={type:o.newElementType},c=n.get(o.oldElementId),l=t.indexOf(c);t[l]=i.replaceElement(c,a,{select:!1})}),e&&r.select(t)},gc.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var yg=300,pa=60,da={width:300,height:150},gg={width:140,height:120},bg={width:50,height:30};function xg(t){t.on("resize.start",1500,function(e){var n=e.context,i=n.shape,r=n.direction,o=n.balanced;(A(i,"bpmn:Lane")||A(i,"bpmn:Participant"))&&(n.resizeConstraints=function(a,c,l){var u=xn(a),p=!0,h=!0,v=ec(u,[u]),f=ct(a),y={},b={};return/e/.test(c)?b.right=f.left+yg:/w/.test(c)&&(b.left=f.right-yg),v.forEach(function(w){var g=ct(w);/n/.test(c)&&(g.top<f.top-10&&(p=!1),l&&bc(f.top-g.bottom)<10&&Ec(y,"top",g.top+pa),bc(f.top-g.top)<5&&xc(b,"top",g.bottom-pa)),/s/.test(c)&&(g.bottom>f.bottom+10&&(h=!1),l&&bc(f.bottom-g.top)<10&&xc(y,"bottom",g.bottom-pa),bc(f.bottom-g.bottom)<5&&Ec(b,"bottom",g.top+pa))}),u.children.filter(function(w){return!w.hidden&&!w.waypoints&&(A(w,"bpmn:FlowElement")||A(w,"bpmn:Artifact"))}).forEach(function(w){var g=ct(w);p&&/n/.test(c)&&xc(b,"top",g.top-a1),/e/.test(c)&&Ec(b,"right",g.right+r1),h&&/s/.test(c)&&Ec(b,"bottom",g.bottom+s1),/w/.test(c)&&xc(b,"left",g.left-o1)}),{min:b,max:y}}(i,r,o)),A(i,"bpmn:Participant")&&(n.minDimensions=da),A(i,"bpmn:SubProcess")&&It(i)&&(n.minDimensions=gg),A(i,"bpmn:TextAnnotation")&&(n.minDimensions=bg)})}xg.$inject=["eventBus"];var bc=Math.abs,n1=Math.min,i1=Math.max;function Eg(t,e,n,i){var r=t[e];t[e]=r===void 0?n:i(n,r)}function xc(t,e,n){return Eg(t,e,n,n1)}function Ec(t,e,n){return Eg(t,e,n,i1)}var r1=20,o1=50,a1=20,s1=20;function wg(t,e){t.on("resize.start",1501,function(n){var i=n.context,r=i.shape;(A(r,"bpmn:Lane")||A(r,"bpmn:Participant"))&&(i.balanced=!Jr(n))}),t.on("resize.end",1001,function(n){var i=n.context,r=i.shape,o=i.canExecute,a=i.newBounds;if(A(r,"bpmn:Lane")||A(r,"bpmn:Participant"))return o&&(a=Am(a),e.resizeLane(r,a,i.balanced)),!1})}function Up(t,e,n){nt.call(this,t),this.preExecute("shape.delete",function(i){var r=i.context.shape;if(r.incoming.length===1&&r.outgoing.length===1){var o=r.incoming[0],a=r.outgoing[0];if(A(o,"bpmn:SequenceFlow")&&A(a,"bpmn:SequenceFlow")&&e.canConnect(o.source,a.target,o)){var c=function(l,u){var p=Op(ao(l[l.length-2]),ao(l[l.length-1]),ao(u[1]),ao(u[0]));return p?[].concat(l.slice(0,l.length-1),[p],u.slice(1)):[ao(l[0]),ao(u[u.length-1])]}(o.waypoints,a.waypoints);n.reconnectEnd(o,a.target,c)}}})}function ao(t){return t.original||t}wg.$inject=["eventBus","modeling"],at(Up,nt),Up.$inject=["eventBus","bpmnRules","modeling"];var c1=Math.max;function _g(t){t.on("spaceTool.getMinDimensions",function(e){var n=e.shapes,i=e.axis,r=e.start,o={};return F(n,function(a){var c=a.id;A(a,"bpmn:Participant")&&(function(l){return l==="x"}(i)?o[c]=da:o[c]={width:da.width,height:l1(a,r)}),A(a,"bpmn:SubProcess")&&It(a)&&(o[c]=gg),A(a,"bpmn:TextAnnotation")&&(o[c]=bg)}),o})}function l1(t,e){var n;return ki(t).length?(n=function(i,r){var o,a=ki(i);return o=Sg(a,r),i.height-o.height+pa}(t,e),c1(da.height,n)):da.height}function Sg(t,e){var n,i,r;for(n=0;n<t.length;n++)if(e>=(i=t[n]).y&&e<=i.y+i.height)return(r=ki(i)).length?Sg(r,e):i}function Hp(t,e){t.invoke(nt,this),this.postExecuted("shape.replace",function(n){var i=n.context.oldShape,r=n.context.newShape;if(A(r,"bpmn:SubProcess")&&A(i,"bpmn:Task")&&It(r)){var o,a={x:(o=r).x+o.width/6,y:o.y+o.height/2};e.createShape({type:"bpmn:StartEvent"},a,r)}})}_g.$inject=["eventBus"],Hp.$inject=["injector","modeling"],at(Hp,nt);function qp(t,e,n,i){nt.call(this,t),this.executed(["shape.toggleCollapse"],500,function(r){var o,a=r.context.shape;A(a,"bpmn:SubProcess")&&(a.collapsed?rt(a).di.isExpanded=!1:((o=a.children).length&&o.forEach(function(c){c.type!=="label"||c.businessObject.name||(c.hidden=!0)}),rt(a).di.isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],500,function(r){var o=r.context.shape;o.collapsed?rt(o).di.isExpanded=!1:rt(o).di.isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],500,function(r){var o,a=r.context.shape,c=e._getDefaultSize(a);o=a.collapsed?function(l,u){return{x:l.x+(l.width-u.width)/2,y:l.y+(l.height-u.height)/2,width:u.width,height:u.height}}(a,c):function(l,u){var p,h,v=l.children,f=u;return(p=yy((h=v,h.filter(function(y){return!y.hidden})).concat([l])))?(f.width=Math.max(p.width,f.width),f.height=Math.max(p.height,f.height),f.x=p.x+(p.width-f.width)/2,f.y=p.y+(p.height-f.height)/2):(f.x=l.x+(l.width-f.width)/2,f.y=l.y+(l.height-f.height)/2),f}(a,c),n.resizeShape(a,o,null,{autoResize:!a.collapsed&&"nwse"})})}function Wp(t,e,n,i){e.invoke(nt,this),this.preExecute("shape.delete",function(r){var o=r.context.shape,a=o.businessObject;xe(o)||(A(o,"bpmn:Participant")&&It(o)&&n.ids.unclaim(a.processRef.id),i.unclaimId(a.id,a))}),this.preExecute("connection.delete",function(r){var o=r.context.connection.businessObject;i.unclaimId(o.id,o)}),this.preExecute("canvas.updateRoot",function(){var r=t.getRootElement().businessObject;n.ids.unclaim(r.id)})}at(qp,nt),qp.$inject=["eventBus","elementFactory","modeling"],at(Wp,nt),Wp.$inject=["canvas","injector","moddle","modeling"];function Xp(t,e,n){var i;function r(){if(!i)throw new Error(n("out of bounds release"));return i}nt.call(this,t);var o=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(o,5e3,function(a){(i=i||new u1).enter()}),this.postExecuted(o,500,function(a){(function(){if(!i)throw new Error(n("out of bounds release"));var c=i.leave();c&&(e.updateLaneRefs(i.flowNodes,i.lanes),i=null)})()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(a){var c=a.context.shape,l=r();c.labelTarget||(A(c,"bpmn:Lane")&&l.addLane(c),A(c,"bpmn:FlowNode")&&l.addFlowNode(c))})}function u1(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(t){this.lanes.push(t)},this.addFlowNode=function(t){this.flowNodes.push(t)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function Kp(t,e){nt.call(this,t),this.preExecute("connection.delete",function(n){var i=n.context.connection,r=i.source;(function(o,a){if(!A(o,"bpmn:SequenceFlow"))return!1;var c=rt(a),l=rt(o);return c.get("default")===l})(i,r)&&e.updateProperties(r,{default:null})})}Xp.$inject=["eventBus","modeling","translate"],at(Xp,nt),at(Kp,nt),Kp.$inject=["eventBus","modeling"];const p1={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","rootElementReferenceBehavior","createBehavior","fixHoverBehavior","createDataObjectBehavior","createParticipantBehavior","dataStoreBehavior","dataInputAssociationBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","messageFlowBehavior","modelingFeedback","removeElementBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","toggleElementCollapseBehaviour","spaceToolBehavior","subProcessStartEventBehavior","unclaimIdBehavior","unsetDefaultFlowBehavior","updateFlowNodeRefsBehavior"],adaptiveLabelPositioningBehavior:["type",Ep],appendBehavior:["type",wp],associationBehavior:["type",_p],attachEventBehavior:["type",sc],boundaryEventBehavior:["type",Sp],rootElementReferenceBehavior:["type",Cp],createBehavior:["type",Tp],fixHoverBehavior:["type",Uy],createDataObjectBehavior:["type",Ap],createParticipantBehavior:["type",kp],dataInputAssociationBehavior:["type",Pp],dataStoreBehavior:["type",Mp],deleteLaneBehavior:["type",Rp],detachEventBehavior:["type",dc],dropOnFlowBehavior:["type",Np],eventBasedGatewayBehavior:["type",Ip],groupBehavior:["type",Bp],importDockingFix:["type",Zy],isHorizontalFix:["type",jp],labelBehavior:["type",Lp],messageFlowBehavior:["type",zp],modelingFeedback:["type",vg],replaceConnectionBehavior:["type",$p],removeParticipantBehavior:["type",Gp],replaceElementBehaviour:["type",gc],resizeBehavior:["type",xg],resizeLaneBehavior:["type",wg],removeElementBehavior:["type",Up],toggleElementCollapseBehaviour:["type",qp],spaceToolBehavior:["type",_g],subProcessStartEventBehavior:["type",Hp],unclaimIdBehavior:["type",Wp],updateFlowNodeRefsBehavior:["type",Xp],unsetDefaultFlowBehavior:["type",Kp]};function Cg(t,e){var n=ye(t,e,-15);return n!=="intersect"?n:null}function Ee(t){Ai.call(this,t)}function Yp(t){return!t||xe(t)}function Tg(t){do{if(A(t,"bpmn:Process"))return rt(t);if(A(t,"bpmn:Participant"))return rt(t).processRef||rt(t)}while(t=t.parent)}function Jp(t){return A(t,"bpmn:TextAnnotation")}function Zp(t){return A(t,"bpmn:Group")&&!t.labelTarget}function Qp(t){return A(t,"bpmn:BoundaryEvent")&&jn(t,"bpmn:CompensateEventDefinition")}function so(t){return rt(t).isForCompensation}function Ag(t){for(var e=t;e=e.parent;){if(A(e,"bpmn:FlowElementsContainer"))return rt(e);if(A(e,"bpmn:Participant"))return rt(e).processRef}return null}function jn(t,e){return!!jt(rt(t).eventDefinitions||[],function(n){return A(n,e)})}function kg(t,e){return(rt(t).eventDefinitions||[]).every(function(n){return A(n,e)})}function Pg(t){return A(t,"bpmn:ReceiveTask")||A(t,"bpmn:IntermediateCatchEvent")&&(jn(t,"bpmn:MessageEventDefinition")||jn(t,"bpmn:TimerEventDefinition")||jn(t,"bpmn:ConditionalEventDefinition")||jn(t,"bpmn:SignalEventDefinition"))}function wc(t){return t.waypoints}function td(t,e){var n=function(i){for(var r=[];i;)(i=i.parent)&&r.push(i);return r}(e);return n.indexOf(t)!==-1}function _c(t,e,n){if(Yp(t)||Yp(e))return null;if(!A(n,"bpmn:DataAssociation")){if(jg(t,e))return{type:"bpmn:MessageFlow"};if(Lg(t,e))return{type:"bpmn:SequenceFlow"}}var i=nd(t,e);return i||(Qp(t)&&so(e)?{type:"bpmn:Association",associationDirection:"One"}:!!Og(t,e)&&{type:"bpmn:Association"})}function co(t,e,n){return!(!xe(t)&&!Zp(t))||!(A(e,"bpmn:Participant")&&!It(e))&&(A(t,"bpmn:Participant")?A(e,"bpmn:Process")||A(e,"bpmn:Collaboration"):kt(t,["bpmn:DataInput","bpmn:DataOutput"])&&t.parent?e===t.parent:A(t,"bpmn:Lane")?A(e,"bpmn:Participant")||A(e,"bpmn:Lane"):!(A(t,"bpmn:BoundaryEvent")&&!function(i){return rt(i).cancelActivity&&(Mg(i)||Rg(i))}(t))&&(A(t,"bpmn:FlowElement")&&!A(t,"bpmn:DataStoreReference")?A(e,"bpmn:FlowElementsContainer")?It(e):kt(e,["bpmn:Participant","bpmn:Lane"]):A(t,"bpmn:DataStoreReference")&&A(e,"bpmn:Collaboration")?Wi(rt(e).get("participants"),function(i){return!!i.get("processRef")}):kt(t,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?kt(e,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):!!A(t,"bpmn:MessageFlow")&&(A(e,"bpmn:Collaboration")||t.source.parent==e||t.target.parent==e)))}function d1(t){return A(t,"bpmn:Lane")}function h1(t){return!!function(e){return!xe(e)&&A(e,"bpmn:BoundaryEvent")}(t)||!(!A(t,"bpmn:IntermediateThrowEvent")||!Mg(t))||A(t,"bpmn:IntermediateCatchEvent")&&Rg(t)}function Mg(t){var e=rt(t);return e&&!(e.eventDefinitions&&e.eventDefinitions.length)}function Rg(t){return Ng(t,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function Ng(t,e){return e.some(function(n){return jn(t,n)})}function ha(t,e,n,i){if(Array.isArray(t)||(t=[t]),t.length!==1)return!1;var r=t[0];return!xe(r)&&!!h1(r)&&!Ve(e)&&!(!A(e,"bpmn:Activity")||so(e))&&!(i&&!Cg(i,e))&&!function(o){return A(o,"bpmn:ReceiveTask")&&jt(o.incoming,function(a){return A(a.source,"bpmn:EventBasedGateway")})}(e)&&"attach"}function Ig(t,e,n){if(!e)return!1;var i={replacements:[]};return F(t,function(r){Ve(e)||A(r,"bpmn:StartEvent")&&r.type!=="label"&&co(r,e)&&(function(o){return o&&rt(o).isInterrupting!==!1}(r)||i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),(function(o){return Es(o,"bpmn:ErrorEventDefinition")}(r)||function(o){return Es(o,"bpmn:EscalationEventDefinition")}(r)||function(o){return Es(o,"bpmn:CompensateEventDefinition")}(r))&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),Ng(r,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&A(e,"bpmn:SubProcess")&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"})),A(e,"bpmn:Transaction")||jn(r,"bpmn:CancelEventDefinition")&&r.type!=="label"&&(A(r,"bpmn:EndEvent")&&co(r,e)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:EndEvent"}),A(r,"bpmn:BoundaryEvent")&&ha(r,e,0,n)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:BoundaryEvent"}))}),!!i.replacements.length&&i}function Dg(t,e){return!Wi(t,d1)&&(!e||t.every(function(n){return co(n,e)}))}function ed(t,e,n,i){return!!e&&(!(!xe(t)&&!Zp(t))||n!==e&&(!n||!td(n,e))&&(co(t,e)||Sc(t,e)))}function Bg(t,e){return A(t,"bpmn:SubProcess")?It(t)&&(!e||e.width>=100&&e.height>=80):A(t,"bpmn:Lane")?!e||e.width>=130&&e.height>=60:A(t,"bpmn:Participant")?!e||e.width>=250&&e.height>=50:!!Jp(t)||!!Zp(t)}function Og(t,e){return!wc(t)&&!wc(e)&&(!(!Qp(t)||!so(e))||!td(e,t)&&!td(t,e)&&(!!function(n,i){var r=Jp(n),o=Jp(i);return(r||o)&&r!==o}(t,e)||!!nd(t,e)))}function jg(t,e){return!(Fg(t)&&!Fg(e))&&A(i=t,"bpmn:InteractionNode")&&!A(i,"bpmn:BoundaryEvent")&&(!A(i,"bpmn:Event")||A(i,"bpmn:ThrowEvent")&&kg(i,"bpmn:MessageEventDefinition"))&&function(r){return A(r,"bpmn:InteractionNode")&&!so(r)&&(!A(r,"bpmn:Event")||A(r,"bpmn:CatchEvent")&&kg(r,"bpmn:MessageEventDefinition"))&&!(A(r,"bpmn:BoundaryEvent")&&!jn(r,"bpmn:MessageEventDefinition"))}(e)&&(n=e,Tg(t)!==Tg(n));var n,i}function Lg(t,e){return!(Pg(e)&&e.incoming.length>0&&(n=e.incoming,(n=n||[]).some(m1))&&!A(t,"bpmn:EventBasedGateway"))&&A(r=t,"bpmn:FlowNode")&&!A(r,"bpmn:EndEvent")&&!Ve(r)&&!(A(r,"bpmn:IntermediateThrowEvent")&&jn(r,"bpmn:LinkEventDefinition"))&&!Qp(r)&&!so(r)&&function(o){return A(o,"bpmn:FlowNode")&&!A(o,"bpmn:StartEvent")&&!A(o,"bpmn:BoundaryEvent")&&!Ve(o)&&!(A(o,"bpmn:IntermediateCatchEvent")&&jn(o,"bpmn:LinkEventDefinition"))&&!so(o)}(e)&&(i=e,Ag(t)===Ag(i))&&!(A(t,"bpmn:EventBasedGateway")&&!Pg(e));var n,i,r}function nd(t,e){return kt(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&kt(e,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:!(!kt(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])||!kt(t,["bpmn:Activity","bpmn:CatchEvent"]))&&{type:"bpmn:DataOutputAssociation"}}function Sc(t,e,n){if(!e)return!1;if(Array.isArray(t)){if(t.length!==1)return!1;t=t[0]}return e.source!==t&&e.target!==t&&kt(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!xe(e)&&A(t,"bpmn:FlowNode")&&!A(t,"bpmn:BoundaryEvent")&&co(t,e.parent)}function Vg(t,e){return!!xe(e)||!(A(e,"bpmn:Lane")&&!function(n,i){return n&&i&&n.indexOf(i)!==-1}(t,e.parent))}function m1(t){if(t&&t.source)return A(t.source,"bpmn:EventBasedGateway")}function Fg(t){return Is(t,"bpmn:Process")||Is(t,"bpmn:Collaboration")}at(Ee,Ai),Ee.$inject=["eventBus"],Ee.prototype.init=function(){this.addRule("connection.start",function(t){return function(e){return Yp(e)?null:kt(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}(t.source)}),this.addRule("connection.create",function(t){var e=t.source,n=t.target,i=t.hints||{},r=i.targetParent;if(i.targetAttach)return!1;r&&(n.parent=r);try{return _c(e,n)}finally{r&&(n.parent=null)}}),this.addRule("connection.reconnect",function(t){var e=t.connection;return _c(t.source,t.target,e)}),this.addRule("connection.updateWaypoints",function(t){return{type:t.connection.type}}),this.addRule("shape.resize",function(t){return Bg(t.shape,t.newBounds)}),this.addRule("elements.create",function(t){var e=t.elements,n=t.position,i=t.target;return!(wc(i)&&!Sc(e,i))&&Nr(e,function(r){return wc(r)?_c(r.source,r.target,r):r.host?ha(r,r.host,null,n):ed(r,i,null)})}),this.addRule("elements.move",function(t){var e=t.target,n=t.shapes,i=t.position;return ha(n,e,null,i)||Ig(n,e,i)||Dg(n,e)||Sc(n,e)}),this.addRule("shape.create",function(t){return ed(t.shape,t.target,t.source,t.position)}),this.addRule("shape.attach",function(t){return ha(t.shape,t.target,null,t.position)}),this.addRule("element.copy",function(t){var e=t.element;return Vg(t.elements,e)})},Ee.prototype.canConnectMessageFlow=jg,Ee.prototype.canConnectSequenceFlow=Lg,Ee.prototype.canConnectDataAssociation=nd,Ee.prototype.canConnectAssociation=Og,Ee.prototype.canMove=Dg,Ee.prototype.canAttach=ha,Ee.prototype.canReplace=Ig,Ee.prototype.canDrop=co,Ee.prototype.canInsert=Sc,Ee.prototype.canCreate=ed,Ee.prototype.canConnect=_c,Ee.prototype.canResize=Bg,Ee.prototype.canCopy=Vg;const f1={__depends__:[On],__init__:["bpmnRules"],bpmnRules:["type",Ee]};function zg(t,e){t.on("saveXML.start",2e3,function(){var n,i,r=e.getRootElement(),o=rt(r).di;n=Et(n=ns([r],!1),function(a){return a!==r&&!a.labelTarget}),i=pe(n,Wr),o.set("planeElement",i)})}zg.$inject=["eventBus","canvas"];const v1={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",zg]};function Cc(t){nt.call(this,t);var e=this;this.preExecute(["shape.create","connection.create"],function(n){var i=n.context,r=i.shape||i.connection,o=i.parent,a=e.getOrdering(r,o);a&&(a.parent!==void 0&&(i.parent=a.parent),i.parentIndex=a.index)}),this.preExecute(["shape.move","connection.move"],function(n){var i=n.context,r=i.shape||i.connection,o=i.newParent||r.parent,a=e.getOrdering(r,o);a&&(a.parent!==void 0&&(i.newParent=a.parent),i.newParentIndex=a.index)})}function id(t,e,n){Cc.call(this,t);var i=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:3,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function r(o){var a=o.order;if(a||(o.order=a=function(c){if(c.labelTarget)return{level:10};var l=jt(i,function(u){return kt(c,[u.type])});return l&&l.order||{level:1}}(o)),!a)throw new Error("no order for <"+o.id+">");return a}this.getOrdering=function(o,a){if(o.labelTarget)return{parent:e.getRootElement(),index:-1};var c=r(o);c.containers&&(a=function(p,h,v){for(var f=h;f&&!kt(f,v);)f=f.parent;if(!f)throw new Error("no parent for <"+p.id+"> in <"+(h&&h.id)+">");return f}(o,a,c.containers));var l=a.children.indexOf(o),u=function(p,h){h=Wl(h);var v=_t(p)?-1:void 0;return F(p,function(f,y){if(h(f,y))return v=y,!1}),v}(a.children,function(p){return!(!o.labelTarget&&p.labelTarget)&&c.level<r(p).level});return u!==-1&&l!==-1&&l<u&&(u-=1),{index:u,parent:a}}}Cc.prototype.getOrdering=function(t,e){return null},at(Cc,nt),id.$inject=["eventBus","canvas","translate"],at(id,Cc);const y1={__depends__:[_s],__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",id]};function Ht(t,e){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=e,this._eventBus=t,this._uid=1,t.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Ht.$inject=["eventBus","injector"],Ht.prototype.execute=function(t,e){if(!t)throw new Error("command required");this._currentExecution.trigger="execute";var n={command:t,context:e};this._pushAction(n),this._internalExecute(n),this._popAction(n)},Ht.prototype.canExecute=function(t,e){var n={command:t,context:e},i=this._getHandler(t),r=this._fire(t,"canExecute",n);if(r===void 0){if(!i)return!1;i.canExecute&&(r=i.canExecute(e))}return r},Ht.prototype.clear=function(t){this._stack.length=0,this._stackIdx=-1,t!==!1&&this._fire("changed",{trigger:"clear"})},Ht.prototype.undo=function(){var t,e=this._getUndoAction();if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),(t=this._getUndoAction())&&t.id===e.id);)e=t;this._popAction()}},Ht.prototype.redo=function(){var t,e=this._getRedoAction();if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),(t=this._getRedoAction())&&t.id===e.id);)e=t;this._popAction()}},Ht.prototype.register=function(t,e){this._setHandler(t,e)},Ht.prototype.registerHandler=function(t,e){if(!t||!e)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(e);this.register(t,n)},Ht.prototype.canUndo=function(){return!!this._getUndoAction()},Ht.prototype.canRedo=function(){return!!this._getRedoAction()},Ht.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},Ht.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},Ht.prototype._internalUndo=function(t){var e=this,n=t.command,i=t.context,r=this._getHandler(n);this._atomicDo(function(){e._fire(n,"revert",t),r.revert&&e._markDirty(r.revert(i)),e._revertedAction(t),e._fire(n,"reverted",t)})},Ht.prototype._fire=function(t,e,n){arguments.length<3&&(n=e,e=null);var i,r,o,a=e?[t+"."+e,e]:[t];for(n=this._eventBus.createEvent(n),i=0;(r=a[i])&&(o=this._eventBus.fire("commandStack."+r,n),!n.cancelBubble);i++);return o},Ht.prototype._createId=function(){return this._uid++},Ht.prototype._atomicDo=function(t){var e=this._currentExecution;e.atomic=!0;try{t()}finally{e.atomic=!1}},Ht.prototype._internalExecute=function(t,e){var n=this,i=t.command,r=t.context,o=this._getHandler(i);if(!o)throw new Error("no command handler registered for <"+i+">");this._pushAction(t),e||(this._fire(i,"preExecute",t),o.preExecute&&o.preExecute(r),this._fire(i,"preExecuted",t)),this._atomicDo(function(){n._fire(i,"execute",t),o.execute&&n._markDirty(o.execute(r)),n._executedAction(t,e),n._fire(i,"executed",t)}),e||(this._fire(i,"postExecute",t),o.postExecute&&o.postExecute(r),this._fire(i,"postExecuted",t)),this._popAction(t)},Ht.prototype._pushAction=function(t){var e=this._currentExecution,n=e.actions,i=n[0];if(e.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+t.command+")");t.id||(t.id=i&&i.id||this._createId()),n.push(t)},Ht.prototype._popAction=function(){var t=this._currentExecution,e=t.trigger,n=t.actions,i=t.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:Hh("id",i.reverse())}),i.length=0,this._fire("changed",{trigger:e}),t.trigger=null)},Ht.prototype._markDirty=function(t){var e=this._currentExecution;t&&(t=_t(t)?t:[t],e.dirty=e.dirty.concat(t))},Ht.prototype._executedAction=function(t,e){var n=++this._stackIdx;e||this._stack.splice(n,this._stack.length,t)},Ht.prototype._revertedAction=function(t){this._stackIdx--},Ht.prototype._getHandler=function(t){return this._handlerMap[t]},Ht.prototype._setHandler=function(t,e){if(!t||!e)throw new Error("command and handler required");if(this._handlerMap[t])throw new Error("overriding handler for command <"+t+">");this._handlerMap[t]=e};const g1={commandStack:["type",Ht]};var b1=new Du("tt");function rd(t,e){t.style.display=e===!1?"none":""}var $g="djs-tooltip",od="."+$g;function Ie(t,e){var n,i;this._eventBus=t,this._canvas=e,this._ids=b1,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=(n=e.getContainer(),i=Ft('<div class="djs-tooltip-container" style="position: absolute; width: 0; height: 0;" />'),n.insertBefore(i,n.firstChild),i);var r=this;Ue.bind(this._tooltipRoot,od,"mousedown",function(o){o.stopPropagation()}),Ue.bind(this._tooltipRoot,od,"mouseover",function(o){r.trigger("mouseover",o)}),Ue.bind(this._tooltipRoot,od,"mouseout",function(o){r.trigger("mouseout",o)}),this._init()}Ie.$inject=["eventBus","canvas"],Ie.prototype.add=function(t){if(!t.position)throw new Error("must specifiy tooltip position");if(!t.html)throw new Error("must specifiy tooltip html");var e=this._ids.next();return t=$({},this._tooltipDefaults,t,{id:e}),this._addTooltip(t),t.timeout&&this.setTimeout(t),e},Ie.prototype.trigger=function(t,e){var n=e.delegateTarget||e.target,i=this.get(Ge(n,"data-tooltip-id"));i&&(t==="mouseover"&&i.timeout&&this.clearTimeout(i),t==="mouseout"&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))},Ie.prototype.get=function(t){return typeof t!="string"&&(t=t.id),this._tooltips[t]},Ie.prototype.clearTimeout=function(t){if(t=this.get(t)){var e=t.removeTimer;e&&(clearTimeout(e),t.removeTimer=null)}},Ie.prototype.setTimeout=function(t){if(t=this.get(t)){this.clearTimeout(t);var e=this;t.removeTimer=setTimeout(function(){e.remove(t)},t.timeout)}},Ie.prototype.remove=function(t){var e=this.get(t);e&&(Pn(e.html),Pn(e.htmlContainer),delete e.htmlContainer,delete this._tooltips[e.id])},Ie.prototype.show=function(){rd(this._tooltipRoot)},Ie.prototype.hide=function(){rd(this._tooltipRoot,!1)},Ie.prototype._updateRoot=function(t){var e=t.scale||1,n=t.scale||1,i="matrix("+e+",0,0,"+n+","+-1*t.x*e+","+-1*t.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i},Ie.prototype._addTooltip=function(t){var e,n=t.id,i=t.html,r=this._tooltipRoot;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),Rr(i)&&(i=Ft(i)),(e=Ft('<div data-tooltip-id="'+n+'" class="'+$g+'" style="position: absolute">')).appendChild(i),t.type&&re(e).add("djs-tooltip-"+t.type),t.className&&re(e).add(t.className),t.htmlContainer=e,r.appendChild(e),this._tooltips[n]=t,this._updateTooltip(t)},Ie.prototype._updateTooltip=function(t){var e,n,i,r=t.position,o=t.htmlContainer;e=o,n=r.x,i=r.y,$(e.style,{left:n+"px",top:i+"px"})},Ie.prototype._updateTooltipVisibilty=function(t){F(this._tooltips,function(e){var n=e.show,i=e.htmlContainer,r=!0;n&&((n.minZoom>t.scale||n.maxZoom<t.scale)&&(r=!1),rd(i,r))})},Ie.prototype._init=function(){var t=this;this._eventBus.on("canvas.viewbox.changing",function(e){t.hide()}),this._eventBus.on("canvas.viewbox.changed",function(e){var n;n=e.viewbox,t._updateRoot(n),t._updateTooltipVisibilty(n),t.show()})};const x1={__init__:["tooltips"],tooltips:["type",Ie]};function lo(t,e){if(typeof e!="function")throw new Error("removeFn iterator must be a function");if(t){for(var n;n=t[0];)e(n);return t}}function ad(t,e,n){nt.call(this,e);var i=t.get("movePreview",!1);e.on("shape.move.start",1400,function(r){var o=r.context,a=o.shapes,c=o.validatedShapes;o.shapes=Gg(a),o.validatedShapes=Gg(c)}),i&&e.on("shape.move.start",250,function(r){var o=r.context,a=o.shapes,c=[];F(a,function(l){F(l.labels,function(u){u.hidden||o.shapes.indexOf(u)!==-1||c.push(u),l.labelTarget&&c.push(l)})}),F(c,function(l){i.makeDraggable(o,l,!0)})}),this.preExecuted("elements.move",1400,function(r){var o=r.context.closure,a=o.enclosedElements,c=[];F(a,function(l){F(l.labels,function(u){a[u.id]||c.push(u)})}),o.addAll(c)}),this.preExecute(["connection.delete","shape.delete"],function(r){var o=r.context;lo((o.connection||o.shape).labels,function(a){n.removeShape(a,{nested:!0})})}),this.execute("shape.delete",function(r){var o=r.context,a=o.shape,c=a.labelTarget;c&&(o.labelTargetIndex=su(c.labels,a),o.labelTarget=c,a.labelTarget=null)}),this.revert("shape.delete",function(r){var o=r.context,a=o.shape,c=o.labelTarget,l=o.labelTargetIndex;c&&(Xt(c.labels,a,l),a.labelTarget=c)})}function Gg(t){return Et(t,function(e){return t.indexOf(e.labelTarget)===-1})}at(ad,nt),ad.$inject=["injector","eventBus","modeling"];const E1={__init__:["labelSupport"],labelSupport:["type",ad]};var Ug="attach-ok";function sd(t,e,n,i,r){nt.call(this,e);var o=t.get("movePreview",!1);e.on("shape.move.start",1401,function(a){var c,l,u=a.context,p=u.shapes,h=u.validatedShapes;u.shapes=(l=cd(c=p),Vx("id",c,l)),u.validatedShapes=function(v){var f=Ir(v,"id");return Et(v,function(y){for(;y;){if(y.host&&f[y.host.id])return!1;y=y.parent}return!0})}(h)}),o&&e.on("shape.move.start",251,function(a){var c=a.context;F(cd(c.shapes),function(l){o.makeDraggable(c,l,!0),F(l.labels,function(u){o.makeDraggable(c,u,!0)})})}),o&&e.on("shape.move.start",function(a){var c=a.context.shapes;if(c.length===1){var l=c[0].host;l&&(n.addMarker(l,Ug),e.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(l,Ug)}))}}),this.preExecuted("elements.move",1401,function(a){var c=a.context,l=c.closure;F(cd(c.shapes),function(u){l.add(u,l.topLevel[u.host.id])})}),this.postExecuted("elements.move",function(a){var c=a.context,l=c.shapes,u=c.newHost;u&&l.length!==1||F(u?l:Et(l,function(p){var h,v=p.host;return function(f){return!!f.host}(p)&&(h=v,l.indexOf(h)===-1)}),function(p){r.updateAttachment(p,u)})}),this.postExecuted("elements.move",function(a){F(a.context.shapes,function(c){F(c.attachers,function(l){F(l.outgoing.slice(),function(u){i.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target})||r.removeConnection(u)}),F(l.incoming.slice(),function(u){i.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target})||r.removeConnection(u)})})})}),this.postExecute("shape.create",function(a){var c=a.context,l=c.shape,u=c.host;u&&r.updateAttachment(l,u)}),this.postExecute("shape.replace",function(a){var c=a.context,l=c.oldShape,u=c.newShape;lo(l.attachers,function(p){i.allowed("elements.move",{target:u,shapes:[p]})==="attach"?r.updateAttachment(p,u):r.removeShape(p)}),u.attachers.length&&F(u.attachers,function(p){var h=pg(p,l,u);r.moveShape(p,h,p.parent)})}),this.postExecute("shape.resize",function(a){var c=a.context,l=c.shape,u=c.oldBounds,p=c.newBounds,h=l.attachers;(c.hints||{}).attachSupport!==!1&&F(h,function(v){var f=pg(v,u,p);r.moveShape(v,f,v.parent),F(v.labels,function(y){r.moveShape(y,f,y.parent)})})}),this.preExecute("shape.delete",function(a){var c=a.context.shape;lo(c.attachers,function(l){r.removeShape(l)}),c.host&&r.updateAttachment(c,null)})}function cd(t){return Ja(pe(t,function(e){return e.attachers||[]}))}at(sd,nt),sd.$inject=["injector","eventBus","canvas","rules","modeling"];const w1={__depends__:[On],__init__:["attachSupport"],attachSupport:["type",sd]};function sr(t,e){this._eventBus=t,this._dragging=e,this._tools=[],this._active=null}sr.$inject=["eventBus","dragging"],sr.prototype.registerTool=function(t,e){var n=this._tools;if(!e)throw new Error(`A tool has to be registered with it's "events"`);n.push(t),this.bindEvents(t,e)},sr.prototype.isActive=function(t){return t&&this._active===t},sr.prototype.length=function(t){return this._tools.length},sr.prototype.setActive=function(t){var e=this._eventBus;this._active!==t&&(this._active=t,e.fire("tool-manager.update",{tool:t}))},sr.prototype.bindEvents=function(t,e){var n=this._eventBus,i=this._dragging,r=[];n.on(e.tool+".init",function(o){if(!o.context.reactivate&&this.isActive(t))return this.setActive(null),void i.cancel();this.setActive(t)},this),F(e,function(o){r.push(o+".ended"),r.push(o+".canceled")}),n.on(r,250,function(o){this._active&&(function(a){var c=a.originalEvent&&a.originalEvent.target;return c&&Xi(c,'.group[data-group="tools"]')}(o)||this.setActive(null))},this)};const Tc={__depends__:[Kn],__init__:["toolManager"],toolManager:["type",sr]};function ma(t,e){return t.indexOf(e)!==-1}var ld=Math.abs,_1=Math.round,Zn={x:"width",y:"height"},Hg="crosshair",Ac={n:"top",w:"left",s:"bottom",e:"right"},qg={n:"s",w:"e",s:"n",e:"w"};function Qn(t,e,n,i,r,o,a){this._canvas=t,this._dragging=e,this._eventBus=n,this._modeling=i,this._rules=r,this._toolManager=o,this._mouse=a;var c=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(l){n.once("spaceTool.selection.ended",function(){c.activateMakeSpace(l.originalEvent)})}),n.on("spaceTool.move",1500,function(l){var u=l.context,p=u.initialized;p||(p=u.initialized=c.init(l,u)),p&&Xg(l)}),n.on("spaceTool.end",function(l){var u=l.context,p=u.axis,h=u.direction,v=u.movingShapes,f=u.resizingShapes,y=u.start;if(u.initialized){Xg(l);var b={x:0,y:0};b[p]=_1(l["d"+p]),c.makeSpace(v,f,b,h,y),n.once("spaceTool.ended",function(w){c.activateSelection(w.originalEvent,!0,!0)})}})}function Wg(t){return{top:t.top-20,right:t.right+20,bottom:t.bottom+20,left:t.left-20}}function Xg(t){var e,n,i=t.context.spaceToolConstraints;i&&(mt(i.left)&&(e=Math.max(t.x,i.left),t.dx=t.dx+e-t.x,t.x=e),mt(i.right)&&(e=Math.min(t.x,i.right),t.dx=t.dx+e-t.x,t.x=e),mt(i.top)&&(n=Math.max(t.y,i.top),t.dy=t.dy+n-t.y,t.y=n),mt(i.bottom)&&(n=Math.min(t.y,i.bottom),t.dy=t.dy+n-t.y,t.y=n))}function ud(t,e){return t.indexOf(e)!==-1}function pd(t){return!!t.waypoints}function Kg(t){return!!t.labelTarget}Qn.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"],Qn.prototype.activateSelection=function(t,e,n){this._dragging.init(t,"spaceTool.selection",{autoActivate:e,cursor:Hg,data:{context:{reactivate:n}},trapClick:!1})},Qn.prototype.activateMakeSpace=function(t){this._dragging.init(t,"spaceTool",{autoActivate:!0,cursor:Hg,data:{context:{}}})},Qn.prototype.makeSpace=function(t,e,n,i,r){return this._modeling.createSpace(t,e,n,i,r)},Qn.prototype.init=function(t,e){var n=ld(t.dx)>ld(t.dy)?"x":"y",i=t["d"+n],r=t[n]-i;if(ld(i)<5)return!1;i<0&&(i*=-1),Jr(t)&&(i*=-1);var o=function(u,p){if(u==="x"){if(p>0)return"e";if(p<0)return"w"}if(u==="y"){if(p>0)return"s";if(p<0)return"n"}return null}(n,i),a=ns(this._canvas.getRootElement(),!0),c=this.calculateAdjustments(a,n,i,r),l=function(u,p,h,v,f){var y=u.movingShapes,b=u.resizingShapes;if(b.length){var w,g,_={};return F(b,function(E){var S,D,s,d=ct(E),m=Et(E.children,function(N){return!(pd(N)||Kg(N)||ud(y,N)||ud(b,N))}),C=Et(E.children,function(N){return!pd(N)&&!Kg(N)&&ud(y,N)});m.length&&(D=Wg(ct(ve(m))),S=v-d[Ac[h]]+D[Ac[h]],h==="n"?_.bottom=g=mt(g)?Math.min(g,S):S:h==="w"?_.right=g=mt(g)?Math.min(g,S):S:h==="s"?_.top=w=mt(w)?Math.max(w,S):S:h==="e"&&(_.left=w=mt(w)?Math.max(w,S):S)),C.length&&(s=Wg(ct(ve(C))),S=v-s[Ac[qg[h]]]+d[Ac[qg[h]]],h==="n"?_.bottom=g=mt(g)?Math.min(g,S):S:h==="w"?_.right=g=mt(g)?Math.min(g,S):S:h==="s"?_.top=w=mt(w)?Math.max(w,S):S:h==="e"&&(_.left=w=mt(w)?Math.max(w,S):S));var M=f&&f[E.id];M&&(h==="n"?(S=v+E[Zn[p]]-M[Zn[p]],_.bottom=g=mt(g)?Math.min(g,S):S):h==="w"?(S=v+E[Zn[p]]-M[Zn[p]],_.right=g=mt(g)?Math.min(g,S):S):h==="s"?(S=v-E[Zn[p]]+M[Zn[p]],_.top=w=mt(w)?Math.max(w,S):S):h==="e"&&(S=v-E[Zn[p]]+M[Zn[p]],_.left=w=mt(w)?Math.max(w,S):S))}),_}}(c,n,o,r,this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:o,shapes:c.resizingShapes,start:r}));return $(e,c,{axis:n,direction:o,spaceToolConstraints:l,start:r}),Rs("resize-"+(n==="x"?"ew":"ns")),!0},Qn.prototype.calculateAdjustments=function(t,e,n,i){var r=this._rules,o=[],a=[];return F(t,function(c){if(c.parent&&!pd(c)){var l=c[e],u=l+c[Zn[e]];return n>0&&l>i||n<0&&u<i?o.push(c):l<i&&u>i&&r.allowed("shape.resize",{shape:c})?a.push(c):void 0}}),{movingShapes:o,resizingShapes:a}},Qn.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateSelection(t,!!t)},Qn.prototype.isActive=function(){var t=this._dragging.context();return t&&/^spaceTool/.test(t.prefix)};var dd="djs-dragging",Yg="djs-resizing",kc=Math.max;function Jg(t,e,n,i,r){function o(a,c){F(a,function(l){r.addDragger(l,c),n.addMarker(l,dd)})}t.on("spaceTool.selection.start",function(a){var c=n.getLayer("space"),l=a.context,u="M 0,-10000 L 0,10000",p="M -10000,0 L 10000,0",h=st("g");W(h,i.cls("djs-crosshair-group",["no-events"])),pt(c,h);var v=st("path");W(v,"d",u),St(v).add("djs-crosshair"),pt(h,v);var f=st("path");W(f,"d",p),St(f).add("djs-crosshair"),pt(h,f),l.crosshairGroup=h}),t.on("spaceTool.selection.move",function(a){je(a.context.crosshairGroup,a.x,a.y)}),t.on("spaceTool.selection.cleanup",function(a){var c=a.context.crosshairGroup;c&&Zt(c)}),t.on("spaceTool.move",250,function(a){var c=a.context,l=c.line,u=c.axis,p=c.movingShapes,h=c.resizingShapes;if(c.initialized){if(!c.dragGroup){var v=n.getLayer("space");W(l=st("path"),"d","M0,0 L0,0"),St(l).add("djs-crosshair"),pt(v,l),c.line=l;var f=st("g");W(f,i.cls("djs-drag-group",["no-events"])),pt(n.getActiveLayer(),f),o(p,f),o(c.movingConnections=e.filter(function(g){var _=!1;F(p,function(s){F(s.outgoing,function(d){g===d&&(_=!0)})});var E=!1;F(p,function(s){F(s.incoming,function(d){g===d&&(E=!0)})});var S=!1;F(h,function(s){F(s.outgoing,function(d){g===d&&(S=!0)})});var D=!1;return F(h,function(s){F(s.incoming,function(d){g===d&&(D=!0)})}),function(s){return s.waypoints}(g)&&(_||S)&&(E||D)}),f),c.dragGroup=f}if(!c.frameGroup){var y=st("g");W(y,i.cls("djs-frame-group",["no-events"])),pt(n.getActiveLayer(),y);var b=[];F(h,function(g){var _=r.addFrame(g,y),E=_.getBBox();b.push({element:_,initialBounds:E}),n.addMarker(g,Yg)}),c.frameGroup=y,c.frames=b}W(l,{d:{x:"M"+a.x+", -10000 L"+a.x+", 10000",y:"M -10000, "+a.y+" L 10000, "+a.y}[u]});var w={x:a.dx,y:a.dy};w[{x:"y",y:"x"}[c.axis]]=0,je(c.dragGroup,w.x,w.y),F(c.frames,function(g){var _,E,S=g.element,D=g.initialBounds;c.direction==="e"?W(S,{width:kc(D.width+w.x,5)}):W(S,{width:_=kc(D.width-w.x,5),x:D.x+D.width-_}),c.direction==="s"?W(S,{height:kc(D.height+w.y,5)}):W(S,{height:E=kc(D.height-w.y,5),y:D.y+D.height-E})})}}),t.on("spaceTool.cleanup",function(a){var c=a.context,l=c.movingShapes,u=c.movingConnections,p=c.resizingShapes,h=c.line,v=c.dragGroup,f=c.frameGroup;F(l,function(y){n.removeMarker(y,dd)}),F(u,function(y){n.removeMarker(y,dd)}),v&&(Zt(h),Zt(v)),F(p,function(y){n.removeMarker(y,Yg)}),f&&Zt(f)})}Jg.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const Zg={__init__:["spaceToolPreview"],__depends__:[Kn,On,Tc,Qo,na],spaceTool:["type",Qn],spaceToolPreview:["type",Jg]};function rn(t){this._model=t}function Fe(t,e,n,i){nt.call(this,t),this._bpmnFactory=e,this._translate=i;var r=this;function o(p){F(p.context.oldRoot.children,function(h){A(h,"bpmn:BaseElement")&&r.updateParent(h)})}function a(p){var h=p.context.shape;A(h,"bpmn:BaseElement")&&r.updateBounds(h)}function c(p){r.updateConnection(p.context)}function l(p){r.updateConnectionWaypoints(p.context.connection)}function u(p){r.updateAttachment(p.context)}this.executed(["connection.layout","connection.create"],function(p){var h,v=p.context,f=v.hints||{};v.cropped||f.createElementsBehavior===!1||((h=v.connection).waypoints=n.getCroppedWaypoints(h),v.cropped=!0)}),this.reverted(["connection.layout"],function(p){delete p.context.cropped}),this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],on(function(p){var h=p.context;r.updateParent(h.shape||h.connection,h.oldParent)})),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],on(function(p){var h=p.context,v=h.shape||h.connection,f=h.parent||h.newParent;r.updateParent(v,f)})),this.executed(["canvas.updateRoot"],o),this.reverted(["canvas.updateRoot"],o),this.executed(["shape.move","shape.create","shape.resize"],on(function(p){p.context.shape.type!=="label"&&a(p)})),this.reverted(["shape.move","shape.create","shape.resize"],on(function(p){p.context.shape.type!=="label"&&a(p)})),t.on("shape.changed",function(p){p.element.type==="label"&&a({context:{shape:p.element}})}),this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],on(c)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],on(c)),this.executed(["connection.layout","connection.move","connection.updateWaypoints"],on(l)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],on(l)),this.executed("connection.reconnect",on(function(p){var h=p.context,v=h.connection,f=h.oldSource,y=h.newSource,b=rt(v),w=rt(f),g=rt(y);b.conditionExpression&&!kt(g,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(h.oldConditionExpression=b.conditionExpression,delete b.conditionExpression),f!==y&&w.default===b&&(h.oldDefault=w.default,delete w.default)})),this.reverted("connection.reconnect",on(function(p){var h=p.context,v=h.connection,f=h.oldSource,y=h.newSource,b=rt(v),w=rt(f),g=rt(y);h.oldConditionExpression&&(b.conditionExpression=h.oldConditionExpression),h.oldDefault&&(w.default=h.oldDefault,delete g.default)})),this.executed(["element.updateAttachment"],on(u)),this.reverted(["element.updateAttachment"],on(u))}function on(t){return function(e){var n=e.context;A(n.shape||n.connection,"bpmn:BaseElement")&&t(e)}}function Ri(t,e,n){Un.call(this),this._bpmnFactory=t,this._moddle=e,this._translate=n}function Qg(t,e,n){t[n]=e[n],delete e[n]}function Pc(t,e){this._modeling=t,this._canvas=e}function Mc(t){this._modeling=t}function Rc(t,e){this._canvas=t,this._layouter=e}rn.$inject=["moddle"],rn.prototype._needsId=function(t){return kt(t,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])},rn.prototype._ensureId=function(t){var e;e=A(t,"bpmn:Activity")?"Activity":A(t,"bpmn:Event")?"Event":A(t,"bpmn:Gateway")?"Gateway":kt(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])?"Flow":(t.$type||"").replace(/^[^:]*:/g,""),e+="_",!t.id&&this._needsId(t)&&(t.id=this._model.ids.nextPrefixed(e,t))},rn.prototype.create=function(t,e){var n=this._model.create(t,e||{});return this._ensureId(n),n},rn.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})},rn.prototype.createDiShape=function(t,e,n){return this.create("bpmndi:BPMNShape",$({bpmnElement:t,bounds:this.createDiBounds(e)},n))},rn.prototype.createDiBounds=function(t){return this.create("dc:Bounds",t)},rn.prototype.createDiWaypoints=function(t){var e=this;return pe(t,function(n){return e.createDiWaypoint(n)})},rn.prototype.createDiWaypoint=function(t){return this.create("dc:Point",mi(t,["x","y"]))},rn.prototype.createDiEdge=function(t,e,n){return this.create("bpmndi:BPMNEdge",$({bpmnElement:t,waypoint:this.createDiWaypoints(e)},n))},rn.prototype.createDiPlane=function(t){return this.create("bpmndi:BPMNPlane",{bpmnElement:t})},at(Fe,nt),Fe.$inject=["eventBus","bpmnFactory","connectionDocking","translate"],Fe.prototype.updateAttachment=function(t){var e=t.shape,n=e.businessObject,i=e.host;n.attachedToRef=i&&i.businessObject},Fe.prototype.updateParent=function(t,e){if(!(t instanceof us||A(t,"bpmn:DataStoreReference")&&t.parent&&A(t.parent,"bpmn:Collaboration"))){var n=t.parent,i=t.businessObject,r=n&&n.businessObject,o=r&&r.di;A(t,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,r,e&&e.businessObject),A(t,"bpmn:DataOutputAssociation")&&(r=t.source?t.source.businessObject:null),A(t,"bpmn:DataInputAssociation")&&(r=t.target?t.target.businessObject:null),this.updateSemanticParent(i,r),A(t,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,r),this.updateDiParent(i.di,o)}},Fe.prototype.updateBounds=function(t){var e=t.businessObject.di,n=t instanceof us?this._getLabel(e):e,i=n.bounds;i||(i=this._bpmnFactory.createDiBounds(),n.set("bounds",i)),$(i,{x:t.x,y:t.y,width:t.width,height:t.height})},Fe.prototype.updateFlowNodeRefs=function(t,e,n){n!==e&&(A(n,"bpmn:Lane")&&Wt(n.get("flowNodeRef"),t),A(e,"bpmn:Lane")&&Xt(e.get("flowNodeRef"),t))},Fe.prototype.updateDiConnection=function(t,e,n){t.sourceElement&&t.sourceElement.bpmnElement!==e&&(t.sourceElement=e&&e.di),t.targetElement&&t.targetElement.bpmnElement!==n&&(t.targetElement=n&&n.di)},Fe.prototype.updateDiParent=function(t,e){if(e&&!A(e,"bpmndi:BPMNPlane")&&(e=e.$parent),t.$parent!==e){var n=(e||t.$parent).get("planeElement");e?(n.push(t),t.$parent=e):(Wt(n,t),t.$parent=null)}},Fe.prototype.getLaneSet=function(t){var e,n;return A(t,"bpmn:Lane")?((e=t.childLaneSet)||(e=this._bpmnFactory.create("bpmn:LaneSet"),t.childLaneSet=e,e.$parent=t),e):(A(t,"bpmn:Participant")&&(t=t.processRef),(e=(n=t.get("laneSets"))[0])||((e=this._bpmnFactory.create("bpmn:LaneSet")).$parent=t,n.push(e)),e)},Fe.prototype.updateSemanticParent=function(t,e,n){var i,r=this._translate;if(t.$parent!==e&&(!A(t,"bpmn:DataInput")&&!A(t,"bpmn:DataOutput")||(A(e,"bpmn:Participant")&&"processRef"in e&&(e=e.processRef),!("ioSpecification"in e)||e.ioSpecification!==t.$parent))){if(A(t,"bpmn:Lane"))e&&(e=this.getLaneSet(e)),i="lanes";else if(A(t,"bpmn:FlowElement")){if(e){if(A(e,"bpmn:Participant"))e=e.processRef;else if(A(e,"bpmn:Lane"))do e=e.$parent.$parent;while(A(e,"bpmn:Lane"))}i="flowElements"}else if(A(t,"bpmn:Artifact")){for(;e&&!A(e,"bpmn:Process")&&!A(e,"bpmn:SubProcess")&&!A(e,"bpmn:Collaboration");){if(A(e,"bpmn:Participant")){e=e.processRef;break}e=e.$parent}i="artifacts"}else if(A(t,"bpmn:MessageFlow"))i="messageFlows";else if(A(t,"bpmn:Participant")){i="participants";var o,a=t.processRef;a&&(o=function(u){for(;u&&!A(u,"bpmn:Definitions");)u=u.$parent;return u}(t.$parent||e),t.$parent&&(Wt(o.get("rootElements"),a),a.$parent=null),e&&(Xt(o.get("rootElements"),a),a.$parent=o))}else A(t,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":A(t,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(r("no parent for {element} in {parent}",{element:t.id,parent:e.id}));var c;if(t.$parent&&Wt(c=t.$parent.get(i),t),e?((c=e.get(i)).push(t),t.$parent=e):t.$parent=null,n){var l=n.get(i);Wt(c,t),e&&(l||(l=[],e.set(i,l)),l.push(t))}}},Fe.prototype.updateConnectionWaypoints=function(t){t.businessObject.di.set("waypoint",this._bpmnFactory.createDiWaypoints(t.waypoints))},Fe.prototype.updateConnection=function(t){var e,n=t.connection,i=rt(n),r=rt(n.source),o=rt(n.target);if(A(i,"bpmn:DataAssociation"))A(i,"bpmn:DataInputAssociation")?(i.get("sourceRef")[0]=r,e=t.parent||t.newParent||o,this.updateSemanticParent(i,o,e)):A(i,"bpmn:DataOutputAssociation")&&(e=t.parent||t.newParent||r,this.updateSemanticParent(i,r,e),i.targetRef=o);else{var a=A(i,"bpmn:SequenceFlow");i.sourceRef!==r&&(a&&(Wt(i.sourceRef&&i.sourceRef.get("outgoing"),i),r&&r.get("outgoing")&&r.get("outgoing").push(i)),i.sourceRef=r),i.targetRef!==o&&(a&&(Wt(i.targetRef&&i.targetRef.get("incoming"),i),o&&o.get("incoming")&&o.get("incoming").push(i)),i.targetRef=o)}this.updateConnectionWaypoints(n),this.updateDiConnection(i.di,r,o)},Fe.prototype._getLabel=function(t){return t.label||(t.label=this._bpmnFactory.createDiLabel()),t.label},at(Ri,Un),Ri.$inject=["bpmnFactory","moddle","translate"],Ri.prototype.baseCreate=Un.prototype.create,Ri.prototype.create=function(t,e){return t==="label"?this.baseCreate(t,$({type:"label"},Go,e)):this.createBpmnElement(t,e)},Ri.prototype.createBpmnElement=function(t,e){var n,i,r,o=this._translate,a=(e=e||{}).businessObject;if(!a){if(!e.type)throw new Error(o("no shape type specified"));a=this._bpmnFactory.create(e.type)}return a.di||(a.di=t==="root"?this._bpmnFactory.createDiPlane(a,[],{id:a.id+"_di"}):t==="connection"?this._bpmnFactory.createDiEdge(a,[],{id:a.id+"_di"}):this._bpmnFactory.createDiShape(a,{},{id:a.id+"_di"})),A(a,"bpmn:Group")&&(e=$({isFrame:!0},e)),e.di&&($(a.di,e.di),delete e.di),function(c,l,u){F(u,function(p){l[p]!==void 0&&Qg(c,l,p)})}(a,e,["processRef","isInterrupting","associationDirection","isForCompensation"]),e.isExpanded&&Qg(a.di,e,"isExpanded"),A(a,"bpmn:ExclusiveGateway")&&(a.di.isMarkerVisible=!0),e.eventDefinitionType&&(i=a.get("eventDefinitions")||[],r=this._bpmnFactory.create(e.eventDefinitionType,e.eventDefinitionAttrs),e.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(r.condition=this._bpmnFactory.create("bpmn:FormalExpression")),i.push(r),r.$parent=a,a.eventDefinitions=i,delete e.eventDefinitionType),n=this._getDefaultSize(a),e=$({businessObject:a,id:a.id},n,e),this.baseCreate(t,e)},Ri.prototype._getDefaultSize=function(t){return A(t,"bpmn:SubProcess")?It(t)?{width:350,height:200}:{width:100,height:80}:A(t,"bpmn:Task")?{width:100,height:80}:A(t,"bpmn:Gateway")?{width:50,height:50}:A(t,"bpmn:Event")?{width:36,height:36}:A(t,"bpmn:Participant")?It(t)?{width:600,height:250}:{width:400,height:60}:A(t,"bpmn:Lane")?{width:400,height:100}:A(t,"bpmn:DataObjectReference")?{width:36,height:50}:A(t,"bpmn:DataStoreReference")?{width:50,height:50}:A(t,"bpmn:TextAnnotation")?{width:100,height:30}:A(t,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}},Ri.prototype.createParticipantShape=function(t){return Se(t)||(t={isExpanded:t}),(t=$({type:"bpmn:Participant"},t||{})).isExpanded!==!1&&(t.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(t)},Pc.$inject=["modeling","canvas"],Pc.prototype.preExecute=function(t){var e=this._modeling,n=t.elements,i=t.alignment;F(n,function(r){var o={x:0,y:0};i.left?o.x=i.left-r.x:i.right?o.x=i.right-r.width-r.x:i.center?o.x=i.center-Math.round(r.width/2)-r.x:i.top?o.y=i.top-r.y:i.bottom?o.y=i.bottom-r.height-r.y:i.middle&&(o.y=i.middle-Math.round(r.height/2)-r.y),e.moveElements([r],o,r.parent)})},Pc.prototype.postExecute=function(t){},Mc.$inject=["modeling"],Mc.prototype.preExecute=function(t){var e=t.source;if(!e)throw new Error("source required");var n=t.target||e.parent,i=t.shape,r=t.hints||{};i=t.shape=this._modeling.createShape(i,t.position,n,{attach:r.attach}),t.shape=i},Mc.prototype.postExecute=function(t){var e,n,i=t.hints||{};e=t.source,n=t.shape,Wi(e.outgoing,function(r){return r.target===n})||(i.connectionTarget===t.source?this._modeling.connect(t.shape,t.source,t.connection):this._modeling.connect(t.source,t.shape,t.connection))},Rc.$inject=["canvas","layouter"],Rc.prototype.execute=function(t){var e=t.connection,n=t.source,i=t.target,r=t.parent,o=t.parentIndex,a=t.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return e.source=n,e.target=i,e.waypoints||(e.waypoints=this._layouter.layoutConnection(e,a)),this._canvas.addConnection(e,r,o),e},Rc.prototype.revert=function(t){var e=t.connection;return this._canvas.removeConnection(e),e.source=null,e.target=null,e};var Nc=Math.round;function hd(t){this._modeling=t}function tb(t){return!!t.waypoints}hd.$inject=["modeling"],hd.prototype.preExecute=function(t){var e=t.elements,n=t.parent,i=t.parentIndex,r=t.position,o=t.hints,a=this._modeling;F(e,function(p){mt(p.x)||(p.x=0),mt(p.y)||(p.y=0)});var c=ve(e);F(e,function(p){tb(p)&&(p.waypoints=pe(p.waypoints,function(h){return{x:Nc(h.x-c.x-c.width/2+r.x),y:Nc(h.y-c.y-c.height/2+r.y)}})),$(p,{x:Nc(p.x-c.x-c.width/2+r.x),y:Nc(p.y-c.y-c.height/2+r.y)})});var l=lm(e),u={};F(e,function(p){if(tb(p))u[p.id]=mt(i)?a.createConnection(u[p.source.id],u[p.target.id],i,p,p.parent||n,o):a.createConnection(u[p.source.id],u[p.target.id],p,p.parent||n,o);else{var h=$({},o);l.indexOf(p)===-1&&(h.autoResize=!1),u[p.id]=mt(i)?a.createShape(p,mi(p,["x","y","width","height"]),p.parent||n,i,h):a.createShape(p,mi(p,["x","y","width","height"]),p.parent||n,h)}}),t.elements=Hl(u)};var eb=Math.round;function Ni(t){this._canvas=t}function fa(t){Ni.call(this,t)}Ni.$inject=["canvas"],Ni.prototype.execute=function(t){var e=t.shape,n=t.position,i=t.parent,r=t.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?$(e,n):$(e,{x:n.x-eb(e.width/2),y:n.y-eb(e.height/2)}),this._canvas.addShape(e,i,r),e},Ni.prototype.revert=function(t){var e=t.shape;return this._canvas.removeShape(e),e},at(fa,Ni),fa.$inject=["canvas"];var S1=Ni.prototype.execute;fa.prototype.execute=function(t){var e=t.shape;return function(n){["width","height"].forEach(function(i){n[i]===void 0&&(n[i]=0)})}(e),e.labelTarget=t.labelTarget,S1.call(this,t)};var C1=Ni.prototype.revert;function Ic(t,e){this._canvas=t,this._modeling=e}function md(t,e){this._modeling=t,this._elementRegistry=e}function va(t,e){this._canvas=t,this._modeling=e}function Dc(t){this._modeling=t}fa.prototype.revert=function(t){return t.shape.labelTarget=null,C1.call(this,t)},Ic.$inject=["canvas","modeling"],Ic.prototype.execute=function(t){var e=t.connection,n=e.parent;return t.parent=n,t.parentIndex=su(n.children,e),t.source=e.source,t.target=e.target,this._canvas.removeConnection(e),e.source=null,e.target=null,e},Ic.prototype.revert=function(t){var e=t.connection,n=t.parent,i=t.parentIndex;return e.source=t.source,e.target=t.target,Xt(n.children,e,i),this._canvas.addConnection(e,n),e},md.$inject=["modeling","elementRegistry"],md.prototype.postExecute=function(t){var e=this._modeling,n=this._elementRegistry;F(t.elements,function(i){n.get(i.id)&&(i.waypoints?e.removeConnection(i):e.removeShape(i))})},va.$inject=["canvas","modeling"],va.prototype.preExecute=function(t){var e=this._modeling,n=t.shape;lo(n.incoming,function(i){e.removeConnection(i,{nested:!0})}),lo(n.outgoing,function(i){e.removeConnection(i,{nested:!0})}),lo(n.children,function(i){i.waypoints?e.removeConnection(i,{nested:!0}):e.removeShape(i,{nested:!0})})},va.prototype.execute=function(t){var e=this._canvas,n=t.shape,i=n.parent;return t.oldParent=i,t.oldParentIndex=su(i.children,n),e.removeShape(n),n},va.prototype.revert=function(t){var e=this._canvas,n=t.shape,i=t.oldParent,r=t.oldParentIndex;return Xt(i.children,n,r),e.addShape(n,i),n},Dc.$inject=["modeling"];var nb={x:"y",y:"x"};function Bc(t,e){this._layouter=t,this._canvas=e}function fd(){}function vd(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function ya(t){this._modeling=t}function Oc(t){this._helper=new ya(t)}function cr(t){this._modeling=t,this._helper=new ya(t)}function ga(t){this._modeling=t}function ib(t){return t.original||t}function ti(t,e){this._modeling=t,this._rules=e}function ba(t){this._modeling=t}function Ii(t){this._modeling=t}function rb(t){return $({},t)}function ob(t){switch(t){case"n":case"s":return"y";case"w":case"e":return"x"}}function ab(t,e,n){var i=ob(n);return/e|s/.test(n)?t[i]>e:/n|w/.test(n)?t[i]<e:void 0}function Di(t,e){return t.indexOf(e)!==-1}function jc(t){this._modeling=t}function sb(t){var e={};return F(t,function(n){e[n.id]=n.hidden,n.children&&(e=$({},e,sb(n.children)))}),e}function cb(t,e){var n=[];return F(t,function(i){i.hidden=e,n=n.concat(i),i.children&&(n=n.concat(cb(i.children,i.collapsed||e)))}),n}function lb(t,e){var n=[];return F(t,function(i){i.hidden=e[i.id],n=n.concat(i),i.children&&(n=n.concat(lb(i.children,e)))}),n}function Lc(t){this._modeling=t}function ub(t,e){return Wt(t&&t.attachers,e)}function pb(t,e,n){if(t){var i=t.attachers;i||(t.attachers=i=[]),Xt(i,e,n)}}function yd(){}function Bt(t,e,n){this._eventBus=t,this._elementFactory=e,this._commandStack=n;var i=this;t.on("diagram.init",function(){i.registerHandlers(n)})}function xa(t){this._elementRegistry=t}function db(t,e){F(e,function(n,i){t.set(i,n)})}Dc.prototype.preExecute=function(t){var e=this._modeling,n=t.groups,i=t.axis,r=t.dimension;function o(b,w){b.range.min=Math.min(w[i],b.range.min),b.range.max=Math.max(w[i]+w[r],b.range.max)}function a(b){return b[i]+b[r]/2}function c(b){return b.length-1}function l(b){return b.max-b.min}var u,p,h=n[0],v=c(n),f=n[v],y=0;F(n,function(b,w){var g,_,E;b.elements.length<2?w&&w!==n.length-1&&(o(b,b.elements[0]),y+=l(b.range)):(_=(g=dn(b.elements,i))[0],w===v&&(_=g[c(g)]),E=a(_),b.range=null,F(g,function(S){(function(D,s){var d={y:0};d[i]=D-a(s),d[i]&&(d[nb[i]]=0,e.moveElements([s],d,s.parent))})(E,S),b.range!==null?o(b,S):b.range={min:S[i],max:S[i]+S[r]}}),w&&w!==n.length-1&&(y+=l(b.range)))}),p=Math.abs(f.range.min-h.range.max),(u=Math.round((p-y)/(n.length-1)))<n.length-1||F(n,function(b,w){var g,_={};b!==h&&b!==f&&(g=n[w-1],b.range.max=0,F(b.elements,function(E,S){_[nb[i]]=0,_[i]=g.range.max-E[i]+u,b.range.min!==E[i]&&(_[i]+=E[i]-b.range.min),_[i]&&e.moveElements([E],_,E.parent),b.range.max=Math.max(E[i]+E[r],S?b.range.max:0)}))})},Dc.prototype.postExecute=function(t){},Bc.$inject=["layouter","canvas"],Bc.prototype.execute=function(t){var e=t.connection;return $(t,{oldWaypoints:e.waypoints}),e.waypoints=this._layouter.layoutConnection(e,t.hints),e},Bc.prototype.revert=function(t){var e=t.connection;return e.waypoints=t.oldWaypoints,e},fd.prototype.execute=function(t){var e=t.connection,n=t.delta,i=t.newParent||e.parent,r=t.newParentIndex,o=e.parent;return t.oldParent=o,t.oldParentIndex=Wt(o.children,e),Xt(i.children,e,r),e.parent=i,F(e.waypoints,function(a){a.x+=n.x,a.y+=n.y,a.original&&(a.original.x+=n.x,a.original.y+=n.y)}),e},fd.prototype.revert=function(t){var e=t.connection,n=e.parent,i=t.oldParent,r=t.oldParentIndex,o=t.delta;return Wt(n.children,e),Xt(i.children,e,r),e.parent=i,F(e.waypoints,function(a){a.x-=o.x,a.y-=o.y,a.original&&(a.original.x-=o.x,a.original.y-=o.y)}),e},vd.prototype.add=function(t,e){return this.addAll([t],e)},vd.prototype.addAll=function(t,e){var n=function(i,r,o){Ao(r)&&(r=!0),Se(r)&&(o=r,r=!0);var a=No((o=o||{}).allShapes),c=No(o.allConnections),l=No(o.enclosedElements),u=No(o.enclosedConnections),p=No(o.topLevel,r&&Ir(i,function(v){return v.id}));function h(v){p[v.source.id]&&p[v.target.id]&&(p[v.id]=[v]),a[v.source.id]&&a[v.target.id]&&(u[v.id]=l[v.id]=v),c[v.id]=v}return Ki(i,function(v){if(l[v.id]=v,!v.waypoints)return a[v.id]=v,F(v.incoming,h),F(v.outgoing,h),v.children;u[v.id]=c[v.id]=v}),{allShapes:a,allConnections:c,topLevel:p,enclosedConnections:u,enclosedElements:l}}(t,!!e,this);return $(this,n),this},ya.prototype.moveRecursive=function(t,e,n){return t?this.moveClosure(this.getClosure(t),e,n):[]},ya.prototype.moveClosure=function(t,e,n,i,r){var o=this._modeling,a=t.allShapes,c=t.allConnections,l=t.enclosedConnections,u=t.topLevel,p=!1;r&&r.parent===n&&(p=!0),F(a,function(h){o.moveShape(h,e,u[h.id]&&!p&&n,{recurse:!1,layout:!1})}),F(c,function(h){var v=!!a[h.source.id],f=!!a[h.target.id];l[h.id]&&v&&f?o.moveConnection(h,e,u[h.id]&&!p&&n):o.layoutConnection(h,{connectionStart:v&&Vp(h,h.source,e),connectionEnd:f&&Fp(h,h.target,e)})})},ya.prototype.getClosure=function(t){return new vd().addAll(t,!0)},Oc.$inject=["modeling"],Oc.prototype.preExecute=function(t){t.closure=this._helper.getClosure(t.shapes)},Oc.prototype.postExecute=function(t){var e,n=t.hints;n&&n.primaryShape&&(e=n.primaryShape,n.oldParent=e.parent),this._helper.moveClosure(t.closure,t.delta,t.newParent,t.newHost,e)},cr.$inject=["modeling"],cr.prototype.execute=function(t){var e=t.shape,n=t.delta,i=t.newParent||e.parent,r=t.newParentIndex,o=e.parent;return t.oldBounds=mi(e,["x","y","width","height"]),t.oldParent=o,t.oldParentIndex=Wt(o.children,e),Xt(i.children,e,r),$(e,{parent:i,x:e.x+n.x,y:e.y+n.y}),e},cr.prototype.postExecute=function(t){var e=t.shape,n=t.delta,i=t.hints,r=this._modeling;i.layout!==!1&&(F(e.incoming,function(o){r.layoutConnection(o,{connectionEnd:Fp(o,e,n)})}),F(e.outgoing,function(o){r.layoutConnection(o,{connectionStart:Vp(o,e,n)})})),i.recurse!==!1&&this.moveChildren(t)},cr.prototype.revert=function(t){var e=t.shape,n=t.oldParent,i=t.oldParentIndex,r=t.delta;return Xt(n.children,e,i),$(e,{parent:n,x:e.x-r.x,y:e.y-r.y}),e},cr.prototype.moveChildren=function(t){var e=t.delta,n=t.shape;this._helper.moveRecursive(n.children,e,null)},cr.prototype.getNewParent=function(t){return t.newParent||t.shape.parent},ga.$inject=["modeling"],ga.prototype.execute=function(t){var e=t.newSource,n=t.newTarget,i=t.connection,r=t.dockingOrPoints;if(!e&&!n)throw new Error("newSource or newTarget required");return _t(r)&&(t.oldWaypoints=i.waypoints,i.waypoints=r),e&&(t.oldSource=i.source,i.source=e),n&&(t.oldTarget=i.target,i.target=n),i},ga.prototype.postExecute=function(t){var e=t.connection,n=t.newSource,i=t.newTarget,r=t.dockingOrPoints,o=t.hints||{},a={};o.connectionStart&&(a.connectionStart=o.connectionStart),o.connectionEnd&&(a.connectionEnd=o.connectionEnd),o.layoutConnection!==!1&&(!n||i&&o.docking!=="source"||(a.connectionStart=a.connectionStart||ib(_t(r)?r[0]:r)),!i||n&&o.docking!=="target"||(a.connectionEnd=a.connectionEnd||ib(_t(r)?r[r.length-1]:r)),o.newWaypoints&&(a.waypoints=o.newWaypoints),this._modeling.layoutConnection(e,a))},ga.prototype.revert=function(t){var e=t.oldSource,n=t.oldTarget,i=t.oldWaypoints,r=t.connection;return e&&(r.source=e),n&&(r.target=n),i&&(r.waypoints=i),r},ti.$inject=["modeling","rules"],ti.prototype.preExecute=function(t){var e,n=this,i=this._modeling,r=this._rules,o=t.oldShape,a=t.newData,c=t.hints||{};function l(y,b,w){return r.allowed("connection.reconnect",{connection:w,source:y,target:b})}var u,p={x:a.x,y:a.y},h={x:o.x,y:o.y,width:o.width,height:o.height};e=t.newShape=t.newShape||n.createShape(a,p,o.parent,c),o.host&&i.updateAttachment(e,o.host),c.moveChildren!==!1&&(u=o.children.slice(),i.moveElements(u,{x:0,y:0},e,c));var v=o.incoming.slice(),f=o.outgoing.slice();F(v,function(y){l(y.source,e,y)&&n.reconnectEnd(y,e,vc(y,e,h),c)}),F(f,function(y){var b=y.target;l(e,b,y)&&n.reconnectStart(y,e,fc(y,e,h),c)})},ti.prototype.postExecute=function(t){var e=t.oldShape;this._modeling.removeShape(e)},ti.prototype.execute=function(t){},ti.prototype.revert=function(t){},ti.prototype.createShape=function(t,e,n,i){return this._modeling.createShape(t,e,n,i)},ti.prototype.reconnectStart=function(t,e,n,i){this._modeling.reconnectStart(t,e,n,i)},ti.prototype.reconnectEnd=function(t,e,n,i){this._modeling.reconnectEnd(t,e,n,i)},ba.$inject=["modeling"],ba.prototype.execute=function(t){var e=t.shape,n=t.newBounds,i=t.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return t.oldBounds={width:e.width,height:e.height,x:e.x,y:e.y},$(e,{width:n.width,height:n.height,x:n.x,y:n.y}),e},ba.prototype.postExecute=function(t){var e=this._modeling,n=t.shape,i=t.oldBounds;(t.hints||{}).layout!==!1&&(F(n.incoming,function(r){e.layoutConnection(r,{connectionEnd:vc(r,n,i)})}),F(n.outgoing,function(r){e.layoutConnection(r,{connectionStart:fc(r,n,i)})}))},ba.prototype.revert=function(t){var e=t.shape,n=t.oldBounds;return $(e,{width:n.width,height:n.height,x:n.x,y:n.y}),e},Ii.$inject=["modeling"],Ii.prototype.preExecute=function(t){var e=t.delta,n=t.direction,i=t.movingShapes,r=t.resizingShapes,o=t.start,a={};this.moveShapes(i,e),F(r,function(c){a[c.id]=function(l){return{x:l.x,y:l.y,height:l.height,width:l.width}}(c)}),this.resizeShapes(r,e,n),this.updateConnectionWaypoints(function(c,l){var u=[];return F(c.concat(l),function(p){var h=p.incoming,v=p.outgoing;F(h.concat(v),function(f){var y=f.source,b=f.target;(ma(c,y)||ma(c,b)||ma(l,y)||ma(l,b))&&(ma(u,f)||u.push(f))})}),u}(i,r),e,n,o,i,r,a)},Ii.prototype.execute=function(){},Ii.prototype.revert=function(){},Ii.prototype.moveShapes=function(t,e){var n=this;F(t,function(i){n._modeling.moveShape(i,e,null,{autoResize:!1,layout:!1,recurse:!1})})},Ii.prototype.resizeShapes=function(t,e,n){var i=this;F(t,function(r){var o=function(a,c,l){var u=a.x,p=a.y,h=a.width,v=a.height,f=l.x,y=l.y;switch(c){case"n":return{x:u,y:p+y,width:h,height:v-y};case"s":return{x:u,y:p,width:h,height:v+y};case"w":return{x:u+f,y:p,width:h-f,height:v};case"e":return{x:u,y:p,width:h+f,height:v};default:throw new Error("unknown direction: "+c)}}(r,n,e);i._modeling.resizeShape(r,o,null,{attachSupport:!1,autoResize:!1,layout:!1})})},Ii.prototype.updateConnectionWaypoints=function(t,e,n,i,r,o,a){var c=this,l=r.concat(o);F(t,function(u){var p=u.source,h=u.target,v=function(b){return pe(b.waypoints,function(w){return(w=rb(w)).original&&(w.original=rb(w.original)),w})}(u),f=ob(n),y={labelBehavior:!1};Di(l,p)&&Di(l,h)?(v=pe(v,function(b){return ab(b,i,n)&&(b[f]=b[f]+e[f]),b.original&&ab(b.original,i,n)&&(b.original[f]=b.original[f]+e[f]),b}),c._modeling.updateWaypoints(u,v,{labelBehavior:!1})):(Di(l,p)||Di(l,h))&&(Di(r,p)?y.connectionStart=Vp(u,p,e):Di(r,h)?y.connectionEnd=Fp(u,h,e):Di(o,p)?y.connectionStart=fc(u,p,a[p.id]):Di(o,h)&&(y.connectionEnd=vc(u,h,a[h.id])),c._modeling.layoutConnection(u,y))})},jc.$inject=["modeling"],jc.prototype.execute=function(t){var e=t.shape,n=e.children;t.oldChildrenVisibility=sb(n),e.collapsed=!e.collapsed;var i=cb(n,e.collapsed);return[e].concat(i)},jc.prototype.revert=function(t){var e=t.shape,n=t.oldChildrenVisibility,i=lb(e.children,n);return e.collapsed=!e.collapsed,[e].concat(i)},Lc.$inject=["modeling"],Lc.prototype.execute=function(t){var e=t.shape,n=t.newHost,i=e.host;return t.oldHost=i,t.attacherIdx=ub(i,e),pb(n,e),e.host=n,e},Lc.prototype.revert=function(t){var e=t.shape,n=t.newHost,i=t.oldHost,r=t.attacherIdx;return e.host=i,ub(n,e),pb(i,e,r),e},yd.prototype.execute=function(t){var e=t.connection,n=t.newWaypoints;return t.oldWaypoints=e.waypoints,e.waypoints=n,e},yd.prototype.revert=function(t){var e=t.connection,n=t.oldWaypoints;return e.waypoints=n,e},Bt.$inject=["eventBus","elementFactory","commandStack"],Bt.prototype.getHandlers=function(){return{"shape.append":Mc,"shape.create":Ni,"shape.delete":va,"shape.move":cr,"shape.resize":ba,"shape.replace":ti,"shape.toggleCollapse":jc,spaceTool:Ii,"label.create":fa,"connection.create":Rc,"connection.delete":Ic,"connection.move":fd,"connection.layout":Bc,"connection.updateWaypoints":yd,"connection.reconnect":ga,"elements.create":hd,"elements.move":Oc,"elements.delete":md,"elements.distribute":Dc,"elements.align":Pc,"element.updateAttachment":Lc}},Bt.prototype.registerHandlers=function(t){F(this.getHandlers(),function(e,n){t.registerHandler(n,e)})},Bt.prototype.moveShape=function(t,e,n,i,r){typeof i=="object"&&(r=i,i=null);var o={shape:t,delta:e,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",o)},Bt.prototype.updateAttachment=function(t,e){var n={shape:t,newHost:e};this._commandStack.execute("element.updateAttachment",n)},Bt.prototype.moveElements=function(t,e,n,i){var r,o=(i=i||{}).attach,a=n;o===!0?(r=n,a=n.parent):o===!1&&(r=null);var c={shapes:t,delta:e,newParent:a,newHost:r,hints:i};this._commandStack.execute("elements.move",c)},Bt.prototype.moveConnection=function(t,e,n,i,r){typeof i=="object"&&(r=i,i=void 0);var o={connection:t,delta:e,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",o)},Bt.prototype.layoutConnection=function(t,e){var n={connection:t,hints:e||{}};this._commandStack.execute("connection.layout",n)},Bt.prototype.createConnection=function(t,e,n,i,r,o){typeof n=="object"&&(o=r,r=i,i=n,n=void 0);var a={source:t,target:e,parent:r,parentIndex:n,connection:i=this._create("connection",i),hints:o};return this._commandStack.execute("connection.create",a),a.connection},Bt.prototype.createShape=function(t,e,n,i,r){typeof i!="number"&&(r=i,i=void 0);var o,a,c=(r=r||{}).attach;t=this._create("shape",t),c?(o=n.parent,a=n):o=n;var l={position:e,shape:t,parent:o,parentIndex:i,host:a,hints:r};return this._commandStack.execute("shape.create",l),l.shape},Bt.prototype.createElements=function(t,e,n,i,r){_t(t)||(t=[t]),typeof i!="number"&&(r=i,i=void 0);var o={position:e,elements:t,parent:n,parentIndex:i,hints:r=r||{}};return this._commandStack.execute("elements.create",o),o.elements},Bt.prototype.createLabel=function(t,e,n,i){n=this._create("label",n);var r={labelTarget:t,position:e,parent:i||t.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape},Bt.prototype.appendShape=function(t,e,n,i,r){r=r||{};var o={source:t,position:n,target:i,shape:e=this._create("shape",e),connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",o),o.shape},Bt.prototype.removeElements=function(t){var e={elements:t};this._commandStack.execute("elements.delete",e)},Bt.prototype.distributeElements=function(t,e,n){var i={groups:t,axis:e,dimension:n};this._commandStack.execute("elements.distribute",i)},Bt.prototype.removeShape=function(t,e){var n={shape:t,hints:e||{}};this._commandStack.execute("shape.delete",n)},Bt.prototype.removeConnection=function(t,e){var n={connection:t,hints:e||{}};this._commandStack.execute("connection.delete",n)},Bt.prototype.replaceShape=function(t,e,n){var i={oldShape:t,newData:e,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape},Bt.prototype.alignElements=function(t,e){var n={elements:t,alignment:e};this._commandStack.execute("elements.align",n)},Bt.prototype.resizeShape=function(t,e,n,i){var r={shape:t,newBounds:e,minBounds:n,hints:i};this._commandStack.execute("shape.resize",r)},Bt.prototype.createSpace=function(t,e,n,i,r){var o={delta:n,direction:i,movingShapes:t,resizingShapes:e,start:r};this._commandStack.execute("spaceTool",o)},Bt.prototype.updateWaypoints=function(t,e,n){var i={connection:t,newWaypoints:e,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)},Bt.prototype.reconnect=function(t,e,n,i,r){var o={connection:t,newSource:e,newTarget:n,dockingOrPoints:i,hints:r||{}};this._commandStack.execute("connection.reconnect",o)},Bt.prototype.reconnectStart=function(t,e,n,i){i||(i={}),this.reconnect(t,e,t.target,n,$(i,{docking:"source"}))},Bt.prototype.reconnectEnd=function(t,e,n,i){i||(i={}),this.reconnect(t,t.source,e,n,$(i,{docking:"target"}))},Bt.prototype.connect=function(t,e,n,i){return this.createConnection(t,e,n||{},t.parent,i)},Bt.prototype._create=function(t,e){return e instanceof Bo?e:this._elementFactory.create(t,e)},Bt.prototype.toggleCollapse=function(t,e){var n={shape:t,hints:e||{}};this._commandStack.execute("shape.toggleCollapse",n)},xa.$inject=["elementRegistry"],xa.prototype.execute=function(t){var e=t.element,n=t.moddleElement,i=t.properties;if(!n)throw new Error("<moddleElement> required");var r=t.changed||this.getVisualReferences(n).concat(e),o=t.oldProperties||function(a,c){return $e(c,function(l,u){return l[u]=a.get(u),l},{})}(n,Za(i));return db(n,i),t.oldProperties=o,t.changed=r,r},xa.prototype.revert=function(t){var e=t.oldProperties,n=t.moddleElement,i=t.changed;return db(n,e),i},xa.prototype.getVisualReferences=function(t){var e=this._elementRegistry;return A(t,"bpmn:DataObject")?function(n,i){return i.filter(function(r){return A(r,"bpmn:DataObjectReference")&&rt(r).dataObjectRef===n})}(t,e):[]};var Ea="default",ei="id",hb="di",T1={width:0,height:0};function wa(t,e,n,i,r){this._elementRegistry=t,this._moddle=e,this._translate=n,this._modeling=i,this._textRenderer=r}function mb(t,e){return ei in t&&t[ei]!==e[ei]}function fb(t,e){F(e,function(n,i){i!==hb?t.set(i,n):t.di&&function(r,o){F(o,function(a,c){r.set(c,a)})}(t.di,n)})}wa.$inject=["elementRegistry","moddle","translate","modeling","textRenderer"],wa.prototype.execute=function(t){var e=t.element,n=[e],i=this._translate;if(!e)throw new Error(i("element required"));var r=this._elementRegistry,o=this._moddle.ids,a=e.businessObject,c=function(u){var p=$({},u);return A1.forEach(function(h){h in u&&(p[h]=rt(p[h]))}),p}(t.properties),l=t.oldProperties||function(u,p){var h=Za(p);return $e(h,function(v,f){return v[f]=f!==hb?u.get(f):function(y,b){return $e(b,function(w,g){return w[g]=y.get(g),w},{})}(u.di,Za(p.di)),v},{})}(a,c);return mb(c,a)&&(o.unclaim(a[ei]),r.updateId(e,c[ei]),o.claim(c[ei],a)),Ea in c&&(c[Ea]&&n.push(r.get(c[Ea].id)),a[Ea]&&n.push(r.get(a[Ea].id))),fb(a,c),t.oldProperties=l,t.changed=n,n},wa.prototype.postExecute=function(t){var e=t.element.label,n=e&&rt(e).name;if(n){var i=this._textRenderer.getExternalLabelBounds(e,n);this._modeling.resizeShape(e,i,T1)}},wa.prototype.revert=function(t){var e=t.element,n=t.properties,i=t.oldProperties,r=e.businessObject,o=this._elementRegistry,a=this._moddle.ids;return fb(r,i),mb(n,r)&&(a.unclaim(n[ei]),o.updateId(e,i[ei]),a.claim(i[ei],r)),t.changed};var A1=["default"];function Vc(t,e){this._canvas=t,this._modeling=e}function gd(t,e){this._modeling=t,this._spaceTool=e}function bd(t,e){this._modeling=t,this._translate=e}function _a(t,e){this._modeling=t,this._spaceTool=e}Vc.$inject=["canvas","modeling"],Vc.prototype.execute=function(t){var e=this._canvas,n=t.newRoot,i=n.businessObject,r=e.getRootElement(),o=r.businessObject,a=o.$parent,c=o.di;e.setRootElement(n,!0),Xt(a.rootElements,i),i.$parent=a,Wt(a.rootElements,o),o.$parent=null,o.di=null,c.bpmnElement=i,i.di=c,t.oldRoot=r},Vc.prototype.revert=function(t){var e=this._canvas,n=t.newRoot.businessObject,i=t.oldRoot,r=i.businessObject,o=n.$parent,a=n.di;e.setRootElement(i,!0),Wt(o.rootElements,n),n.$parent=null,Xt(o.rootElements,r),r.$parent=o,n.di=null,a.bpmnElement=r,r.di=a},gd.$inject=["modeling","spaceTool"],gd.prototype.preExecute=function(t){var e=this._spaceTool,n=this._modeling,i=t.shape,r=t.location,o=xn(i),a=o===i,c=a?i:i.parent;ki(c).length||n.createShape({type:"bpmn:Lane"},{x:i.x+oo,y:i.y,width:i.width-oo,height:i.height},c);var l=[];Ki(o,function(y){return l.push(y),y.label&&l.push(y.label),y===i?[]:Et(y.children,function(b){return b!==i})});var u=r==="top"?-120:120,p=r==="top"?i.y:i.y+i.height,h=p+(r==="top"?10:-10),v=r==="top"?"n":"s",f=e.calculateAdjustments(l,"y",u,h);e.makeSpace(f.movingShapes,f.resizingShapes,{x:0,y:u},v,h),t.newLane=n.createShape({type:"bpmn:Lane"},{x:i.x+(a?oo:0),y:p-(r==="top"?120:0),width:i.width-(a?oo:0),height:120},c)},bd.$inject=["modeling","translate"],bd.prototype.preExecute=function(t){var e=this._modeling,n=this._translate,i=t.shape,r=t.count,o=ki(i),a=o.length;if(a>r)throw new Error(n("more than {count} child lanes",{count:r}));var c,l,u,p,h,v=Math.round(i.height/r);for(h=0;h<r;h++)c=i.y+h*v,l=h===r-1?i.height-v*h:v,u={x:i.x+oo,y:c,width:i.width-oo,height:l},h<a?e.resizeShape(o[h],u):(p={type:"bpmn:Lane"},e.createShape(p,u,i))},_a.$inject=["modeling","spaceTool"],_a.prototype.preExecute=function(t){var e=t.shape,n=t.newBounds;t.balanced!==!1?this.resizeBalanced(e,n):this.resizeSpace(e,n)},_a.prototype.resizeBalanced=function(t,e){var n=this._modeling,i=P_(t,e);n.resizeShape(t,e),i.forEach(function(r){n.resizeShape(r.shape,r.newBounds)})},_a.prototype.resizeSpace=function(t,e){var n,i,r,o,a,c=this._spaceTool,l=ct(t),u=vy(ct(e),l),p=xn(t),h=[],v=[];Ki(p,function(f){return h.push(f),(A(f,"bpmn:Lane")||A(f,"bpmn:Participant"))&&v.push(f),f.children}),(u.bottom||u.top)&&(n=u.bottom||u.top,i=t.y+(u.bottom?t.height:0)+(u.bottom?-10:10),r=u.bottom?"s":"n",o=u.top>0||u.bottom<0?-n:n,a=c.calculateAdjustments(h,"y",o,i),c.makeSpace(a.movingShapes,a.resizingShapes,{x:0,y:n},r)),(u.left||u.right)&&(n=u.right||u.left,i=t.x+(u.right?t.width:0)+(u.right?-10:100),r=u.right?"e":"w",o=u.left>0||u.right<0?-n:n,a=c.calculateAdjustments(v,"x",o,i),c.makeSpace(a.movingShapes,a.resizingShapes,{x:n,y:0},r))};var Sa="flowNodeRef",xd="lanes";function Ca(t){this._elementRegistry=t}function Fc(t){this._moddle=t}Ca.$inject=["elementRegistry"],Ca.prototype.computeUpdates=function(t,e){var n=[],i=[],r={},o=[];function a(l){n.indexOf(l)===-1&&(o.push(l),n.push(l))}function c(l){if(!l.parent)return[];var u=function(p){var h=xn(p);return r[h.id]||(r[h.id]=ec(h)),r[h.id]}(l);return u.filter(function(p){return h=l,v=ct(p),f=h.x+h.width/2,y=h.y+h.height/2,f>v.left&&f<v.right&&y>v.top&&y<v.bottom;var h,v,f,y}).map(function(p){return p.businessObject})}return e.forEach(function(l){var u=xn(l);u&&n.indexOf(u)===-1&&(u.children.filter(function(p){return A(p,"bpmn:FlowNode")}).forEach(a),n.push(u))}),t.forEach(a),o.forEach(function(l){var u=l.businessObject,p=u.get(xd).slice(),h=c(l);i.push({flowNode:u,remove:p,add:h})}),e.forEach(function(l){var u=l.businessObject;l.parent||u.get(Sa).forEach(function(p){i.push({flowNode:p,remove:[u],add:[]})})}),i},Ca.prototype.execute=function(t){var e=t.updates;e||(e=t.updates=this.computeUpdates(t.flowNodeShapes,t.laneShapes)),e.forEach(function(n){var i=n.flowNode,r=i.get(xd);n.remove.forEach(function(o){Wt(r,o),Wt(o.get(Sa),i)}),n.add.forEach(function(o){Xt(r,o),Xt(o.get(Sa),i)})})},Ca.prototype.revert=function(t){t.updates.forEach(function(e){var n=e.flowNode,i=n.get(xd);e.add.forEach(function(r){Wt(i,r),Wt(r.get(Sa),n)}),e.remove.forEach(function(r){Xt(i,r),Xt(r.get(Sa),n)})})},Fc.$inject=["moddle"],Fc.prototype.execute=function(t){var e=this._moddle.ids,n=t.id,i=t.element;t.claiming?e.claim(n,i):e.unclaim(n)},Fc.prototype.revert=function(t){var e=this._moddle.ids,n=t.id,i=t.element;t.claiming?e.unclaim(n):e.claim(n,i)};var k1={fill:void 0,stroke:void 0};function Ed(t){this._commandStack=t,this._normalizeColor=function(e){if(e){if(Rr(e)){var n=function(i){var r=document.createElement("canvas").getContext("2d");return r.fillStyle="transparent",r.fillStyle=i,/^#[0-9a-fA-F]{6}$/.test(r.fillStyle)?r.fillStyle:null}(e);if(n)return n}throw new Error("invalid color value: "+e)}}}Ed.$inject=["commandStack"],Ed.prototype.postExecute=function(t){var e=t.elements,n=t.colors||k1,i=this,r={};"fill"in n&&$(r,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&$(r,{"border-color":this._normalizeColor(n.stroke)}),F(e,function(o){var a=function(c){return!!c.waypoints}(o)?mi(r,["border-color"]):r;(function(c){"border-color"in c&&(c.stroke=c["border-color"]),"background-color"in c&&(c.fill=c["background-color"])})(a),o.labelTarget?i._commandStack.execute("element.updateModdleProperties",{element:o,moddleElement:o.businessObject.di.label,properties:{color:r["background-color"]}}):i._commandStack.execute("element.updateProperties",{element:o,properties:{di:a}})})};var P1={width:0,height:0};function vb(t,e){function n(i,r){var o=i.label||i,a=i.labelTarget||i;return function(c,l){var u=c.businessObject,p=vf(u);p&&(p==="categoryValueRef"?u.categoryValueRef.value=l:u[p]=l)}(o,r),[o,a]}this.preExecute=function(i){var r=i.element,o=r.businessObject,a=i.newLabel;if(!xe(r)&&Kr(r)&&!Ss(r)&&!yb(a)){var c=Cs(r);c={x:c.x,y:c.y+7},t.createLabel(r,c,{id:o.id+"_label",businessObject:o})}},this.execute=function(i){return i.oldLabel=vn(i.element),n(i.element,i.newLabel)},this.revert=function(i){return n(i.element,i.oldLabel)},this.postExecute=function(i){var r=i.element,o=r.label||r,a=i.newLabel,c=i.newBounds,l=i.hints||{};if(xe(o)||A(o,"bpmn:TextAnnotation"))if(xe(o)&&yb(a))l.removeShape!==!1&&t.removeShape(o,{unsetLabel:!1});else{var u=vn(o);c===void 0&&(c=e.getExternalLabelBounds(o,u)),c&&t.resizeShape(o,c,P1)}}}function yb(t){return!t||!t.trim()}function we(t,e,n,i){Bt.call(this,t,e,n),this._bpmnRules=i}function gb(){}vb.$inject=["modeling","textRenderer"],at(we,Bt),we.$inject=["eventBus","elementFactory","commandStack","bpmnRules"],we.prototype.getHandlers=function(){var t=Bt.prototype.getHandlers.call(this);return t["element.updateModdleProperties"]=xa,t["element.updateProperties"]=wa,t["canvas.updateRoot"]=Vc,t["lane.add"]=gd,t["lane.resize"]=_a,t["lane.split"]=bd,t["lane.updateRefs"]=Ca,t["id.updateClaim"]=Fc,t["element.setColor"]=Ed,t["element.updateLabel"]=vb,t},we.prototype.updateLabel=function(t,e,n,i){this._commandStack.execute("element.updateLabel",{element:t,newLabel:e,newBounds:n,hints:i||{}})},we.prototype.connect=function(t,e,n,i){var r=this._bpmnRules;if(n||(n=r.canConnect(t,e)),n)return this.createConnection(t,e,n,t.parent,i)},we.prototype.updateModdleProperties=function(t,e,n){this._commandStack.execute("element.updateModdleProperties",{element:t,moddleElement:e,properties:n})},we.prototype.updateProperties=function(t,e){this._commandStack.execute("element.updateProperties",{element:t,properties:e})},we.prototype.resizeLane=function(t,e,n){this._commandStack.execute("lane.resize",{shape:t,newBounds:e,balanced:n})},we.prototype.addLane=function(t,e){var n={shape:t,location:e};return this._commandStack.execute("lane.add",n),n.newLane},we.prototype.splitLane=function(t,e){this._commandStack.execute("lane.split",{shape:t,count:e})},we.prototype.makeCollaboration=function(){var t=this._create("root",{type:"bpmn:Collaboration"}),e={newRoot:t};return this._commandStack.execute("canvas.updateRoot",e),t},we.prototype.updateLaneRefs=function(t,e){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:t,laneShapes:e})},we.prototype.makeProcess=function(){var t={newRoot:this._create("root",{type:"bpmn:Process"})};this._commandStack.execute("canvas.updateRoot",t)},we.prototype.claimId=function(t,e){this._commandStack.execute("id.updateClaim",{id:t,element:e,claiming:!0})},we.prototype.unclaimId=function(t,e){this._commandStack.execute("id.updateClaim",{id:t,element:e})},we.prototype.setColor=function(t,e){t.length||(t=[t]),this._commandStack.execute("element.setColor",{elements:t,colors:e})},gb.prototype.layoutConnection=function(t,e){return[(e=e||{}).connectionStart||gt(e.source||t.source),e.connectionEnd||gt(e.target||t.target)]};var zc=Math.round,M1={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function bb(t,e,n){var i,r,o,a=ye(e,t,5),c=n.split(":")[0],l=zc((e.x-t.x)/2+t.x),u=zc((e.y-t.y)/2+t.y),p=(o=a,{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[c].test(o)),h=/h|r|l/.test(c),v=!1,f=!1;return p?(i=h?{x:l,y:t.y}:{x:t.x,y:u},r=h?"h:h":"v:v"):(v=function(y,b){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[b].test(y)}(a,c),r=h?"h:v":"v:h",v?h?(f=u===t.y,i={x:t.x+20*(/l/.test(c)?-1:1),y:f?u+20:u}):i={x:(f=l===t.x)?l+20:l,y:t.y+20*(/t/.test(c)?-1:1)}:i={x:l,y:u}),{waypoints:wd(t,i,r).concat(i),directions:r,turnNextDirections:f}}function xb(t){return t.split(":").reverse().join(":")}function wd(t,e,n){if(!function(a){return a&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(a)}(n=n||"h:h"))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(wb(n)){var i=function(a,c,l){return bb(a,c,l)}(t,e,n),r=function(a,c,l){var u=bb(c,a,xb(l));return{waypoints:u.waypoints.slice().reverse(),directions:xb(u.directions),turnNextDirections:u.turnNextDirections}}(t,e,n),o=function(a,c){var l=a.directions.split(":")[1],u=c.directions.split(":")[0];a.turnNextDirections&&(l=l=="h"?"v":"h"),c.turnNextDirections&&(u=u=="h"?"v":"h");var p=l+":"+u;return{waypoints:wd(a.waypoints[a.waypoints.length-1],c.waypoints[0],p),directions:p}}(i,r);return[].concat(i.waypoints,o.waypoints,r.waypoints)}return function(a,c,l){var u=zc((c.x-a.x)/2+a.x),p=zc((c.y-a.y)/2+a.y);if(l==="h:v")return[{x:c.x,y:a.y}];if(l==="v:h")return[{x:a.x,y:c.y}];if(l==="h:h")return[{x:u,y:a.y},{x:u,y:c.y}];if(l==="v:v")return[{x:a.x,y:p},{x:c.x,y:p}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}(t,e,n)}function R1(t,e,n,i,r){var o=Lx(r&&r.preferredLayouts||[],"straight")[0]||"h:h",a=ye(t,e,M1[o]||0),c=function(p,h){if(wb(h))return h;switch(p){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return h}}(a,o);n=n||gt(t),i=i||gt(e);var l=c.split(":"),u=_b(n,t,l[0],function(p){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[p]}(a));return function(p,h,v){var f=wd(p,h,v);return f.unshift(p),f.push(h),Sb(f)}(u,_b(i,e,l[1],a),c)}function N1(t,e,n,i,r,o){var a;return _t(n)&&(r=n,o=i,n=gt(t),i=gt(e)),r=r||[],a=(o=$({preferredLayouts:[]},o)).preferredLayouts.indexOf("straight")!==-1&&function(c,l,u,p,h){var v,f,y={};return f=ye(c,l),/^(top|bottom|left|right)$/.test(f)?(/top|bottom/.test(f)&&(v="x"),/left|right/.test(f)&&(v="y"),h.preserveDocking==="target"?Eb(v,p,c)?(y[v]=p[v],[{x:y.x!==void 0?y.x:u.x,y:y.y!==void 0?y.y:u.y,original:{x:y.x!==void 0?y.x:u.x,y:y.y!==void 0?y.y:u.y}},{x:p.x,y:p.y}]):null:Eb(v,u,l)?(y[v]=u[v],[{x:u.x,y:u.y},{x:y.x!==void 0?y.x:p.x,y:y.y!==void 0?y.y:p.y,original:{x:y.x!==void 0?y.x:p.x,y:y.y!==void 0?y.y:p.y}}]):null):null}(t,e,n,i,o),a||(a=o.connectionEnd&&function(c,l,u,p){var h=p.slice().reverse();return h=_d(c,l,u,h),h?h.reverse():null}(e,t,i,r),a||(a=o.connectionStart&&_d(t,e,n,r))||(!o.connectionStart&&!o.connectionEnd&&r&&r.length?r:R1(t,e,n,i,o)))}function Eb(t,e,n){return function(i,r,o){return i>=r&&i<=o}(e[t],n[t],n[t]+n[{x:"width",y:"height"}[t]])}function _d(t,e,n,i){if(function(c){return c.length<3||!(c.length>4)&&!!jt(c,function(l,u){var p=c[u-1];return p&&Io(l,p)<3})}(i))return null;var r,o=i[0],a=i.slice();return a[0]=n,a[1]=function(c,l,u){switch(Gn(l,c)){case"v":return{x:u.x,y:c.y};case"h":return{x:c.x,y:u.y}}return{x:c.x,y:c.y}}(a[1],o,n),r=function(c,l,u){var p;for(p=c.length-2;p!==0;p--)if(mm(c[p],l,20)||mm(c[p],u,20))return c.slice(p);return c}(a,t,e),r!==a&&(a=_d(t,e,n,r)),a&&Gn(a)?null:a}function wb(t){return t&&/t|r|b|l/.test(t)}function _b(t,e,n,i){if(n==="h"&&(n=/left/.test(i)?"l":"r"),n==="v"&&(n=/top/.test(i)?"t":"b"),n==="t")return{original:t,x:t.x,y:e.y};if(n==="r")return{original:t,x:e.x+e.width,y:t.y};if(n==="b")return{original:t,x:t.x,y:e.y+e.height};if(n==="l")return{original:t,x:e.x,y:t.y};throw new Error("unexpected dockingDirection: <"+n+">")}function Sb(t){return t.reduce(function(e,n,i){return cu(e[e.length-1],t[i+1],n,0)||e.push(n),e},[])}var Sd={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},$c={top:"t",right:"r",bottom:"b",left:"l"};function Cd(){}function I1(t,e){return A(e,"bpmn:Participant")?"source":A(t,"bpmn:Participant")?"target":Ta(e)?"source":Ta(t)||A(e,"bpmn:Event")?"target":A(t,"bpmn:Event")?"source":null}function D1(t){return Ta(t)?"target":"source"}function Cb(t,e){return t?t.original||t:gt(e)}function Tb(t,e){return A(e,"bpmn:Activity")&&A(t,"bpmn:BoundaryEvent")&&e.businessObject.isForCompensation}function Ta(t){return A(t,"bpmn:SubProcess")&&It(t)}function Aa(t,e){return t===e}function ka(t){var e=/right|left/.exec(t);return e&&e[0]}function lr(t){var e=/top|bottom/.exec(t);return e&&e[0]}function Td(t){return t==="right"||t==="left"}function B1(t,e){var n=e.waypoints,i=n&&n.length&&ye(n[0],t);return i==="top"?["t:r"]:i==="right"?["r:b"]:i==="left"?["l:t"]:["b:l"]}function O1(t,e,n){var i,r,o,a,c=gt(t),l=gt(e),u=(a=(o=t).host,ye(gt(o),a,-10)),p=Aa(t.host,e),h=["top","right","bottom","left"].indexOf(u)!==-1,v=ye(l,c,{x:t.width/2+e.width/2,y:t.height/2+e.height/2});return p?function(f,y,b,w,g){var _,E=y?f:lr(f),S=$c[E];return _=y?Td(f)?Ab("y",b,w,g)?"h":"b":Ab("x",b,w,g)?"v":"l":"v",[S+":"+_]}(u,h,t,e,n):(i=function(f,y,b){if(b)return $c[f];if(Aa(lr(f),lr(y))||(w=ka(f),g=ka(y),Sd[w]===g))return $c[lr(f)];var w,g;return $c[ka(f)]}(u,v,h),r=function(f,y,b){if(b)return Td(f)?(w=y,g=ka(f),_=Sd[g],w.indexOf(_)!==-1||Aa(f,y)?"h":"v"):function(E,S){var D=lr(E),s=Sd[D];return S.indexOf(s)!==-1}(f,y)||Aa(f,y)?"v":"h";var w,g,_;return Td(y)||Aa(lr(f),lr(y))&&ka(y)?"h":"v"}(u,v,h),[i+":"+r])}function Ab(t,e,n,i){return!(Ad(t,i,n,40)||Ad(t,i,{x:n.x+n.width,y:n.y+n.height},40)||Ad(t,i,gt(e),40))}function Ad(t,e,n,i){return Math.abs(e[t]-n[t])<i}function kb(t){return $({original:t.point.original||t.point},t.actual)}function Bi(t,e){this._elementRegistry=t,this._graphicsFactory=e}at(Cd,gb),Cd.prototype.layoutConnection=function(t,e){e||(e={});var n,i,r=e.source||t.source,o=e.target||t.target,a=e.waypoints||t.waypoints,c=e.connectionStart,l=e.connectionEnd;return c||(c=Cb(a&&a[0],r)),l||(l=Cb(a&&a[a.length-1],o)),(A(t,"bpmn:Association")||A(t,"bpmn:DataAssociation"))&&a&&!Tb(r,o)?[].concat([c],a.slice(1,-1),[l]):(A(t,"bpmn:MessageFlow")?n=function(u,p){return{preferredLayouts:["straight","v:v"],preserveDocking:I1(u,p)}}(r,o):(A(t,"bpmn:SequenceFlow")||Tb(r,o))&&(n=r===o?{preferredLayouts:B1(r,t)}:A(r,"bpmn:BoundaryEvent")?{preferredLayouts:O1(r,o,l)}:Ta(r)||Ta(o)?function(u){return{preferredLayouts:["straight","h:h"],preserveDocking:D1(u)}}(r):A(r,"bpmn:Gateway")?{preferredLayouts:["v:h"]}:A(o,"bpmn:Gateway")?{preferredLayouts:["h:v"]}:{preferredLayouts:["h:h"]}),n&&(i=Sb(N1(r,o,c,l,a,n=$(n,e)))),i||[c,l])},Bi.$inject=["elementRegistry","graphicsFactory"],Bi.prototype.getCroppedWaypoints=function(t,e,n){e=e||t.source,n=n||t.target;var i=this.getDockingPoint(t,e,!0),r=this.getDockingPoint(t,n),o=t.waypoints.slice(i.idx+1,r.idx);return o.unshift(kb(i)),o.push(kb(r)),o},Bi.prototype.getDockingPoint=function(t,e,n){var i,r,o=t.waypoints;return{point:r=o[i=n?0:o.length-1],actual:this._getIntersection(e,t,n)||r,idx:i}},Bi.prototype._getIntersection=function(t,e,n){return hu(this._getShapePath(t),this._getConnectionPath(e),n)},Bi.prototype._getConnectionPath=function(t){return this._graphicsFactory.getConnectionPath(t)},Bi.prototype._getShapePath=function(t){return this._graphicsFactory.getShapePath(t)},Bi.prototype._getGfx=function(t){return this._elementRegistry.getGraphics(t)};const j1={__init__:["modeling","bpmnUpdater"],__depends__:[p1,f1,v1,y1,hy,g1,x1,E1,w1,In,Ny,Zg],bpmnFactory:["type",rn],bpmnUpdater:["type",Fe],elementFactory:["type",Ri],modeling:["type",we],layouter:["type",Cd],connectionDocking:["type",Bi]};var Gc=Math.round;function Pb(t,e,n,i,r){function o(c,l,u,p){return r.allowed("elements.move",{shapes:c,delta:l,position:u,target:p})}function a(c,l,u,p){if(Se(u)&&(p=u,u=!1),!l.waypoints&&l.parent){var h=function(v){return{x:v.x+Gc(v.width/2),y:v.y+Gc(v.height/2)}}(l);return e.init(c,h,"shape.move",{cursor:"grabbing",autoActivate:u,data:{shape:l,context:p||{}}}),!0}}t.on("shape.move.start",1500,function(c){var l=c.context,u=c.shape,p=i.get().slice();p.indexOf(u)===-1&&(p=[u]),p=function(h){var v=Ir(h,"id");return Et(h,function(f){for(;f=f.parent;)if(v[f.id])return!1;return!0})}(p),$(l,{shapes:p,validatedShapes:p,shape:u})}),t.on("shape.move.start",1250,function(c){var l=c.context,u=l.validatedShapes;if(!(l.canExecute=o(u)))return!1}),t.on("shape.move.move",500,function(c){var l,u=c.context,p=u.validatedShapes,h=c.hover,v={x:c.dx,y:c.dy};l=o(p,v,{x:c.x,y:c.y},h),u.delta=v,u.canExecute=l,u.target=l!==null?h:null}),t.on("shape.move.end",function(c){var l=c.context,u=l.delta,p=l.canExecute,h=p==="attach",v=l.shapes;if(p===!1)return!1;u.x=Gc(u.x),u.y=Gc(u.y),u.x===0&&u.y===0||n.moveElements(v,u,l.target,{primaryShape:l.shape,attach:h})}),t.on("element.mousedown",function(c){if(Ti(c)){var l=Yr(c);if(!l)throw new Error("must supply DOM mousedown event");return a(l,c.element)}}),this.start=a}Pb.$inject=["eventBus","dragging","modeling","selection","rules"];var kd="djs-dragging",Mb="drop-ok",Rb="drop-not-ok",Nb="new-parent",Ib="attach-ok";function Db(t,e,n,i){function r(c){var l=function(u){var p=Et(u,function(h){return!function(v){return v.waypoints}(h)||jt(u,hn({id:h.source.id}))&&jt(u,hn({id:h.target.id}))});return p}(o(c));return l}function o(c){var l=ns(c,!0),u=pe(l,function(p){return(p.incoming||[]).concat(p.outgoing||[])});return Ja(l.concat(u))}function a(c,l){[Ib,Mb,Rb,Nb].forEach(function(u){u===l?e.addMarker(c,u):e.removeMarker(c,u)})}t.on("shape.move.start",499,function(c){var l=c.context,u=l.shapes,p=l.allDraggedElements,h=r(u);if(!l.dragGroup){var v=st("g");W(v,n.cls("djs-drag-group",["no-events"])),pt(e.getActiveLayer(),v),l.dragGroup=v}h.forEach(function(f){i.addDragger(f,l.dragGroup)}),F(p=p?Ja([p,o(u)]):o(u),function(f){e.addMarker(f,kd)}),l.allDraggedElements=p,l.differentParents=ko(Ir(u,function(f){return f.parent&&f.parent.id}))!==1}),t.on("shape.move.move",499,function(c){var l=c.context,u=l.dragGroup,p=l.target,h=l.shape.parent,v=l.canExecute;p&&(v==="attach"?a(p,Ib):l.canExecute&&p&&p.id!==h.id?a(p,Nb):a(p,l.canExecute?Mb:Rb)),je(u,c.dx,c.dy)}),t.on(["shape.move.out","shape.move.cleanup"],function(c){var l=c.context.target;l&&a(l,null)}),t.on("shape.move.cleanup",function(c){var l=c.context,u=l.allDraggedElements,p=l.dragGroup;F(u,function(h){e.removeMarker(h,kd)}),p&&Zt(p)}),this.makeDraggable=function(c,l,u){i.addDragger(l,c.dragGroup),u&&e.addMarker(l,kd),c.allDraggedElements?c.allDraggedElements.push(l):c.allDraggedElements=[l]}}Db.$inject=["eventBus","canvas","styles","previewSupport"];const L1={__depends__:[ks,In,Sf,On,Kn,Qo],__init__:["move","movePreview"],move:["type",Pb],movePreview:["type",Db]};var Bb=".djs-palette-toggle",Ob=".entry",V1=Bb+", "+Ob,Pd="djs-palette-",Md="open",jb="two-column";function te(t,e){this._eventBus=t,this._canvas=e;var n=this;t.on("tool-manager.update",function(i){var r=i.tool;n.updateToolHighlight(r)}),t.on("i18n.changed",function(){n._update()}),t.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}function F1(t,e){var n=e.getPaletteEntries();return Ce(n)?n(t):(F(n,function(i,r){t[r]=i}),t)}te.$inject=["eventBus","canvas"],te.prototype.registerProvider=function(t,e){e||(e=t,t=1e3),this._eventBus.on("palette.getProviders",t,function(n){n.providers.push(e)}),this._rebuild()},te.prototype.getEntries=function(){return this._getProviders().reduce(F1,{})},te.prototype._rebuild=function(){this._diagramInitialized&&this._getProviders().length&&(this._container||this._init(),this._update())},te.prototype._init=function(){var t=this,e=this._eventBus,n=this._getParentContainer(),i=this._container=Ft(te.HTML_MARKUP);n.appendChild(i),re(n).add(Pd+"shown"),Ue.bind(i,V1,"click",function(r){var o=r.delegateTarget;if(ts(o,Bb))return t.toggle();t.trigger("click",r)}),lt.bind(i,"mousedown",function(r){r.stopPropagation()}),Ue.bind(i,Ob,"dragstart",function(r){t.trigger("dragstart",r)}),e.on("canvas.resized",this._layoutChanged,this),e.fire("palette.create",{container:i})},te.prototype._getProviders=function(t){var e=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},te.prototype._toggleState=function(t){t=t||{};var e,n=this._getParentContainer(),i=this._container,r=this._eventBus,o=re(i),a=re(n);e="twoColumn"in t?t.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),o.toggle(jb,e),a.toggle(Pd+jb,e),"open"in t&&(o.toggle(Md,t.open),a.toggle(Pd+Md,t.open)),r.fire("palette.changed",{twoColumn:e,open:this.isOpen()})},te.prototype._update=function(){var t=qt(".djs-palette-entries",this._container),e=this._entries=this.getEntries();Qa(t),F(e,function(n,i){var r=n.group||"default",o=qt("[data-group="+r+"]",t);o||(o=Ft('<div class="group" data-group="'+r+'"></div>'),t.appendChild(o));var a=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),c=Ft(a);o.appendChild(c),n.separator||(Ge(c,"data-action",i),n.title&&Ge(c,"title",n.title),n.className&&function(l,u){var p=re(l);(_t(u)?u:u.split(/\s+/g)).forEach(function(h){p.add(h)})}(c,n.className),n.imageUrl&&c.appendChild(Ft('<img src="'+n.imageUrl+'">')))}),this.open()},te.prototype.trigger=function(t,e,n){var i,r,o,a=this._entries,c=e.delegateTarget||e.target;if(!c)return e.preventDefault();(i=a[Ge(c,"data-action")])&&(r=i.action,o=e.originalEvent||e,Ce(r)?t==="click"&&r(o,n):r[t]&&r[t](o,n),e.preventDefault())},te.prototype._layoutChanged=function(){this._toggleState({})},te.prototype._needsCollapse=function(t,e){return t<46*Object.keys(e).length+50},te.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},te.prototype.open=function(){this._toggleState({open:!0})},te.prototype.toggle=function(t){this.isOpen()?this.close():this.open()},te.prototype.isActiveTool=function(t){return t&&this._activeTool===t},te.prototype.updateToolHighlight=function(t){var e;this._toolsContainer||(e=qt(".djs-palette-entries",this._container),this._toolsContainer=qt("[data-group=tools]",e)),F(this._toolsContainer.children,function(n){var i=n.getAttribute("data-action");if(i){var r=re(n);i=i.replace("-tool",""),r.contains("entry")&&i===t?r.add("highlighted-entry"):r.remove("highlighted-entry")}})},te.prototype.isOpen=function(){return re(this._container).has(Md)},te.prototype._getParentContainer=function(){return this._canvas.getContainer()},te.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';const z1={__init__:["palette"],palette:["type",te]};var Lb="crosshair";function ur(t,e,n,i,r,o,a){this._selection=r,this._dragging=n,this._mouse=a;var c=this,l=function(h){var v,f=e.getActiveLayer();W(v=h.frame=st("rect"),{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),pt(f,v)},u=function(h){var v=h.frame,f=h.bbox;W(v,{x:f.x,y:f.y,width:f.width,height:f.height})},p=function(h){h.frame&&Zt(h.frame)};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),t.on("lasso.selection.end",function(h){var v=h.originalEvent.target;(h.hover||v instanceof SVGElement)&&t.once("lasso.selection.ended",function(){c.activateLasso(h.originalEvent,!0)})}),t.on("lasso.end",function(h){var v=Rd(h),f=i.filter(function(y){return y});c.select(f,v)}),t.on("lasso.start",function(h){var v=h.context;v.bbox=Rd(h),l(v)}),t.on("lasso.move",function(h){var v=h.context;v.bbox=Rd(h),u(v)}),t.on("lasso.cleanup",function(h){var v=h.context;p(v)}),t.on("element.mousedown",1500,function(h){if(wf(h))return c.activateLasso(h.originalEvent),!0})}function Rd(t){var e={x:t.x-t.dx,y:t.y-t.dy},n={x:t.x,y:t.y};return e.x<=n.x&&e.y<n.y||e.x<n.x&&e.y<=n.y?{x:e.x,y:e.y,width:n.x-e.x,height:n.y-e.y}:e.x>=n.x&&e.y<n.y||e.x>n.x&&e.y<=n.y?{x:n.x,y:e.y,width:e.x-n.x,height:n.y-e.y}:e.x<=n.x&&e.y>n.y||e.x<n.x&&e.y>=n.y?{x:e.x,y:n.y,width:n.x-e.x,height:e.y-n.y}:e.x>=n.x&&e.y>n.y||e.x>n.x&&e.y>=n.y?{x:n.x,y:n.y,width:e.x-n.x,height:e.y-n.y}:{x:n.x,y:n.y,width:0,height:0}}ur.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],ur.prototype.activateLasso=function(t,e){this._dragging.init(t,"lasso",{autoActivate:e,cursor:Lb,data:{context:{}}})},ur.prototype.activateSelection=function(t,e){this._dragging.init(t,"lasso.selection",{trapClick:!1,autoActivate:e,cursor:Lb,data:{context:{}}})},ur.prototype.select=function(t,e){var n=function(i,r){var o={};return F(i,function(a){var c=a;c.waypoints&&(c=ve(c)),!mt(r.y)&&c.x>r.x&&(o[a.id]=a),!mt(r.x)&&c.y>r.y&&(o[a.id]=a),c.x>r.x&&c.y>r.y&&(mt(r.width)&&mt(r.height)&&c.width+c.x<r.width+r.x&&c.height+c.y<r.height+r.y?o[a.id]=a:mt(r.width)&&mt(r.height)||(o[a.id]=a))}),o}(t,e);this._selection.select(Hl(n))},ur.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateSelection(t,!!t)},ur.prototype.isActive=function(){var t=this._dragging.context();return t&&/^lasso/.test(t.prefix)};const $1={__depends__:[Tc,na],__init__:["lassoTool"],lassoTool:["type",ur]};var Nd=1500,Vb="grab";function uo(t,e,n,i,r,o){this._dragging=n,this._mouse=o;var a=this,c=i.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),t.on("element.mousedown",Nd,function(l){if(Jr(l))return a.activateMove(l.originalEvent,!0),!1}),c&&c.addListener(Nd,function(l){if(Fb(l.keyEvent)&&!a.isActive()){var u=a._mouse.getLastMoveEvent();a.activateMove(u,!!u)}},"keyboard.keydown"),c&&c.addListener(Nd,function(l){Fb(l.keyEvent)&&a.isActive()&&a.toggle()},"keyboard.keyup"),t.on("hand.end",function(l){var u=l.originalEvent.target;if(!(l.hover||u instanceof SVGElement))return!1;t.once("hand.ended",function(){a.activateMove(l.originalEvent,{reactivate:!0})})}),t.on("hand.move.move",function(l){var u=e.viewbox().scale;e.scroll({dx:l.dx*u,dy:l.dy*u})}),t.on("hand.move.end",function(l){var u=l.context.reactivate;return!Jr(l)&&u&&t.once("hand.move.ended",function(p){a.activateHand(p.originalEvent,!0,!0)}),!1})}function Fb(t){return yn(" ",t)}uo.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"],uo.prototype.activateMove=function(t,e,n){typeof e=="object"&&(n=e,e=!1),this._dragging.init(t,"hand.move",{autoActivate:e,cursor:Vb,data:{context:n||{}}})},uo.prototype.activateHand=function(t,e,n){this._dragging.init(t,"hand",{trapClick:!1,autoActivate:e,cursor:Vb,data:{context:{reactivate:n}}})},uo.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateHand(t,!!t)},uo.prototype.isActive=function(){var t=this._dragging.context();return!!t&&/^(hand|hand\.move)$/.test(t.prefix)};const G1={__depends__:[Tc,na],__init__:["handTool"],handTool:["type",uo]};var zb="connect-ok",$b="connect-not-ok";function po(t,e,n,i,r,o,a){var c=this;this._dragging=e,this._rules=o,this._mouse=a,r.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),t.on("global-connect.hover",function(l){var u=l.context,p=l.hover,h=u.canStartConnect=c.canStartConnect(p);h!==null&&(u.startTarget=p,i.addMarker(p,h?zb:$b))}),t.on(["global-connect.out","global-connect.cleanup"],function(l){var u=l.context.startTarget,p=l.context.canStartConnect;u&&i.removeMarker(u,p?zb:$b)}),t.on(["global-connect.ended"],function(l){var u=l.context.startTarget,p={x:l.x,y:l.y};if(c.canStartConnect(u))return t.once("element.out",function(){t.once(["connect.ended","connect.canceled"],function(){t.fire("global-connect.drag.ended")}),n.start(null,u,p)}),!1})}po.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"],po.prototype.start=function(t,e){this._dragging.init(t,"global-connect",{autoActivate:e,trapClick:!1,data:{context:{}}})},po.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();return this.start(t,!!t)},po.prototype.isActive=function(){var t=this._dragging.context();return t&&/^global-connect/.test(t.prefix)},po.prototype.canStartConnect=function(t){return this._rules.allowed("connection.start",{source:t})};const U1={__depends__:[ep,On,Kn,Tc,na],globalConnect:["type",po]};function Uc(t,e,n,i,r,o,a,c){this._palette=t,this._create=e,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=o,this._globalConnect=a,this._translate=c,t.registerProvider(this)}Uc.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],Uc.prototype.getPaletteEntries=function(t){var e={},n=this._create,i=this._elementFactory,r=this._spaceTool,o=this._lassoTool,a=this._handTool,c=this._globalConnect,l=this._translate;function u(v,f,y,b,w){function g(E){var S=i.createShape($({type:v},w));n.start(E,S)}var _=v.replace(/^bpmn:/,"");return{group:f,className:y,title:b||l("Create {type}",{type:_}),action:{dragstart:g,click:g}}}function p(v){var f=i.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),y=i.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:f});n.start(v,[f,y],{hints:{autoSelect:[f]}})}function h(v){n.start(v,i.createParticipantShape())}return $(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:l("Activate the hand tool"),action:{click:function(v){a.activateHand(v)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:l("Activate the lasso tool"),action:{click:function(v){o.activateSelection(v)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:l("Activate the create/remove space tool"),action:{click:function(v){r.activateSelection(v)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:l("Activate the global connect tool"),action:{click:function(v){c.start(v)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":u("bpmn:StartEvent","event","bpmn-icon-start-event-none",l("Create StartEvent")),"create.intermediate-event":u("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",l("Create Intermediate/Boundary Event")),"create.end-event":u("bpmn:EndEvent","event","bpmn-icon-end-event-none",l("Create EndEvent")),"create.exclusive-gateway":u("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",l("Create Gateway")),"create.task":u("bpmn:Task","activity","bpmn-icon-task",l("Create Task")),"create.data-object":u("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",l("Create DataObjectReference")),"create.data-store":u("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",l("Create DataStoreReference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:l("Create expanded SubProcess"),action:{dragstart:p,click:p}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:l("Create Pool/Participant"),action:{dragstart:h,click:h}},"create.group":u("bpmn:Group","artifact","bpmn-icon-group",l("Create Group"))}),e};const H1={__depends__:[z1,qs,Zg,$1,G1,U1,_s],__init__:["paletteProvider"],paletteProvider:["type",Uc]};function Id(t,e,n,i,r){nt.call(this,t),t.on("shape.move.move",250,function(o){var a=o.context,c=a.canExecute;a.visualReplacements||(a.visualReplacements={}),c&&c.replacements?function(l){F(l.canExecute.replacements,function(u){var p=u.oldElementId,h={type:u.newElementType};if(!l.visualReplacements[p]){var v=e.get(p);$(h,{x:v.x,y:v.y});var f=n.createShape(h);i.addShape(f,v.parent);var y=qt('[data-element-id="'+Ju(v.id)+'"]',l.dragGroup);y&&W(y,{display:"none"});var b=r.addDragger(f,l.dragGroup);l.visualReplacements[p]=b,i.removeShape(f)}})}(a):function(l){var u=l.visualReplacements;F(u,function(p,h){var v=qt('[data-element-id="'+Ju(h)+'"]',l.dragGroup);v&&W(v,{display:"inline"}),p.remove(),u[h]&&delete u[h]})}(a)})}Id.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"],at(Id,nt);const q1={__depends__:[Qo],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Id]};var Dd=40,Gb=["x","y"],W1=Math.abs;function Ub(t){t.on(["connect.hover","connect.move","connect.end"],1250,function(e){var n=e.context,i=n.canExecute,r=n.start,o=n.hover,a=n.source,c=n.target;e.originalEvent&&We(e.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),i&&o&&function(l,u,p){Gb.forEach(function(h){var v=Wb(h,u);l[h]<u[h]+p?ae(l,h,u[h]+p):l[h]>u[h]+v-p&&ae(l,h,u[h]+v-p)})}(e,o,function(l){return A(l,"bpmn:Task")?10:20}(o)),o&&function(l,u){return Wi(u,function(p){return qb(l,p)})}(i,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=Ze(r),kt(o,["bpmn:Event","bpmn:Gateway"])&&Hb(e,Ze(o)),kt(o,["bpmn:Task","bpmn:SubProcess"])&&function(l,u){var p=Ze(u);Gb.forEach(function(h){(function(v,f,y){return v[y]>f[y]+20&&v[y]<f[y]+Wb(y,f)-20})(l,u,h)&&ae(l,h,p[h])})}(e,o),A(a,"bpmn:BoundaryEvent")&&c===a.host&&function(l){var u=l.context,p=u.source,h=u.target;if(!function(b){var w=b.hover,g=b.source;return w&&g&&w===g}(u)){var v=Ze(p),f=ye(v,h,-10),y=[];/top|bottom/.test(f)&&y.push("x"),/left|right/.test(f)&&y.push("y"),y.forEach(function(b){var w,g=l[b];W1(g-v[b])<Dd&&(w=g>v[b]?v[b]+Dd:v[b]-Dd,ae(l,b,w))})}}(e)):qb(i,"bpmn:MessageFlow")?(A(r,"bpmn:Event")&&(n.connectionStart=Ze(r)),A(o,"bpmn:Event")&&Hb(e,Ze(o))):n.connectionStart=n.initialConnectionStart)})}function Hb(t,e){ae(t,"x",e.x),ae(t,"y",e.y)}function qb(t,e){return t&&t.type===e}function Wb(t,e){return t==="x"?e.width:e.height}function Oi(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function Hc(t){this._snapValues={}}Ub.$inject=["eventBus"],Oi.prototype.getSnapOrigin=function(t){return this._snapOrigins[t]},Oi.prototype.setSnapOrigin=function(t,e){this._snapOrigins[t]=e,this._snapLocations.indexOf(t)===-1&&this._snapLocations.push(t)},Oi.prototype.addDefaultSnap=function(t,e){var n=this._defaultSnaps[t];n||(n=this._defaultSnaps[t]=[]),n.push(e)},Oi.prototype.getSnapLocations=function(){return this._snapLocations},Oi.prototype.setSnapLocations=function(t){this._snapLocations=t},Oi.prototype.pointsForTarget=function(t){var e=t.id||t,n=this._targets[e];return n||(n=this._targets[e]=new Hc).initDefaults(this._defaultSnaps),n},Hc.prototype.add=function(t,e){var n=this._snapValues[t];n||(n=this._snapValues[t]={x:[],y:[]}),n.x.indexOf(e.x)===-1&&n.x.push(e.x),n.y.indexOf(e.y)===-1&&n.y.push(e.y)},Hc.prototype.snap=function(t,e,n,i){var r=this._snapValues[e];return r&&function(o,a,c){var l,u;for(c=c===void 0?10:c,l=0;l<a.length;l++)if(u=a[l],Nw(u-o)<=c)return u}(t[n],r[n],i)},Hc.prototype.initDefaults=function(t){var e=this;F(t||{},function(n,i){F(n,function(r){e.add(i,r)})})};function Ln(t,e,n){var i=this;this._elementRegistry=t,e.on(["create.start","shape.move.start"],function(r){i.initSnap(r)}),e.on(["create.move","create.end","shape.move.move","shape.move.end"],1250,function(r){var o=r.context,a=o.shape,c=o.snapContext,l=o.target;if((!r.originalEvent||!We(r.originalEvent))&&!io(r)&&l){var u=c.pointsForTarget(l);u.initialized||((u=i.addSnapTargetPoints(u,a,l)).initialized=!0),n.snap(r,u)}}),e.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}function Bd(t){return!!t.labelTarget}Ln.$inject=["elementRegistry","eventBus","snapping"],Ln.prototype.initSnap=function(t){var e,n=this._elementRegistry,i=t.context,r=i.shape,o=i.snapContext;o||(o=i.snapContext=new Oi);var a=(e=n.get(r.id)?Ze(r,t):{x:t.x+Ze(r).x,y:t.y+Ze(r).y}).x-r.width/2,c=e.y-r.height/2,l=e.x+r.width/2,u=e.y+r.height/2;return o.setSnapOrigin("mid",{x:e.x-t.x,y:e.y-t.y}),Bd(r)||(o.setSnapOrigin("top-left",{x:a-t.x,y:c-t.y}),o.setSnapOrigin("bottom-right",{x:l-t.x,y:u-t.y})),o},Ln.prototype.addSnapTargetPoints=function(t,e,n){return F(this.getSnapTargets(e,n),function(i){if(Bd(i))Bd(e)&&t.add("mid",Ze(i));else if(i.waypoints){if(i.waypoints.length<3)return;F(i.waypoints.slice(1,-1),function(r){t.add("mid",r)})}else t.add("mid",Ze(i))}),mt(e.x)&&mt(e.y)&&this._elementRegistry.get(e.id)&&t.add("mid",Ze(e)),t},Ln.prototype.getSnapTargets=function(t,e){return Ev(e).filter(function(n){return!n.hidden})};function ho(t,e){e.invoke(Ln,this),t.on(["create.move","create.end"],1500,X1),t.on(["create.move","create.end","shape.move.move","shape.move.end"],1500,function(n){var i=n.context,r=i.canExecute,o=i.target;r&&(r==="attach"||r.attach)&&!io(n)&&function(a,c){var l,u=ct(c),p=Cg(a,c),h=a.context,v=h.shape;l=v.parent?{x:0,y:0}:gt(v),/top/.test(p)?ae(a,"y",u.top-l.y):/bottom/.test(p)&&ae(a,"y",u.bottom-l.y),/left/.test(p)?ae(a,"x",u.left-l.x):/right/.test(p)&&ae(a,"x",u.right-l.x)}(n,o)})}function X1(t){var e=t.context.createConstraints;if(e){var n=e.top,i=e.right,r=e.bottom,o=e.left;(o&&o>=t.x||i&&i<=t.x)&&ae(t,"x",t.x),(n&&n>=t.y||r&&r<=t.y)&&ae(t,"y",t.y)}}function Xb(t,e){return t.indexOf(e)!==-1}function Kb(t,e,n){return e?{x:t.x-n.x,y:t.y-n.y}:{x:t.x,y:t.y}}at(ho,Ln),ho.$inject=["eventBus","injector"],ho.prototype.initSnap=function(t){var e=Ln.prototype.initSnap.call(this,t),n=t.shape,i=!!this._elementRegistry.get(n.id);return F(n.outgoing,function(r){var o=r.waypoints[0];o=o.original||o,e.setSnapOrigin(r.id+"-docking",Kb(o,i,t))}),F(n.incoming,function(r){var o=r.waypoints[r.waypoints.length-1];o=o.original||o,e.setSnapOrigin(r.id+"-docking",Kb(o,i,t))}),A(n,"bpmn:Participant")&&e.setSnapLocations(["top-left","bottom-right","mid"]),e},ho.prototype.addSnapTargetPoints=function(t,e,n){Ln.prototype.addSnapTargetPoints.call(this,t,e,n);var i=this.getSnapTargets(e,n);F(i,function(o){var a;(function(c){return A(c,"bpmn:SubProcess")&&It(c)?!0:A(c,"bpmn:Participant")}(o)||(a="bpmn:TextAnnotation",[e,o].every(function(c){return A(c,a)})))&&(t.add("top-left",bv(o)),t.add("bottom-right",xv(o)))});var r=this._elementRegistry;return F(e.incoming,function(o){if(r.get(e.id)){Xb(i,o.source)||t.add("mid",gt(o.source));var a=o.waypoints[0];t.add(o.id+"-docking",a.original||a)}}),F(e.outgoing,function(o){if(r.get(e.id)){Xb(i,o.target)||t.add("mid",gt(o.target));var a=o.waypoints[o.waypoints.length-1];t.add(o.id+"-docking",a.original||a)}}),A(n,"bpmn:SequenceFlow")&&(t=this.addSnapTargetPoints(t,e,n.parent)),t},ho.prototype.getSnapTargets=function(t,e){return Ln.prototype.getSnapTargets.call(this,t,e).filter(function(n){return!A(n,"bpmn:Lane")})};function Pa(t,e){var n=this;t.on(["resize.start"],function(i){n.initSnap(i)}),t.on(["resize.move","resize.end"],1250,function(i){var r=i.context,o=r.shape,a=o.parent,c=r.direction,l=r.snapContext;if(!(i.originalEvent&&We(i.originalEvent)||io(i))){var u=l.pointsForTarget(a);u.initialized||((u=n.addSnapTargetPoints(u,o,a,c)).initialized=!0),function(p){return p==="n"||p==="s"}(c)&&ae(i,"x",i.x),function(p){return p==="e"||p==="w"}(c)&&ae(i,"y",i.y),e.snap(i,u)}}),t.on(["resize.cleanup"],function(){e.hide()})}function Yb(t,e){var n=gt(t),i=ct(t),r={x:n.x,y:n.y};return e.indexOf("n")!==-1?r.y=i.top:e.indexOf("s")!==-1&&(r.y=i.bottom),e.indexOf("e")!==-1?r.x=i.right:e.indexOf("w")!==-1&&(r.x=i.left),r}Pa.prototype.initSnap=function(t){var e=t.context,n=e.shape,i=e.direction,r=e.snapContext;r||(r=e.snapContext=new Oi);var o=Yb(n,i);return r.setSnapOrigin("corner",{x:o.x-t.x,y:o.y-t.y}),r},Pa.prototype.addSnapTargetPoints=function(t,e,n,i){return F(this.getSnapTargets(e,n),function(r){t.add("corner",xv(r)),t.add("corner",bv(r))}),t.add("corner",Yb(e,i)),t},Pa.$inject=["eventBus","snapping"],Pa.prototype.getSnapTargets=function(t,e){return Ev(e).filter(function(n){return i=n,r=t,!(i.host===r||function(o){return!!o.waypoints}(n)||function(o){return!!o.hidden}(n)||function(o){return!!o.labelTarget}(n));var i,r})};function ji(t){this._canvas=t,this._asyncHide=qh(Po(this.hide,this),1e3)}ji.$inject=["canvas"],ji.prototype.snap=function(t,e){var n=t.context.snapContext,i=n.getSnapLocations(),r={x:io(t,"x"),y:io(t,"y")};F(i,function(o){var a=n.getSnapOrigin(o),c={x:t.x+a.x,y:t.y+a.y};if(F(["x","y"],function(l){var u;r[l]||(u=e.snap(c,o,l,7))!==void 0&&(r[l]={value:u,originValue:u-a[l]})}),r.x&&r.y)return!1}),this.showSnapLine("vertical",r.x&&r.x.value),this.showSnapLine("horizontal",r.y&&r.y.value),F(["x","y"],function(o){var a=r[o];Se(a)&&ae(t,o,a.originValue)})},ji.prototype._createLine=function(t){var e=this._canvas.getLayer("snap"),n=st("path");return W(n,{d:"M0,0 L0,0"}),St(n).add("djs-snap-line"),pt(e,n),{update:function(i){mt(i)?W(n,t==="horizontal"?{d:"M-100000,"+i+" L+100000,"+i,display:""}:{d:"M "+i+",-100000 L "+i+", +100000",display:""}):W(n,{display:"none"})}}},ji.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},ji.prototype.showSnapLine=function(t,e){var n=this.getSnapLine(t);n&&n.update(e),this._asyncHide()},ji.prototype.getSnapLine=function(t){return this._snapLines||this._createSnapLines(),this._snapLines[t]},ji.prototype.hide=function(){F(this._snapLines,function(t){t.update()})};const K1={__depends__:[{__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",Ln],resizeSnapping:["type",Pa],snapping:["type",ji]}],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",Ub],createMoveSnapping:["type",ho]};function dt(t,e,n,i){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=t,this._eventBus=e,this._overlays=n,this._selection=i,this._container=Ft(dt.BOX_HTML),this._searchInput=qt(dt.INPUT_SELECTOR,this._container),this._resultsContainer=qt(dt.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),e.on(["canvas.destroy","diagram.destroy"],this.close,this)}function Jb(t,e,n){var i=function(o){var a="";return o.forEach(function(c){c.matched?a+='<strong class="'+dt.RESULT_HIGHLIGHT_CLASS+'">'+rv(c.matched)+"</strong>":a+=rv(c.normal)}),a!==""?a:null}(e),r=Ft(n);r.innerHTML=i,t.appendChild(r)}dt.$inject=["canvas","eventBus","overlays","selection"],dt.prototype._bindEvents=function(){var t=this;function e(n,i,r,o){t._eventMaps.push({el:n,type:r,listener:Ue.bind(n,i,r,o)})}e(document,"html","click",function(n){t.close()}),e(this._container,dt.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),e(this._container,dt.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),t._scrollToNode(n.delegateTarget),t._preselect(n.delegateTarget)}),e(this._container,dt.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),t._select(n.delegateTarget)}),e(this._container,dt.INPUT_SELECTOR,"keydown",function(n){n.keyCode===38&&n.preventDefault(),n.keyCode===40&&n.preventDefault()}),e(this._container,dt.INPUT_SELECTOR,"keyup",function(n){if(n.keyCode===27)return t.close();if(n.keyCode===13){var i=t._getCurrentResult();return i?t._select(i):t.close()}return n.keyCode===38?t._scrollToDirection(!0):n.keyCode===40?t._scrollToDirection():void(n.keyCode!==37&&n.keyCode!==39&&t._search(n.delegateTarget.value))})},dt.prototype._unbindEvents=function(){this._eventMaps.forEach(function(t){Ue.unbind(t.el,t.type,t.listener)})},dt.prototype._search=function(t){var e=this;if(this._clearResults(),t&&t!==""){var n=this._searchProvider.find(t);if(n.length){n.forEach(function(r){var o=r.element.id,a=e._createResultNode(r,o);e._results[o]={element:r.element,node:a}});var i=qt(dt.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}}},dt.prototype._scrollToDirection=function(t){var e=this._getCurrentResult();if(e){var n=t?e.previousElementSibling:e.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}},dt.prototype._scrollToNode=function(t){if(t&&t!==this._getCurrentResult()){var e=t.offsetTop,n=this._resultsContainer.scrollTop,i=e-this._resultsContainer.clientHeight+t.clientHeight;e<n?this._resultsContainer.scrollTop=e:n<i&&(this._resultsContainer.scrollTop=i)}},dt.prototype._clearResults=function(){Qa(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")},dt.prototype._getCurrentResult=function(){return qt(dt.RESULT_SELECTED_SELECTOR,this._resultsContainer)},dt.prototype._createResultNode=function(t,e){var n=Ft(dt.RESULT_HTML);return t.primaryTokens.length>0&&Jb(n,t.primaryTokens,dt.RESULT_PRIMARY_HTML),Jb(n,t.secondaryTokens,dt.RESULT_SECONDARY_HTML),Ge(n,dt.RESULT_ID_ATTRIBUTE,e),this._resultsContainer.appendChild(n),n},dt.prototype.registerProvider=function(t){this._searchProvider=t},dt.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,re(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},dt.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,re(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))},dt.prototype.toggle=function(){this.isOpen()?this.close():this.open()},dt.prototype.isOpen=function(){return this._open},dt.prototype._preselect=function(t){var e=this._getCurrentResult();if(t!==e){e&&re(e).remove(dt.RESULT_SELECTED_CLASS);var n=Ge(t,dt.RESULT_ID_ATTRIBUTE),i=this._results[n].element;re(t).add(dt.RESULT_SELECTED_CLASS),this._resetOverlay(i),this._canvas.scrollToElement(i,{top:400}),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}},dt.prototype._select=function(t){var e=Ge(t,dt.RESULT_ID_ATTRIBUTE),n=this._results[e].element;this.close(),this._resetOverlay(),this._canvas.scrollToElement(n,{top:400}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)},dt.prototype._resetOverlay=function(t){if(this._overlayId&&this._overlays.remove(this._overlayId),t){var e=function(n){var i=6,r=n.width+2*i,o=n.height+2*i,a=["width: "+r+"px","height: "+o+"px"].join("; ");return{position:{bottom:o-i,right:r-i},show:!0,html:'<div style="'+a+'" class="'+dt.OVERLAY_CLASS+'"></div>'}}(ve(t));this._overlayId=this._overlays.add(t,e)}},dt.CONTAINER_SELECTOR=".djs-search-container",dt.INPUT_SELECTOR=".djs-search-input input",dt.RESULTS_CONTAINER_SELECTOR=".djs-search-results",dt.RESULT_SELECTOR=".djs-search-result",dt.RESULT_SELECTED_CLASS="djs-search-result-selected",dt.RESULT_SELECTED_SELECTOR="."+dt.RESULT_SELECTED_CLASS,dt.RESULT_ID_ATTRIBUTE="data-result-id",dt.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",dt.OVERLAY_CLASS="djs-search-overlay",dt.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>',dt.RESULT_HTML='<div class="djs-search-result"></div>',dt.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',dt.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const Y1={__depends__:[Bu,In],searchPad:["type",dt]};function Od(t,e,n){this._elementRegistry=t,this._canvas=n,e.registerProvider(this)}function Zb(t){return Et(t,function(e){return!!e.matched}).length>0}function Qb(t,e){var n=[],i=t;if(!t)return n;t=t.toLowerCase(),e=e.toLowerCase();var r=t.indexOf(e);return r>-1?(r!==0&&n.push({normal:i.substr(0,r)}),n.push({matched:i.substr(r,e.length)}),e.length+r<t.length&&n.push({normal:i.substr(e.length+r,t.length)})):n.push({normal:i}),n}Od.$inject=["elementRegistry","searchPad","canvas"],Od.prototype.find=function(t){var e=this._canvas.getRootElement(),n=this._elementRegistry.filter(function(i){return!i.labelTarget});return n=Et(n,function(i){return i!==e}),n=dn(n=Et(n=pe(n,function(i){return{primaryTokens:Qb(vn(i),t),secondaryTokens:Qb(i.id,t),element:i}}),function(i){return Zb(i.primaryTokens)||Zb(i.secondaryTokens)}),function(i){return vn(i.element)+i.element.id})};const J1={__depends__:[Y1],__init__:["bpmnSearch"],bpmnSearch:["type",Od]};function Vn(t){zo.call(this,t)}at(Vn,zo),Vn.Viewer=Wn,Vn.NavigatedViewer=qo,Vn.prototype.createDiagram=qr(function(){return this.importXML('<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>')}),Vn.prototype._interactionModules=[Df,Lf,yw,Ff],Vn.prototype._modelingModules=[bw,Sw,kw,Cw,Dw,ep,Bw,M_,ly,qs,I_,B_,L_,V_,F_,U_,X_,j1,L1,H1,q1,Ly,K1,J1],Vn.prototype._modules=[].concat(Wn.prototype._modules,Vn.prototype._interactionModules,Vn.prototype._modelingModules);const t0=(t,e,n)=>(n||(n="camunda"),`<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
  id="diagram_${t}"
  targetNamespace="${{activiti:"http://activiti.org/bpmn",camunda:"http://bpmn.io/schema/bpmn",flowable:"http://flowable.org/bpmn"}[n]}">
  <bpmn2:process id="${t}" name="${e}" isExecutable="true">
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="${t}">
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn2:definitions>`),Z1={"Append EndEvent":"\u8FFD\u52A0\u7ED3\u675F\u4E8B\u4EF6","Append Gateway":"\u8FFD\u52A0\u7F51\u5173","Append Task":"\u8FFD\u52A0\u4EFB\u52A1","Append Intermediate/Boundary Event":"\u8FFD\u52A0\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6/\u8FB9\u754C\u4E8B\u4EF6","Activate the global connect tool":"\u6FC0\u6D3B\u5168\u5C40\u8FDE\u63A5\u5DE5\u5177","Append {type}":"\u6DFB\u52A0 {type}","Add Lane above":"\u5728\u4E0A\u9762\u6DFB\u52A0\u9053","Divide into two Lanes":"\u5206\u5272\u6210\u4E24\u4E2A\u9053","Divide into three Lanes":"\u5206\u5272\u6210\u4E09\u4E2A\u9053","Add Lane below":"\u5728\u4E0B\u9762\u6DFB\u52A0\u9053","Append compensation activity":"\u8FFD\u52A0\u8865\u507F\u6D3B\u52A8","Change type":"\u4FEE\u6539\u7C7B\u578B","Connect using Association":"\u4F7F\u7528\u5173\u8054\u8FDE\u63A5","Connect using Sequence/MessageFlow or Association":"\u4F7F\u7528\u987A\u5E8F/\u6D88\u606F\u6D41\u6216\u8005\u5173\u8054\u8FDE\u63A5","Connect using DataInputAssociation":"\u4F7F\u7528\u6570\u636E\u8F93\u5165\u5173\u8054\u8FDE\u63A5",Remove:"\u79FB\u9664","Activate the hand tool":"\u6FC0\u6D3B\u6293\u624B\u5DE5\u5177","Activate the lasso tool":"\u6FC0\u6D3B\u5957\u7D22\u5DE5\u5177","Activate the create/remove space tool":"\u6FC0\u6D3B\u521B\u5EFA/\u5220\u9664\u7A7A\u95F4\u5DE5\u5177","Create expanded SubProcess":"\u521B\u5EFA\u6269\u5C55\u5B50\u8FC7\u7A0B","Create IntermediateThrowEvent/BoundaryEvent":"\u521B\u5EFA\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6/\u8FB9\u754C\u4E8B\u4EF6","Create Pool/Participant":"\u521B\u5EFA\u6C60/\u53C2\u4E0E\u8005","Parallel Multi Instance":"\u5E76\u884C\u591A\u91CD\u4E8B\u4EF6","Sequential Multi Instance":"\u65F6\u5E8F\u591A\u91CD\u4E8B\u4EF6",DataObjectReference:"\u6570\u636E\u5BF9\u8C61\u53C2\u8003",DataStoreReference:"\u6570\u636E\u5B58\u50A8\u53C2\u8003",Loop:"\u5FAA\u73AF","Ad-hoc":"\u5373\u5E2D","Create {type}":"\u521B\u5EFA {type}",Task:"\u4EFB\u52A1","Send Task":"\u53D1\u9001\u4EFB\u52A1","Receive Task":"\u63A5\u6536\u4EFB\u52A1","User Task":"\u7528\u6237\u4EFB\u52A1","Manual Task":"\u624B\u5DE5\u4EFB\u52A1","Business Rule Task":"\u4E1A\u52A1\u89C4\u5219\u4EFB\u52A1","Service Task":"\u670D\u52A1\u4EFB\u52A1","Script Task":"\u811A\u672C\u4EFB\u52A1","Call Activity":"\u8C03\u7528\u6D3B\u52A8","Sub Process (collapsed)":"\u5B50\u6D41\u7A0B\uFF08\u6298\u53E0\u7684\uFF09","Sub Process (expanded)":"\u5B50\u6D41\u7A0B\uFF08\u5C55\u5F00\u7684\uFF09","Start Event":"\u5F00\u59CB\u4E8B\u4EF6",StartEvent:"\u5F00\u59CB\u4E8B\u4EF6","Intermediate Throw Event":"\u4E2D\u95F4\u4E8B\u4EF6","End Event":"\u7ED3\u675F\u4E8B\u4EF6",EndEvent:"\u7ED3\u675F\u4E8B\u4EF6","Create StartEvent":"\u521B\u5EFA\u5F00\u59CB\u4E8B\u4EF6","Create EndEvent":"\u521B\u5EFA\u7ED3\u675F\u4E8B\u4EF6","Create Task":"\u521B\u5EFA\u4EFB\u52A1","Create User Task":"\u521B\u5EFA\u7528\u6237\u4EFB\u52A1","Create Gateway":"\u521B\u5EFA\u7F51\u5173","Create DataObjectReference":"\u521B\u5EFA\u6570\u636E\u5BF9\u8C61","Create DataStoreReference":"\u521B\u5EFA\u6570\u636E\u5B58\u50A8","Create Group":"\u521B\u5EFA\u5206\u7EC4","Create Intermediate/Boundary Event":"\u521B\u5EFA\u4E2D\u95F4/\u8FB9\u754C\u4E8B\u4EF6","Message Start Event":"\u6D88\u606F\u5F00\u59CB\u4E8B\u4EF6","Timer Start Event":"\u5B9A\u65F6\u5F00\u59CB\u4E8B\u4EF6","Conditional Start Event":"\u6761\u4EF6\u5F00\u59CB\u4E8B\u4EF6","Signal Start Event":"\u4FE1\u53F7\u5F00\u59CB\u4E8B\u4EF6","Error Start Event":"\u9519\u8BEF\u5F00\u59CB\u4E8B\u4EF6","Escalation Start Event":"\u5347\u7EA7\u5F00\u59CB\u4E8B\u4EF6","Compensation Start Event":"\u8865\u507F\u5F00\u59CB\u4E8B\u4EF6","Message Start Event (non-interrupting)":"\u6D88\u606F\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Timer Start Event (non-interrupting)":"\u5B9A\u65F6\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Conditional Start Event (non-interrupting)":"\u6761\u4EF6\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Signal Start Event (non-interrupting)":"\u4FE1\u53F7\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Escalation Start Event (non-interrupting)":"\u5347\u7EA7\u5F00\u59CB\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Message Intermediate Catch Event":"\u6D88\u606F\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Message Intermediate Throw Event":"\u6D88\u606F\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Timer Intermediate Catch Event":"\u5B9A\u65F6\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Escalation Intermediate Throw Event":"\u5347\u7EA7\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Conditional Intermediate Catch Event":"\u6761\u4EF6\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Link Intermediate Catch Event":"\u94FE\u63A5\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Link Intermediate Throw Event":"\u94FE\u63A5\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Compensation Intermediate Throw Event":"\u8865\u507F\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Signal Intermediate Catch Event":"\u4FE1\u53F7\u4E2D\u95F4\u6355\u83B7\u4E8B\u4EF6","Signal Intermediate Throw Event":"\u4FE1\u53F7\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","Message End Event":"\u6D88\u606F\u7ED3\u675F\u4E8B\u4EF6","Escalation End Event":"\u5B9A\u65F6\u7ED3\u675F\u4E8B\u4EF6","Error End Event":"\u9519\u8BEF\u7ED3\u675F\u4E8B\u4EF6","Cancel End Event":"\u53D6\u6D88\u7ED3\u675F\u4E8B\u4EF6","Compensation End Event":"\u8865\u507F\u7ED3\u675F\u4E8B\u4EF6","Signal End Event":"\u4FE1\u53F7\u7ED3\u675F\u4E8B\u4EF6","Terminate End Event":"\u7EC8\u6B62\u7ED3\u675F\u4E8B\u4EF6","Message Boundary Event":"\u6D88\u606F\u8FB9\u754C\u4E8B\u4EF6","Message Boundary Event (non-interrupting)":"\u6D88\u606F\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Timer Boundary Event":"\u5B9A\u65F6\u8FB9\u754C\u4E8B\u4EF6","Timer Boundary Event (non-interrupting)":"\u5B9A\u65F6\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Escalation Boundary Event":"\u5347\u7EA7\u8FB9\u754C\u4E8B\u4EF6","Escalation Boundary Event (non-interrupting)":"\u5347\u7EA7\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Conditional Boundary Event":"\u6761\u4EF6\u8FB9\u754C\u4E8B\u4EF6","Conditional Boundary Event (non-interrupting)":"\u6761\u4EF6\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Error Boundary Event":"\u9519\u8BEF\u8FB9\u754C\u4E8B\u4EF6","Cancel Boundary Event":"\u53D6\u6D88\u8FB9\u754C\u4E8B\u4EF6","Signal Boundary Event":"\u4FE1\u53F7\u8FB9\u754C\u4E8B\u4EF6","Signal Boundary Event (non-interrupting)":"\u4FE1\u53F7\u8FB9\u754C\u4E8B\u4EF6\uFF08\u975E\u4E2D\u65AD\uFF09","Compensation Boundary Event":"\u8865\u507F\u8FB9\u754C\u4E8B\u4EF6","Exclusive Gateway":"\u4E92\u65A5\u7F51\u5173","Parallel Gateway":"\u5E76\u884C\u7F51\u5173","Inclusive Gateway":"\u76F8\u5BB9\u7F51\u5173","Complex Gateway":"\u590D\u6742\u7F51\u5173","Event based Gateway":"\u4E8B\u4EF6\u7F51\u5173",Transaction:"\u8F6C\u8FD0","Sub Process":"\u5B50\u6D41\u7A0B","Event Sub Process":"\u4E8B\u4EF6\u5B50\u6D41\u7A0B","Collapsed Pool":"\u6298\u53E0\u6C60","Expanded Pool":"\u5C55\u5F00\u6C60","no parent for {element} in {parent}":"\u5728{parent}\u91CC\uFF0C{element}\u6CA1\u6709\u7236\u7C7B","no shape type specified":"\u6CA1\u6709\u6307\u5B9A\u7684\u5F62\u72B6\u7C7B\u578B","flow elements must be children of pools/participants":"\u6D41\u5143\u7D20\u5FC5\u987B\u662F\u6C60/\u53C2\u4E0E\u8005\u7684\u5B50\u7C7B","out of bounds release":"out of bounds release","more than {count} child lanes":"\u5B50\u9053\u5927\u4E8E{count} ","element required":"\u5143\u7D20\u4E0D\u80FD\u4E3A\u7A7A","diagram not part of bpmn:Definitions":"\u6D41\u7A0B\u56FE\u4E0D\u7B26\u5408bpmn\u89C4\u8303","no diagram to display":"\u6CA1\u6709\u53EF\u5C55\u793A\u7684\u6D41\u7A0B\u56FE","no process or collaboration to display":"\u6CA1\u6709\u53EF\u5C55\u793A\u7684\u6D41\u7A0B/\u534F\u4F5C","element {element} referenced by {referenced}#{property} not yet drawn":"\u7531{referenced}#{property}\u5F15\u7528\u7684{element}\u5143\u7D20\u4ECD\u672A\u7ED8\u5236","already rendered {element}":"{element} \u5DF2\u88AB\u6E32\u67D3","failed to import {element}":"\u5BFC\u5165{element}\u5931\u8D25",Id:"\u7F16\u53F7",Name:"\u540D\u79F0",General:"\u5E38\u89C4",Details:"\u8BE6\u60C5","Message Name":"\u6D88\u606F\u540D\u79F0",Message:"\u6D88\u606F",Initiator:"\u521B\u5EFA\u8005","Asynchronous Continuations":"\u6301\u7EED\u5F02\u6B65","Asynchronous Before":"\u5F02\u6B65\u524D","Asynchronous After":"\u5F02\u6B65\u540E","Job Configuration":"\u5DE5\u4F5C\u914D\u7F6E",Exclusive:"\u6392\u9664","Job Priority":"\u5DE5\u4F5C\u4F18\u5148\u7EA7","Retry Time Cycle":"\u91CD\u8BD5\u65F6\u95F4\u5468\u671F",Documentation:"\u6587\u6863","Element Documentation":"\u5143\u7D20\u6587\u6863","History Configuration":"\u5386\u53F2\u914D\u7F6E","History Time To Live":"\u5386\u53F2\u7684\u751F\u5B58\u65F6\u95F4",Forms:"\u8868\u5355","Form Key":"\u8868\u5355key","Form Fields":"\u8868\u5355\u5B57\u6BB5","Business Key":"\u4E1A\u52A1key","Form Field":"\u8868\u5355\u5B57\u6BB5",ID:"\u7F16\u53F7",Type:"\u7C7B\u578B",Label:"\u540D\u79F0","Default Value":"\u9ED8\u8BA4\u503C","Default Flow":"\u9ED8\u8BA4\u6D41\u8F6C\u8DEF\u5F84","Conditional Flow":"\u6761\u4EF6\u6D41\u8F6C\u8DEF\u5F84","Sequence Flow":"\u666E\u901A\u6D41\u8F6C\u8DEF\u5F84",Validation:"\u6821\u9A8C","Add Constraint":"\u6DFB\u52A0\u7EA6\u675F",Config:"\u914D\u7F6E",Properties:"\u5C5E\u6027","Add Property":"\u6DFB\u52A0\u5C5E\u6027",Value:"\u503C",Listeners:"\u76D1\u542C\u5668","Execution Listener":"\u6267\u884C\u76D1\u542C","Event Type":"\u4E8B\u4EF6\u7C7B\u578B","Listener Type":"\u76D1\u542C\u5668\u7C7B\u578B","Java Class":"Java\u7C7B",Expression:"\u8868\u8FBE\u5F0F","Must provide a value":"\u5FC5\u987B\u63D0\u4F9B\u4E00\u4E2A\u503C","Delegate Expression":"\u4EE3\u7406\u8868\u8FBE\u5F0F",Script:"\u811A\u672C","Script Format":"\u811A\u672C\u683C\u5F0F","Script Type":"\u811A\u672C\u7C7B\u578B","Inline Script":"\u5185\u8054\u811A\u672C","External Script":"\u5916\u90E8\u811A\u672C",Resource:"\u8D44\u6E90","Field Injection":"\u5B57\u6BB5\u6CE8\u5165",Extensions:"\u6269\u5C55","Input/Output":"\u8F93\u5165/\u8F93\u51FA","Input Parameters":"\u8F93\u5165\u53C2\u6570","Output Parameters":"\u8F93\u51FA\u53C2\u6570",Parameters:"\u53C2\u6570","Output Parameter":"\u8F93\u51FA\u53C2\u6570","Timer Definition Type":"\u5B9A\u65F6\u5668\u5B9A\u4E49\u7C7B\u578B","Timer Definition":"\u5B9A\u65F6\u5668\u5B9A\u4E49",Date:"\u65E5\u671F",Duration:"\u6301\u7EED",Cycle:"\u5FAA\u73AF",Signal:"\u4FE1\u53F7","Signal Name":"\u4FE1\u53F7\u540D\u79F0",Escalation:"\u5347\u7EA7",Error:"\u9519\u8BEF","Link Name":"\u94FE\u63A5\u540D\u79F0",Condition:"\u6761\u4EF6\u540D\u79F0","Variable Name":"\u53D8\u91CF\u540D\u79F0","Variable Event":"\u53D8\u91CF\u4E8B\u4EF6","Specify more than one variable change event as a comma separated list.":"\u591A\u4E2A\u53D8\u91CF\u4E8B\u4EF6\u4EE5\u9017\u53F7\u9694\u5F00","Wait for Completion":"\u7B49\u5F85\u5B8C\u6210","Activity Ref":"\u6D3B\u52A8\u53C2\u8003","Version Tag":"\u7248\u672C\u6807\u7B7E",Executable:"\u53EF\u6267\u884C\u6587\u4EF6","External Task Configuration":"\u6269\u5C55\u4EFB\u52A1\u914D\u7F6E","Task Priority":"\u4EFB\u52A1\u4F18\u5148\u7EA7",External:"\u5916\u90E8",Connector:"\u8FDE\u63A5\u5668","Must configure Connector":"\u5FC5\u987B\u914D\u7F6E\u8FDE\u63A5\u5668","Connector Id":"\u8FDE\u63A5\u5668\u7F16\u53F7",Implementation:"\u5B9E\u73B0\u65B9\u5F0F","Field Injections":"\u5B57\u6BB5\u6CE8\u5165",Fields:"\u5B57\u6BB5","Result Variable":"\u7ED3\u679C\u53D8\u91CF",Topic:"\u4E3B\u9898","Configure Connector":"\u914D\u7F6E\u8FDE\u63A5\u5668","Input Parameter":"\u8F93\u5165\u53C2\u6570",Assignee:"\u4EE3\u7406\u4EBA","Candidate Users":"\u5019\u9009\u7528\u6237","Candidate Groups":"\u5019\u9009\u7EC4","Due Date":"\u5230\u671F\u65F6\u95F4","Follow Up Date":"\u8DDF\u8E2A\u65E5\u671F",Priority:"\u4F18\u5148\u7EA7","The follow up date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"\u8DDF\u8E2A\u65E5\u671F\u5FC5\u987B\u7B26\u5408EL\u8868\u8FBE\u5F0F\uFF0C\u5982\uFF1A ${someDate} ,\u6216\u8005\u4E00\u4E2AISO\u6807\u51C6\u65E5\u671F\uFF0C\u5982\uFF1A2015-06-26T09:54:00","The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"\u8DDF\u8E2A\u65E5\u671F\u5FC5\u987B\u7B26\u5408EL\u8868\u8FBE\u5F0F\uFF0C\u5982\uFF1A ${someDate} ,\u6216\u8005\u4E00\u4E2AISO\u6807\u51C6\u65E5\u671F\uFF0C\u5982\uFF1A2015-06-26T09:54:00",Variables:"\u53D8\u91CF","Candidate Starter Configuration":"\u5019\u9009\u4EBA\u8D77\u52A8\u5668\u914D\u7F6E","Candidate Starter Groups":"\u5019\u9009\u4EBA\u8D77\u52A8\u5668\u7EC4","This maps to the process definition key.":"\u8FD9\u6620\u5C04\u5230\u6D41\u7A0B\u5B9A\u4E49\u952E\u3002","Candidate Starter Users":"\u5019\u9009\u4EBA\u8D77\u52A8\u5668\u7684\u7528\u6237","Specify more than one user as a comma separated list.":"\u6307\u5B9A\u591A\u4E2A\u7528\u6237\u4F5C\u4E3A\u9017\u53F7\u5206\u9694\u7684\u5217\u8868\u3002","Tasklist Configuration":"Tasklist\u914D\u7F6E",Startable:"\u542F\u52A8","Specify more than one group as a comma separated list.":"\u6307\u5B9A\u591A\u4E2A\u7EC4\u4F5C\u4E3A\u9017\u53F7\u5206\u9694\u7684\u5217\u8868\u3002"};var qc,jd,Q1={exports:{}};/*!
* svg.js - A lightweight library for manipulating and animating SVG.
* @version 2.7.1
* https://svgdotjs.github.io/
*
* @copyright Wout Fierens <wout@mick-wout.com>
* @license MIT
*
* BUILT: Fri Nov 30 2018 10:01:55 GMT+0100 (GMT+01:00)
*/qc=typeof window<"u"?window:Dh,jd=function(t,e){var n=(this!==void 0?this:t).SVG=function(s){if(n.supported)return s=new n.Doc(s),n.parser.draw||n.prepare(),s};if(n.ns="http://www.w3.org/2000/svg",n.xmlns="http://www.w3.org/2000/xmlns/",n.xlink="http://www.w3.org/1999/xlink",n.svgjs="http://svgjs.com/svgjs",n.supported=!!e.createElementNS&&!!e.createElementNS(n.ns,"svg").createSVGRect,!n.supported)return!1;n.did=1e3,n.eid=function(s){return"Svgjs"+h(s)+n.did++},n.create=function(s){var d=e.createElementNS(this.ns,s);return d.setAttribute("id",this.eid(s)),d},n.extend=function(){var s,d,m,C;for(d=(s=[].slice.call(arguments)).pop(),C=s.length-1;C>=0;C--)if(s[C])for(m in d)s[C].prototype[m]=d[m];n.Set&&n.Set.inherit&&n.Set.inherit()},n.invent=function(s){var d=typeof s.create=="function"?s.create:function(){this.constructor.call(this,n.create(s.create))};return s.inherit&&(d.prototype=new s.inherit),s.extend&&n.extend(d,s.extend),s.construct&&n.extend(s.parent||n.Container,s.construct),d},n.adopt=function(s){return s?s.instance?s.instance:((d=s.nodeName=="svg"?s.parentNode instanceof t.SVGElement?new n.Nested:new n.Doc:s.nodeName=="linearGradient"?new n.Gradient("linear"):s.nodeName=="radialGradient"?new n.Gradient("radial"):n[h(s.nodeName)]?new n[h(s.nodeName)]:new n.Element(s)).type=s.nodeName,d.node=s,s.instance=d,d instanceof n.Doc&&d.namespace().defs(),d.setData(JSON.parse(s.getAttribute("svgjs:data"))||{}),d):null;var d},n.prepare=function(){var s=e.getElementsByTagName("body")[0],d=(s?new n.Doc(s):n.adopt(e.documentElement).nested()).size(2,0);n.parser={body:s||e.documentElement,draw:d.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:d.polyline().node,path:d.path().node,native:n.create("svg")}},n.parser={native:n.create("svg")},e.addEventListener("DOMContentLoaded",function(){n.parser.draw||n.prepare()},!1),n.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},n.utils={map:function(s,d){var m,C=s.length,M=[];for(m=0;m<C;m++)M.push(d(s[m]));return M},filter:function(s,d){var m,C=s.length,M=[];for(m=0;m<C;m++)d(s[m])&&M.push(s[m]);return M},radians:function(s){return s%360*Math.PI/180},degrees:function(s){return 180*s/Math.PI%360},filterSVGElements:function(s){return this.filter(s,function(d){return d instanceof t.SVGElement})}},n.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},n.Color=function(s){var d,m;this.r=0,this.g=0,this.b=0,s&&(typeof s=="string"?n.regex.isRgb.test(s)?(d=n.regex.rgb.exec(s.replace(n.regex.whitespace,"")),this.r=parseInt(d[1]),this.g=parseInt(d[2]),this.b=parseInt(d[3])):n.regex.isHex.test(s)&&(d=n.regex.hex.exec((m=s).length==4?["#",m.substring(1,2),m.substring(1,2),m.substring(2,3),m.substring(2,3),m.substring(3,4),m.substring(3,4)].join(""):m),this.r=parseInt(d[1],16),this.g=parseInt(d[2],16),this.b=parseInt(d[3],16)):typeof s=="object"&&(this.r=s.r,this.g=s.g,this.b=s.b))},n.extend(n.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+v(this.r)+v(this.g)+v(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(s){return this.destination=new n.Color(s),this},at:function(s){return this.destination?(s=s<0?0:s>1?1:s,new n.Color({r:~~(this.r+(this.destination.r-this.r)*s),g:~~(this.g+(this.destination.g-this.g)*s),b:~~(this.b+(this.destination.b-this.b)*s)})):this}}),n.Color.test=function(s){return s+="",n.regex.isHex.test(s)||n.regex.isRgb.test(s)},n.Color.isRgb=function(s){return s&&typeof s.r=="number"&&typeof s.g=="number"&&typeof s.b=="number"},n.Color.isColor=function(s){return n.Color.isRgb(s)||n.Color.test(s)},n.Array=function(s,d){(s=(s||[]).valueOf()).length==0&&d&&(s=d.valueOf()),this.value=this.parse(s)},n.extend(n.Array,{morph:function(s){if(this.destination=this.parse(s),this.value.length!=this.destination.length){for(var d=this.value[this.value.length-1],m=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(m);for(;this.value.length<this.destination.length;)this.value.push(d)}return this},settle:function(){for(var s=0,d=this.value.length,m=[];s<d;s++)m.indexOf(this.value[s])==-1&&m.push(this.value[s]);return this.value=m},at:function(s){if(!this.destination)return this;for(var d=0,m=this.value.length,C=[];d<m;d++)C.push(this.value[d]+(this.destination[d]-this.value[d])*s);return new n.Array(C)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(s){return s=s.valueOf(),Array.isArray(s)?s:this.split(s)},split:function(s){return s.trim().split(n.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var s=new this.constructor;return s.value=u(this.value),s}}),n.PointArray=function(s,d){n.Array.call(this,s,d||[[0,0]])},n.PointArray.prototype=new n.Array,n.PointArray.prototype.constructor=n.PointArray,n.extend(n.PointArray,{toString:function(){for(var s=0,d=this.value.length,m=[];s<d;s++)m.push(this.value[s].join(","));return m.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(s){if(!this.destination)return this;for(var d=0,m=this.value.length,C=[];d<m;d++)C.push([this.value[d][0]+(this.destination[d][0]-this.value[d][0])*s,this.value[d][1]+(this.destination[d][1]-this.value[d][1])*s]);return new n.PointArray(C)},parse:function(s){var d=[];if(s=s.valueOf(),Array.isArray(s)){if(Array.isArray(s[0]))return s.map(function(M){return M.slice()});if(s[0].x!=null)return s.map(function(M){return[M.x,M.y]})}else s=s.trim().split(n.regex.delimiter).map(parseFloat);s.length%2!=0&&s.pop();for(var m=0,C=s.length;m<C;m+=2)d.push([s[m],s[m+1]]);return d},move:function(s,d){var m=this.bbox();if(s-=m.x,d-=m.y,!isNaN(s)&&!isNaN(d))for(var C=this.value.length-1;C>=0;C--)this.value[C]=[this.value[C][0]+s,this.value[C][1]+d];return this},size:function(s,d){var m,C=this.bbox();for(m=this.value.length-1;m>=0;m--)C.width&&(this.value[m][0]=(this.value[m][0]-C.x)*s/C.width+C.x),C.height&&(this.value[m][1]=(this.value[m][1]-C.y)*d/C.height+C.y);return this},bbox:function(){return n.parser.poly.setAttribute("points",this.toString()),n.parser.poly.getBBox()}});for(var i={M:function(s,d,m){return d.x=m.x=s[0],d.y=m.y=s[1],["M",d.x,d.y]},L:function(s,d){return d.x=s[0],d.y=s[1],["L",s[0],s[1]]},H:function(s,d){return d.x=s[0],["H",s[0]]},V:function(s,d){return d.y=s[0],["V",s[0]]},C:function(s,d){return d.x=s[4],d.y=s[5],["C",s[0],s[1],s[2],s[3],s[4],s[5]]},S:function(s,d){return d.x=s[2],d.y=s[3],["S",s[0],s[1],s[2],s[3]]},Q:function(s,d){return d.x=s[2],d.y=s[3],["Q",s[0],s[1],s[2],s[3]]},T:function(s,d){return d.x=s[0],d.y=s[1],["T",s[0],s[1]]},Z:function(s,d,m){return d.x=m.x,d.y=m.y,["Z"]},A:function(s,d){return d.x=s[5],d.y=s[6],["A",s[0],s[1],s[2],s[3],s[4],s[5],s[6]]}},r="mlhvqtcsaz".split(""),o=0,a=r.length;o<a;++o)i[r[o]]=function(s){return function(d,m,C){if(s=="H")d[0]=d[0]+m.x;else if(s=="V")d[0]=d[0]+m.y;else if(s=="A")d[5]=d[5]+m.x,d[6]=d[6]+m.y;else for(var M=0,N=d.length;M<N;++M)d[M]=d[M]+(M%2?m.y:m.x);return i[s](d,m,C)}}(r[o].toUpperCase());n.PathArray=function(s,d){n.Array.call(this,s,d||[["M",0,0]])},n.PathArray.prototype=new n.Array,n.PathArray.prototype.constructor=n.PathArray,n.extend(n.PathArray,{toString:function(){return function(s){for(var d=0,m=s.length,C="";d<m;d++)C+=s[d][0],s[d][1]!=null&&(C+=s[d][1],s[d][2]!=null&&(C+=" ",C+=s[d][2],s[d][3]!=null&&(C+=" ",C+=s[d][3],C+=" ",C+=s[d][4],s[d][5]!=null&&(C+=" ",C+=s[d][5],C+=" ",C+=s[d][6],s[d][7]!=null&&(C+=" ",C+=s[d][7])))));return C+" "}(this.value)},move:function(s,d){var m=this.bbox();if(s-=m.x,d-=m.y,!isNaN(s)&&!isNaN(d))for(var C,M=this.value.length-1;M>=0;M--)(C=this.value[M][0])=="M"||C=="L"||C=="T"?(this.value[M][1]+=s,this.value[M][2]+=d):C=="H"?this.value[M][1]+=s:C=="V"?this.value[M][1]+=d:C=="C"||C=="S"||C=="Q"?(this.value[M][1]+=s,this.value[M][2]+=d,this.value[M][3]+=s,this.value[M][4]+=d,C=="C"&&(this.value[M][5]+=s,this.value[M][6]+=d)):C=="A"&&(this.value[M][6]+=s,this.value[M][7]+=d);return this},size:function(s,d){var m,C,M=this.bbox();for(m=this.value.length-1;m>=0;m--)(C=this.value[m][0])=="M"||C=="L"||C=="T"?(this.value[m][1]=(this.value[m][1]-M.x)*s/M.width+M.x,this.value[m][2]=(this.value[m][2]-M.y)*d/M.height+M.y):C=="H"?this.value[m][1]=(this.value[m][1]-M.x)*s/M.width+M.x:C=="V"?this.value[m][1]=(this.value[m][1]-M.y)*d/M.height+M.y:C=="C"||C=="S"||C=="Q"?(this.value[m][1]=(this.value[m][1]-M.x)*s/M.width+M.x,this.value[m][2]=(this.value[m][2]-M.y)*d/M.height+M.y,this.value[m][3]=(this.value[m][3]-M.x)*s/M.width+M.x,this.value[m][4]=(this.value[m][4]-M.y)*d/M.height+M.y,C=="C"&&(this.value[m][5]=(this.value[m][5]-M.x)*s/M.width+M.x,this.value[m][6]=(this.value[m][6]-M.y)*d/M.height+M.y)):C=="A"&&(this.value[m][1]=this.value[m][1]*s/M.width,this.value[m][2]=this.value[m][2]*d/M.height,this.value[m][6]=(this.value[m][6]-M.x)*s/M.width+M.x,this.value[m][7]=(this.value[m][7]-M.y)*d/M.height+M.y);return this},equalCommands:function(s){var d,m,C;for(s=new n.PathArray(s),C=this.value.length===s.value.length,d=0,m=this.value.length;C&&d<m;d++)C=this.value[d][0]===s.value[d][0];return C},morph:function(s){return s=new n.PathArray(s),this.equalCommands(s)?this.destination=s:this.destination=null,this},at:function(s){if(!this.destination)return this;var d,m,C,M,N=this.value,R=this.destination.value,j=[],T=new n.PathArray;for(d=0,m=N.length;d<m;d++){for(j[d]=[N[d][0]],C=1,M=N[d].length;C<M;C++)j[d][C]=N[d][C]+(R[d][C]-N[d][C])*s;j[d][0]==="A"&&(j[d][4]=+(j[d][4]!=0),j[d][5]=+(j[d][5]!=0))}return T.value=j,T},parse:function(s){if(s instanceof n.PathArray)return s.valueOf();var d,m={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};s=typeof s=="string"?s.replace(n.regex.numbersWithDots,l).replace(n.regex.pathLetters," $& ").replace(n.regex.hyphen,"$1 -").trim().split(n.regex.delimiter):s.reduce(function(T,x){return[].concat.call(T,x)},[]);var C=[],M=new n.Point,N=new n.Point,R=0,j=s.length;do n.regex.isPathLetter.test(s[R])?(d=s[R],++R):d=="M"?d="L":d=="m"&&(d="l"),C.push(i[d].call(null,s.slice(R,R+=m[d.toUpperCase()]).map(parseFloat),M,N));while(j>R);return C},bbox:function(){return n.parser.path.setAttribute("d",this.toString()),n.parser.path.getBBox()}}),n.Number=n.invent({create:function(s,d){this.value=0,this.unit=d||"",typeof s=="number"?this.value=isNaN(s)?0:isFinite(s)?s:s<0?-34e37:34e37:typeof s=="string"?(d=s.match(n.regex.numberAndUnit))&&(this.value=parseFloat(d[1]),d[5]=="%"?this.value/=100:d[5]=="s"&&(this.value*=1e3),this.unit=d[5]):s instanceof n.Number&&(this.value=s.valueOf(),this.unit=s.unit)},extend:{toString:function(){return(this.unit=="%"?~~(1e8*this.value)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(s){return s=new n.Number(s),new n.Number(this+s,this.unit||s.unit)},minus:function(s){return s=new n.Number(s),new n.Number(this-s,this.unit||s.unit)},times:function(s){return s=new n.Number(s),new n.Number(this*s,this.unit||s.unit)},divide:function(s){return s=new n.Number(s),new n.Number(this/s,this.unit||s.unit)},to:function(s){var d=new n.Number(this);return typeof s=="string"&&(d.unit=s),d},morph:function(s){return this.destination=new n.Number(s),s.relative&&(this.destination.value+=this.value),this},at:function(s){return this.destination?new n.Number(this.destination).minus(this).times(s).plus(this):this}}}),n.Element=n.invent({create:function(s){this._stroke=n.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=s)&&(this.type=s.nodeName,this.node.instance=this,this._events=s._events||{},this._stroke=s.getAttribute("stroke")||this._stroke)},extend:{x:function(s){return this.attr("x",s)},y:function(s){return this.attr("y",s)},cx:function(s){return s==null?this.x()+this.width()/2:this.x(s-this.width()/2)},cy:function(s){return s==null?this.y()+this.height()/2:this.y(s-this.height()/2)},move:function(s,d){return this.x(s).y(d)},center:function(s,d){return this.cx(s).cy(d)},width:function(s){return this.attr("width",s)},height:function(s){return this.attr("height",s)},size:function(s,d){var m=f(this,s,d);return this.width(new n.Number(m.width)).height(new n.Number(m.height))},clone:function(s){this.writeDataToDom();var d=g(this.node.cloneNode(!0));return s?s.add(d):this.after(d),d},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(s){return this.after(s).remove(),s},addTo:function(s){return s.put(this)},putIn:function(s){return s.add(this)},id:function(s){return this.attr("id",s)},inside:function(s,d){var m=this.bbox();return s>m.x&&d>m.y&&s<m.x+m.width&&d<m.y+m.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var s=this.attr("class");return s==null?[]:s.trim().split(n.regex.delimiter)},hasClass:function(s){return this.classes().indexOf(s)!=-1},addClass:function(s){if(!this.hasClass(s)){var d=this.classes();d.push(s),this.attr("class",d.join(" "))}return this},removeClass:function(s){return this.hasClass(s)&&this.attr("class",this.classes().filter(function(d){return d!=s}).join(" ")),this},toggleClass:function(s){return this.hasClass(s)?this.removeClass(s):this.addClass(s)},reference:function(s){return n.get(this.attr(s))},parent:function(s){var d=this;if(!d.node.parentNode)return null;if(d=n.adopt(d.node.parentNode),!s)return d;for(;d&&d.node instanceof t.SVGElement;){if(typeof s=="string"?d.matches(s):d instanceof s)return d;if(!d.node.parentNode||d.node.parentNode.nodeName=="#document"||d.node.parentNode.nodeName=="#document-fragment")return null;d=n.adopt(d.node.parentNode)}},doc:function(){return this instanceof n.Doc?this:this.parent(n.Doc)},parents:function(s){var d=[],m=this;do{if(!(m=m.parent(s))||!m.node)break;d.push(m)}while(m.parent);return d},matches:function(s){return function(d,m){return(d.matches||d.matchesSelector||d.msMatchesSelector||d.mozMatchesSelector||d.webkitMatchesSelector||d.oMatchesSelector).call(d,m)}(this.node,s)},native:function(){return this.node},svg:function(s){var d=e.createElement("svg");if(!(s&&this instanceof n.Parent))return d.appendChild(s=e.createElement("svg")),this.writeDataToDom(),s.appendChild(this.node.cloneNode(!0)),d.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");d.innerHTML="<svg>"+s.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var m=0,C=d.firstChild.childNodes.length;m<C;m++)this.node.appendChild(d.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(s){return this.dom=s,this},is:function(s){return function(d,m){return d instanceof m}(this,s)}}}),n.easing={"-":function(s){return s},"<>":function(s){return-Math.cos(s*Math.PI)/2+.5},">":function(s){return Math.sin(s*Math.PI/2)},"<":function(s){return 1-Math.cos(s*Math.PI/2)}},n.morph=function(s){return function(d,m){return new n.MorphObj(d,m).at(s)}},n.Situation=n.invent({create:function(s){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new n.Number(s.duration).valueOf(),this.delay=new n.Number(s.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=s.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),n.FX=n.invent({create:function(s){this._target=s,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(s,d,m){typeof s=="object"&&(d=s.ease,m=s.delay,s=s.duration);var C=new n.Situation({duration:s||1e3,delay:m||0,ease:n.easing[d||"-"]||d});return this.queue(C),this},delay:function(s){var d=new n.Situation({duration:s,delay:0,ease:n.easing["-"]});return this.queue(d)},target:function(s){return s&&s instanceof n.Element?(this._target=s,this):this._target},timeToAbsPos:function(s){return(s-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(s){return this.situation.duration/this._speed*s+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame((function(){this.step()}).bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(s){return(typeof s=="function"||s instanceof n.Situation)&&this.situations.push(s),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof n.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var s,d,m,C=this.situation;if(C.init)return this;for(s in C.animations)for(m=this.target()[s](),Array.isArray(m)||(m=[m]),Array.isArray(C.animations[s])||(C.animations[s]=[C.animations[s]]),d=m.length;d--;)C.animations[s][d]instanceof n.Number&&(m[d]=new n.Number(m[d])),C.animations[s][d]=m[d].morph(C.animations[s][d]);for(s in C.attrs)C.attrs[s]=new n.MorphObj(this.target().attr(s),C.attrs[s]);for(s in C.styles)C.styles[s]=new n.MorphObj(this.target().style(s),C.styles[s]);return C.initialTransformation=this.target().matrixify(),C.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(s,d){var m=this.active;return this.active=!1,d&&this.clearQueue(),s&&this.situation&&(!m&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var s=this.situation;this.stop(),this.situation=s,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return this.situation.loops===!0&&(this.situation.loops=this.situation.loop+1),typeof this.situation.loops=="number"?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(s,d){var m=this.situation.duration/this._speed;return this.absPos=s,d||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*m,this.situation.finish=this.situation.start+m,this.step(!0)},speed:function(s){return s===0?this.pause():s?(this._speed=s,this.at(this.absPos,!0)):this._speed},loop:function(s,d){var m=this.last();return m.loops=s==null||s,m.loop=0,d&&(m.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(s){var d=this.last();return d.reversed=s===void 0?!d.reversed:s,this},progress:function(s){return s?this.situation.ease(this.pos):this.pos},after:function(s){var d=this.last();return this.target().on("finished.fx",function m(C){C.detail.situation==d&&(s.call(this,d),this.off("finished.fx",m))}),this._callStart()},during:function(s){var d=this.last(),m=function(C){C.detail.situation==d&&s.call(this,C.detail.pos,n.morph(C.detail.pos),C.detail.eased,d)};return this.target().off("during.fx",m).on("during.fx",m),this.after(function(){this.off("during.fx",m)}),this._callStart()},afterAll:function(s){var d=function m(C){s.call(this),this.off("allfinished.fx",m)};return this.target().off("allfinished.fx",d).on("allfinished.fx",d),this._callStart()},duringAll:function(s){var d=function(m){s.call(this,m.detail.pos,n.morph(m.detail.pos),m.detail.eased,m.detail.situation)};return this.target().off("during.fx",d).on("during.fx",d),this.afterAll(function(){this.off("during.fx",d)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(s,d,m){return this.last()[m||"animations"][s]=d,this._callStart()},step:function(s){var d,m,C;s||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1?(d=Math.max(this.absPos,0),m=Math.floor(d),this.situation.loops===!0||m<this.situation.loops?(this.pos=d-m,C=this.situation.loop,this.situation.loop=m):(this.absPos=this.situation.loops,this.pos=1,C=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-C)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var M=this.situation.ease(this.pos);for(var N in this.situation.once)N>this.lastPos&&N<=M&&(this.situation.once[N].call(this.target(),this.pos,M),delete this.situation.once[N]);return this.active&&this.target().fire("during",{pos:this.pos,eased:M,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=M,this):this},eachAt:function(){var s,d,m,C=this,M=this.target(),N=this.situation;for(s in N.animations)m=[].concat(N.animations[s]).map(function(j){return typeof j!="string"&&j.at?j.at(N.ease(C.pos),C.pos):j}),M[s].apply(M,m);for(s in N.attrs)m=[s].concat(N.attrs[s]).map(function(j){return typeof j!="string"&&j.at?j.at(N.ease(C.pos),C.pos):j}),M.attr.apply(M,m);for(s in N.styles)m=[s].concat(N.styles[s]).map(function(j){return typeof j!="string"&&j.at?j.at(N.ease(C.pos),C.pos):j}),M.style.apply(M,m);if(N.transforms.length){for(m=N.initialTransformation,s=0,d=N.transforms.length;s<d;s++){var R=N.transforms[s];R instanceof n.Matrix?m=R.relative?m.multiply(new n.Matrix().morph(R).at(N.ease(this.pos))):m.morph(R).at(N.ease(this.pos)):(R.relative||R.undo(m.extract()),m=m.multiply(R.at(N.ease(this.pos))))}M.matrix(m)}return this},once:function(s,d,m){var C=this.last();return m||(s=C.ease(s)),C.once[s]=d,this},_callStart:function(){return setTimeout((function(){this.start()}).bind(this),0),this}},parent:n.Element,construct:{animate:function(s,d,m){return(this.fx||(this.fx=new n.FX(this))).animate(s,d,m)},delay:function(s){return(this.fx||(this.fx=new n.FX(this))).delay(s)},stop:function(s,d){return this.fx&&this.fx.stop(s,d),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(s){if(this.fx){if(s==null)return this.fx.speed();this.fx.speed(s)}return this}}}),n.MorphObj=n.invent({create:function(s,d){return n.Color.isColor(d)?new n.Color(s).morph(d):n.regex.delimiter.test(s)?n.regex.pathLetters.test(s)?new n.PathArray(s).morph(d):new n.Array(s).morph(d):n.regex.numberAndUnit.test(d)?new n.Number(s).morph(d):(this.value=s,void(this.destination=d))},extend:{at:function(s,d){return d<1?this.value:this.destination},valueOf:function(){return this.value}}}),n.extend(n.FX,{attr:function(s,d,m){if(typeof s=="object")for(var C in s)this.attr(C,s[C]);else this.add(s,d,"attrs");return this},style:function(s,d){if(typeof s=="object")for(var m in s)this.style(m,s[m]);else this.add(s,d,"styles");return this},x:function(s,d){if(this.target()instanceof n.G)return this.transform({x:s},d),this;var m=new n.Number(s);return m.relative=d,this.add("x",m)},y:function(s,d){if(this.target()instanceof n.G)return this.transform({y:s},d),this;var m=new n.Number(s);return m.relative=d,this.add("y",m)},cx:function(s){return this.add("cx",new n.Number(s))},cy:function(s){return this.add("cy",new n.Number(s))},move:function(s,d){return this.x(s).y(d)},center:function(s,d){return this.cx(s).cy(d)},size:function(s,d){var m;return this.target()instanceof n.Text?this.attr("font-size",s):(s&&d||(m=this.target().bbox()),s||(s=m.width/m.height*d),d||(d=m.height/m.width*s),this.add("width",new n.Number(s)).add("height",new n.Number(d))),this},width:function(s){return this.add("width",new n.Number(s))},height:function(s){return this.add("height",new n.Number(s))},plot:function(s,d,m,C){return arguments.length==4?this.plot([s,d,m,C]):this.add("plot",new(this.target()).morphArray(s))},leading:function(s){return this.target().leading?this.add("leading",new n.Number(s)):this},viewbox:function(s,d,m,C){return this.target()instanceof n.Container&&this.add("viewbox",new n.ViewBox(s,d,m,C)),this},update:function(s){if(this.target()instanceof n.Stop){if(typeof s=="number"||s instanceof n.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});s.opacity!=null&&this.attr("stop-opacity",s.opacity),s.color!=null&&this.attr("stop-color",s.color),s.offset!=null&&this.attr("offset",s.offset)}return this}}),n.Box=n.invent({create:function(s,d,m,C){if(!(typeof s!="object"||s instanceof n.Element))return n.Box.call(this,s.left!=null?s.left:s.x,s.top!=null?s.top:s.y,s.width,s.height);arguments.length==4&&(this.x=s,this.y=d,this.width=m,this.height=C),_(this)},extend:{merge:function(s){var d=new this.constructor;return d.x=Math.min(this.x,s.x),d.y=Math.min(this.y,s.y),d.width=Math.max(this.x+this.width,s.x+s.width)-d.x,d.height=Math.max(this.y+this.height,s.y+s.height)-d.y,_(d)},transform:function(s){var d,m=1/0,C=-1/0,M=1/0,N=-1/0;return[new n.Point(this.x,this.y),new n.Point(this.x2,this.y),new n.Point(this.x,this.y2),new n.Point(this.x2,this.y2)].forEach(function(R){R=R.transform(s),m=Math.min(m,R.x),C=Math.max(C,R.x),M=Math.min(M,R.y),N=Math.max(N,R.y)}),(d=new this.constructor).x=m,d.width=C-m,d.y=M,d.height=N-M,_(d),d}}}),n.BBox=n.invent({create:function(s){if(n.Box.apply(this,[].slice.call(arguments)),s instanceof n.Element){var d;try{if(e.documentElement.contains){if(!e.documentElement.contains(s.node))throw new Exception("Element not in the dom")}else{for(var m=s.node;m.parentNode;)m=m.parentNode;if(m!=e)throw new Exception("Element not in the dom")}d=s.node.getBBox()}catch{if(s instanceof n.Shape){var C=s.clone(n.parser.draw.instance).show();d=C.node.getBBox(),C.remove()}else d={x:s.node.clientLeft,y:s.node.clientTop,width:s.node.clientWidth,height:s.node.clientHeight}}n.Box.call(this,d)}},inherit:n.Box,parent:n.Element,construct:{bbox:function(){return new n.BBox(this)}}}),n.BBox.prototype.constructor=n.BBox,n.extend(n.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),n.RBox=n.invent({create:function(s){n.Box.apply(this,[].slice.call(arguments)),s instanceof n.Element&&n.Box.call(this,s.node.getBoundingClientRect())},inherit:n.Box,parent:n.Element,extend:{addOffset:function(){return this.x+=t.pageXOffset,this.y+=t.pageYOffset,this}},construct:{rbox:function(s){return s?new n.RBox(this).transform(s.screenCTM().inverse()):new n.RBox(this).addOffset()}}}),n.RBox.prototype.constructor=n.RBox,n.Matrix=n.invent({create:function(s){var d,m=b([1,0,0,1,0,0]);for(s=s instanceof n.Element?s.matrixify():typeof s=="string"?b(s.split(n.regex.delimiter).map(parseFloat)):arguments.length==6?b([].slice.call(arguments)):Array.isArray(s)?b(s):typeof s=="object"?s:m,d=S.length-1;d>=0;--d)this[S[d]]=s[S[d]]!=null?s[S[d]]:m[S[d]]},extend:{extract:function(){var s=y(this,0,1),d=y(this,1,0),m=180/Math.PI*Math.atan2(s.y,s.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(m*Math.PI/180)+this.f*Math.sin(m*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(m*Math.PI/180)+this.e*Math.sin(-m*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-m,skewY:180/Math.PI*Math.atan2(d.y,d.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:m,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new n.Matrix(this)}},clone:function(){return new n.Matrix(this)},morph:function(s){return this.destination=new n.Matrix(s),this},at:function(s){return this.destination?new n.Matrix({a:this.a+(this.destination.a-this.a)*s,b:this.b+(this.destination.b-this.b)*s,c:this.c+(this.destination.c-this.c)*s,d:this.d+(this.destination.d-this.d)*s,e:this.e+(this.destination.e-this.e)*s,f:this.f+(this.destination.f-this.f)*s}):this},multiply:function(s){return new n.Matrix(this.native().multiply(function(d){return d instanceof n.Matrix||(d=new n.Matrix(d)),d}(s).native()))},inverse:function(){return new n.Matrix(this.native().inverse())},translate:function(s,d){return new n.Matrix(this.native().translate(s||0,d||0))},scale:function(s,d,m,C){return arguments.length==1?d=s:arguments.length==3&&(C=m,m=d,d=s),this.around(m,C,new n.Matrix(s,0,0,d,0,0))},rotate:function(s,d,m){return s=n.utils.radians(s),this.around(d,m,new n.Matrix(Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),0,0))},flip:function(s,d){return s=="x"?this.scale(-1,1,d,0):s=="y"?this.scale(1,-1,0,d):this.scale(-1,-1,s,d??s)},skew:function(s,d,m,C){return arguments.length==1?d=s:arguments.length==3&&(C=m,m=d,d=s),s=n.utils.radians(s),d=n.utils.radians(d),this.around(m,C,new n.Matrix(1,Math.tan(d),Math.tan(s),1,0,0))},skewX:function(s,d,m){return this.skew(s,0,d,m)},skewY:function(s,d,m){return this.skew(0,s,d,m)},around:function(s,d,m){return this.multiply(new n.Matrix(1,0,0,1,s||0,d||0)).multiply(m).multiply(new n.Matrix(1,0,0,1,-s||0,-d||0))},native:function(){for(var s=n.parser.native.createSVGMatrix(),d=S.length-1;d>=0;d--)s[S[d]]=this[S[d]];return s},toString:function(){return"matrix("+E(this.a)+","+E(this.b)+","+E(this.c)+","+E(this.d)+","+E(this.e)+","+E(this.f)+")"}},parent:n.Element,construct:{ctm:function(){return new n.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof n.Nested){var s=this.rect(1,1),d=s.node.getScreenCTM();return s.remove(),new n.Matrix(d)}return new n.Matrix(this.node.getScreenCTM())}}}),n.Point=n.invent({create:function(s,d){var m;m=Array.isArray(s)?{x:s[0],y:s[1]}:typeof s=="object"?{x:s.x,y:s.y}:s!=null?{x:s,y:d??s}:{x:0,y:0},this.x=m.x,this.y=m.y},extend:{clone:function(){return new n.Point(this)},morph:function(s,d){return this.destination=new n.Point(s,d),this},at:function(s){return this.destination?new n.Point({x:this.x+(this.destination.x-this.x)*s,y:this.y+(this.destination.y-this.y)*s}):this},native:function(){var s=n.parser.native.createSVGPoint();return s.x=this.x,s.y=this.y,s},transform:function(s){return new n.Point(this.native().matrixTransform(s.native()))}}}),n.extend(n.Element,{point:function(s,d){return new n.Point(s,d).transform(this.screenCTM().inverse())}}),n.extend(n.Element,{attr:function(s,d,m){if(s==null){for(s={},m=(d=this.node.attributes).length-1;m>=0;m--)s[d[m].nodeName]=n.regex.isNumber.test(d[m].nodeValue)?parseFloat(d[m].nodeValue):d[m].nodeValue;return s}if(typeof s=="object")for(d in s)this.attr(d,s[d]);else if(d===null)this.node.removeAttribute(s);else{if(d==null)return(d=this.node.getAttribute(s))==null?n.defaults.attrs[s]:n.regex.isNumber.test(d)?parseFloat(d):d;s=="stroke-width"?this.attr("stroke",parseFloat(d)>0?this._stroke:null):s=="stroke"&&(this._stroke=d),s!="fill"&&s!="stroke"||(n.regex.isImage.test(d)&&(d=this.doc().defs().image(d,0,0)),d instanceof n.Image&&(d=this.doc().defs().pattern(0,0,function(){this.add(d)}))),typeof d=="number"?d=new n.Number(d):n.Color.isColor(d)?d=new n.Color(d):Array.isArray(d)&&(d=new n.Array(d)),s=="leading"?this.leading&&this.leading(d):typeof m=="string"?this.node.setAttributeNS(m,s,d.toString()):this.node.setAttribute(s,d.toString()),!this.rebuild||s!="font-size"&&s!="x"||this.rebuild(s,d)}return this}}),n.extend(n.Element,{transform:function(s,d){var m,C,M=this;if(typeof s!="object")return m=new n.Matrix(M).extract(),typeof s=="string"?m[s]:m;if(m=new n.Matrix(M),d=!!d||!!s.relative,s.a!=null)m=d?m.multiply(new n.Matrix(s)):new n.Matrix(s);else if(s.rotation!=null)w(s,M),m=d?m.rotate(s.rotation,s.cx,s.cy):m.rotate(s.rotation-m.extract().rotation,s.cx,s.cy);else if(s.scale!=null||s.scaleX!=null||s.scaleY!=null){if(w(s,M),s.scaleX=s.scale!=null?s.scale:s.scaleX!=null?s.scaleX:1,s.scaleY=s.scale!=null?s.scale:s.scaleY!=null?s.scaleY:1,!d){var N=m.extract();s.scaleX=1*s.scaleX/N.scaleX,s.scaleY=1*s.scaleY/N.scaleY}m=m.scale(s.scaleX,s.scaleY,s.cx,s.cy)}else s.skew!=null||s.skewX!=null||s.skewY!=null?(w(s,M),s.skewX=s.skew!=null?s.skew:s.skewX!=null?s.skewX:0,s.skewY=s.skew!=null?s.skew:s.skewY!=null?s.skewY:0,d||(N=m.extract(),m=m.multiply(new n.Matrix().skew(N.skewX,N.skewY,s.cx,s.cy).inverse())),m=m.skew(s.skewX,s.skewY,s.cx,s.cy)):s.flip?(s.flip=="x"||s.flip=="y"?s.offset=s.offset==null?M.bbox()["c"+s.flip]:s.offset:s.offset==null?(C=M.bbox(),s.flip=C.cx,s.offset=C.cy):s.flip=s.offset,m=new n.Matrix().flip(s.flip,s.offset)):s.x==null&&s.y==null||(d?m=m.translate(s.x,s.y):(s.x!=null&&(m.e=s.x),s.y!=null&&(m.f=s.y)));return this.attr("transform",m)}}),n.extend(n.FX,{transform:function(s,d){var m,C,M=this.target();return typeof s!="object"?(m=new n.Matrix(M).extract(),typeof s=="string"?m[s]:m):(d=!!d||!!s.relative,s.a!=null?m=new n.Matrix(s):s.rotation!=null?(w(s,M),m=new n.Rotate(s.rotation,s.cx,s.cy)):s.scale!=null||s.scaleX!=null||s.scaleY!=null?(w(s,M),s.scaleX=s.scale!=null?s.scale:s.scaleX!=null?s.scaleX:1,s.scaleY=s.scale!=null?s.scale:s.scaleY!=null?s.scaleY:1,m=new n.Scale(s.scaleX,s.scaleY,s.cx,s.cy)):s.skewX!=null||s.skewY!=null?(w(s,M),s.skewX=s.skewX!=null?s.skewX:0,s.skewY=s.skewY!=null?s.skewY:0,m=new n.Skew(s.skewX,s.skewY,s.cx,s.cy)):s.flip?(s.flip=="x"||s.flip=="y"?s.offset=s.offset==null?M.bbox()["c"+s.flip]:s.offset:s.offset==null?(C=M.bbox(),s.flip=C.cx,s.offset=C.cy):s.flip=s.offset,m=new n.Matrix().flip(s.flip,s.offset)):s.x==null&&s.y==null||(m=new n.Translate(s.x,s.y)),m?(m.relative=d,this.last().transforms.push(m),this._callStart()):this)}}),n.extend(n.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var s=(this.attr("transform")||"").split(n.regex.transforms).slice(0,-1).map(function(d){var m=d.trim().split("(");return[m[0],m[1].split(n.regex.delimiter).map(function(C){return parseFloat(C)})]}).reduce(function(d,m){return m[0]=="matrix"?d.multiply(b(m[1])):d[m[0]].apply(d,m[1])},new n.Matrix);return s},toParent:function(s){if(this==s)return this;var d=this.screenCTM(),m=s.screenCTM().inverse();return this.addTo(s).untransform().transform(m.multiply(d)),this},toDoc:function(){return this.toParent(this.doc())}}),n.Transformation=n.invent({create:function(s,d){if(arguments.length>1&&typeof d!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(s))for(var m=0,C=this.arguments.length;m<C;++m)this[this.arguments[m]]=s[m];else if(typeof s=="object")for(m=0,C=this.arguments.length;m<C;++m)this[this.arguments[m]]=s[this.arguments[m]];this.inversed=!1,d===!0&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(s){for(var d=[],m=0,C=this.arguments.length;m<C;++m)d.push(this[this.arguments[m]]);var M=this._undo||new n.Matrix;return M=new n.Matrix().morph(n.Matrix.prototype[this.method].apply(M,d)).at(s),this.inversed?M.inverse():M},undo:function(s){for(var d=0,m=this.arguments.length;d<m;++d)s[this.arguments[d]]=this[this.arguments[d]]===void 0?0:s[this.arguments[d]];return s.cx=this.cx,s.cy=this.cy,this._undo=new n[h(this.method)](s,!0).at(1),this}}}),n.Translate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(s,d){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),n.Rotate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(s,d){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(s){var d=new n.Matrix().rotate(new n.Number().morph(this.rotation-(this._undo?this._undo.rotation:0)).at(s),this.cx,this.cy);return this.inversed?d.inverse():d},undo:function(s){return this._undo=s,this}}}),n.Scale=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(s,d){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),n.Skew=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(s,d){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),n.extend(n.Element,{style:function(s,d){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(typeof s=="object")for(d in s)this.style(d,s[d]);else{if(!n.regex.isCss.test(s))return this.node.style[p(s)];for(s=s.split(/\s*;\s*/).filter(function(m){return!!m}).map(function(m){return m.split(/\s*:\s*/)});d=s.pop();)this.style(d[0],d[1])}else this.node.style[p(s)]=d===null||n.regex.isBlank.test(d)?"":d;return this}}),n.Parent=n.invent({create:function(s){this.constructor.call(this,s)},inherit:n.Element,extend:{children:function(){return n.utils.map(n.utils.filterSVGElements(this.node.childNodes),function(s){return n.adopt(s)})},add:function(s,d){return d==null?this.node.appendChild(s.node):s.node!=this.node.childNodes[d]&&this.node.insertBefore(s.node,this.node.childNodes[d]),this},put:function(s,d){return this.add(s,d),s},has:function(s){return this.index(s)>=0},index:function(s){return[].slice.call(this.node.childNodes).indexOf(s.node)},get:function(s){return n.adopt(this.node.childNodes[s])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(s,d){var m,C,M=this.children();for(m=0,C=M.length;m<C;m++)M[m]instanceof n.Element&&s.apply(M[m],[m,M]),d&&M[m]instanceof n.Container&&M[m].each(s,d);return this},removeElement:function(s){return this.node.removeChild(s.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),n.extend(n.Parent,{ungroup:function(s,d){return d===0||this instanceof n.Defs||this.node==n.parser.draw||(s=s||(this instanceof n.Doc?this:this.parent(n.Parent)),d=d||1/0,this.each(function(){return this instanceof n.Defs?this:this instanceof n.Parent?this.ungroup(s,d-1):this.toParent(s)}),this.node.firstChild||this.remove()),this},flatten:function(s,d){return this.ungroup(s,d)}}),n.Container=n.invent({create:function(s){this.constructor.call(this,s)},inherit:n.Parent}),n.ViewBox=n.invent({create:function(s){var d,m,C,M,N,R,j,T=1,x=1,B=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(s instanceof n.Element){for(R=s,j=s,N=(s.attr("viewBox")||"").match(B),s.bbox,C=new n.Number(s.width()),M=new n.Number(s.height());C.unit=="%";)T*=C.value,C=new n.Number(R instanceof n.Doc?R.parent().offsetWidth:R.parent().width()),R=R.parent();for(;M.unit=="%";)x*=M.value,M=new n.Number(j instanceof n.Doc?j.parent().offsetHeight:j.parent().height()),j=j.parent();this.x=0,this.y=0,this.width=C*T,this.height=M*x,this.zoom=1,N&&(d=parseFloat(N[0]),m=parseFloat(N[1]),C=parseFloat(N[2]),M=parseFloat(N[3]),this.zoom=this.width/this.height>C/M?this.height/M:this.width/C,this.x=d,this.y=m,this.width=C,this.height=M)}else s=typeof s=="string"?s.match(B).map(function(V){return parseFloat(V)}):Array.isArray(s)?s:typeof s=="object"?[s.x,s.y,s.width,s.height]:arguments.length==4?[].slice.call(arguments):[0,0,0,0],this.x=s[0],this.y=s[1],this.width=s[2],this.height=s[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(s,d,m,C){return this.destination=new n.ViewBox(s,d,m,C),this},at:function(s){return this.destination?new n.ViewBox([this.x+(this.destination.x-this.x)*s,this.y+(this.destination.y-this.y)*s,this.width+(this.destination.width-this.width)*s,this.height+(this.destination.height-this.height)*s]):this}},parent:n.Container,construct:{viewbox:function(s,d,m,C){return arguments.length==0?new n.ViewBox(this):this.attr("viewBox",new n.ViewBox(s,d,m,C))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(s){n.Element.prototype[s]=function(d){return d==null?n.off(this,s):n.on(this,s,d),this}}),n.listenerId=0,n.on=function(s,d,m,C,M){var N=m.bind(C||s),R=s instanceof n.Element?s.node:s;R.instance=R.instance||{_events:{}};var j=R.instance._events;m._svgjsListenerId||(m._svgjsListenerId=++n.listenerId),d.split(n.regex.delimiter).forEach(function(T){var x=T.split(".")[0],B=T.split(".")[1]||"*";j[x]=j[x]||{},j[x][B]=j[x][B]||{},j[x][B][m._svgjsListenerId]=N,R.addEventListener(x,N,M||!1)})},n.off=function(s,d,m,C){var M=s instanceof n.Element?s.node:s;if(M.instance&&(typeof m!="function"||(m=m._svgjsListenerId))){var N=M.instance._events;(d||"").split(n.regex.delimiter).forEach(function(R){var j,T,x=R&&R.split(".")[0],B=R&&R.split(".")[1];if(m)N[x]&&N[x][B||"*"]&&(M.removeEventListener(x,N[x][B||"*"][m],C||!1),delete N[x][B||"*"][m]);else if(x&&B){if(N[x]&&N[x][B]){for(T in N[x][B])n.off(M,[x,B].join("."),T);delete N[x][B]}}else if(B)for(R in N)for(j in N[R])B===j&&n.off(M,[R,B].join("."));else if(x){if(N[x]){for(j in N[x])n.off(M,[x,j].join("."));delete N[x]}}else{for(R in N)n.off(M,R);M.instance._events={}}})}},n.extend(n.Element,{on:function(s,d,m,C){return n.on(this,s,d,m,C),this},off:function(s,d){return n.off(this.node,s,d),this},fire:function(s,d){return s instanceof t.Event?this.node.dispatchEvent(s):this.node.dispatchEvent(s=new n.CustomEvent(s,{detail:d,cancelable:!0})),this._event=s,this},event:function(){return this._event}}),n.Defs=n.invent({create:"defs",inherit:n.Container}),n.G=n.invent({create:"g",inherit:n.Container,extend:{x:function(s){return s==null?this.transform("x"):this.transform({x:s-this.x()},!0)},y:function(s){return s==null?this.transform("y"):this.transform({y:s-this.y()},!0)},cx:function(s){return s==null?this.gbox().cx:this.x(s-this.gbox().width/2)},cy:function(s){return s==null?this.gbox().cy:this.y(s-this.gbox().height/2)},gbox:function(){var s=this.bbox(),d=this.transform();return s.x+=d.x,s.x2+=d.x,s.cx+=d.x,s.y+=d.y,s.y2+=d.y,s.cy+=d.y,s}},construct:{group:function(){return this.put(new n.G)}}}),n.Doc=n.invent({create:function(s){s&&((s=typeof s=="string"?e.getElementById(s):s).nodeName=="svg"?this.constructor.call(this,s):(this.constructor.call(this,n.create("svg")),s.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:n.Container,extend:{namespace:function(){return this.attr({xmlns:n.ns,version:"1.1"}).attr("xmlns:xlink",n.xlink,n.xmlns).attr("xmlns:svgjs",n.svgjs,n.xmlns)},defs:function(){var s;return this._defs||((s=this.node.getElementsByTagName("defs")[0])?this._defs=n.adopt(s):this._defs=new n.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&this.node.parentNode.nodeName!="#document"&&this.node.parentNode.nodeName!="#document-fragment"?this.node.parentNode:null},spof:function(){var s=this.node.getScreenCTM();return s&&this.style("left",-s.e%1+"px").style("top",-s.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,n.parser.draw.parentNode||this.node.appendChild(n.parser.draw),this},clone:function(s){this.writeDataToDom();var d=this.node,m=g(d.cloneNode(!0));return s?(s.node||s).appendChild(m.node):d.parentNode.insertBefore(m.node,d.nextSibling),m}}}),n.extend(n.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var s=this.position()+1,d=this.parent();return d.removeElement(this).add(this,s),d instanceof n.Doc&&d.node.appendChild(d.defs().node),this},backward:function(){var s=this.position();return s>0&&this.parent().removeElement(this).add(this,s-1),this},front:function(){var s=this.parent();return s.node.appendChild(this.node),s instanceof n.Doc&&s.node.appendChild(s.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(s){s.remove();var d=this.position();return this.parent().add(s,d),this},after:function(s){s.remove();var d=this.position();return this.parent().add(s,d+1),this}}),n.Mask=n.invent({create:function(){this.constructor.call(this,n.create("mask")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var s=this.targets.length-1;s>=0;s--)this.targets[s]&&this.targets[s].unmask();return this.targets=[],n.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new n.Mask)}}}),n.extend(n.Element,{maskWith:function(s){return this.masker=s instanceof n.Mask?s:this.parent().mask().add(s),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),n.ClipPath=n.invent({create:function(){this.constructor.call(this,n.create("clipPath")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var s=this.targets.length-1;s>=0;s--)this.targets[s]&&this.targets[s].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new n.ClipPath)}}}),n.extend(n.Element,{clipWith:function(s){return this.clipper=s instanceof n.ClipPath?s:this.parent().clip().add(s),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),n.Gradient=n.invent({create:function(s){this.constructor.call(this,n.create(s+"Gradient")),this.type=s},inherit:n.Container,extend:{at:function(s,d,m){return this.put(new n.Stop).update(s,d,m)},update:function(s){return this.clear(),typeof s=="function"&&s.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(s,d,m){return s=="transform"&&(s="gradientTransform"),n.Container.prototype.attr.call(this,s,d,m)}},construct:{gradient:function(s,d){return this.defs().gradient(s,d)}}}),n.extend(n.Gradient,n.FX,{from:function(s,d){return(this._target||this).type=="radial"?this.attr({fx:new n.Number(s),fy:new n.Number(d)}):this.attr({x1:new n.Number(s),y1:new n.Number(d)})},to:function(s,d){return(this._target||this).type=="radial"?this.attr({cx:new n.Number(s),cy:new n.Number(d)}):this.attr({x2:new n.Number(s),y2:new n.Number(d)})}}),n.extend(n.Defs,{gradient:function(s,d){return this.put(new n.Gradient(s)).update(d)}}),n.Stop=n.invent({create:"stop",inherit:n.Element,extend:{update:function(s){return(typeof s=="number"||s instanceof n.Number)&&(s={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),s.opacity!=null&&this.attr("stop-opacity",s.opacity),s.color!=null&&this.attr("stop-color",s.color),s.offset!=null&&this.attr("offset",new n.Number(s.offset)),this}}}),n.Pattern=n.invent({create:"pattern",inherit:n.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(s){return this.clear(),typeof s=="function"&&s.call(this,this),this},toString:function(){return this.fill()},attr:function(s,d,m){return s=="transform"&&(s="patternTransform"),n.Container.prototype.attr.call(this,s,d,m)}},construct:{pattern:function(s,d,m){return this.defs().pattern(s,d,m)}}}),n.extend(n.Defs,{pattern:function(s,d,m){return this.put(new n.Pattern).update(m).attr({x:0,y:0,width:s,height:d,patternUnits:"userSpaceOnUse"})}}),n.Shape=n.invent({create:function(s){this.constructor.call(this,s)},inherit:n.Element}),n.Bare=n.invent({create:function(s,d){if(this.constructor.call(this,n.create(s)),d)for(var m in d.prototype)typeof d.prototype[m]=="function"&&(this[m]=d.prototype[m])},inherit:n.Element,extend:{words:function(s){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(e.createTextNode(s)),this}}}),n.extend(n.Parent,{element:function(s,d){return this.put(new n.Bare(s,d))}}),n.Symbol=n.invent({create:"symbol",inherit:n.Container,construct:{symbol:function(){return this.put(new n.Symbol)}}}),n.Use=n.invent({create:"use",inherit:n.Shape,extend:{element:function(s,d){return this.attr("href",(d||"")+"#"+s,n.xlink)}},construct:{use:function(s,d){return this.put(new n.Use).element(s,d)}}}),n.Rect=n.invent({create:"rect",inherit:n.Shape,construct:{rect:function(s,d){return this.put(new n.Rect).size(s,d)}}}),n.Circle=n.invent({create:"circle",inherit:n.Shape,construct:{circle:function(s){return this.put(new n.Circle).rx(new n.Number(s).divide(2)).move(0,0)}}}),n.extend(n.Circle,n.FX,{rx:function(s){return this.attr("r",s)},ry:function(s){return this.rx(s)}}),n.Ellipse=n.invent({create:"ellipse",inherit:n.Shape,construct:{ellipse:function(s,d){return this.put(new n.Ellipse).size(s,d).move(0,0)}}}),n.extend(n.Ellipse,n.Rect,n.FX,{rx:function(s){return this.attr("rx",s)},ry:function(s){return this.attr("ry",s)}}),n.extend(n.Circle,n.Ellipse,{x:function(s){return s==null?this.cx()-this.rx():this.cx(s+this.rx())},y:function(s){return s==null?this.cy()-this.ry():this.cy(s+this.ry())},cx:function(s){return s==null?this.attr("cx"):this.attr("cx",s)},cy:function(s){return s==null?this.attr("cy"):this.attr("cy",s)},width:function(s){return s==null?2*this.rx():this.rx(new n.Number(s).divide(2))},height:function(s){return s==null?2*this.ry():this.ry(new n.Number(s).divide(2))},size:function(s,d){var m=f(this,s,d);return this.rx(new n.Number(m.width).divide(2)).ry(new n.Number(m.height).divide(2))}}),n.Line=n.invent({create:"line",inherit:n.Shape,extend:{array:function(){return new n.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(s,d,m,C){return s==null?this.array():(s=d!==void 0?{x1:s,y1:d,x2:m,y2:C}:new n.PointArray(s).toLine(),this.attr(s))},move:function(s,d){return this.attr(this.array().move(s,d).toLine())},size:function(s,d){var m=f(this,s,d);return this.attr(this.array().size(m.width,m.height).toLine())}},construct:{line:function(s,d,m,C){return n.Line.prototype.plot.apply(this.put(new n.Line),s!=null?[s,d,m,C]:[0,0,0,0])}}}),n.Polyline=n.invent({create:"polyline",inherit:n.Shape,construct:{polyline:function(s){return this.put(new n.Polyline).plot(s||new n.PointArray)}}}),n.Polygon=n.invent({create:"polygon",inherit:n.Shape,construct:{polygon:function(s){return this.put(new n.Polygon).plot(s||new n.PointArray)}}}),n.extend(n.Polyline,n.Polygon,{array:function(){return this._array||(this._array=new n.PointArray(this.attr("points")))},plot:function(s){return s==null?this.array():this.clear().attr("points",typeof s=="string"?s:this._array=new n.PointArray(s))},clear:function(){return delete this._array,this},move:function(s,d){return this.attr("points",this.array().move(s,d))},size:function(s,d){var m=f(this,s,d);return this.attr("points",this.array().size(m.width,m.height))}}),n.extend(n.Line,n.Polyline,n.Polygon,{morphArray:n.PointArray,x:function(s){return s==null?this.bbox().x:this.move(s,this.bbox().y)},y:function(s){return s==null?this.bbox().y:this.move(this.bbox().x,s)},width:function(s){var d=this.bbox();return s==null?d.width:this.size(s,d.height)},height:function(s){var d=this.bbox();return s==null?d.height:this.size(d.width,s)}}),n.Path=n.invent({create:"path",inherit:n.Shape,extend:{morphArray:n.PathArray,array:function(){return this._array||(this._array=new n.PathArray(this.attr("d")))},plot:function(s){return s==null?this.array():this.clear().attr("d",typeof s=="string"?s:this._array=new n.PathArray(s))},clear:function(){return delete this._array,this},move:function(s,d){return this.attr("d",this.array().move(s,d))},x:function(s){return s==null?this.bbox().x:this.move(s,this.bbox().y)},y:function(s){return s==null?this.bbox().y:this.move(this.bbox().x,s)},size:function(s,d){var m=f(this,s,d);return this.attr("d",this.array().size(m.width,m.height))},width:function(s){return s==null?this.bbox().width:this.size(s,this.bbox().height)},height:function(s){return s==null?this.bbox().height:this.size(this.bbox().width,s)}},construct:{path:function(s){return this.put(new n.Path).plot(s||new n.PathArray)}}}),n.Image=n.invent({create:"image",inherit:n.Shape,extend:{load:function(s){if(!s)return this;var d=this,m=new t.Image;return n.on(m,"load",function(){n.off(m);var C=d.parent(n.Pattern);C!==null&&(d.width()==0&&d.height()==0&&d.size(m.width,m.height),C&&C.width()==0&&C.height()==0&&C.size(d.width(),d.height()),typeof d._loaded=="function"&&d._loaded.call(d,{width:m.width,height:m.height,ratio:m.width/m.height,url:s}))}),n.on(m,"error",function(C){n.off(m),typeof d._error=="function"&&d._error.call(d,C)}),this.attr("href",m.src=this.src=s,n.xlink)},loaded:function(s){return this._loaded=s,this},error:function(s){return this._error=s,this}},construct:{image:function(s,d,m){return this.put(new n.Image).load(s).size(d||0,m||d||0)}}}),n.Text=n.invent({create:function(){this.constructor.call(this,n.create("text")),this.dom.leading=new n.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",n.defaults.attrs["font-family"])},inherit:n.Shape,extend:{x:function(s){return s==null?this.attr("x"):this.attr("x",s)},y:function(s){var d=this.attr("y"),m=typeof d=="number"?d-this.bbox().y:0;return s==null?typeof d=="number"?d-m:d:this.attr("y",typeof s.valueOf()=="number"?s+m:s)},cx:function(s){return s==null?this.bbox().cx:this.x(s-this.bbox().width/2)},cy:function(s){return s==null?this.bbox().cy:this.y(s-this.bbox().height/2)},text:function(s){if(s===void 0){s="";for(var d=this.node.childNodes,m=0,C=d.length;m<C;++m)m!=0&&d[m].nodeType!=3&&n.adopt(d[m]).dom.newLined==1&&(s+=`
`),s+=d[m].textContent;return s}if(this.clear().build(!0),typeof s=="function")s.call(this,this);else{m=0;for(var M=(s=s.split(`
`)).length;m<M;m++)this.tspan(s[m]).newLine()}return this.build(!1).rebuild()},size:function(s){return this.attr("font-size",s).rebuild()},leading:function(s){return s==null?this.dom.leading:(this.dom.leading=new n.Number(s),this.rebuild())},lines:function(){var s=(this.textPath&&this.textPath()||this).node,d=n.utils.map(n.utils.filterSVGElements(s.childNodes),function(m){return n.adopt(m)});return new n.Set(d)},rebuild:function(s){if(typeof s=="boolean"&&(this._rebuild=s),this._rebuild){var d=this,m=0,C=this.dom.leading*new n.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(d.textPath()||this.attr("x",d.attr("x")),this.text()==`
`?m+=C:(this.attr("dy",C+m),m=0))}),this.fire("rebuild")}return this},build:function(s){return this._build=!!s,this},setData:function(s){return this.dom=s,this.dom.leading=new n.Number(s.leading||1.3),this}},construct:{text:function(s){return this.put(new n.Text).text(s)},plain:function(s){return this.put(new n.Text).plain(s)}}}),n.Tspan=n.invent({create:"tspan",inherit:n.Shape,extend:{text:function(s){return s==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof s=="function"?s.call(this,this):this.plain(s),this)},dx:function(s){return this.attr("dx",s)},dy:function(s){return this.attr("dy",s)},newLine:function(){var s=this.parent(n.Text);return this.dom.newLined=!0,this.dy(s.dom.leading*s.attr("font-size")).attr("x",s.x())}}}),n.extend(n.Text,n.Tspan,{plain:function(s){return this._build===!1&&this.clear(),this.node.appendChild(e.createTextNode(s)),this},tspan:function(s){var d=(this.textPath&&this.textPath()||this).node,m=new n.Tspan;return this._build===!1&&this.clear(),d.appendChild(m.node),m.text(s)},clear:function(){for(var s=(this.textPath&&this.textPath()||this).node;s.hasChildNodes();)s.removeChild(s.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),n.TextPath=n.invent({create:"textPath",inherit:n.Parent,parent:n.Text,construct:{morphArray:n.PathArray,path:function(s){for(var d=new n.TextPath,m=this.doc().defs().path(s);this.node.hasChildNodes();)d.node.appendChild(this.node.firstChild);return this.node.appendChild(d.node),d.attr("href","#"+m,n.xlink),this},array:function(){var s=this.track();return s?s.array():null},plot:function(s){var d=this.track(),m=null;return d&&(m=d.plot(s)),s==null?m:this},track:function(){var s=this.textPath();if(s)return s.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return n.adopt(this.node.firstChild)}}}),n.Nested=n.invent({create:function(){this.constructor.call(this,n.create("svg")),this.style("overflow","visible")},inherit:n.Container,construct:{nested:function(){return this.put(new n.Nested)}}}),n.A=n.invent({create:"a",inherit:n.Container,extend:{to:function(s){return this.attr("href",s,n.xlink)},show:function(s){return this.attr("show",s,n.xlink)},target:function(s){return this.attr("target",s)}},construct:{link:function(s){return this.put(new n.A).to(s)}}}),n.extend(n.Element,{linkTo:function(s){var d=new n.A;return typeof s=="function"?s.call(d,d):d.to(s),this.parent().put(d).put(this)}}),n.Marker=n.invent({create:"marker",inherit:n.Container,extend:{width:function(s){return this.attr("markerWidth",s)},height:function(s){return this.attr("markerHeight",s)},ref:function(s,d){return this.attr("refX",s).attr("refY",d)},update:function(s){return this.clear(),typeof s=="function"&&s.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(s,d,m){return this.defs().marker(s,d,m)}}}),n.extend(n.Defs,{marker:function(s,d,m){return this.put(new n.Marker).size(s,d).ref(s/2,d/2).viewbox(0,0,s,d).attr("orient","auto").update(m)}}),n.extend(n.Line,n.Polyline,n.Polygon,n.Path,{marker:function(s,d,m,C){var M=["marker"];return s!="all"&&M.push(s),M=M.join("-"),s=arguments[1]instanceof n.Marker?arguments[1]:this.doc().marker(d,m,C),this.attr(M,s)}});var c={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(s,d){return d=="color"?s:s+"-"+d}};function l(s,d,m,C){return m+C.replace(n.regex.dots," .")}function u(s){for(var d=s.slice(0),m=d.length;m--;)Array.isArray(d[m])&&(d[m]=u(d[m]));return d}function p(s){return s.toLowerCase().replace(/-(.)/g,function(d,m){return m.toUpperCase()})}function h(s){return s.charAt(0).toUpperCase()+s.slice(1)}function v(s){var d=s.toString(16);return d.length==1?"0"+d:d}function f(s,d,m){if(d==null||m==null){var C=s.bbox();d==null?d=C.width/C.height*m:m==null&&(m=C.height/C.width*d)}return{width:d,height:m}}function y(s,d,m){return{x:d*s.a+m*s.c+0,y:d*s.b+m*s.d+0}}function b(s){return{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}}function w(s,d){s.cx=s.cx==null?d.bbox().cx:s.cx,s.cy=s.cy==null?d.bbox().cy:s.cy}function g(s){for(var d=s.childNodes.length-1;d>=0;d--)s.childNodes[d]instanceof t.SVGElement&&g(s.childNodes[d]);return n.adopt(s).id(n.eid(s.nodeName))}function _(s){return s.x==null&&(s.x=0,s.y=0,s.width=0,s.height=0),s.w=s.width,s.h=s.height,s.x2=s.x+s.width,s.y2=s.y+s.height,s.cx=s.x+s.width/2,s.cy=s.y+s.height/2,s}function E(s){return Math.abs(s)>1e-37?s:0}["fill","stroke"].forEach(function(s){var d,m={};m[s]=function(C){if(C===void 0)return this;if(typeof C=="string"||n.Color.isRgb(C)||C&&typeof C.fill=="function")this.attr(s,C);else for(d=c[s].length-1;d>=0;d--)C[c[s][d]]!=null&&this.attr(c.prefix(s,c[s][d]),C[c[s][d]]);return this},n.extend(n.Element,n.FX,m)}),n.extend(n.Element,n.FX,{rotate:function(s,d,m){return this.transform({rotation:s,cx:d,cy:m})},skew:function(s,d,m,C){return arguments.length==1||arguments.length==3?this.transform({skew:s,cx:d,cy:m}):this.transform({skewX:s,skewY:d,cx:m,cy:C})},scale:function(s,d,m,C){return arguments.length==1||arguments.length==3?this.transform({scale:s,cx:d,cy:m}):this.transform({scaleX:s,scaleY:d,cx:m,cy:C})},translate:function(s,d){return this.transform({x:s,y:d})},flip:function(s,d){return d=typeof s=="number"?s:d,this.transform({flip:s||"both",offset:d})},matrix:function(s){return this.attr("transform",new n.Matrix(arguments.length==6?[].slice.call(arguments):s))},opacity:function(s){return this.attr("opacity",s)},dx:function(s){return this.x(new n.Number(s).plus(this instanceof n.FX?0:this.x()),!0)},dy:function(s){return this.y(new n.Number(s).plus(this instanceof n.FX?0:this.y()),!0)},dmove:function(s,d){return this.dx(s).dy(d)}}),n.extend(n.Rect,n.Ellipse,n.Circle,n.Gradient,n.FX,{radius:function(s,d){var m=(this._target||this).type;return m=="radial"||m=="circle"?this.attr("r",new n.Number(s)):this.rx(s).ry(d??s)}}),n.extend(n.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(s){return this.node.getPointAtLength(s)}}),n.extend(n.Parent,n.Text,n.Tspan,n.FX,{font:function(s,d){if(typeof s=="object")for(d in s)this.font(d,s[d]);return s=="leading"?this.leading(d):s=="anchor"?this.attr("text-anchor",d):s=="size"||s=="family"||s=="weight"||s=="stretch"||s=="variant"||s=="style"?this.attr("font-"+s,d):this.attr(s,d)}}),n.Set=n.invent({create:function(s){s instanceof n.Set?this.members=s.members.slice():Array.isArray(s)?this.members=s:this.clear()},extend:{add:function(){var s,d,m=[].slice.call(arguments);for(s=0,d=m.length;s<d;s++)this.members.push(m[s]);return this},remove:function(s){var d=this.index(s);return d>-1&&this.members.splice(d,1),this},each:function(s){for(var d=0,m=this.members.length;d<m;d++)s.apply(this.members[d],[d,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(s){return this.index(s)>=0},index:function(s){return this.members.indexOf(s)},get:function(s){return this.members[s]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(this.members.length==0)return new n.RBox;var s=this.members[0].rbox(this.members[0].doc());return this.each(function(){s=s.merge(this.rbox(this.doc()))}),s}},construct:{set:function(s){return new n.Set(s)}}}),n.FX.Set=n.invent({create:function(s){this.set=s}}),n.Set.inherit=function(){var s=[];for(var d in n.Shape.prototype)typeof n.Shape.prototype[d]=="function"&&typeof n.Set.prototype[d]!="function"&&s.push(d);for(var d in s.forEach(function(C){n.Set.prototype[C]=function(){for(var M=0,N=this.members.length;M<N;M++)this.members[M]&&typeof this.members[M][C]=="function"&&this.members[M][C].apply(this.members[M],arguments);return C=="animate"?this.fx||(this.fx=new n.FX.Set(this)):this}}),s=[],n.FX.prototype)typeof n.FX.prototype[d]=="function"&&typeof n.FX.Set.prototype[d]!="function"&&s.push(d);s.forEach(function(m){n.FX.Set.prototype[m]=function(){for(var C=0,M=this.set.members.length;C<M;C++)this.set.members[C].fx[m].apply(this.set.members[C].fx,arguments);return this}})},n.extend(n.Element,{data:function(s,d,m){if(typeof s=="object")for(d in s)this.data(d,s[d]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+s))}catch{return this.attr("data-"+s)}else this.attr("data-"+s,d===null?null:m===!0||typeof d=="string"||typeof d=="number"?d:JSON.stringify(d));return this}}),n.extend(n.Element,{remember:function(s,d){if(typeof arguments[0]=="object")for(var d in s)this.remember(d,s[d]);else{if(arguments.length==1)return this.memory()[s];this.memory()[s]=d}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var s=arguments.length-1;s>=0;s--)delete this.memory()[arguments[s]];return this},memory:function(){return this._memory||(this._memory={})}}),n.get=function(s){var d=e.getElementById(function(m){var C=(m||"").toString().match(n.regex.reference);if(C)return C[1]}(s)||s);return n.adopt(d)},n.select=function(s,d){return new n.Set(n.utils.map((d||e).querySelectorAll(s),function(m){return n.adopt(m)}))},n.extend(n.Parent,{select:function(s){return n.select(s,this.node)}});var S="abcdef".split("");if(typeof t.CustomEvent!="function"){var D=function(s,d){d=d||{bubbles:!1,cancelable:!1,detail:void 0};var m=e.createEvent("CustomEvent");return m.initCustomEvent(s,d.bubbles,d.cancelable,d.detail),m};D.prototype=t.Event.prototype,n.CustomEvent=D}else n.CustomEvent=t.CustomEvent;return function(s){for(var d=0,m=["moz","webkit"],C=0;C<m.length&&!t.requestAnimationFrame;++C)s.requestAnimationFrame=s[m[C]+"RequestAnimationFrame"],s.cancelAnimationFrame=s[m[C]+"CancelAnimationFrame"]||s[m[C]+"CancelRequestAnimationFrame"];s.requestAnimationFrame=s.requestAnimationFrame||function(M){var N=new Date().getTime(),R=Math.max(0,16-(N-d)),j=s.setTimeout(function(){M(N+R)},R);return d=N+R,j},s.cancelAnimationFrame=s.cancelAnimationFrame||s.clearTimeout}(t),n};var tS=Q1.exports=qc.document?jd(qc,qc.document):function(t){return jd(t,t.document)},Ld={exports:{}};(function(t,e){function n(i,r){return r.querySelector(i)}(e=Ld.exports=function(i,r){return n(i,r=r||document)}).all=function(i,r){return(r=r||document).querySelectorAll(i)},e.engine=function(i){if(!i.one)throw new Error(".one callback required");if(!i.all)throw new Error(".all callback required");return n=i.one,e.all=i.all,e}})(0,Ld.exports);var Ma=Ld.exports,ze="tokenSimulation",K={TOGGLE_MODE_EVENT:ze+".toggleMode",GENERATE_TOKEN_EVENT:ze+".generateToken",CONSUME_TOKEN_EVENT:ze+".consumeToken",PLAY_SIMULATION_EVENT:ze+".playSimulation",PAUSE_SIMULATION_EVENT:ze+".pauseSimulation",RESET_SIMULATION_EVENT:ze+".resetSimulation",TERMINATE_EVENT:ze+".terminateEvent",UPDATE_ELEMENTS_EVENT:ze+".updateElements",UPDATE_ELEMENT_EVENT:ze+".updateElement",PROCESS_INSTANCE_CREATED_EVENT:ze+".processInstanceCreated",PROCESS_INSTANCE_FINISHED_EVENT:ze+".processInstanceFinished",PROCESS_INSTANCE_SHOWN_EVENT:ze+".processInstanceShown",PROCESS_INSTANCE_HIDDEN_EVENT:ze+".processInstanceHidden",ANIMATION_CREATED_EVENT:ze+".animationCreated"},zt={},Ra=Object.prototype.toString,eS=Object.prototype.hasOwnProperty;function mo(t){return t===void 0}function e0(t){return t!==void 0}function Vd(t){return t==null}function Wc(t){return Ra.call(t)==="[object Array]"}function Xc(t){return Ra.call(t)==="[object Object]"}function Fd(t){var e=Ra.call(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"||e==="[object Proxy]"}function n0(t){if(!Wc(t))throw new Error("must supply array")}function i0(t,e){return eS.call(t,e)}function r0(t,e){var n;return e=$d(e),De(t,function(i,r){if(e(i,r))return n=i,!1}),n}function De(t,e){var n;if(!mo(t)){var i=Wc(t)?rS:iS;for(var r in t)if(i0(t,r)&&e(n=t[r],i(r))===!1)return n}}function o0(t,e,n){return De(t,function(i,r){n=e(n,i,r)}),n}function a0(t,e){return!!o0(t,function(n,i,r){return n&&e(i,r)},!0)}function Kc(t,e){var n=[];return De(t,function(i,r){n.push(e(i,r))}),n}function s0(t){return t&&Object.keys(t)||[]}function c0(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=zd(e),De(t,function(i){var r=e(i)||"_",o=n[r];o||(o=n[r]=[]),o.push(i)}),n}function l0(t){t=zd(t);for(var e={},n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return De(i,function(o){return c0(o,t,e)}),Kc(e,function(o,a){return o[0]})}var nS=l0;function zd(t){return Fd(t)?t:function(e){return e[t]}}function $d(t){return Fd(t)?t:function(e){return e===t}}function iS(t){return t}function rS(t){return Number(t)}function Gd(t){return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(t)}function Ud(){return Ud=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ud.apply(this,arguments)}const oS=Object.freeze(Object.defineProperty({__proto__:null,assign:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Ud.apply(void 0,[t].concat(n))},bind:function(t,e){return t.bind(e)},debounce:function(t,e){var n,i,r,o;function a(p){var h=Date.now(),v=p?0:o+e-h;if(v>0)return c(v);t.apply(r,i),l()}function c(p){n=setTimeout(a,p)}function l(){n&&clearTimeout(n),n=o=i=r=void 0}function u(){o=Date.now();for(var p=arguments.length,h=new Array(p),v=0;v<p;v++)h[v]=arguments[v];i=h,r=this,n||c(e)}return u.flush=function(){n&&a(!0),l()},u.cancel=l,u},ensureArray:n0,every:a0,filter:function(t,e){var n=[];return De(t,function(i,r){e(i,r)&&n.push(i)}),n},find:r0,findIndex:function(t,e){e=$d(e);var n=Wc(t)?-1:void 0;return De(t,function(i,r){if(e(i,r))return n=r,!1}),n},flatten:function(t){return Array.prototype.concat.apply([],t)},forEach:De,get:function(t,e,n){var i=t;return De(e,function(r){if(Vd(i))return i=void 0,!1;i=i[r]}),mo(i)?n:i},groupBy:c0,has:i0,isArray:Wc,isDefined:e0,isFunction:Fd,isNil:Vd,isNumber:function(t){return Ra.call(t)==="[object Number]"},isObject:Xc,isString:function(t){return Ra.call(t)==="[object String]"},isUndefined:mo,keys:s0,map:Kc,matchPattern:function(t){return function(e){return a0(t,function(n,i){return e[i]===n})}},merge:function t(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.length&&De(i,function(o){o&&Xc(o)&&De(o,function(a,c){if(c!=="__proto__"){var l=e[c];Xc(a)?(Xc(l)||(l={}),e[c]=t(l,a)):e[c]=a}})}),e},omit:function(t,e){var n={};return De(Object(t),function(i,r){e.indexOf(r)===-1&&(n[r]=i)}),n},pick:function(t,e){var n={},i=Object(t);return De(e,function(r){r in i&&(n[r]=t[r])}),n},reduce:o0,set:function(t,e,n){var i=t;return De(e,function(r,o){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+Gd(r)+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");var a=e[o+1],c=i[r];e0(a)&&Vd(c)&&(c=i[r]=isNaN(+a)?{}:[]),mo(a)?mo(n)?delete i[r]:i[r]=n:i=c}),t},size:function(t){return s0(t).length},some:function(t,e){return!!r0(t,e)},sortBy:function(t,e){e=zd(e);var n=[];return De(t,function(i,r){for(var o=e(i,r),a={d:o,v:i},c=0;c<n.length;c++)if(o<n[c].d)return void n.splice(c,0,a);n.push(a)}),Kc(n,function(i){return i.v})},throttle:function(t,e){var n=!1;return function(){n||(t.apply(void 0,arguments),n=!0,setTimeout(function(){n=!1},e))}},unionBy:nS,uniqueBy:l0,values:function(t){return Kc(t,function(e){return e})},without:function(t,e){return mo(t)?[]:(n0(t),e=$d(e),t.filter(function(n,i){return!e(n,i)}))}},Symbol.toStringTag,{value:"Module"})),u0=lx(oS);var aS=u0.every,sS=u0.some;function p0(t,e){for(var n=e.parent;n;){if(n===t)return!0;n=n.parent}return!1}zt.is=function(t,e){if(t.type!=="label"){Array.isArray(e)||(e=[e]);var n=!1;return e.forEach(function(i){i===t.type&&(n=!0)}),n}},zt.isTypedEvent=function(t,e,n){return sS(t.eventDefinitions,function(i){return i.$type===e&&function(r,o){return aS(o,function(a,c){return r[c]==a})}(t,n)})},zt.getBusinessObject=function(t){return t&&t.businessObject||t},zt.isAncestor=p0,zt.getDescendants=function(t,e){return t.filter(function(n){return p0(e,n)})},zt.supportedElements=["bpmn:Association","bpmn:BoundaryEvent","bpmn:BusinessRuleTask","bpmn:CallActivity","bpmn:DataInputAssociation","bpmn:DataObjectReference","bpmn:DataOutputAssociation","bpmn:DataStoreReference","bpmn:EndEvent","bpmn:EventBasedGateway","bpmn:ExclusiveGateway","bpmn:IntermediateCatchEvent","bpmn:ManualTask","bpmn:ParallelGateway","bpmn:Process","bpmn:ScriptTask","bpmn:SequenceFlow","bpmn:ServiceTask","bpmn:StartEvent","bpmn:SubProcess","bpmn:Task","bpmn:TextAnnotation","bpmn:UserTask"];var cS={getMid:function(t){var e=t.bbox();return{x:e.x+e.width/2,y:e.y+e.height/2}},distance:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}},d0=tS,lS=Ma,uS=K.RESET_SIMULATION_EVENT,pS=K.PLAY_SIMULATION_EVENT,dS=K.PAUSE_SIMULATION_EVENT,hS=K.TERMINATE_EVENT,mS=K.PROCESS_INSTANCE_FINISHED_EVENT,fS=K.ANIMATION_CREATED_EVENT,h0=zt.isAncestor,vS=cS.distance,yS=getComputedStyle(document.documentElement).getPropertyValue("--token-simulation-green-base-44"),m0=20;function pr(t,e){var n=window.animation=this;this._eventBus=e,this.animations=[],this.hiddenAnimations=[],this.animationSpeed=1,e.on("import.done",function(){var i=d0(t._svg),r=lS(".viewport",t._svg),o=d0.adopt(r);n.group=i.group().attr("id","token-simulation"),o.put(n.group)}),e.on(hS,function(i){var r=i.element.parent;n.animations.forEach(function(o){h0(r,o.element)&&(o.animation.stop(),n.animations=n.animations.filter(function(a){return a!==o}))})}),e.on(mS,function(i){var r=i.parent;n.animations.forEach(function(o){(i.processInstanceId===o.processInstanceId||h0(r,o.element))&&(o.animation.stop(),n.animations=n.animations.filter(function(a){return a!==o}))})}),e.on(uS,function(){n.animations.forEach(function(i){i.animation.stop()}),n.animations=[],n.hiddenAnimations=[]}),e.on(dS,function(){n.animations.forEach(function(i){i.animation.pause()})}),e.on(pS,function(){n.animations.forEach(function(i){i.animation.play()})})}pr.prototype.createAnimation=function(t,e,n){var i=this;if(this.group){var r,o=this._createTokenGfx(e);return r=new Na(o,t.waypoints,function(){i.animations=i.animations.filter(function(a){return a.animation!==r}),n&&n()}),this.hiddenAnimations.includes(e)&&o.hide(),o.fx._speed=this.animationSpeed,this.animations.push({tokenGfx:o,animation:r,element:t,processInstanceId:e}),this._eventBus.fire(fS,{tokenGfx:o,animation:r,element:t,processInstanceId:e}),r}},pr.prototype.setAnimationSpeed=function(t){this.animations.forEach(function(e){e.tokenGfx.fx._speed=t}),this.animationSpeed=t},pr.prototype._createTokenGfx=function(t){var e=this.group.group().attr("class","token").hide();return e.circle(m0,m0).attr("fill",yS).attr("class","circle"),e.text(t.toString()).attr("transform","translate(10, -7)").attr("text-anchor","middle").attr("class","text"),e},pr.prototype.showProcessInstanceAnimations=function(t){this.animations.forEach(function(e){e.processInstanceId===t&&e.tokenGfx.show()}),this.hiddenAnimations=this.hiddenAnimations.filter(function(e){return e!==t})},pr.prototype.hideProcessInstanceAnimations=function(t){this.animations.forEach(function(e){e.processInstanceId===t&&e.tokenGfx.hide()}),this.hiddenAnimations.push(t)},pr.$inject=["canvas","eventBus"];var gS=pr;function Na(t,e,n){this.gfx=this.fx=t,this.waypoints=e,this.done=n,this.create()}Na.prototype.create=function(){var t=this.gfx,e=this.waypoints,n=this.done,i=this.fx;t.show().move(e[0].x-10,e[0].y-10),e.forEach(function(r,o){if(o>0){var a=r.x-10,c=r.y-10,l=function(p){return p===1}(o)?"<":"-";(function(p){return p.length==2})(e)&&(l="<>");var u=20*vS(e[o-1],r);i=i.animate(u,l,0).move(a,c)}}),i.after(function(){t.remove(),n()})},Na.prototype.play=function(){this.gfx.play()},Na.prototype.pause=function(){this.gfx.pause()},Na.prototype.stop=function(){this.fx.stop(),this.gfx.remove()};var Hd,bS=function(t,e){if(typeof t!="string")throw new TypeError("String expected");e||(e=document);var n=/<([\w:]+)/.exec(t);if(!n)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body")return(r=e.createElement("html")).innerHTML=t,r.removeChild(r.lastChild);var r,o=Object.prototype.hasOwnProperty.call(ee,i)?ee[i]:ee._default,a=o[0],c=o[1],l=o[2];for((r=e.createElement("div")).innerHTML=c+t+l;a--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);for(var u=e.createDocumentFragment();r.firstChild;)u.appendChild(r.removeChild(r.firstChild));return u},f0=!1;typeof document<"u"&&((Hd=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',f0=!Hd.getElementsByTagName("link").length,Hd=void 0);var ee={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:f0?[1,"X<div>","</div>"]:[0,"",""]};ee.td=ee.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],ee.option=ee.optgroup=[1,'<select multiple="multiple">',"</select>"],ee.thead=ee.tbody=ee.colgroup=ee.caption=ee.tfoot=[1,"<table>","</table>"],ee.polyline=ee.ellipse=ee.polygon=ee.circle=ee.text=ee.line=ee.path=ee.rect=ee.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Be=bS,qd={},v0=window.addEventListener?"addEventListener":"attachEvent",xS=window.removeEventListener?"removeEventListener":"detachEvent",y0=v0!=="addEventListener"?"on":"";qd.bind=function(t,e,n,i){return t[v0](y0+e,n,i||!1),n},qd.unbind=function(t,e,n,i){return t[xS](y0+e,n,i||!1),n};var En=qd,ES=Be,wS=En,g0=zt.is,_S=K.GENERATE_TOKEN_EVENT,SS=K.UPDATE_ELEMENT_EVENT;function Wd(t,e,n){this._eventBus=t,this._processInstances=e,this._processInstanceSettings=n}Wd.prototype.createContextPads=function(t){if(t.attachers.length&&this._processInstances.getProcessInstances(t).length){var e=t.incoming.filter(function(r){return g0(r,"bpmn:SequenceFlow")}),n=this,i=[];return t.attachers.forEach(function(r){var o=r.outgoing.filter(function(c){return g0(c,"bpmn:SequenceFlow")});if(e.length&&o.length){var a=ES('<div class="context-pad" title="Trigger Event"><i class="fa fa-play"></i></div>');i.push({element:r,html:a}),wS.bind(a,"click",function(){n._processInstances.getProcessInstances(t).forEach(function(c){var l=c.parentProcessInstanceId;r.businessObject.cancelActivity&&(t.children.forEach(function(u){u.tokenCount&&u.tokenCount[c.processInstanceId]&&u.tokenCount[c.processInstanceId]--}),n._processInstances.finish(c.processInstanceId),n._eventBus.fire(SS,{element:t})),n._eventBus.fire(_S,{element:r,processInstanceId:l})})})}}),i}},Wd.$inject=["eventBus","processInstances","processInstanceSettings"];var CS=Wd,TS=zt.is,AS=Be,kS=En;function Xd(t){this._exclusiveGatewaySettings=t}Xd.prototype.createContextPads=function(t){var e=this;if(!(t.outgoing.filter(function(i){return TS(i,"bpmn:SequenceFlow")}).length<2)){var n=AS('<div class="context-pad" title="Set Sequence Flow"><i class="fa fa-code-fork"></i></div>');return kS.bind(n,"click",function(){e._exclusiveGatewaySettings.setSequenceFlow(t)}),[{element:t,html:n}]}},Xd.$inject=["exclusiveGatewaySettings"];var PS=Xd,b0=Be,x0=En,Kd=zt.is,E0=K.GENERATE_TOKEN_EVENT;function Yd(t){this._eventBus=t}Yd.prototype.createContextPads=function(t){var e=t.parent.shownProcessInstance,n=t.incoming.filter(function(c){return Kd(c,"bpmn:SequenceFlow")}),i=[];n.forEach(function(c){var l=c.source;Kd(l,"bpmn:EventBasedGateway")&&l.tokenCount&&l.tokenCount[e]&&i.push(l)});var r=t.outgoing.filter(function(c){return Kd(c,"bpmn:SequenceFlow")});if(n.length&&r.length){var o,a=this;if(t.tokenCount&&t.tokenCount[e])o=b0('<div class="context-pad" title="Trigger Event"><i class="fa fa-play"></i></div>'),x0.bind(o,"click",function(){t.tokenCount[e]--,a._eventBus.fire(E0,{element:t,processInstanceId:e})});else{if(!i.length)return;o=b0('<div class="context-pad" title="Trigger Event"><i class="fa fa-play"></i></div>'),x0.bind(o,"click",function(){i.forEach(function(c){c.tokenCount[e]--}),a._eventBus.fire(E0,{element:t,processInstanceId:e})})}return[{element:t,html:o}]}},Yd.$inject=["eventBus"];var MS=Yd,RS=Be,NS=En;function Jd(t,e){this._processInstances=t,this._processInstanceSettings=e}Jd.prototype.createContextPads=function(t){var e=this;if(!(this._processInstances.getProcessInstances(t).filter(function(i){return!i.isFinished}).length<2)){var n=RS('<div class="context-pad" title="View Process Instances"><i class="fa fa-list-ol"></i></div>');return NS.bind(n,"click",function(){e._processInstanceSettings.showNext(t)}),[{element:t,html:n}]}},Jd.$inject=["processInstances","processInstanceSettings"];var IS=Jd,DS=Be,BS=En,OS=zt.is,jS=K.GENERATE_TOKEN_EVENT;function Zd(t,e,n){this._eventBus=t,this._elementRegistry=e,this._animation=n}Zd.prototype.createContextPads=function(t){var e=!1;if(this._elementRegistry.forEach(function(r){r.tokenCount&&Object.values(r.tokenCount).forEach(function(o){o&&(e=!0)})}),!(OS(t.parent,"bpmn:SubProcess")||e||this._animation.animations.length)){var n=this,i=DS('<div class="context-pad"><i class="fa fa-play"></i></div>');return BS.bind(i,"click",function(){n._eventBus.fire(jS,{element:t})}),[{element:t,html:i}]}},Zd.$inject=["eventBus","elementRegistry","animation"];var LS=Zd,w0=zt.isAncestor,VS=K.TOGGLE_MODE_EVENT,FS=K.RESET_SIMULATION_EVENT,zS=K.TERMINATE_EVENT,$S=K.UPDATE_ELEMENTS_EVENT,GS=K.UPDATE_ELEMENT_EVENT,US=K.PROCESS_INSTANCE_SHOWN_EVENT,HS=CS,qS=PS,WS=MS,XS=IS,KS=LS,Ia=500;function dr(t,e,n,i,r,o){var a=this;this._elementRegistry=e,this._overlays=n,this._injector=i,this._canvas=r,this._processInstances=o,this.overlayIds={},this.handlers={},this.registerHandler("bpmn:ExclusiveGateway",qS),this.registerHandler("bpmn:IntermediateCatchEvent",WS),this.registerHandler("bpmn:SubProcess",XS),this.registerHandler("bpmn:SubProcess",HS),this.registerHandler("bpmn:StartEvent",KS),t.on(VS,Ia,function(c){c.simulationModeActive?a.openContextPads():a.closeContextPads()}),t.on(FS,Ia,function(){a.closeContextPads(),a.openContextPads()}),t.on(zS,Ia,function(c){var l=c.element.parent;a.closeContextPads(l)}),t.on($S,Ia,function(c){c.elements.forEach(function(l){a.closeElementContextPads(l),a.openElementContextPads(l)})}),t.on(GS,Ia,function(c){var l=c.element;a.closeElementContextPads(l),a.openElementContextPads(l)}),t.on(US,function(c){var l=c.processInstanceId,u=o.getProcessInstance(l).parent;a.closeContextPads(u),a.openContextPads(u)})}dr.prototype.registerHandler=function(t,e){var n=this._injector.instantiate(e);this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(n)},dr.prototype.openContextPads=function(t){var e=this;t||(t=this._canvas.getRootElement()),this._elementRegistry.forEach(function(n){e.handlers[n.type]&&w0(t,n)&&e.openElementContextPads(n)})},dr.prototype.openElementContextPads=function(t){if(this.handlers[t.type]){var e=[];this.handlers[t.type].forEach(function(i){var r=i.createContextPads(t);r&&r.forEach(function(o){o&&e.push(o)})});var n=this;e.forEach(function(i){var r={top:-15,left:-15},o=n._overlays.add(i.element,"context-menu",{position:r,html:i.html,show:{minZoom:.5}});n.overlayIds[i.element.id]=o})}},dr.prototype.closeContextPads=function(t){var e=this;t||(t=this._canvas.getRootElement()),this._elementRegistry.forEach(function(n){w0(t,n)&&e.closeElementContextPads(n)})},dr.prototype.closeElementContextPads=function(t){var e=this;t.attachers&&t.attachers.length>0&&t.attachers.forEach(function(i){e.closeElementContextPads(i)}),t.children&&t.children.length>0&&t.children.forEach(function(i){e.closeElementContextPads(i)});var n=this.overlayIds[t.id];n&&(this._overlays.remove(n),delete this.overlayIds[t.id])},dr.$inject=["eventBus","elementRegistry","overlays","injector","canvas","processInstances"];var YS=dr,JS=K.TOGGLE_MODE_EVENT;function _0(t,e,n,i,r,o,a,c){var l=this;function u(v,f,y){var b=v[f];v[f]=function(){return y.call(this,b,arguments)}}function p(v,f){u(v,f,function(y,b){if(!l.modelingDisabled)return y.apply(this,b)})}function h(v,f){u(v,f,function(y,b){if(l.modelingDisabled)throw new Error("model is read-only");return y.apply(this,b)})}this._eventBus=t,this.modelingDisabled=!1,t.on(JS,10001,function(v){var f=v.simulationModeActive;l.modelingDisabled=f,l.modelingDisabled&&(i.cancel(),e.close(),n.cancel()),a._update()}),p(e,"open"),p(n,"init"),p(i,"activate"),p(n,"init"),p(i,"activate"),h(o,"moveShape"),h(o,"updateAttachment"),h(o,"moveElements"),h(o,"moveConnection"),h(o,"layoutConnection"),h(o,"createConnection"),h(o,"createShape"),h(o,"createLabel"),h(o,"appendShape"),h(o,"removeElements"),h(o,"distributeElements"),h(o,"removeShape"),h(o,"removeConnection"),h(o,"replaceShape"),h(o,"pasteElements"),h(o,"alignElements"),h(o,"resizeShape"),h(o,"createSpace"),h(o,"updateWaypoints"),h(o,"reconnectStart"),h(o,"reconnectEnd"),u(r,"trigger",function(v,f){var y=f[0];if(!l.modelingDisabled||!function(b,w){return b.indexOf(w)>-1}(["undo","redo","copy","paste","removeSelection","spaceTool","lassoTool","globalConnectTool","distributeElements","alignElements","directEditing"],y))return v.apply(this,f)})}_0.$inject=["eventBus","contextPad","dragging","directEditing","editorActions","modeling","palette","paletteProvider"];var ZS=_0,QS=Be,tC=K.TOGGLE_MODE_EVENT,eC=K.RESET_SIMULATION_EVENT,nC=K.GENERATE_TOKEN_EVENT;function fo(t,e){var n=this;this._overlays=t,e.on(tC,function(i){i.simulationModeActive||n.removeElementNotifications()}),e.on([eC,nC],function(){n.removeElementNotifications()})}fo.prototype.addElementNotifications=function(t,e){var n=this;t.forEach(function(i){n.addElementNotification(i,e)})},fo.prototype.addElementNotification=function(t,e){var n={top:-15,right:15},i='<div class="element-notification '+(e.type||"")+'">'+(e.icon?'<i class="fa '+e.icon+'"></i>':"")+('<span class="text">'+e.text+"</span>"||"")+"</div>",r=QS(i);this._overlays.add(t,"element-notification",{position:n,html:r,show:{minZoom:.5}})},fo.prototype.removeElementNotifications=function(t){var e=this;t?t.forEach(function(n){e.removeElementNotification(n)}):this._overlays.remove({type:"element-notification"})},fo.prototype.removeElementNotification=function(t){this._overlays.remove({element:t})},fo.$inject=["overlays","eventBus"];var S0,C0,iC=fo;function T0(){return C0?S0:(C0=1,S0=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1})}try{var Yc=T0()}catch{Yc=T0()}var rC=/\s+/,oC=Object.prototype.toString;function Li(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}Li.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~Yc(e,t)||e.push(t),this.el.className=e.join(" "),this},Li.prototype.remove=function(t){if(oC.call(t)=="[object RegExp]")return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=Yc(e,t);return~n&&e.splice(n,1),this.el.className=e.join(" "),this},Li.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},Li.prototype.toggle=function(t,e){return this.list?(e!==void 0?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(e!==void 0?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},Li.prototype.array=function(){var t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(rC);return t[0]===""&&t.shift(),t},Li.prototype.has=Li.prototype.contains=function(t){return this.list?this.list.contains(t):!!~Yc(this.array(),t)};var Vi=function(t){return new Li(t)},A0=Vi,k0=zt,Da=k0.is,P0=k0.supportedElements,aC=K.TOGGLE_MODE_EVENT,sC=K.GENERATE_TOKEN_EVENT,M0=["bpmn:Process","bpmn:Collaboration","bpmn:Participant","bpmn:Lane","bpmn:TextAnnotation"];function R0(t){return t.labelTarget}function Ba(t,e,n,i,r){var o=this;this._eventBus=t,this._elementRegistry=e,this._elementNotifications=r,this._notifications=i,this.canvasParent=n.getContainer().parentNode,t.on(sC,2e4,function(a){var c=a.element;if(Da(c,"bpmn:StartEvent"))return o.allElementsSupported()?void 0:(o.showWarnings(),A0(o.canvasParent).add("warning"),!0)}),t.on(aC,function(a){a.simulationModeActive||A0(o.canvasParent).remove("warning")})}Ba.prototype.allElementsSupported=function(){var t=!0;return this._elementRegistry.forEach(function(e){Da(e,M0)||Da(e,P0)||R0(e)||(t=!1)}),t},Ba.prototype.showWarnings=function(t){var e=this,n=[];this._elementRegistry.forEach(function(i){Da(i,M0)||Da(i,P0)||R0(i)||(e.showWarning(i),n.indexOf(i.type)&&(e._notifications.showNotification(i.type+" not supported","warning"),n.push(i.type)))})},Ba.prototype.showWarning=function(t){this._elementNotifications.addElementNotification(t,{type:"warning",icon:"fa-exclamation-triangle",text:"Not supported"})},Ba.$inject=["eventBus","elementRegistry","canvas","notifications","elementNotifications"];var cC=Ba,Qd=zt.is,lC=K.TOGGLE_MODE_EVENT,uC=getComputedStyle(document.documentElement).getPropertyValue("--token-simulation-grey-lighten-56"),pC=getComputedStyle(document.documentElement).getPropertyValue("--token-simulation-grey-darken-30");function Oa(t){return Qd(t,"bpmn:SequenceFlow")}function hr(t,e,n){var i=this;this._elementRegistry=e,this._graphicsFactory=n,t.on(lC,function(r){r.simulationModeActive?i.setSequenceFlowsDefault():i.resetSequenceFlows()})}hr.prototype.setSequenceFlowsDefault=function(){var t=this;this._elementRegistry.filter(function(e){return Qd(e,"bpmn:ExclusiveGateway")}).forEach(function(e){e.outgoing.filter(Oa).length&&t.setSequenceFlow(e,e.outgoing.filter(Oa)[0])})},hr.prototype.resetSequenceFlows=function(){var t=this;this._elementRegistry.filter(function(e){return Qd(e,"bpmn:ExclusiveGateway")}).forEach(function(e){e.outgoing.filter(Oa).length&&t.resetSequenceFlow(e)})},hr.prototype.resetSequenceFlow=function(t){t.sequenceFlow&&delete t.sequenceFlow},hr.prototype.setSequenceFlow=function(t){var e=this,n=t.outgoing.filter(Oa);if(n.length){var i=t.sequenceFlow;t.sequenceFlow=i?function(r){var o=r.outgoing.filter(Oa),a=o.indexOf(r.sequenceFlow);return o[a+1]?o[a+1]:o[0]}(t):n[0],t.outgoing.forEach(function(r){r===t.sequenceFlow?e.setColor(r,pC):e.setColor(r,uC)})}},hr.prototype.setColor=function(t,e){t.businessObject.di.set("stroke",e);var n=this._elementRegistry.getGraphics(t);this._graphicsFactory.update("connection",t,n)},hr.$inject=["eventBus","elementRegistry","graphicsFactory"];var dC=hr,Jc=Be,ni=Vi,ja=En,Zc=Ma,th=zt,hC=th.getBusinessObject,an=th.is,mC=th.isTypedEvent,fC=K.GENERATE_TOKEN_EVENT,vC=K.CONSUME_TOKEN_EVENT,yC=K.TOGGLE_MODE_EVENT,gC=K.RESET_SIMULATION_EVENT,bC=K.PROCESS_INSTANCE_CREATED_EVENT;function eh(t){return t&&t.businessObject.name}function vo(t,e,n,i){var r=this;this._notifications=e,this._tokenSimulationPalette=n,this._canvas=i,this._init(),t.on(fC,function(o){var a=o.element,c=eh(a);if(an(a,"bpmn:BusinessRuleTask"))r.log(c||"Business Rule Task","info","bpmn-icon-business-rule");else if(an(a,"bpmn:CallActivity"))r.log(c||"Call Activity","info","bpmn-icon-call-activity");else if(an(a,["bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent"]))r.log(c||"Intermediate Event","info","bpmn-icon-intermediate-event-none");else if(an(a,"bpmn:ManualTask"))r.log(c||"Manual Task","info","bpmn-icon-manual");else if(an(a,"bpmn:ScriptTask"))r.log(c||"Script Task","info","bpmn-icon-script");else if(an(a,"bpmn:ServiceTask"))r.log(c||"Service Task","info","bpmn-icon-service");else if(an(a,"bpmn:StartEvent"))r.log(c||"Start Event","info","bpmn-icon-start-event-none");else if(an(a,"bpmn:Task"))r.log(c||"Task","info","bpmn-icon-task");else if(an(a,"bpmn:UserTask"))r.log(c||"User Task","info","bpmn-icon-user");else if(an(a,"bpmn:ExclusiveGateway")){if(a.outgoing.length<2)return;var l=eh(a.sequenceFlow),u=c||"Gateway";l&&(u=u.concat(' <i class="fa fa-angle-right" aria-hidden="true"></i> '+l)),r.log(u,"info","bpmn-icon-gateway-xor")}}),t.on(vC,function(o){var a=o.element,c=eh(a);an(a,"bpmn:EndEvent")&&(mC(hC(a),"bpmn:TerminateEventDefinition")?r.log(c||"Terminate End Event","info","bpmn-icon-end-event-terminate"):r.log(c||"End Event","info","bpmn-icon-end-event-none"))}),t.on(bC,function(o){var a=o.processInstanceId,c=o.parent;an(c,"bpmn:Process")?r.log("Process "+a+" started","success","fa-check"):r.log("Subprocess "+a+" started","info","fa-check")}),t.on(yC,function(o){o.simulationModeActive||(r.emptyLog(),ni(r.container).add("hidden"))}),t.on(gC,function(o){r.emptyLog(),ni(r.container).add("hidden")})}vo.prototype._init=function(){var t=this;this.container=Jc('<div class="token-simulation-log hidden"><div class="header"><i class="fa fa-align-left"></i><button class="close"><i class="fa fa-times" aria-hidden="true"></i></button></div><div class="content"><p class="entry placeholder">No Entries</p></div></div>'),this.placeholder=Zc(".placeholder",this.container),this.content=Zc(".content",this.container),ja.bind(this.content,"wheel",function(e){e.stopPropagation()}),ja.bind(this.content,"mousedown",function(e){e.stopPropagation()}),this.close=Zc(".close",this.container),ja.bind(this.close,"click",function(){ni(t.container).add("hidden")}),this.icon=Zc(".fa-align-left",this.container),ja.bind(this.icon,"click",function(){ni(t.container).add("hidden")}),this._canvas.getContainer().appendChild(this.container),this.paletteEntry=Jc('<div class="entry" title="Show Simulation Log"><i class="fa fa-align-left"></i></div>'),ja.bind(this.paletteEntry,"click",function(){ni(t.container).remove("hidden")}),this._tokenSimulationPalette.addEntry(this.paletteEntry,3)},vo.prototype.toggle=function(){var t=this.container;ni(t).has("hidden")?ni(t).remove("hidden"):ni(t).add("hidden")},vo.prototype.log=function(t,e,n){ni(this.placeholder).add("hidden");var i,r=new Date,o=r.toLocaleTimeString()+":"+r.getUTCMilliseconds();this._notifications.showNotification(t,e,n),n||(n="fa-info"),i=n.includes("bpmn")?'<span class="icon '+n+'">':'<i class="icon fa '+n+'"></i>';var a=Jc('<p class="entry '+e+'"><span class="date">'+o+"</span>"+i+"</span>"+t+"</p>");this.content.appendChild(a),this.content.scrollTop=this.content.scrollHeight},vo.prototype.emptyLog=function(){for(;this.content.firstChild;)this.content.removeChild(this.content.firstChild);this.placeholder=Jc('<p class="entry placeholder">No Entries</p>'),this.content.appendChild(this.placeholder)},vo.$inject=["eventBus","notifications","tokenSimulationPalette","canvas"];var xC=vo,N0=Be,EC=K.TOGGLE_MODE_EVENT;function La(t,e){var n=this;this._eventBus=t,this._canvas=e,this._init(),t.on(EC,function(i){i.simulationModeActive||n.removeAll()})}La.prototype._init=function(){this.container=N0('<div class="notifications"></div>'),this._canvas.getContainer().appendChild(this.container)},La.prototype.showNotification=function(t,e,n){var i;n||(n="fa-info"),i=n.includes("bpmn")?'<i class="'+n+'"></i>':'<i class="fa '+n+'"></i>';var r=N0('<div class="notification '+e+'"><span class="icon">'+i+"</span>"+t+"</div>");for(this.container.appendChild(r);this.container.children.length>5;)this.container.children[0].remove();setTimeout(function(){r.remove()},2e3)},La.prototype.removeAll=function(){for(;this.container.children.length;)this.container.children[0].remove()},La.$inject=["eventBus","canvas"];var wC=La,_C=Be,mr=Vi,SC=En,CC=K.TOGGLE_MODE_EVENT,TC=K.PLAY_SIMULATION_EVENT,AC=K.PAUSE_SIMULATION_EVENT,kC=K.RESET_SIMULATION_EVENT,PC=K.ANIMATION_CREATED_EVENT,MC=K.PROCESS_INSTANCE_CREATED_EVENT,I0='<i class="fa fa-play"></i>';function Fi(t,e,n,i){var r=this;this._eventBus=t,this._tokenSimulationPalette=e,this._notifications=n,this.canvasParent=i.getContainer().parentNode,this.isActive=!1,this.isPaused=!1,this._init(),t.on(MC,function(o){o.parent.parent||(r.activate(),r.unpause(),n.showNotification("Start Simulation","info"))}),t.on([kC,CC],function(){r.deactivate(),r.unpause()}),t.on(PC,function(o){var a=o.animation;r.isPaused&&a.pause()})}Fi.prototype._init=function(){this.paletteEntry=_C('<div class="entry disabled" title="Play/Pause Simulation">'+I0+"</div>"),SC.bind(this.paletteEntry,"click",this.toggle.bind(this)),this._tokenSimulationPalette.addEntry(this.paletteEntry,1)},Fi.prototype.toggle=function(){this.isActive&&(this.isPaused?this.unpause():this.pause())},Fi.prototype.pause=function(){this.isActive&&(mr(this.paletteEntry).remove("active"),mr(this.canvasParent).add("paused"),this.paletteEntry.innerHTML=I0,this._eventBus.fire(AC),this._notifications.showNotification("Pause Simulation","info"),this.isPaused=!0)},Fi.prototype.unpause=function(){this.isActive&&(mr(this.paletteEntry).add("active"),mr(this.canvasParent).remove("paused"),this.paletteEntry.innerHTML='<i class="fa fa-pause"></i>',this._eventBus.fire(TC),this._notifications.showNotification("Play Simulation","info"),this.isPaused=!1)},Fi.prototype.activate=function(){this.isActive=!0,mr(this.paletteEntry).remove("disabled")},Fi.prototype.deactivate=function(){this.isActive=!1,mr(this.paletteEntry).remove("active"),mr(this.paletteEntry).add("disabled")},Fi.$inject=["eventBus","tokenSimulationPalette","notifications","canvas"];var RC=Fi,NC=K.TOGGLE_MODE_EVENT;function Va(t,e,n){var i=this;this._elementRegistry=e,this._graphicsFactory=n,this.elementColors={},t.on(NC,5e4,function(r){r.simulationModeActive?i.preserveColors():i.resetColors()})}Va.prototype.preserveColors=function(){var t=this;this._elementRegistry.forEach(function(e){t.elementColors[e.id]={stroke:e.businessObject.di.get("stroke"),fill:e.businessObject.di.get("fill")},t.setColor(e,"#000","#fff")})},Va.prototype.resetColors=function(){var t=this;this._elementRegistry.forEach(function(e){t.elementColors[e.id]&&t.setColor(e,t.elementColors[e.id].stroke,t.elementColors[e.id].fill)}),this.elementColors={}},Va.prototype.setColor=function(t,e,n){var i=t.businessObject;i.di.set("stroke",e),i.di.set("fill",n);var r=this._elementRegistry.getGraphics(t),o=t.waypoints?"connection":"shape";this._graphicsFactory.update(o,t,r)},Va.$inject=["eventBus","elementRegistry","graphicsFactory"];var IC=Va,DC=K.TOGGLE_MODE_EVENT,BC=K.RESET_SIMULATION_EVENT;function Qc(t){this.nextProcessInstanceId=1,t.on(DC,this.reset.bind(this)),t.on(BC,this.reset.bind(this))}Qc.prototype.getNext=function(){var t=this.nextProcessInstanceId;return this.nextProcessInstanceId++,t},Qc.prototype.reset=function(){this.nextProcessInstanceId=1},Qc.$inject=["eventBus"];var OC=Qc,jC=K.TOGGLE_MODE_EVENT,LC=K.PROCESS_INSTANCE_CREATED_EVENT,VC=K.PROCESS_INSTANCE_FINISHED_EVENT,FC=K.PROCESS_INSTANCE_SHOWN_EVENT,zC=K.PROCESS_INSTANCE_HIDDEN_EVENT;function Fa(t,e,n,i){var r=this;this._animation=t,this._eventBus=e,this._processInstances=n,this._elementRegistry=i,this._eventBus.on(LC,500,function(o){var a=o.parent,c=o.processInstanceId,l=n.getProcessInstances(a).filter(function(u){return!u.isFinished});l.length===1?r.showProcessInstance(c,a):l.length>1&&r.hideProcessInstance(c)}),this._eventBus.on(VC,500,function(o){var a=o.parent,c=o.processInstanceId,l=n.getProcessInstances(a).filter(function(u){return c!==u.processInstanceId&&!u.isFinished});l.length&&c===a.shownProcessInstance?r.showProcessInstance(l[0].processInstanceId,a):delete a.shownProcessInstance,a.parent||i.forEach(function(u){delete u.shownProcessInstance})}),e.on(jC,function(){i.forEach(function(o){delete o.shownProcessInstance})})}Fa.prototype.showProcessInstance=function(t,e){this._animation.showProcessInstanceAnimations(t),e.shownProcessInstance=t,this._eventBus.fire(FC,{processInstanceId:t})},Fa.prototype.hideProcessInstance=function(t){this._animation.hideProcessInstanceAnimations(t),this._eventBus.fire(zC,{processInstanceId:t})},Fa.prototype.showNext=function(t){var e=this,n=this._processInstances.getProcessInstances(t),i=t.shownProcessInstance,r=0;for(let o=0;o<n.length&&n[o].processInstanceId!==i;o++)r++;n.forEach(function(o){e.hideProcessInstance(o.processInstanceId)}),r===n.length-1?this.showProcessInstance(n[0].processInstanceId,t):this.showProcessInstance(n[r+1].processInstanceId,t)},Fa.$inject=["animation","eventBus","processInstances","elementRegistry"];var $C=Fa,GC=K.TOGGLE_MODE_EVENT,UC=K.RESET_SIMULATION_EVENT,HC=K.PROCESS_INSTANCE_CREATED_EVENT,qC=K.PROCESS_INSTANCE_FINISHED_EVENT;function fr(t,e){var n=this;this._eventBus=t,this._processInstanceIds=e,this.processInstances=[],t.on([GC,UC],function(){n.processInstances=[]})}fr.prototype.create=function(t,e){var n=this._processInstanceIds.getNext(),i={parent:t,processInstanceId:n,parentProcessInstanceId:e};return this.processInstances.push(i),this._eventBus.fire(HC,i),n},fr.prototype.remove=function(t){this.processInstances=this.processInstances.filter(function(e){return e.processInstanceId!==t})},fr.prototype.finish=function(t){var e=this.processInstances.find(function(n){return n.processInstanceId===t});this._eventBus.fire(qC,e),e.isFinished=!0},fr.prototype.getProcessInstances=function(t,e){if(!t)return this.processInstances;var n=this.processInstances.filter(function(i){return i.parent===t});return e&&e.includeFinished!==!0&&(n=n.filter(function(i){return!i.isFinished})),n},fr.prototype.getProcessInstance=function(t){return this.processInstances.find(function(e){return e.processInstanceId===t})},fr.$inject=["eventBus","processInstanceIds"];var WC=fr,XC=Be,D0=Vi,KC=En,YC=zt.is,JC=K.TOGGLE_MODE_EVENT,ZC=K.GENERATE_TOKEN_EVENT,QC=K.RESET_SIMULATION_EVENT;function tl(t,e,n,i){var r=this;this._eventBus=t,this._tokenSimulationPalette=e,this._notifications=n,this._elementRegistry=i,this._init(),t.on(ZC,function(o){YC(o.element,"bpmn:StartEvent")&&D0(r.paletteEntry).remove("disabled")}),t.on(JC,function(o){o.simulationModeActive||r.resetSimulation()})}tl.prototype._init=function(){var t=this;this.paletteEntry=XC('<div class="entry disabled" title="Reset Simulation"><i class="fa fa-refresh"></i></div>'),KC.bind(this.paletteEntry,"click",function(){t.resetSimulation(),t._notifications.showNotification("Reset Simulation","info")}),this._tokenSimulationPalette.addEntry(this.paletteEntry,2)},tl.prototype.resetSimulation=function(){D0(this.paletteEntry).add("disabled"),this._elementRegistry.forEach(function(t){t.tokenCount!==void 0&&delete t.tokenCount}),this._eventBus.fire(QC)},tl.$inject=["eventBus","tokenSimulationPalette","notifications","elementRegistry"];var tT=tl,eT=Be,el=Vi,nh=En,nl=Ma,nT=K.TOGGLE_MODE_EVENT;function il(t,e,n){var i=this;this._canvas=t,this._animation=e,this._eventBus=n,this._init(),n.on(nT,function(r){r.simulationModeActive?el(i.container).remove("hidden"):el(i.container).add("hidden")})}il.prototype._init=function(){var t=this;this.container=eT('<div class="set-animation-speed hidden"><i title="Set Animation Speed" class="fa fa-tachometer" aria-hidden="true"></i><div class="animation-speed-buttons"><div title="Slow" id="animation-speed-1" class="animation-speed-button"><i class="fa fa-angle-right" aria-hidden="true"></i></div><div title="Normal" id="animation-speed-2" class="animation-speed-button active"><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-angle-right" aria-hidden="true"></i></div><div title="Fast" id="animation-speed-3" class="animation-speed-button"><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-angle-right" aria-hidden="true"></i></div></div></div>');var e=nl("#animation-speed-1",this.container),n=nl("#animation-speed-2",this.container),i=nl("#animation-speed-3",this.container);nh.bind(e,"click",function(){t.setActive(e),t._animation.setAnimationSpeed(.5)}),nh.bind(n,"click",function(){t.setActive(n),t._animation.setAnimationSpeed(1)}),nh.bind(i,"click",function(){t.setActive(i),t._animation.setAnimationSpeed(1.5)}),this._canvas.getContainer().appendChild(this.container)},il.prototype.setActive=function(t){nl.all(".animation-speed-button",this.container).forEach(function(e){el(e).remove("active")}),el(t).add("active")},il.$inject=["canvas","animation","eventBus"];var iT=il,B0=Be,yo=Vi,ih=En,rh=Ma,rT=function(t){for(var e;t.childNodes.length;)e=t.childNodes[0],t.removeChild(e);return t},oT=K.TOGGLE_MODE_EVENT,aT=K.PROCESS_INSTANCE_CREATED_EVENT,sT=K.PROCESS_INSTANCE_FINISHED_EVENT,cT=K.PROCESS_INSTANCE_SHOWN_EVENT,lT=K.PROCESS_INSTANCE_HIDDEN_EVENT,uT=K.RESET_SIMULATION_EVENT,pT=getComputedStyle(document.documentElement).getPropertyValue("--token-simulation-silver-base-97"),dT=getComputedStyle(document.documentElement).getPropertyValue("--token-simulation-green-base-44");function O0(t){return t===null}function wn(t,e,n,i,r,o){var a=this;this._eventBus=t,this._canvas=e,this._processInstanceSettings=n,this._processInstances=i,this._graphicsFactory=r,this._elementRegistry=o,this.highlightedElement=null,this._init(),t.on(oT,function(c){c.simulationModeActive?yo(a.container).remove("hidden"):(yo(a.container).add("hidden"),rT(a.container),O0(a.highlightedElement)||(a.removeHighlightFromProcess(a.highlightedElement.element),a.highlightedElement=null))}),t.on(aT,function(c){a.addInstance(c)}),t.on(sT,function(c){a.removeInstance(c)}),t.on(cT,function(c){a.setInstanceShown(c.processInstanceId)}),t.on(lT,function(c){a.setInstanceHidden(c.processInstanceId)}),t.on(uT,function(){a.removeAllInstances()})}wn.prototype._init=function(){this.container=B0('<div class="process-instances hidden"></div>'),this._canvas.getContainer().appendChild(this.container)},wn.prototype.addInstance=function(t){var e=this,n=t.processInstanceId,i=t.parent,r=B0('<div id="instance-'+n+'" class="process-instance" title="View Process Instance '+n+'">'+n+"</div>");ih.bind(r,"click",function(){e._processInstances.getProcessInstances(i).forEach(function(o){e._processInstanceSettings.hideProcessInstance(o.processInstanceId)}),e._processInstanceSettings.showProcessInstance(n,i)}),ih.bind(r,"mouseenter",function(){e.highlightedElement={element:i,stroke:i.businessObject.di.get("stroke"),fill:i.businessObject.di.get("fill")},e.addHighlightToProcess(i)}),ih.bind(r,"mouseleave",function(){e.removeHighlightFromProcess(i),e.highlightedElement=null}),this.container.appendChild(r)},wn.prototype.removeInstance=function(t){var e=t.processInstanceId,n=rh("#instance-"+e,this.container);n&&n.remove()},wn.prototype.removeAllInstances=function(){this.container.innerHTML=""},wn.prototype.setInstanceShown=function(t){var e=rh("#instance-"+t,this.container);e&&yo(e).add("active")},wn.prototype.setInstanceHidden=function(t){var e=rh("#instance-"+t,this.container);e&&yo(e).remove("active")},wn.prototype.addHighlightToProcess=function(t){this.setColor(t,dT,pT),t.parent||yo(this._canvas.getContainer()).add("highlight")},wn.prototype.removeHighlightFromProcess=function(t){O0(this.highlightedElement)||(this.setColor(t,this.highlightedElement.stroke,this.highlightedElement.fill),t.parent||yo(this._canvas.getContainer()).remove("highlight"))},wn.prototype.setColor=function(t,e,n){var i=t.businessObject;i.di.set("stroke",e),i.di.set("fill",n);var r=this._elementRegistry.getGraphics(t);this._graphicsFactory.update("connection",t,r)},wn.$inject=["eventBus","canvas","processInstanceSettings","processInstances","graphicsFactory","elementRegistry"];var hT=wn,rl=zt,mT=rl.getBusinessObject,ol=rl.is,fT=rl.isAncestor,vT=rl.isTypedEvent,yT=K.CONSUME_TOKEN_EVENT;function al(t,e,n,i,r,o,a){this._animation=e,this._elementRegistry=n,this._log=i,this._elementNotifications=r,this._canvas=o,this._processInstances=a,t.on(yT,250,function(){})}al.prototype.isDeadlock=function(){var t=this,e=[];this._elementRegistry.forEach(function(r){r.tokenCount&&e.push(r)});var n=[],i=[];e.forEach(function(r){r.outgoing.filter(function(a){return ol(a,"bpmn:SequenceFlow")}).length||n.push(r),ol(r,"bpmn:ParallelGateway")&&r.incoming.filter(function(a){return ol(a,"bpmn:SequenceFlow")}).length>r.tokenCount&&n.push(r);var o=[];(function a(c){c.outgoing.forEach(function(l){o.indexOf(l.target)===-1&&(o.push(l.target),vT(mT(l.target),"bpmn:TerminateEventDefinition")&&i.push(c),a(l.target))})})(r)}),e.length&&!i.length&&n.length&&!this._animation.animations.length&&(t._log.log("Deadlock","warning","fa-exclamation-triangle"),n.forEach(function(r){t._elementNotifications.addElementNotification(r,{type:"warning",icon:"fa-exclamation-triangle",text:"Deadlock"})}))},al.prototype.isFinished=function(t,e){var n=this._processInstances.getProcessInstance(e).parent,i=!1;n||(n=this._canvas.getRootElement()),n.children.forEach(function(o){o.tokenCount&&o.tokenCount[e]&&o.tokenCount[e].length&&(i=!0)});var r=!1;if(this._animation.animations.forEach(function(o){fT(n,o.element)&&o.processInstanceId===e&&(r=!0)}),!i&&!r)return ol(n,"bpmn:SubProcess")?this._log.log("Subprocess "+e+" finished","info","fa-check-circle"):(this._log.log("Process "+e+" finished","success","fa-check-circle"),this._elementNotifications.addElementNotification(t,{type:"success",icon:"fa-check-circle",text:"Finished"})),!0},al.$inject=["eventBus","animation","elementRegistry","log","elementNotifications","canvas","processInstances"];var gT=al,bT=Be,sl=Vi,xT=En,ET=Ma,j0=K.TOGGLE_MODE_EVENT;function cl(t,e,n,i){var r=this;this._eventBus=t,this._canvas=e,this._selection=n,this._contextPad=i,this.simulationModeActive=!1,t.on("import.done",function(){r.canvasParent=r._canvas.getContainer().parentNode,r.palette=ET(".djs-palette",r._canvas.getContainer()),r._init()})}cl.prototype._init=function(){this.container=bT(`
    <div class="toggle-mode">
      Token Simulation <span class="toggle"><i class="fa fa-toggle-off"></i></span>
    </div>
  `),xT.bind(this.container,"click",this.toggleMode.bind(this)),this._canvas.getContainer().appendChild(this.container)},cl.prototype.toggleMode=function(){if(this.simulationModeActive){this.container.innerHTML='Token Simulation <span class="toggle"><i class="fa fa-toggle-off"></i></span>',sl(this.canvasParent).remove("simulation"),sl(this.palette).remove("hidden"),this._eventBus.fire(j0,{simulationModeActive:!1});var t=this._selection.get();t.length===1&&this._contextPad.open(t[0])}else this.container.innerHTML='Token Simulation <span class="toggle"><i class="fa fa-toggle-on"></i></span>',sl(this.canvasParent).add("simulation"),sl(this.palette).add("hidden"),this._eventBus.fire(j0,{simulationModeActive:!0});this.simulationModeActive=!this.simulationModeActive},cl.$inject=["eventBus","canvas","selection","contextPad"];var wT=cl,_T=Be,L0=zt.isAncestor,ST=K.TOGGLE_MODE_EVENT,CT=K.GENERATE_TOKEN_EVENT,TT=K.CONSUME_TOKEN_EVENT,AT=K.RESET_SIMULATION_EVENT,kT=K.TERMINATE_EVENT,PT=K.PROCESS_INSTANCE_SHOWN_EVENT;function vr(t,e,n,i,r){var o=this;this._overlays=e,this._elementRegistry=n,this._canvas=i,this._processInstances=r,this.overlayIds={},t.on(ST,function(a){a.simulationModeActive||o.removeTokenCounts()}),t.on(AT,function(){o.removeTokenCounts()}),t.on(kT,function(a){var c=a.element.parent;o.removeTokenCounts(c)}),t.on([CT,TT],500,function(a){var c=a.element.parent;o.removeTokenCounts(c),o.addTokenCounts(c)}),t.on(PT,function(a){var c=a.processInstanceId,l=r.getProcessInstance(c).parent;o.removeTokenCounts(l),o.addTokenCounts(l)})}vr.prototype.addTokenCounts=function(t){var e=this;t||(t=this._canvas.getRootElement());var n=t.shownProcessInstance;if(!n){var i=this._processInstances.getProcessInstances(t);if(!i.length)return;n=i[0].processInstanceId}this._elementRegistry.forEach(function(r){L0(t,r)&&e.addTokenCount(r,n)})},vr.prototype.addTokenCount=function(t,e){var n=t.tokenCount&&t.tokenCount[e];if(n){var i=this.createTokenCount(n),r={bottom:10,left:-15},o=this._overlays.add(t,"token-count",{position:r,html:i,show:{minZoom:.5}});this.overlayIds[t.id]=o}},vr.prototype.createTokenCount=function(t){return _T('<div class="token-count waiting">'+t+"</div>")},vr.prototype.removeTokenCounts=function(t){var e=this;t||(t=this._canvas.getRootElement()),this._elementRegistry.forEach(function(n){L0(t,n)&&e.removeTokenCount(n)})},vr.prototype.removeTokenCount=function(t){var e=this.overlayIds[t.id];e&&(this._overlays.remove(e),delete this.overlayIds[t.id])},vr.$inject=["eventBus","overlays","elementRegistry","canvas","processInstances"];var MT=vr,za=zt,RT=za.getBusinessObject,NT=za.is,IT=za.isAncestor,DT=za.getDescendants,BT=za.isTypedEvent,OT=K.GENERATE_TOKEN_EVENT,jT=K.TERMINATE_EVENT,LT=K.UPDATE_ELEMENTS_EVENT;function ll(t,e,n,i,r,o){this._animation=t,this._eventBus=e,this._log=n,this._simulationState=i,this._elementRegistry=r,this._processInstances=o}ll.prototype.consume=function(t){var e=t.element,n=t.processInstanceId,i=BT(RT(e),"bpmn:TerminateEventDefinition"),r=NT(e.parent,"bpmn:SubProcess");i&&(this._eventBus.fire(jT,t),this._elementRegistry.forEach(function(c){IT(e.parent,c)&&c.tokenCount&&c.tokenCount[n]&&delete c.tokenCount[n]}),this._processInstances.finish(n));var o=this._simulationState.isFinished(e,n);if(o&&this._processInstances.finish(n),(o||i)&&r){var a=this._processInstances.getProcessInstance(n);this._eventBus.fire(OT,{element:e.parent,processInstanceId:a.parentProcessInstanceId})}this._eventBus.fire(LT,{elements:DT(this._elementRegistry.getAll(),e.parent)})},ll.prototype.generate=function(t){},ll.$inject=["animation","eventBus","log","simulationState","elementRegistry","processInstances"];var VT=ll,FT=zt.is,zT=K.UPDATE_ELEMENTS_EVENT;function ul(t,e){this._eventBus=t,this._animation=e}ul.prototype.consume=function(t){var e=t.element,n=t.processInstanceId;e.tokenCount||(e.tokenCount={}),e.tokenCount[n]||(e.tokenCount[n]=0),e.tokenCount[n]++;var i=e.outgoing,r=[];i.forEach(function(o){var a=o.target;FT(a,"bpmn:IntermediateCatchEvent")&&r.push(a)}),this._eventBus.fire(zT,{elements:r})},ul.prototype.generate=function(){},ul.$inject=["eventBus","animation"];var $T=ul,GT=K.CONSUME_TOKEN_EVENT,UT=K.GENERATE_TOKEN_EVENT;function pl(t,e,n){this._eventBus=t,this._animation=e,this._elementRegistry=n}pl.prototype.consume=function(t){var e=t.element;if(!e.sequenceFlow)throw new Error("no sequence flow configured for element "+e.id);this._eventBus.fire(UT,t)},pl.prototype.generate=function(t){var e=t.element,n=t.processInstanceId;if(!e.sequenceFlow)throw new Error("no sequence flow configured for element "+e.id);var i=this,r=this._elementRegistry.get(e.sequenceFlow.id);this._animation.createAnimation(r,n,function(){i._eventBus.fire(GT,{element:r.target,processInstanceId:n})})},pl.$inject=["eventBus","animation","elementRegistry"];var HT=pl,V0=zt.is,qT=K.CONSUME_TOKEN_EVENT,WT=K.UPDATE_ELEMENT_EVENT,XT=K.UPDATE_ELEMENTS_EVENT;function dl(t,e,n){this._animation=t,this._eventBus=e,this._elementRegistry=n}dl.prototype.consume=function(t){var e=t.element,n=t.processInstanceId;e.tokenCount||(e.tokenCount={}),e.tokenCount[n]||(e.tokenCount[n]=0),e.tokenCount[n]++,this._eventBus.fire(WT,{element:e})},dl.prototype.generate=function(t){var e=this,n=t.element,i=t.processInstanceId;n.outgoing.filter(function(a){return V0(a,"bpmn:SequenceFlow")}).forEach(function(a){e._animation.createAnimation(a,i,function(){e._eventBus.fire(qT,{element:a.target,processInstanceId:i})})});var r=n.parent,o=this._elementRegistry.filter(function(a){return V0(a,"bpmn:IntermediateCatchEvent")&&a.parent===r});this._eventBus.fire(XT,{elements:o})},dl.$inject=["animation","eventBus","elementRegistry"];var KT=dl,YT=zt.is,JT=K.CONSUME_TOKEN_EVENT,ZT=K.GENERATE_TOKEN_EVENT;function hl(t,e){this._animation=t,this._eventBus=e}hl.prototype.consume=function(t){this._eventBus.fire(ZT,{element:t})},hl.prototype.generate=function(t){var e=this;t.outgoing.filter(function(n){return YT(n,"bpmn:SequenceFlow")}).forEach(function(n){e._animation.createAnimation(n,function(){e._eventBus.fire(JT,{element:n.target})})})},hl.$inject=["animation","eventBus"];var QT=hl,tA=zt.is,eA=K.CONSUME_TOKEN_EVENT,nA=K.GENERATE_TOKEN_EVENT;function ml(t,e){this._animation=t,this._eventBus=e}ml.prototype.consume=function(t){var e=t.element,n=t.processInstanceId;e.tokenCount||(e.tokenCount={}),e.tokenCount[n]||(e.tokenCount[n]=0),e.tokenCount[n]++,e.incoming.length===e.tokenCount[n]&&(this._eventBus.fire(nA,t),e.tokenCount[n]=0)},ml.prototype.generate=function(t){var e=this,n=t.element,i=t.processInstanceId;n.outgoing.filter(function(r){return tA(r,"bpmn:SequenceFlow")}).forEach(function(r){e._animation.createAnimation(r,i,function(){e._eventBus.fire(eA,{element:r.target,processInstanceId:i})})})},ml.$inject=["animation","eventBus"];var iA=ml,oh=zt.is,rA=K.CONSUME_TOKEN_EVENT,oA=K.UPDATE_ELEMENTS_EVENT;function fl(t,e,n,i){this._animation=t,this._eventBus=e,this._elementRegistry=n,this._processInstances=i}fl.prototype.consume=function(){},fl.prototype.generate=function(t){var e=this,n=t.element,i=t.parentProcessInstanceId,r=n.outgoing.filter(function(l){return oh(l,"bpmn:SequenceFlow")}),o=n.parent,a=this._processInstances.create(o,i);if(r.forEach(function(l){e._animation.createAnimation(l,a,function(){e._eventBus.fire(rA,{element:l.target,processInstanceId:a})})}),!oh(n.parent,"bpmn:SubProcess")){var c=this._elementRegistry.filter(function(l){return oh(l,"bpmn:StartEvent")});this._eventBus.fire(oA,{elements:c})}},fl.$inject=["animation","eventBus","elementRegistry","processInstances"];var aA=fl,F0=zt.is,sA=K.CONSUME_TOKEN_EVENT,z0=K.GENERATE_TOKEN_EVENT,$0=K.UPDATE_ELEMENT_EVENT;function vl(t,e,n){this._animation=t,this._eventBus=e,this._log=n}vl.prototype.consume=function(t){var e=t.element,n=t.processInstanceId,i=e.children.filter(function(r){return F0(r,"bpmn:StartEvent")})[0];i?(this._log.log("Starting Subprocess","info","fa-sign-in"),this._eventBus.fire(z0,{element:i,parentProcessInstanceId:n})):(this._log.log("Skipping Subprocess","info","fa-angle-double-right"),this._eventBus.fire(z0,t)),this._eventBus.fire($0,{element:e})},vl.prototype.generate=function(t){var e=this,n=t.element,i=t.processInstanceId;n.outgoing.filter(function(r){return F0(r,"bpmn:SequenceFlow")}).forEach(function(r){e._animation.createAnimation(r,i,function(){e._eventBus.fire(sA,{element:r.target,processInstanceId:i})})}),this._eventBus.fire($0,{element:n})},vl.$inject=["animation","eventBus","log"];var cA=vl,lA=zt.is,uA=K.CONSUME_TOKEN_EVENT,pA=K.UPDATE_ELEMENT_EVENT;function yl(t,e,n){this._animation=t,this._eventBus=e,this._elementRegistry=n}yl.prototype.consume=function(t){var e=t.element,n=t.processInstanceId;e.tokenCount||(e.tokenCount={}),e.tokenCount[n]||(e.tokenCount[n]=0),e.tokenCount[n]++,this._eventBus.fire(pA,{element:e})},yl.prototype.generate=function(t){var e=this,n=t.element,i=t.processInstanceId;n.outgoing.filter(function(r){return lA(r,"bpmn:SequenceFlow")}).forEach(function(r){e._animation.createAnimation(r,i,function(){e._eventBus.fire(uA,{element:r.target,processInstanceId:i})})})},yl.$inject=["animation","eventBus","elementRegistry"];var dA=yl,hA=zt.is,mA=K.CONSUME_TOKEN_EVENT,fA=K.GENERATE_TOKEN_EVENT;function gl(t,e){this._animation=t,this._eventBus=e}gl.prototype.consume=function(t){this._eventBus.fire(fA,t)},gl.prototype.generate=function(t){var e=this,n=t.element,i=t.processInstanceId;n.outgoing.filter(function(r){return hA(r,"bpmn:SequenceFlow")}).forEach(function(r){e._animation.createAnimation(r,i,function(){e._eventBus.fire(mA,{element:r.target,processInstanceId:i})})})},gl.$inject=["animation","eventBus"];var vA=VT,yA=$T,gA=HT,bA=KT,xA=QT,EA=iA,wA=aA,_A=cA,SA=dA,CA=gl,TA=K.GENERATE_TOKEN_EVENT,AA=K.CONSUME_TOKEN_EVENT;function ah(t,e,n){var i=this;this._injector=n,this.handlers={},this.registerHandler("bpmn:EndEvent",vA),this.registerHandler("bpmn:EventBasedGateway",yA),this.registerHandler("bpmn:ExclusiveGateway",gA),this.registerHandler("bpmn:IntermediateCatchEvent",bA),this.registerHandler("bpmn:IntermediateThrowEvent",xA),this.registerHandler("bpmn:ParallelGateway",EA),this.registerHandler("bpmn:StartEvent",wA),this.registerHandler("bpmn:SubProcess",_A),this.registerHandler("bpmn:BoundaryEvent",SA),this.registerHandler(["bpmn:BusinessRuleTask","bpmn:CallActivity","bpmn:ManualTask","bpmn:ScriptTask","bpmn:ServiceTask","bpmn:Task","bpmn:UserTask"],CA),t.on(TA,function(r){var o=r.element;if(!i.handlers[o.type])throw new Error("no handler for type "+o.type);i.handlers[o.type].generate(r)}),t.on(AA,function(r){var o=r.element;if(!i.handlers[o.type])throw new Error("no handler for type "+o.type);i.handlers[o.type].consume(r)})}ah.prototype.registerHandler=function(t,e){var n=this,i=this._injector.instantiate(e);Array.isArray(t)||(t=[t]),t.forEach(function(r){n.handlers[r]=i})},ah.$inject=["eventBus","animation","injector"];var kA=ah;function G0(t,e,n,i,r,o){o.register({toggleTokenSimulation:function(){e.toggleMode()}}),o.register({togglePauseTokenSimulation:function(){n.toggle()}}),o.register({resetTokenSimulation:function(){r.resetSimulation()}}),o.register({toggleTokenSimulationLog:function(){i.toggle()}})}G0.$inject=["eventBus","toggleMode","pauseSimulation","log","resetSimulation","editorActions"];var PA=G0,MA=K.TOGGLE_MODE_EVENT;function U0(t,e){var n=e.get("editorActions",!1),i=e.get("keyboard",!1);if(i&&n){var r=!1;t.on("keyboard.init",function(){i.addListener(1e4,function(o){(function(a){bl(["t","T"],a)?n.trigger("toggleTokenSimulation"):r&&(bl(["l","L"],a)?n.trigger("toggleTokenSimulationLog"):bl([" ","Spacebar"],a)?n.trigger("togglePauseTokenSimulation"):bl(["r","R"],a)&&n.trigger("resetTokenSimulation"))})(o.keyEvent)})}),t.on(MA,function(o){var a=o.simulationModeActive;r=!!a})}}function bl(t,e){return t.indexOf(e.key)>-1}U0.$inject=["eventBus","injector"];var RA=U0,NA=Be,H0=Vi,IA=K.TOGGLE_MODE_EVENT;function xl(t,e){var n=this;this._canvas=e,this.entries=[],this._init(),t.on(IA,function(i){i.simulationModeActive?H0(n.container).remove("hidden"):H0(n.container).add("hidden")})}xl.prototype._init=function(){this.container=NA('<div class="token-simulation-palette hidden"></div>'),this._canvas.getContainer().appendChild(this.container)},xl.prototype.addEntry=function(t,e){var n=0;this.entries.forEach(function(i){e>=i.index&&n++}),this.container.insertBefore(t,this.container.childNodes[n]),this.entries.push({entry:t,index:e})},xl.$inject=["eventBus","canvas"];const DA=_r({__init__:["animation","contextPads","disableModeling","elementNotifications","elementSupport","exclusiveGatewaySettings","log","notifications","pauseSimulation","preserveElementColors","processInstanceIds","processInstanceSettings","processInstances","resetSimulation","setAnimationSpeed","showProcessInstance","simulationState","toggleMode","tokenCount","tokenSimulationBehavior","tokenSimulationEditorActions","tokenSimulationKeyboardBindings","tokenSimulationPalette"],animation:["type",gS],contextPads:["type",YS],disableModeling:["type",ZS],elementNotifications:["type",iC],elementSupport:["type",cC],exclusiveGatewaySettings:["type",dC],log:["type",xC],notifications:["type",wC],pauseSimulation:["type",RC],preserveElementColors:["type",IC],processInstanceIds:["type",OC],processInstanceSettings:["type",$C],processInstances:["type",WC],resetSimulation:["type",tT],setAnimationSpeed:["type",iT],showProcessInstance:["type",hT],simulationState:["type",gT],toggleMode:["type",wT],tokenCount:["type",MT],tokenSimulationBehavior:["type",kA],tokenSimulationEditorActions:["type",PA],tokenSimulationKeyboardBindings:["type",RA],tokenSimulationPalette:["type",xl]}),BA={name:"Camunda",uri:"http://camunda.org/schema/1.0/bpmn",prefix:"camunda",xml:{tagAlias:"lowerCase"},associations:[],types:[{name:"Definitions",isAbstract:!0,extends:["bpmn:Definitions"],properties:[{name:"diagramRelationId",isAttr:!0,type:"String"}]},{name:"InOutBinding",superClass:["Element"],isAbstract:!0,properties:[{name:"source",isAttr:!0,type:"String"},{name:"sourceExpression",isAttr:!0,type:"String"},{name:"target",isAttr:!0,type:"String"},{name:"businessKey",isAttr:!0,type:"String"},{name:"local",isAttr:!0,type:"Boolean",default:!1},{name:"variables",isAttr:!0,type:"String"}]},{name:"In",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity","bpmn:SignalEventDefinition"]}},{name:"Out",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"AsyncCapable",isAbstract:!0,extends:["bpmn:Activity","bpmn:Gateway","bpmn:Event"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1},{name:"asyncBefore",isAttr:!0,type:"Boolean",default:!1},{name:"asyncAfter",isAttr:!0,type:"Boolean",default:!1},{name:"exclusive",isAttr:!0,type:"Boolean",default:!0}]},{name:"JobPriorized",isAbstract:!0,extends:["bpmn:Process","camunda:AsyncCapable"],properties:[{name:"jobPriority",isAttr:!0,type:"String"}]},{name:"SignalEventDefinition",isAbstract:!0,extends:["bpmn:SignalEventDefinition"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1}]},{name:"ErrorEventDefinition",isAbstract:!0,extends:["bpmn:ErrorEventDefinition"],properties:[{name:"errorCodeVariable",isAttr:!0,type:"String"},{name:"errorMessageVariable",isAttr:!0,type:"String"}]},{name:"Error",isAbstract:!0,extends:["bpmn:Error"],properties:[{name:"camunda:errorMessage",isAttr:!0,type:"String"}]},{name:"PotentialStarter",superClass:["Element"],properties:[{name:"resourceAssignmentExpression",type:"bpmn:ResourceAssignmentExpression"}]},{name:"FormSupported",isAbstract:!0,extends:["bpmn:StartEvent","bpmn:UserTask"],properties:[{name:"formHandlerClass",isAttr:!0,type:"String"},{name:"formKey",isAttr:!0,type:"String"}]},{name:"TemplateSupported",isAbstract:!0,extends:["bpmn:Process","bpmn:FlowElement"],properties:[{name:"modelerTemplate",isAttr:!0,type:"String"},{name:"modelerTemplateVersion",isAttr:!0,type:"Integer"}]},{name:"Initiator",isAbstract:!0,extends:["bpmn:StartEvent"],properties:[{name:"initiator",isAttr:!0,type:"String"}]},{name:"ScriptTask",isAbstract:!0,extends:["bpmn:ScriptTask"],properties:[{name:"resultVariable",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"}]},{name:"Process",isAbstract:!0,extends:["bpmn:Process"],properties:[{name:"candidateStarterGroups",isAttr:!0,type:"String"},{name:"candidateStarterUsers",isAttr:!0,type:"String"},{name:"versionTag",isAttr:!0,type:"String"},{name:"historyTimeToLive",isAttr:!0,type:"String"},{name:"isStartableInTasklist",isAttr:!0,type:"Boolean",default:!0}]},{name:"EscalationEventDefinition",isAbstract:!0,extends:["bpmn:EscalationEventDefinition"],properties:[{name:"escalationCodeVariable",isAttr:!0,type:"String"}]},{name:"FormalExpression",isAbstract:!0,extends:["bpmn:FormalExpression"],properties:[{name:"resource",isAttr:!0,type:"String"}]},{name:"Assignable",extends:["bpmn:UserTask"],properties:[{name:"assignee",isAttr:!0,type:"String"},{name:"candidateUsers",isAttr:!0,type:"String"},{name:"candidateGroups",isAttr:!0,type:"String"},{name:"dueDate",isAttr:!0,type:"String"},{name:"followUpDate",isAttr:!0,type:"String"},{name:"priority",isAttr:!0,type:"String"},{name:"candidateStrategy",isAttr:!0,type:"String"},{name:"candidateParam",isAttr:!0,type:"String"}]},{name:"CallActivity",extends:["bpmn:CallActivity"],properties:[{name:"calledElementBinding",isAttr:!0,type:"String",default:"latest"},{name:"calledElementVersion",isAttr:!0,type:"String"},{name:"calledElementVersionTag",isAttr:!0,type:"String"},{name:"calledElementTenantId",isAttr:!0,type:"String"},{name:"caseRef",isAttr:!0,type:"String"},{name:"caseBinding",isAttr:!0,type:"String",default:"latest"},{name:"caseVersion",isAttr:!0,type:"String"},{name:"caseTenantId",isAttr:!0,type:"String"},{name:"variableMappingClass",isAttr:!0,type:"String"},{name:"variableMappingDelegateExpression",isAttr:!0,type:"String"}]},{name:"ServiceTaskLike",extends:["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"resultVariable",isAttr:!0,type:"String"}]},{name:"DmnCapable",extends:["bpmn:BusinessRuleTask"],properties:[{name:"decisionRef",isAttr:!0,type:"String"},{name:"decisionRefBinding",isAttr:!0,type:"String",default:"latest"},{name:"decisionRefVersion",isAttr:!0,type:"String"},{name:"mapDecisionResult",isAttr:!0,type:"String",default:"resultList"},{name:"decisionRefTenantId",isAttr:!0,type:"String"}]},{name:"ExternalCapable",extends:["camunda:ServiceTaskLike"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"topic",isAttr:!0,type:"String"}]},{name:"TaskPriorized",extends:["bpmn:Process","camunda:ExternalCapable"],properties:[{name:"taskPriority",isAttr:!0,type:"String"}]},{name:"Properties",superClass:["Element"],meta:{allowedIn:["*"]},properties:[{name:"values",type:"Property",isMany:!0}]},{name:"Property",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0}]},{name:"Connector",superClass:["Element"],meta:{allowedIn:["camunda:ServiceTaskLike"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"}]},{name:"InputOutput",superClass:["Element"],meta:{allowedIn:["bpmn:FlowNode","camunda:Connector"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"},{name:"inputParameters",isMany:!0,type:"InputParameter"},{name:"outputParameters",isMany:!0,type:"OutputParameter"}]},{name:"InputOutputParameter",properties:[{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"InputOutputParameterDefinition",isAbstract:!0},{name:"List",superClass:["InputOutputParameterDefinition"],properties:[{name:"items",isMany:!0,type:"InputOutputParameterDefinition"}]},{name:"Map",superClass:["InputOutputParameterDefinition"],properties:[{name:"entries",isMany:!0,type:"Entry"}]},{name:"Entry",properties:[{name:"key",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"Value",superClass:["InputOutputParameterDefinition"],properties:[{name:"id",isAttr:!0,type:"String"},{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Script",superClass:["InputOutputParameterDefinition"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Field",superClass:["Element"],meta:{allowedIn:["camunda:ServiceTaskLike","camunda:ExecutionListener","camunda:TaskListener"]},properties:[{name:"name",isAttr:!0,type:"String"},{name:"expression",type:"String"},{name:"stringValue",isAttr:!0,type:"String"},{name:"string",type:"String"}]},{name:"InputParameter",superClass:["InputOutputParameter"]},{name:"OutputParameter",superClass:["InputOutputParameter"]},{name:"Collectable",isAbstract:!0,extends:["bpmn:MultiInstanceLoopCharacteristics"],superClass:["camunda:AsyncCapable"],properties:[{name:"collection",isAttr:!0,type:"String"},{name:"elementVariable",isAttr:!0,type:"String"}]},{name:"FailedJobRetryTimeCycle",superClass:["Element"],meta:{allowedIn:["camunda:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},properties:[{name:"body",isBody:!0,type:"String"}]},{name:"ExecutionListener",superClass:["Element"],meta:{allowedIn:["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"TaskListener",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0},{name:"id",type:"String",isAttr:!0},{name:"eventDefinitions",type:"bpmn:TimerEventDefinition",isMany:!0}]},{name:"FormProperty",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"required",type:"String",isAttr:!0},{name:"readable",type:"String",isAttr:!0},{name:"writable",type:"String",isAttr:!0},{name:"variable",type:"String",isAttr:!0},{name:"expression",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"default",type:"String",isAttr:!0},{name:"values",type:"Value",isMany:!0}]},{name:"FormData",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"fields",type:"FormField",isMany:!0},{name:"businessKey",type:"String",isAttr:!0}]},{name:"FormField",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"label",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"defaultValue",type:"String",isAttr:!0},{name:"properties",type:"Properties"},{name:"validation",type:"Validation"},{name:"values",type:"Value",isMany:!0}]},{name:"Validation",superClass:["Element"],properties:[{name:"constraints",type:"Constraint",isMany:!0}]},{name:"Constraint",superClass:["Element"],properties:[{name:"name",type:"String",isAttr:!0},{name:"config",type:"String",isAttr:!0}]},{name:"ConditionalEventDefinition",isAbstract:!0,extends:["bpmn:ConditionalEventDefinition"],properties:[{name:"variableName",isAttr:!0,type:"String"},{name:"variableEvents",isAttr:!0,type:"String"}]}],emumerations:[]},OA={name:"Activiti",uri:"http://activiti.org/bpmn",prefix:"activiti",xml:{tagAlias:"lowerCase"},associations:[],types:[{name:"Definitions",isAbstract:!0,extends:["bpmn:Definitions"],properties:[{name:"diagramRelationId",isAttr:!0,type:"String"}]},{name:"InOutBinding",superClass:["Element"],isAbstract:!0,properties:[{name:"source",isAttr:!0,type:"String"},{name:"sourceExpression",isAttr:!0,type:"String"},{name:"target",isAttr:!0,type:"String"},{name:"businessKey",isAttr:!0,type:"String"},{name:"local",isAttr:!0,type:"Boolean",default:!1},{name:"variables",isAttr:!0,type:"String"}]},{name:"In",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"Out",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"AsyncCapable",isAbstract:!0,extends:["bpmn:Activity","bpmn:Gateway","bpmn:Event"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1},{name:"asyncBefore",isAttr:!0,type:"Boolean",default:!1},{name:"asyncAfter",isAttr:!0,type:"Boolean",default:!1},{name:"exclusive",isAttr:!0,type:"Boolean",default:!0}]},{name:"JobPriorized",isAbstract:!0,extends:["bpmn:Process","activiti:AsyncCapable"],properties:[{name:"jobPriority",isAttr:!0,type:"String"}]},{name:"SignalEventDefinition",isAbstract:!0,extends:["bpmn:SignalEventDefinition"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1}]},{name:"ErrorEventDefinition",isAbstract:!0,extends:["bpmn:ErrorEventDefinition"],properties:[{name:"errorCodeVariable",isAttr:!0,type:"String"},{name:"errorMessageVariable",isAttr:!0,type:"String"}]},{name:"Error",isAbstract:!0,extends:["bpmn:Error"],properties:[{name:"activiti:errorMessage",isAttr:!0,type:"String"}]},{name:"PotentialStarter",superClass:["Element"],properties:[{name:"resourceAssignmentExpression",type:"bpmn:ResourceAssignmentExpression"}]},{name:"FormSupported",isAbstract:!0,extends:["bpmn:StartEvent","bpmn:UserTask"],properties:[{name:"formHandlerClass",isAttr:!0,type:"String"},{name:"formKey",isAttr:!0,type:"String"}]},{name:"TemplateSupported",isAbstract:!0,extends:["bpmn:Process","bpmn:FlowElement"],properties:[{name:"modelerTemplate",isAttr:!0,type:"String"}]},{name:"Initiator",isAbstract:!0,extends:["bpmn:StartEvent"],properties:[{name:"initiator",isAttr:!0,type:"String"}]},{name:"ScriptTask",isAbstract:!0,extends:["bpmn:ScriptTask"],properties:[{name:"resultVariable",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"}]},{name:"Process",isAbstract:!0,extends:["bpmn:Process"],properties:[{name:"candidateStarterGroups",isAttr:!0,type:"String"},{name:"candidateStarterUsers",isAttr:!0,type:"String"},{name:"versionTag",isAttr:!0,type:"String"},{name:"historyTimeToLive",isAttr:!0,type:"String"},{name:"isStartableInTasklist",isAttr:!0,type:"Boolean",default:!0},{name:"executionListener",isAbstract:!0,type:"Expression"}]},{name:"EscalationEventDefinition",isAbstract:!0,extends:["bpmn:EscalationEventDefinition"],properties:[{name:"escalationCodeVariable",isAttr:!0,type:"String"}]},{name:"FormalExpression",isAbstract:!0,extends:["bpmn:FormalExpression"],properties:[{name:"resource",isAttr:!0,type:"String"}]},{name:"multiinstance_type",superClass:["Element"]},{name:"multiinstance_condition",superClass:["Element"]},{name:"Assignable",extends:["bpmn:UserTask"],properties:[{name:"assignee",isAttr:!0,type:"String"},{name:"candidateUsers",isAttr:!0,type:"String"},{name:"candidateGroups",isAttr:!0,type:"String"},{name:"dueDate",isAttr:!0,type:"String"},{name:"followUpDate",isAttr:!0,type:"String"},{name:"priority",isAttr:!0,type:"String"},{name:"multiinstance_condition",isAttr:!0,type:"String"},{name:"candidateStrategy",isAttr:!0,type:"String"},{name:"candidateParam",isAttr:!0,type:"String"}]},{name:"CallActivity",extends:["bpmn:CallActivity"],properties:[{name:"calledElementBinding",isAttr:!0,type:"String",default:"latest"},{name:"calledElementVersion",isAttr:!0,type:"String"},{name:"calledElementVersionTag",isAttr:!0,type:"String"},{name:"calledElementTenantId",isAttr:!0,type:"String"},{name:"caseRef",isAttr:!0,type:"String"},{name:"caseBinding",isAttr:!0,type:"String",default:"latest"},{name:"caseVersion",isAttr:!0,type:"String"},{name:"caseTenantId",isAttr:!0,type:"String"},{name:"variableMappingClass",isAttr:!0,type:"String"},{name:"variableMappingDelegateExpression",isAttr:!0,type:"String"}]},{name:"ServiceTaskLike",extends:["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"resultVariable",isAttr:!0,type:"String"}]},{name:"DmnCapable",extends:["bpmn:BusinessRuleTask"],properties:[{name:"decisionRef",isAttr:!0,type:"String"},{name:"decisionRefBinding",isAttr:!0,type:"String",default:"latest"},{name:"decisionRefVersion",isAttr:!0,type:"String"},{name:"mapDecisionResult",isAttr:!0,type:"String",default:"resultList"},{name:"decisionRefTenantId",isAttr:!0,type:"String"}]},{name:"ExternalCapable",extends:["activiti:ServiceTaskLike"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"topic",isAttr:!0,type:"String"}]},{name:"TaskPriorized",extends:["bpmn:Process","activiti:ExternalCapable"],properties:[{name:"taskPriority",isAttr:!0,type:"String"}]},{name:"Properties",superClass:["Element"],meta:{allowedIn:["*"]},properties:[{name:"values",type:"Property",isMany:!0}]},{name:"Property",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0}]},{name:"Connector",superClass:["Element"],meta:{allowedIn:["activiti:ServiceTaskLike"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"}]},{name:"InputOutput",superClass:["Element"],meta:{allowedIn:["bpmn:FlowNode","activiti:Connector"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"},{name:"inputParameters",isMany:!0,type:"InputParameter"},{name:"outputParameters",isMany:!0,type:"OutputParameter"}]},{name:"InputOutputParameter",properties:[{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"InputOutputParameterDefinition",isAbstract:!0},{name:"List",superClass:["InputOutputParameterDefinition"],properties:[{name:"items",isMany:!0,type:"InputOutputParameterDefinition"}]},{name:"Map",superClass:["InputOutputParameterDefinition"],properties:[{name:"entries",isMany:!0,type:"Entry"}]},{name:"Entry",properties:[{name:"key",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"Value",superClass:["InputOutputParameterDefinition"],properties:[{name:"id",isAttr:!0,type:"String"},{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Script",superClass:["InputOutputParameterDefinition"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Field",superClass:["Element"],meta:{allowedIn:["activiti:ServiceTaskLike","activiti:ExecutionListener","activiti:TaskListener"]},properties:[{name:"name",isAttr:!0,type:"String"},{name:"expression",type:"String"},{name:"stringValue",isAttr:!0,type:"String"},{name:"string",type:"String"}]},{name:"InputParameter",superClass:["InputOutputParameter"]},{name:"OutputParameter",superClass:["InputOutputParameter"]},{name:"Collectable",isAbstract:!0,extends:["bpmn:MultiInstanceLoopCharacteristics"],superClass:["activiti:AsyncCapable"],properties:[{name:"collection",isAttr:!0,type:"String"},{name:"elementVariable",isAttr:!0,type:"String"}]},{name:"FailedJobRetryTimeCycle",superClass:["Element"],meta:{allowedIn:["activiti:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},properties:[{name:"body",isBody:!0,type:"String"}]},{name:"ExecutionListener",superClass:["Element"],meta:{allowedIn:["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"TaskListener",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"FormProperty",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"required",type:"String",isAttr:!0},{name:"readable",type:"String",isAttr:!0},{name:"writable",type:"String",isAttr:!0},{name:"variable",type:"String",isAttr:!0},{name:"expression",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"default",type:"String",isAttr:!0},{name:"values",type:"Value",isMany:!0}]},{name:"FormProperty",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"label",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"defaultValue",type:"String",isAttr:!0},{name:"properties",type:"Properties"},{name:"validation",type:"Validation"},{name:"values",type:"Value",isMany:!0}]},{name:"Validation",superClass:["Element"],properties:[{name:"constraints",type:"Constraint",isMany:!0}]},{name:"Constraint",superClass:["Element"],properties:[{name:"name",type:"String",isAttr:!0},{name:"config",type:"String",isAttr:!0}]},{name:"ConditionalEventDefinition",isAbstract:!0,extends:["bpmn:ConditionalEventDefinition"],properties:[{name:"variableName",isAttr:!0,type:"String"},{name:"variableEvent",isAttr:!0,type:"String"}]}],emumerations:[]},jA={name:"Flowable",uri:"http://flowable.org/bpmn",prefix:"flowable",xml:{tagAlias:"lowerCase"},associations:[],types:[{name:"InOutBinding",superClass:["Element"],isAbstract:!0,properties:[{name:"source",isAttr:!0,type:"String"},{name:"sourceExpression",isAttr:!0,type:"String"},{name:"target",isAttr:!0,type:"String"},{name:"businessKey",isAttr:!0,type:"String"},{name:"local",isAttr:!0,type:"Boolean",default:!1},{name:"variables",isAttr:!0,type:"String"}]},{name:"In",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"Out",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"AsyncCapable",isAbstract:!0,extends:["bpmn:Activity","bpmn:Gateway","bpmn:Event"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1},{name:"asyncBefore",isAttr:!0,type:"Boolean",default:!1},{name:"asyncAfter",isAttr:!0,type:"Boolean",default:!1},{name:"exclusive",isAttr:!0,type:"Boolean",default:!0}]},{name:"JobPriorized",isAbstract:!0,extends:["bpmn:Process","flowable:AsyncCapable"],properties:[{name:"jobPriority",isAttr:!0,type:"String"}]},{name:"SignalEventDefinition",isAbstract:!0,extends:["bpmn:SignalEventDefinition"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1}]},{name:"ErrorEventDefinition",isAbstract:!0,extends:["bpmn:ErrorEventDefinition"],properties:[{name:"errorCodeVariable",isAttr:!0,type:"String"},{name:"errorMessageVariable",isAttr:!0,type:"String"}]},{name:"Error",isAbstract:!0,extends:["bpmn:Error"],properties:[{name:"flowable:errorMessage",isAttr:!0,type:"String"}]},{name:"PotentialStarter",superClass:["Element"],properties:[{name:"resourceAssignmentExpression",type:"bpmn:ResourceAssignmentExpression"}]},{name:"FormSupported",isAbstract:!0,extends:["bpmn:StartEvent","bpmn:UserTask"],properties:[{name:"formHandlerClass",isAttr:!0,type:"String"},{name:"formKey",isAttr:!0,type:"String"},{name:"formType",isAttr:!0,type:"String"},{name:"formReadOnly",isAttr:!0,type:"Boolean",default:!1},{name:"formInit",isAttr:!0,type:"Boolean",default:!0}]},{name:"TemplateSupported",isAbstract:!0,extends:["bpmn:Process","bpmn:FlowElement"],properties:[{name:"modelerTemplate",isAttr:!0,type:"String"}]},{name:"Initiator",isAbstract:!0,extends:["bpmn:StartEvent"],properties:[{name:"initiator",isAttr:!0,type:"String"}]},{name:"ScriptTask",isAbstract:!0,extends:["bpmn:ScriptTask"],properties:[{name:"resultVariable",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"}]},{name:"Process",isAbstract:!0,extends:["bpmn:Process"],properties:[{name:"candidateStarterGroups",isAttr:!0,type:"String"},{name:"candidateStarterUsers",isAttr:!0,type:"String"},{name:"versionTag",isAttr:!0,type:"String"},{name:"historyTimeToLive",isAttr:!0,type:"String"},{name:"isStartableInTasklist",isAttr:!0,type:"Boolean",default:!0}]},{name:"EscalationEventDefinition",isAbstract:!0,extends:["bpmn:EscalationEventDefinition"],properties:[{name:"escalationCodeVariable",isAttr:!0,type:"String"}]},{name:"FormalExpression",isAbstract:!0,extends:["bpmn:FormalExpression"],properties:[{name:"resource",isAttr:!0,type:"String"}]},{name:"Assignable",extends:["bpmn:UserTask"],properties:[{name:"assignee",isAttr:!0,type:"String"},{name:"candidateUsers",isAttr:!0,type:"String"},{name:"candidateGroups",isAttr:!0,type:"String"},{name:"dueDate",isAttr:!0,type:"String"},{name:"followUpDate",isAttr:!0,type:"String"},{name:"priority",isAttr:!0,type:"String"},{name:"candidateStrategy",isAttr:!0,type:"String"},{name:"candidateParam",isAttr:!0,type:"String"}]},{name:"Assignee",supperClass:"Element",meta:{allowedIn:["*"]},properties:[{name:"label",type:"String",isAttr:!0},{name:"viewId",type:"Number",isAttr:!0}]},{name:"CallActivity",extends:["bpmn:CallActivity"],properties:[{name:"calledElementBinding",isAttr:!0,type:"String",default:"latest"},{name:"calledElementVersion",isAttr:!0,type:"String"},{name:"calledElementVersionTag",isAttr:!0,type:"String"},{name:"calledElementTenantId",isAttr:!0,type:"String"},{name:"caseRef",isAttr:!0,type:"String"},{name:"caseBinding",isAttr:!0,type:"String",default:"latest"},{name:"caseVersion",isAttr:!0,type:"String"},{name:"caseTenantId",isAttr:!0,type:"String"},{name:"variableMappingClass",isAttr:!0,type:"String"},{name:"variableMappingDelegateExpression",isAttr:!0,type:"String"}]},{name:"ServiceTaskLike",extends:["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"resultVariable",isAttr:!0,type:"String"}]},{name:"DmnCapable",extends:["bpmn:BusinessRuleTask"],properties:[{name:"decisionRef",isAttr:!0,type:"String"},{name:"decisionRefBinding",isAttr:!0,type:"String",default:"latest"},{name:"decisionRefVersion",isAttr:!0,type:"String"},{name:"mapDecisionResult",isAttr:!0,type:"String",default:"resultList"},{name:"decisionRefTenantId",isAttr:!0,type:"String"}]},{name:"ExternalCapable",extends:["flowable:ServiceTaskLike"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"topic",isAttr:!0,type:"String"}]},{name:"TaskPriorized",extends:["bpmn:Process","flowable:ExternalCapable"],properties:[{name:"taskPriority",isAttr:!0,type:"String"}]},{name:"Properties",superClass:["Element"],meta:{allowedIn:["*"]},properties:[{name:"values",type:"Property",isMany:!0}]},{name:"Property",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0}]},{name:"Button",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"code",type:"String",isAttr:!0},{name:"isHide",type:"String",isAttr:!0},{name:"next",type:"String",isAttr:!0},{name:"sort",type:"Integer",isAttr:!0}]},{name:"Assignee",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0},{name:"condition",type:"String",isAttr:!0},{name:"operationType",type:"String",isAttr:!0},{name:"sort",type:"Integer",isAttr:!0}]},{name:"Connector",superClass:["Element"],meta:{allowedIn:["flowable:ServiceTaskLike"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"}]},{name:"InputOutput",superClass:["Element"],meta:{allowedIn:["bpmn:FlowNode","flowable:Connector"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"},{name:"inputParameters",isMany:!0,type:"InputParameter"},{name:"outputParameters",isMany:!0,type:"OutputParameter"}]},{name:"InputOutputParameter",properties:[{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"InputOutputParameterDefinition",isAbstract:!0},{name:"List",superClass:["InputOutputParameterDefinition"],properties:[{name:"items",isMany:!0,type:"InputOutputParameterDefinition"}]},{name:"Map",superClass:["InputOutputParameterDefinition"],properties:[{name:"entries",isMany:!0,type:"Entry"}]},{name:"Entry",properties:[{name:"key",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"Value",superClass:["InputOutputParameterDefinition"],properties:[{name:"id",isAttr:!0,type:"String"},{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Script",superClass:["InputOutputParameterDefinition"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Field",superClass:["Element"],meta:{allowedIn:["flowable:ServiceTaskLike","flowable:ExecutionListener","flowable:TaskListener"]},properties:[{name:"name",isAttr:!0,type:"String"},{name:"expression",type:"String"},{name:"stringValue",isAttr:!0,type:"String"},{name:"string",type:"String"}]},{name:"ChildField",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"required",type:"String",isAttr:!0},{name:"readable",type:"String",isAttr:!0},{name:"writable",type:"String",isAttr:!0},{name:"variable",type:"String",isAttr:!0},{name:"expression",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"default",type:"String",isAttr:!0},{name:"values",type:"Value",isMany:!0}]},{name:"InputParameter",superClass:["InputOutputParameter"]},{name:"OutputParameter",superClass:["InputOutputParameter"]},{name:"Collectable",isAbstract:!0,extends:["bpmn:MultiInstanceLoopCharacteristics"],superClass:["flowable:AsyncCapable"],properties:[{name:"collection",isAttr:!0,type:"String"},{name:"elementVariable",isAttr:!0,type:"String"}]},{name:"FailedJobRetryTimeCycle",superClass:["Element"],meta:{allowedIn:["flowable:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},properties:[{name:"body",isBody:!0,type:"String"}]},{name:"ExecutionListener",superClass:["Element"],meta:{allowedIn:["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"TaskListener",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"FormProperty",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"required",type:"String",isAttr:!0},{name:"readable",type:"String",isAttr:!0},{name:"writable",type:"String",isAttr:!0},{name:"variable",type:"String",isAttr:!0},{name:"expression",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"default",type:"String",isAttr:!0},{name:"values",type:"Value",isMany:!0},{name:"children",type:"ChildField",isMany:!0},{name:"extensionElements",type:"bpmn:ExtensionElements",isMany:!0}]},{name:"FormData",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"fields",type:"FormField",isMany:!0},{name:"businessKey",type:"String",isAttr:!0}]},{name:"FormField",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"label",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"defaultValue",type:"String",isAttr:!0},{name:"properties",type:"Properties"},{name:"validation",type:"Validation"},{name:"values",type:"Value",isMany:!0}]},{name:"Validation",superClass:["Element"],properties:[{name:"constraints",type:"Constraint",isMany:!0}]},{name:"Constraint",superClass:["Element"],properties:[{name:"name",type:"String",isAttr:!0},{name:"config",type:"String",isAttr:!0}]},{name:"ConditionalEventDefinition",isAbstract:!0,extends:["bpmn:ConditionalEventDefinition"],properties:[{name:"variableName",isAttr:!0,type:"String"},{name:"variableEvent",isAttr:!0,type:"String"}]},{name:"Condition",superClass:["Element"],meta:{allowedIn:["bpmn:SequenceFlow"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"field",type:"String",isAttr:!0},{name:"compare",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0},{name:"logic",type:"String",isAttr:!0},{name:"sort",type:"Integer",isAttr:!0}]}],emumerations:[]};function go(t){const e=this;t.on("moddleCopy.canCopyProperty",function(n){const i=n.property,r=n.parent;return e.canCopyProperty(i,r)})}function bo(t,e){return t&&Mv(t.$instanceOf)&&t.$instanceOf(e)}function q0(t,e){return ro(e,function(n){return bo(t,n)})}function _n(t,e){return e?bo(t,e)?t:t.$parent?_n(t.$parent,e):void 0:t.$parent}go.$inject=["eventBus"],go.prototype.canCopyProperty=function(t,e){return n=t,!(Vs.call(n)==="[object Object]"&&!function(i,r){const o=i.$type&&i.$model.getTypeDescriptor(i.$type),a=o&&o.meta&&o.meta.allowedIn;return!a||function(c){return c.indexOf("*")!==-1}(a)?!0:ro(a,function(c){return _n(r,c)})}(t,e))&&!(bo(t,"camunda:InputOutput")&&!this.canHostInputOutput(e))&&!(q0(t,["camunda:Connector","camunda:Field"])&&!this.canHostConnector(e))&&!(bo(t,"camunda:In")&&!this.canHostIn(e))&&void 0;var n},go.prototype.canHostInputOutput=function(t){if(_n(t,"camunda:Connector"))return!0;const e=_n(t,"bpmn:FlowNode");return!!e&&!q0(e,["bpmn:StartEvent","bpmn:Gateway","bpmn:BoundaryEvent"])&&!(bo(e,"bpmn:SubProcess")&&e.get("triggeredByEvent"))},go.prototype.canHostConnector=function(t){return!bo(_n(t,"camunda:ServiceTaskLike"),"bpmn:MessageEventDefinition")||_n(t,"bpmn:IntermediateThrowEvent")||_n(t,"bpmn:EndEvent")},go.prototype.canHostIn=function(t){return _n(t,"bpmn:CallActivity")?!0:!_n(t,"bpmn:SignalEventDefinition")||_n(t,"bpmn:IntermediateThrowEvent")||_n(t,"bpmn:EndEvent")};const LA={__init__:["camundaModdleExtension"],camundaModdleExtension:["type",go]},VA={FailedJobRetryTimeCycle:["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent","bpmn:Activity"],Connector:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],Field:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"]};function sh(t,e){return t&&typeof t.$instanceOf=="function"&&t.$instanceOf(e)}function ch(t,e){return(n=t)&&n.length&&ro(t,function(i){return sh(i,e)});var n}function lh(t,e,n){const i=e.name,r=VA[i.replace(/activiti:/,"")];return i===t&&function(o,a){return ro(a,function(c){return sh(o,c)})}(n,r)}function uh(t){t.on("property.clone",function(e){const n=e.newElement,i=e.propertyDescriptor;this.canCloneProperty(n,i)},this)}uh.$inject=["eventBus"],uh.prototype.canCloneProperty=function(t,e){return lh("activiti:FailedJobRetryTimeCycle",e,t)?ch(t.eventDefinitions,"bpmn:TimerEventDefinition")||ch(t.eventDefinitions,"bpmn:SignalEventDefinition")||sh(t.loopCharacteristics,"bpmn:MultiInstanceLoopCharacteristics"):lh("activiti:Connector",e,t)||lh("activiti:Field",e,t)?ch(t.eventDefinitions,"bpmn:MessageEventDefinition"):void 0};const FA={__init__:["ActivitiModdleExtension"],ActivitiModdleExtension:["type",uh]},zA={FailedJobRetryTimeCycle:["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent","bpmn:Activity"],Connector:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],Field:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"]};function ph(t,e){return t&&typeof t.$instanceOf=="function"&&t.$instanceOf(e)}function dh(t,e){return(n=t)&&n.length&&ro(t,function(i){return ph(i,e)});var n}function hh(t,e,n){const i=e.name,r=zA[i.replace(/flowable:/,"")];return i===t&&function(o,a){return ro(a,function(c){return ph(o,c)})}(n,r)}function mh(t){t.on("property.clone",function(e){const n=e.newElement,i=e.propertyDescriptor;this.canCloneProperty(n,i)},this)}mh.$inject=["eventBus"],mh.prototype.canCloneProperty=function(t,e){return hh("flowable:FailedJobRetryTimeCycle",e,t)?dh(t.eventDefinitions,"bpmn:TimerEventDefinition")||dh(t.eventDefinitions,"bpmn:SignalEventDefinition")||ph(t.loopCharacteristics,"bpmn:MultiInstanceLoopCharacteristics"):hh("flowable:Connector",e,t)||hh("flowable:Field",e,t)?dh(t.eventDefinitions,"bpmn:MessageEventDefinition"):void 0};const $A={__init__:["FlowableModdleExtension"],FlowableModdleExtension:["type",mh]};var Rt,zi,GA=Object.defineProperty,El=Object.getOwnPropertySymbols,W0=Object.prototype.hasOwnProperty,X0=Object.prototype.propertyIsEnumerable,fh=(t,e,n)=>e in t?GA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,K0=(t,e)=>{for(var n in e||(e={}))W0.call(e,n)&&fh(t,n,e[n]);if(El)for(var n of El(e))X0.call(e,n)&&fh(t,n,e[n]);return t},$i=(t,e,n)=>(fh(t,typeof e!="symbol"?e+"":e,n),n);function Sn(t){return t==null}function vh(t){return typeof t=="string"}(zi=Rt||(Rt={})).Root="Root",zi.Declaration="Declaration",zi.Comment="Comment",zi.DocumentType="DocumentType",zi.Element="Element",zi.Text="Text",zi.Instruction="Instruction",zi.CDATA="CDATA";var sn=class{constructor(t,e=null,n=null){$i(this,"name"),$i(this,"type"),$i(this,"parent"),$i(this,"children"),$i(this,"attributes"),$i(this,"value"),$i(this,"selfClosing"),$i(this,"prefix"),this.name="",this.type=t,this.parent=e,this.value=n,this.children=null,this.attributes={},this.selfClosing=!1,this.prefix=""}setName(t){return this.name=t,this}setType(t){return this.type=t,this}setParent(t){return this.parent=t,this}setChildren(t){return this.children=t&&Array.from(t),this}setAttributes(t){return this.attributes=K0({},t),this}setValue(t){return this.value=t,this}setSelfClosing(t){return this.selfClosing=t,this}setPrefix(t){return this.prefix=t,this}addAttribute(t,e){return this.attributes[t]=e,this}removeAttribute(t){return delete this.attributes[t],this}addChild(t){return t===this||(this.children||(this.children=[]),this.children.push(t),t.parent!==this&&(t.parent=this)),this}removeChild(t){if(this.children&&this.children.length){const e=this.children.findIndex(n=>n===t);~e&&(this.children.splice(e,1),t.parent=null)}return this}toJsObject(){return{name:this.name||void 0,prefix:this.prefix||void 0,type:this.type,attributes:Object.keys(this.attributes).length?this.attributes:void 0,value:Sn(this.value)?void 0:this.value,selfClosing:this.selfClosing||void 0,children:(this.type===Rt.Element||this.type===Rt.Root)&&this.children&&this.children.length?this.children.map(t=>t.toJSON()):void 0}}toXmlString(t="  ",e=`
`,n=0){const i=t.repeat(n);let r="";switch(this.type){case Rt.Root:r+=this.children&&this.children.length?this.children.map(o=>o.toXmlString(t,e,n)).join(e):"";break;case Rt.Element:{if(!this.name)return"";const o=this.prefix?`${this.prefix}:${this.name}`:this.name;r+=`${i}<${o}`;const a=Y0(this.attributes||{});a&&(r+=` ${a}`),this.children&&this.children.length?r+=`>${e}${this.children.map(c=>c.toXmlString(t,e,n+1)).join(e)}${e}${i}</${o}>`:r+=this.selfClosing?" />":`></${o}>`;break}case Rt.CDATA:r+=`${i}<![CDATA[${Sn(this.value)?"":this.value}]]>`;break;case Rt.Text:r+=Sn(this.value)?"":`${i}${this.value}`;break;case Rt.DocumentType:r+=Sn(this.value)?"":`${i}<!DOCTYPE ${this.value}>`;break;case Rt.Comment:r+=`${i}<!-- ${Sn(this.value)?"":this.value+" "}-->`;break;case Rt.Declaration:if(r+=`${i}<?xml `,!this.attributes||Sn(this.attributes.version))r+='version="1.0" ';else{const o=parseFloat(this.attributes.version);r+=`version="${Number.isNaN(o)?"1.0":o.toFixed(1)}" `}if(this.attributes){const o=((a,c)=>{var l={};for(var u in a)W0.call(a,u)&&c.indexOf(u)<0&&(l[u]=a[u]);if(a!=null&&El)for(var u of El(a))c.indexOf(u)<0&&X0.call(a,u)&&(l[u]=a[u]);return l})(this.attributes,["version"]);o&&(r+=Y0(o))}r+="?>";break;case Rt.Instruction:r+=Sn(this.value)?"":`${i}<?${this.value}?>`}return r}toJSON(){return this.toJsObject()}toString(){return this.toXmlString("","")}};function Y0(t){return Object.keys(t).map(e=>{const n=t[e];return Sn(n)?null:function(i){return typeof i=="boolean"}(n)?n?e:null:`${e}="${n}"`}).filter(Boolean).join(" ")}var J0=t=>t,Z0={ignoreAttributes:!1,parseNodeValue:!0,trimValues:!0,prefixInName:!1,valueProcessor:J0,attributeProcessor:J0},UA=Object.keys(Z0),yr="Tag is not closed.";function HA(t,e={}){const n=t.replace(/\r\n?/g,`
`),i=function(l={}){const u=K0({},l);return UA.forEach(p=>{Sn(u[p])&&(u[p]=Z0[p])}),u}(e),r=n.length,o=new sn(Rt.Root);let a=o,c="";for(let l=0;l<r;l++){const u=n[l];if(u!=="<")c+=u;else if(n[l+1]==="/"){const p=xo(n,">",l,`Element End ${yr}`);let h=n.substring(l+2,p),v="";if(!i.prefixInName){const f=h.indexOf(":");~f&&(v=h.substring(0,f),h=h.substring(f+1))}if(a.prefix!==v||a.name!==h)throw new Error("End Tag is incorrect.");if(c){const f=yh(gr("",Rt.Text,c,i));f&&a.addChild(new sn(Rt.Text,a,f))}a=a.parent,c="",l=p}else if(n[l+1]==="?"){const p=xo(n,"?>",l,`Processing Instruction ${yr}`),h=n.substring(l+2,p-1);if(a)if(h.startsWith("xml ")&&h.includes("version=")&&a.type===Rt.Root){const v=new sn(Rt.Declaration,a);v.attributes=gh(h.substr(4),Rt.Declaration,i),a.addChild(v)}else a.addChild(new sn(Rt.Instruction,a,gr("",Rt.Instruction,h,i)));l=p}else if(n.substr(l+1,3)==="!--"){const p=xo(n,"-->",l,`Comment ${yr}`),h=n.substring(l+4,p-2);a&&a.addChild(new sn(Rt.Comment,a,gr("",Rt.Comment,h,i))),l=p}else if(n.substr(l+1,8)==="!DOCTYPE"){let p=xo(n,">",l,`Document Type ${yr}`),h=n.substring(l+9,p);h.includes("[")&&(p=xo(n,"]>",l,`Document Type ${yr}`),h=n.substring(l+9,p)),a&&a.addChild(new sn(Rt.DocumentType,a,gr("",Rt.DocumentType,h,i))),l=p}else if(n.substr(l+1,8)==="![CDATA["){const p=xo(n,"]]>",l,`CDATA Section ${yr}`),h=n.substring(l+9,p-2);if(a&&c){const v=yh(gr("",Rt.Text,c,i));v&&a.addChild(new sn(Rt.Text,a,v))}a.addChild(new sn(Rt.CDATA,a,gr("",Rt.CDATA,h,i))),c="",l=p}else{let p="",h="",v=l+1;for(;v<=r;){let w=n[v];if(p)w===p&&(p="");else if(w==='"'||w==="'")p=w;else if(w==="	")w=" ";else if(w===">")break;h+=w,v++}if(v>r)throw new Error(`Element ${yr}`);h=h.trim();const f=h.indexOf(" ");let y=h,b="";if(~f?(y=h.substr(0,f),h=h.substr(f+1)):h="",!i.prefixInName){const w=y.indexOf(":");~w&&(b=y.substring(0,w),y=y.substring(w+1))}if(a&&c){const w=yh(gr("",Rt.Text,c,i));w&&a.addChild(new sn(Rt.Text,a,w))}if(h.length&&h.lastIndexOf("/")===h.length-1){y[y.length-1]==="/"?(y=y.substr(0,y.length-1),h=""):h=h.substr(0,h.length-1);const w=new sn(Rt.Element,a);w.name=y,w.selfClosing=!0,w.prefix=b,h&&!i.ignoreAttributes&&(w.attributes=gh(h,Rt.Element,i)),a.addChild(w)}else{const w=new sn(Rt.Element,a);h&&!i.ignoreAttributes&&(w.attributes=gh(h,Rt.Element,i)),w.name=y,w.prefix=b,a.addChild(w),a=w}c="",l=v}}return o}function xo(t,e,n,i){const r=t.indexOf(e,n);if(!~r)throw new Error(i);return r+e.length-1}function gr(t,e,n,i){return n?(i.trimValues&&(n=n.trim()),Q0(i.valueProcessor(n,e,t),i.parseNodeValue)):null}function Q0(t,e){return e&&vh(t)?(t=t.trim())==="true"||t!=="false"&&function(n){const i=parseFloat(n);return Number.isNaN(i)?n:i}(t):Sn(t)?null:t}function yh(t){return Sn(t)?"":vh(t)?t:String(t)}var qA=/[^\s=]+\s*(=\s*['"][\s\S]*?['"])?/g;function gh(t,e,n){const i=(t=t.replace(/\r?\n/g," ")).match(qA)||[],r={};for(let o=0;o<i.length;o++){const a=i[o];let[c,l]=a.split("=");c=c.trim(),vh(l)?(l=l.substring(1,l.length-1),n.trimValues&&(l=l.trim()),r[c]=Q0(n.attributeProcessor(l,c,e),n.parseNodeValue)):r[c]=!0}return r}const WA={class:"my-process-designer"},XA={class:"my-process-designer__header",style:{"z-index":"999",display:"table-row-group"}},KA={style:{color:"#409eff"}},YA=Ot("br",null,null,-1),JA=Ot("br",null,null,-1),ZA=Ot("br",null,null,-1),QA={class:"my-process-designer__container"},tk={class:"hljs"},wl=ue({name:"MyProcessDesigner",__name:"ProcessDesigner",props:{value:String,processId:String,processName:String,formId:Number,translations:{type:Object,default:()=>{}},additionalModel:[Object,Array],moddleExtension:{type:Object,default:()=>{}},onlyCustomizeAddi:{type:Boolean,default:!1},onlyCustomizeModdle:{type:Boolean,default:!1},simulation:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},prefix:{type:String,default:"camunda"},events:{type:Array,default:()=>["element.click"]},headerButtonSize:{type:String,default:"small",validator:t=>["default","medium","small","mini"].indexOf(t)!==-1},headerButtonType:{type:String,default:"primary",validator:t=>["default","primary","success","warning","danger","info"].indexOf(t)!==-1}},emits:["destroy","init-finished","save","commandStack-changed","input","change","canvas-viewbox-changed","element-click"],setup(t,{emit:e}){const n=G(),i=G(),r=e,o=t;Ka("configGlobal",o);let a=null;const c=G(1),l=G(!1),u=G(!1),p=G(""),h=G("xml"),v=G(!1),f=G(!1),y=Ll(()=>{console.log(o.additionalModel,"additionalModel");const M=[];if(o.onlyCustomizeAddi)return Object.prototype.toString.call(o.additionalModel)=="[object Array]"?o.additionalModel||[]:[o.additionalModel];Object.prototype.toString.call(o.additionalModel)=="[object Array]"?M.push(...o.additionalModel):o.additionalModel&&M.push(o.additionalModel);const N={translate:["value",(R=o.translations||Z1,function(j,T){return T=T||{},(j=R[j]||j).replace(/{([^}]+)}/g,function(x,B){let V=T[B];return R[T[B]]!==null&&R[T[B]]!==void 0&&(V=R[T[B]]),V||"{"+B+"}"})})]};var R;return M.push(N),o.simulation&&M.push(DA),console.log(o.prefix,"props.prefix "),o.prefix==="camunda"&&M.push(LA),o.prefix==="flowable"&&M.push($A),o.prefix==="activiti"&&M.push(FA),M}),b=Ll(()=>{console.log(o.onlyCustomizeModdle,"props.onlyCustomizeModdle"),console.log(o.moddleExtension,"props.moddleExtension"),console.log(o.prefix,"props.prefix");const M={};if(o.onlyCustomizeModdle)return o.moddleExtension||null;if(o.moddleExtension)for(let N in o.moddleExtension)M[N]=o.moddleExtension[N];return o.prefix==="activiti"&&(M.activiti=OA),o.prefix==="flowable"&&(M.flowable=jA),o.prefix==="camunda"&&(M.camunda=BA),M});console.log(y,"additionalModules()"),console.log(b,"moddleExtensions()");const w=()=>{const M=a.get("eventBus");console.log(M,"EventBus"),o.events.forEach(N=>{M.on(N,function(R){let j=N.replace(/\./g,"-"),T=R?R.element:null;console.log(j,"eventName"),console.log(T,"element"),r("element-click",T,R)})}),M.on("commandStack.changed",async N=>{try{v.value=a.get("commandStack").canRedo(),f.value=a.get("commandStack").canUndo();let{xml:R}=await a.saveXML({format:!0});r("commandStack-changed",N),r("input",R),r("change",R)}catch(R){console.error(`[Process Designer Warn]: ${R.message||R}`)}}),a.on("canvas.viewbox.changed",({viewbox:N})=>{r("canvas-viewbox-changed",{viewbox:N});const{scale:R}=N;c.value=Math.floor(100*R)/100})},g=async M=>{console.log(M,"xml");let N=o.processId||`Process_${new Date().getTime()}`,R=o.processName||`\u4E1A\u52A1\u6D41\u7A0B_${new Date().getTime()}`,j=M||t0(N,R,o.prefix);try{let{warnings:T}=await a.importXML(j);console.log(T,"warnings"),T&&T.length&&T.forEach(x=>console.warn(x))}catch(T){console.error(`[Process Designer Warn]: ${T.message||T}`)}},_=async M=>{try{if(M==="xml"||M==="bpmn"){const{err:R,xml:j}=await a.saveXML();R&&console.error(`[Process Designer Warn ]: ${R.message||R}`);let{href:T,filename:x}=E(M.toUpperCase(),j);N(T,x)}else{const{err:R,svg:j}=await a.saveSVG();if(R)return console.error(R);let{href:T,filename:x}=E("SVG",j);N(T,x)}}catch(R){console.error(`[Process Designer Warn ]: ${R.message||R}`)}function N(R,j){if(R&&j){let T=document.createElement("a");T.download=j,T.href=R,T.click(),URL.revokeObjectURL(T.href)}}},E=(M,N)=>({filename:`diagram.${M}`,href:`data:application/${M==="svg"?"text/xml":"bpmn20-xml"};charset=UTF-8,${encodeURIComponent(N)}`,data:N}),S=()=>{const M=i.value.files[0],N=new FileReader;N.readAsText(M),N.onload=function(){let R=this.result;g(R)}},D=()=>{u.value=!u.value,console.log(a.get("toggleMode","strict"),"bpmnModeler.get('toggleMode')"),o.simulation&&a.get("toggleMode","strict").toggleMode()},s=M=>{const N=a.get("alignElements"),R=a.get("selection").get();!R||R.length<=1?hx.warning("\u8BF7\u6309\u4F4F Shift \u952E\u9009\u62E9\u591A\u4E2A\u5143\u7D20\u5BF9\u9F50"):Tr.confirm("\u81EA\u52A8\u5BF9\u9F50\u53EF\u80FD\u9020\u6210\u56FE\u5F62\u53D8\u5F62\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F","\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{N.trigger(R,M)})},d=()=>{console.log(a.saveXML,"bpmnModeler"),a.saveXML({format:!0}).then(({xml:M})=>{p.value=M,h.value="xml",l.value=!0})},m=()=>{a.saveXML({format:!0}).then(({xml:M})=>{var R;const N=new sn(Rt.Root,HA(M));p.value=(R=N.parent)==null?void 0:R.toJSON(),h.value="json",l.value=!0})},C=async()=>{const{err:M,xml:N}=await a.saveXML();M?alert("\u4FDD\u5B58\u6A21\u578B\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"):r("save",N)};return ux(()=>{console.log(o,"propspropspropsprops")}),Sr(()=>{(()=>{if(a)return;let M=document.getElementById("bpmnCanvas");console.log(M,"data"),console.log(o.keyboard,"props.keyboard"),console.log(y,"additionalModules()"),console.log(b,"moddleExtensions()"),a=new Vn({container:M,keyboard:o.keyboard?{bindTo:document}:null,additionalModules:y.value,moddleExtensions:b.value}),r("init-finished",a),w()})(),g(o.value)}),Cn(()=>{a&&a.destroy(),r("destroy",a),a=null}),(M,N)=>{const R=Pr,j=Ex,T=mx,x=fx,B=Tn,V=jl,H=px("highlight");return Y(),Pt("div",WA,[Ot("div",XA,[dx(M.$slots,"control-header"),M.$slots["control-header"]?wt("",!0):(Y(),Pt(ne,{key:0},[P(x,{key:"file-control"},{default:L(()=>[P(R,{preIcon:"ep:folder-opened",title:"\u6253\u5F00\u6587\u4EF6",onClick:N[0]||(N[0]=q=>I(i).click())}),P(T,{effect:"light",placement:"bottom"},{content:L(()=>[Ot("div",KA,[P(j,{title:"\u4E0B\u8F7D\u4E3AXML\u6587\u4EF6",onClick:N[1]||(N[1]=q=>{_("xml")})}),YA,P(j,{title:"\u4E0B\u8F7D\u4E3ASVG\u6587\u4EF6",onClick:N[2]||(N[2]=q=>{_("svg")})}),JA,P(j,{title:"\u4E0B\u8F7D\u4E3ABPMN\u6587\u4EF6",onClick:N[3]||(N[3]=q=>{_("bpmn")})})])]),default:L(()=>[P(R,{title:"\u4E0B\u8F7D\u6587\u4EF6",preIcon:"ep:download"})]),_:1}),P(T,{effect:"light"},{content:L(()=>[P(j,{title:"\u9884\u89C8XML",onClick:d}),ZA,P(j,{title:"\u9884\u89C8JSON",onClick:m})]),default:L(()=>[P(R,{preIcon:"ep:view",title:"\u6D4F\u89C8"})]),_:1}),o.simulation?(Y(),ut(T,{key:0,effect:"light",content:I(u)?"\u9000\u51FA\u6A21\u62DF":"\u5F00\u542F\u6A21\u62DF"},{default:L(()=>[P(R,{preIcon:"ep:cpu",title:"\u6A21\u62DF",onClick:D})]),_:1},8,["content"])):wt("",!0)]),_:1}),P(x,{key:"align-control"},{default:L(()=>[P(T,{effect:"light",content:"\u5411\u5DE6\u5BF9\u9F50"},{default:L(()=>[P(R,{preIcon:"fa:align-left",class:"align align-bottom",onClick:N[4]||(N[4]=q=>s("left"))})]),_:1}),P(T,{effect:"light",content:"\u5411\u53F3\u5BF9\u9F50"},{default:L(()=>[P(R,{preIcon:"fa:align-left",class:"align align-top",onClick:N[5]||(N[5]=q=>s("right"))})]),_:1}),P(T,{effect:"light",content:"\u5411\u4E0A\u5BF9\u9F50"},{default:L(()=>[P(R,{preIcon:"fa:align-left",class:"align align-left",onClick:N[6]||(N[6]=q=>s("top"))})]),_:1}),P(T,{effect:"light",content:"\u5411\u4E0B\u5BF9\u9F50"},{default:L(()=>[P(R,{preIcon:"fa:align-left",class:"align align-right",onClick:N[7]||(N[7]=q=>s("bottom"))})]),_:1}),P(T,{effect:"light",content:"\u6C34\u5E73\u5C45\u4E2D"},{default:L(()=>[P(R,{preIcon:"fa:align-left",class:"align align-center",onClick:N[8]||(N[8]=q=>s("center"))})]),_:1}),P(T,{effect:"light",content:"\u5782\u76F4\u5C45\u4E2D"},{default:L(()=>[P(R,{preIcon:"fa:align-left",class:"align align-middle",onClick:N[9]||(N[9]=q=>s("middle"))})]),_:1})]),_:1}),P(x,{key:"scale-control"},{default:L(()=>[P(T,{effect:"light",content:"\u7F29\u5C0F\u89C6\u56FE"},{default:L(()=>[P(R,{preIcon:"ep:zoom-out",onClick:N[10]||(N[10]=q=>((J=.1)=>{let Q=Math.floor(100*c.value-100*J)/100;if(Q<.2)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be less than 0.2");c.value=Q,a.get("canvas").zoom(c.value)})()),disabled:I(c)<.2},null,8,["disabled"])]),_:1}),P(B,null,{default:L(()=>[ft(Bh(Math.floor(10*I(c)*10)+"%"),1)]),_:1}),P(T,{effect:"light",content:"\u653E\u5927\u89C6\u56FE"},{default:L(()=>[P(R,{preIcon:"ep:zoom-in",onClick:N[11]||(N[11]=q=>((J=.1)=>{let Q=Math.floor(100*c.value+100*J)/100;if(Q>4)throw new Error("[Process Designer Warn ]: The zoom ratio cannot be greater than 4");c.value=Q,a.get("canvas").zoom(c.value)})()),disabled:I(c)>4},null,8,["disabled"])]),_:1}),P(T,{effect:"light",content:"\u91CD\u7F6E\u89C6\u56FE\u5E76\u5C45\u4E2D"},{default:L(()=>[P(R,{preIcon:"ep:scale-to-original",onClick:N[12]||(N[12]=q=>(c.value=1,void a.get("canvas").zoom("fit-viewport","auto")))})]),_:1})]),_:1}),P(x,{key:"stack-control"},{default:L(()=>[P(T,{effect:"light",content:"\u64A4\u9500"},{default:L(()=>[P(R,{preIcon:"ep:refresh-left",onClick:N[13]||(N[13]=q=>{a.get("commandStack").undo()}),disabled:!I(f)},null,8,["disabled"])]),_:1}),P(T,{effect:"light",content:"\u6062\u590D"},{default:L(()=>[P(R,{preIcon:"ep:refresh-right",onClick:N[14]||(N[14]=q=>{a.get("commandStack").redo()}),disabled:!I(v)},null,8,["disabled"])]),_:1}),P(T,{effect:"light",content:"\u91CD\u65B0\u7ED8\u5236"},{default:L(()=>[P(R,{preIcon:"ep:refresh",onClick:N[15]||(N[15]=q=>(v.value=!1,f.value=!1,void g(null)))})]),_:1})]),_:1}),P(R,{preIcon:"ep:plus",title:"\u4FDD\u5B58\u6A21\u578B",onClick:C,type:o.headerButtonType,disabled:I(u)},null,8,["type","disabled"])],64)),Ot("input",{type:"file",id:"files",ref_key:"refFile",ref:i,style:{display:"none"},accept:".xml, .bpmn",onChange:S},null,544)]),Ot("div",QA,[Ot("div",{class:"my-process-designer__canvas",ref_key:"bpmnCanvas",ref:n,id:"bpmnCanvas",style:{width:"1680px",height:"800px"}},null,512)]),P(V,{title:"\u9884\u89C8",modelValue:I(l),"onUpdate:modelValue":N[16]||(N[16]=q=>Me(l)?l.value=q:null),width:"80%",scroll:!0,"max-height":"600px"},{default:L(()=>[Cr((Y(),Pt("div",null,[Ot("code",tk,Bh(I(p)),1)])),[[H]])]),_:1},8,["modelValue"])])}}});wl.install=function(t){t.component(wl.name,wl)};const ek={class:"panel-tab__content"},nk=ue({name:"ElementForm",__name:"ElementForm",props:{id:String,type:String},setup(t){const e=t,n=ui("prefix");ui("width");const i=G(""),r=G("");G("");const o=G([]);G({}),G({long:"\u957F\u6574\u578B",string:"\u5B57\u7B26\u4E32",boolean:"\u5E03\u5C14\u7C7B",date:"\u65E5\u671F\u7C7B",enum:"\u679A\u4E3E\u7C7B",custom:"\u81EA\u5B9A\u4E49\u7C7B\u578B"}),G(-1),G(-1),G(!1),G(!1),G({}),G(""),G([]),G([]),G([]);const a=G(),c=G(),l=G(),u=G(),p=()=>window==null?void 0:window.bpmnInstances,h=()=>{p().modeling.updateProperties(Nt(a.value),{formKey:i.value})},v=()=>{const y=p().moddle.create("bpmn:ExtensionElements",{values:u.value.concat(l.value)});p().modeling.updateProperties(Nt(a.value),{extensionElements:y})},f=G([]);return Sr(async()=>{f.value=await Sx()}),ie(()=>e.id,y=>{y&&y.length&&Re(()=>{var b,w;a.value=p().bpmnElement,i.value=a.value.businessObject.formKey,((b=i.value)==null?void 0:b.length)>0&&(i.value=parseInt(i.value)),c.value=a.value.businessObject.get("extensionElements")||p().moddle.create("bpmn:ExtensionElements",{values:[]}),l.value=((w=c.value.values.filter(g=>g.$type===`${n}:FormData`))==null?void 0:w[0])||p().moddle.create(`${n}:FormData`,{fields:[]}),r.value=l.value.businessKey,u.value=c.value.values.filter(g=>g.$type!==`${n}:FormData`),o.value=JSON.parse(JSON.stringify(l.value.fields||[])),v()})},{immediate:!0}),(y,b)=>{const w=pi,g=di,_=Ke,E=un;return Y(),Pt("div",ek,[P(E,{"label-width":"80px"},{default:L(()=>[P(_,{label:"\u6D41\u7A0B\u8868\u5355"},{default:L(()=>[P(g,{modelValue:I(i),"onUpdate:modelValue":b[0]||(b[0]=S=>Me(i)?i.value=S:null),clearable:"",onChange:h},{default:L(()=>[(Y(!0),Pt(ne,null,Xe(I(f),S=>(Y(),ut(w,{key:S.id,label:S.name,value:S.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})])}}}),ik={class:"panel-tab__content"},rk={key:0},ok={key:1},ak=ue({name:"ElementBaseInfo",__name:"ElementBaseInfo",props:{businessObject:{type:Object,default:()=>{}},model:{type:Object,default:()=>{}}},setup(t){const e=t,n=G({}),i=G(),r=G({}),o=Vl({id:[{required:!0,message:"\u6D41\u7A0B\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u6D41\u7A0B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),a=()=>window==null?void 0:window.bpmnInstances,c=p=>{p&&(p.match(/[a-zA-Z_][\-_.0-9a-zA-Z$]*/)?(console.log("key \u6EE1\u8DB3 XML NCName \u89C4\u5219\uFF0C\u6240\u4EE5\u8FDB\u884C\u8D4B\u503C"),r.value.id=p,setTimeout(()=>{u("id")},100)):console.log("key \u4E0D\u6EE1\u8DB3 XML NCName \u89C4\u5219\uFF0C\u6240\u4EE5\u4E0D\u8FDB\u884C\u8D4B\u503C"))},l=p=>{console.log(r,"elementBaseInfo"),p&&(r.value.name=p,setTimeout(()=>{u("name")},100))},u=p=>{console.log(p,"key");const h=Object.create(null);h[p]=r.value[p],n.value={...r.value,...n.value},p==="id"?(console.log(window,"window"),console.log(i.value,"bpmnElement"),console.log(Nt(i.value),"bpmnElement"),a().modeling.updateProperties(Nt(i.value),{id:r.value[p],di:{id:`${r.value[p]}_di`}})):(console.log(h,"attrObj"),a().modeling.updateProperties(Nt(i.value),h))};return ie(()=>e.businessObject,p=>{var h;p&&(console.log(window,"window"),console.log(i.value,"bpmnElement"),i.value=(h=a())==null?void 0:h.bpmnElement,r.value=i.value.businessObject,n.value.type=i.value.businessObject.$type)}),ie(()=>{var p;return(p=e.model)==null?void 0:p.key},p=>{p&&(c(e.model.key),l(e.model.name))}),Cn(()=>{i.value=null}),(p,h)=>{const v=pn,f=Ke,y=un;return Y(),Pt("div",ik,[P(y,{"label-width":"90px",model:I(n),rules:I(o)},{default:L(()=>[I(n).type=="bpmn:Process"?(Y(),Pt("div",rk,[P(f,{label:"\u6D41\u7A0B\u6807\u8BC6",prop:"id"},{default:L(()=>[P(v,{modelValue:I(n).id,"onUpdate:modelValue":h[0]||(h[0]=b=>I(n).id=b),placeholder:"\u8BF7\u8F93\u5165\u6D41\u6807\u6807\u8BC6",disabled:I(n).id!==void 0&&I(n).id.length>0,onChange:c},null,8,["modelValue","disabled"])]),_:1}),P(f,{label:"\u6D41\u7A0B\u540D\u79F0",prop:"name"},{default:L(()=>[P(v,{modelValue:I(n).name,"onUpdate:modelValue":h[1]||(h[1]=b=>I(n).name=b),placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0",clearable:"",onChange:l},null,8,["modelValue"])]),_:1})])):(Y(),Pt("div",ok,[P(f,{label:"ID"},{default:L(()=>[P(v,{modelValue:I(r).id,"onUpdate:modelValue":h[2]||(h[2]=b=>I(r).id=b),clearable:"",onChange:h[3]||(h[3]=b=>u("id"))},null,8,["modelValue"])]),_:1}),P(f,{label:"\u540D\u79F0"},{default:L(()=>[P(v,{modelValue:I(r).name,"onUpdate:modelValue":h[4]||(h[4]=b=>I(r).name=b),clearable:"",onChange:h[5]||(h[5]=b=>u("name"))},null,8,["modelValue"])]),_:1})]))]),_:1},8,["model","rules"])])}}}),sk={class:"panel-tab__content"},ck={class:"element-property input-property"},lk=Ot("div",{class:"element-property__label"},"\u5143\u7D20\u6587\u6863\uFF1A",-1),uk={class:"element-property__value"},pk=ue({name:"ElementOtherConfig",__name:"ElementOtherConfig",props:{id:String},setup(t){const e=t,n=G(""),i=G(),r=()=>window.bpmnInstances,o=()=>{i.value&&i.value.id===e.id||(i.value=r().elementRegistry.get(e.id));const a=r().bpmnFactory.create("bpmn:Documentation",{text:n.value});r().modeling.updateProperties(Nt(i.value),{documentation:[a]})};return Cn(()=>{i.value=null}),ie(()=>e.id,a=>{a&&a.length?Re(()=>{var l;const c=(l=r().bpmnElement.businessObject)==null?void 0:l.documentation;n.value=c&&c.length?c[0].text:""}):n.value=""},{immediate:!0}),(a,c)=>{const l=pn;return Y(),Pt("div",sk,[Ot("div",ck,[lk,Ot("div",uk,[P(l,{type:"textarea",modelValue:I(n),"onUpdate:modelValue":c[0]||(c[0]=u=>Me(n)?n.value=u:null),resize:"vertical",autosize:{minRows:2,maxRows:4},onInput:o,onBlur:o},null,8,["modelValue"])])])])}}}),dk=ue({name:"ProcessExpressionDialog",__name:"ProcessExpressionDialog",emits:["success"],setup(t,{expose:e,emit:n}){const i=G(!1),r=G(!0),o=G([]),a=G(0),c=Vl({pageNo:1,pageSize:10,type:"",status:zh.ENABLE});e({open:p=>{c.pageNo=1,c.type=p,l(),i.value=!0}});const l=async()=>{r.value=!0;try{const p=await Ix.getProcessExpressionPage(c);o.value=p.list,a.value=p.total}finally{r.value=!1}},u=n;return(p,h)=>{const v=Ar,f=Tn,y=kr,b=Fh,w=Vh,g=jl,_=Oh;return Y(),ut(g,{title:"\u8BF7\u9009\u62E9\u8868\u8FBE\u5F0F",modelValue:I(i),"onUpdate:modelValue":h[2]||(h[2]=E=>Me(i)?i.value=E:null),width:"1024px"},{default:L(()=>[P(w,null,{default:L(()=>[Cr((Y(),ut(y,{data:I(o),stripe:!0,"show-overflow-tooltip":!0},{default:L(()=>[P(v,{label:"\u540D\u5B57",align:"center",prop:"name"}),P(v,{label:"\u8868\u8FBE\u5F0F",align:"center",prop:"expression"}),P(v,{label:"\u64CD\u4F5C",align:"center"},{default:L(E=>[P(f,{link:"",type:"primary",onClick:S=>(async D=>{i.value=!1,u("select",D)})(E.row)},{default:L(()=>[ft(" \u9009\u62E9 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[_,I(r)]]),P(b,{total:I(a),page:I(c).pageNo,"onUpdate:page":h[0]||(h[0]=E=>I(c).pageNo=E),limit:I(c).pageSize,"onUpdate:limit":h[1]||(h[1]=E=>I(c).pageSize=E),onPagination:l},null,8,["total","page","limit"])]),_:1})]),_:1},8,["modelValue"])}}}),hk=ue({name:"UserTask",__name:"UserTask",props:{id:String,type:String},setup(t){const e=t,n=G({candidateStrategy:void 0,candidateParam:[]}),i=G(),r=()=>window==null?void 0:window.bpmnInstances,o=G([]),a=G(),c=G([]),l=G([]),u=G([]),p=()=>{n.value.candidateParam=[],h()},h=()=>{r().modeling.updateProperties(Nt(i.value),{candidateStrategy:n.value.candidateStrategy,candidateParam:n.value.candidateParam.join(",")})},v=G(),f=async()=>{v.value.open()},y=b=>{n.value.candidateParam=[b.expression],h()};return ie(()=>e.id,()=>{i.value=r().bpmnElement,Re(()=>{(()=>{const b=i.value.businessObject;b&&(b.candidateStrategy!=null?n.value.candidateStrategy=parseInt(b.candidateStrategy):n.value.candidateStrategy=void 0,b.candidateParam&&b.candidateParam.length>0?n.value.candidateStrategy===60?n.value.candidateParam=[b.candidateParam]:n.value.candidateParam=b.candidateParam.split(",").map(w=>+w):n.value.candidateParam=[])})()})},{immediate:!0}),Sr(async()=>{o.value=await kx();const b=await Px();a.value=Tx(b,"id"),c.value=await Mx(),l.value=await Rx(),u.value=await Nx()}),Cn(()=>{i.value=null}),(b,w)=>{const g=pi,_=di,E=Ke,S=Cx,D=pn,s=Tn,d=un;return Y(),ut(d,{"label-width":"100px"},{default:L(()=>[P(E,{label:"\u89C4\u5219\u7C7B\u578B",prop:"candidateStrategy"},{default:L(()=>[P(_,{modelValue:I(n).candidateStrategy,"onUpdate:modelValue":w[0]||(w[0]=m=>I(n).candidateStrategy=m),clearable:"",style:{width:"100%"},onChange:p},{default:L(()=>[(Y(!0),Pt(ne,null,Xe(I(Fl)(I(So).BPM_TASK_CANDIDATE_STRATEGY),m=>(Y(),ut(g,{key:m.value,label:m.label,value:m.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),I(n).candidateStrategy==10?(Y(),ut(E,{key:0,label:"\u6307\u5B9A\u89D2\u8272",prop:"candidateParam"},{default:L(()=>[P(_,{modelValue:I(n).candidateParam,"onUpdate:modelValue":w[1]||(w[1]=m=>I(n).candidateParam=m),clearable:"",multiple:"",style:{width:"100%"},onChange:h},{default:L(()=>[(Y(!0),Pt(ne,null,Xe(I(o),m=>(Y(),ut(g,{key:m.id,label:m.name,value:m.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):wt("",!0),I(n).candidateStrategy==20||I(n).candidateStrategy==21?(Y(),ut(E,{key:1,label:"\u6307\u5B9A\u90E8\u95E8",prop:"candidateParam",span:"24"},{default:L(()=>[P(S,{ref:"treeRef",modelValue:I(n).candidateParam,"onUpdate:modelValue":w[2]||(w[2]=m=>I(n).candidateParam=m),data:I(a),props:I(Ax),"empty-text":"\u52A0\u8F7D\u4E2D\uFF0C\u8BF7\u7A0D\u540E",multiple:"","node-key":"id","show-checkbox":"",onChange:h},null,8,["modelValue","data","props"])]),_:1})):wt("",!0),I(n).candidateStrategy==22?(Y(),ut(E,{key:2,label:"\u6307\u5B9A\u5C97\u4F4D",prop:"candidateParam",span:"24"},{default:L(()=>[P(_,{modelValue:I(n).candidateParam,"onUpdate:modelValue":w[3]||(w[3]=m=>I(n).candidateParam=m),clearable:"",multiple:"",style:{width:"100%"},onChange:h},{default:L(()=>[(Y(!0),Pt(ne,null,Xe(I(c),m=>(Y(),ut(g,{key:m.id,label:m.name,value:m.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):wt("",!0),I(n).candidateStrategy==30?(Y(),ut(E,{key:3,label:"\u6307\u5B9A\u7528\u6237",prop:"candidateParam",span:"24"},{default:L(()=>[P(_,{modelValue:I(n).candidateParam,"onUpdate:modelValue":w[4]||(w[4]=m=>I(n).candidateParam=m),clearable:"",multiple:"",style:{width:"100%"},onChange:h},{default:L(()=>[(Y(!0),Pt(ne,null,Xe(I(l),m=>(Y(),ut(g,{key:m.id,label:m.nickname,value:m.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):wt("",!0),I(n).candidateStrategy===40?(Y(),ut(E,{key:4,label:"\u6307\u5B9A\u7528\u6237\u7EC4",prop:"candidateParam"},{default:L(()=>[P(_,{modelValue:I(n).candidateParam,"onUpdate:modelValue":w[5]||(w[5]=m=>I(n).candidateParam=m),clearable:"",multiple:"",style:{width:"100%"},onChange:h},{default:L(()=>[(Y(!0),Pt(ne,null,Xe(I(u),m=>(Y(),ut(g,{key:m.id,label:m.name,value:m.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):wt("",!0),I(n).candidateStrategy===60?(Y(),ut(E,{key:5,label:"\u6D41\u7A0B\u8868\u8FBE\u5F0F",prop:"candidateParam"},{default:L(()=>[P(D,{type:"textarea",modelValue:I(n).candidateParam[0],"onUpdate:modelValue":w[6]||(w[6]=m=>I(n).candidateParam[0]=m),clearable:"",style:{width:"72%"},onChange:h},null,8,["modelValue"]),P(s,{class:"ml-5px",size:"small",type:"success",onClick:f},{default:L(()=>[ft("\u9009\u62E9\u8868\u8FBE\u5F0F")]),_:1}),P(dk,{ref_key:"processExpressionDialogRef",ref:v,onSelect:y},null,512)]),_:1})):wt("",!0)]),_:1})}}}),mk={style:{"margin-top":"16px"}},fk=ue({name:"ScriptTask",__name:"ScriptTask",props:{id:String,type:String},setup(t){const e=t,n=G({scriptFormat:"",script:"",resource:"",resultVariable:""}),i=G({}),r=G(),o=()=>window==null?void 0:window.bpmnInstances,a=()=>{let c=Object.create(null);c.scriptFormat=i.value.scriptFormat||null,c.resultVariable=i.value.resultVariable||null,i.value.scriptType==="inline"?(c.script=i.value.script||null,c.resource=null):(c.resource=i.value.resource||null,c.script=null),o().modeling.updateProperties(Nt(r.value),c)};return Cn(()=>{r.value=null}),ie(()=>e.id,()=>{r.value=o().bpmnElement,Re(()=>{(()=>{var c;for(let l in n.value){let u=((c=r.value)==null?void 0:c.businessObject[l])||n.value[l];i.value[l]=u}i.value.scriptType=i.value.script?"inline":"external"})()})},{immediate:!0}),(c,l)=>{const u=pn,p=Ke,h=pi,v=di;return Y(),Pt("div",mk,[P(p,{label:"\u811A\u672C\u683C\u5F0F"},{default:L(()=>[P(u,{modelValue:I(i).scriptFormat,"onUpdate:modelValue":l[0]||(l[0]=f=>I(i).scriptFormat=f),clearable:"",onInput:l[1]||(l[1]=f=>a()),onChange:l[2]||(l[2]=f=>a())},null,8,["modelValue"])]),_:1}),P(p,{label:"\u811A\u672C\u7C7B\u578B"},{default:L(()=>[P(v,{modelValue:I(i).scriptType,"onUpdate:modelValue":l[3]||(l[3]=f=>I(i).scriptType=f)},{default:L(()=>[P(h,{label:"\u5185\u8054\u811A\u672C",value:"inline"}),P(h,{label:"\u5916\u90E8\u8D44\u6E90",value:"external"})]),_:1},8,["modelValue"])]),_:1}),Cr(P(p,{label:"\u811A\u672C"},{default:L(()=>[P(u,{modelValue:I(i).script,"onUpdate:modelValue":l[4]||(l[4]=f=>I(i).script=f),type:"textarea",resize:"vertical",autosize:{minRows:2,maxRows:4},clearable:"",onInput:l[5]||(l[5]=f=>a()),onChange:l[6]||(l[6]=f=>a())},null,8,["modelValue"])]),_:1},512),[[zl,I(i).scriptType==="inline"]]),Cr(P(p,{label:"\u8D44\u6E90\u5730\u5740"},{default:L(()=>[P(u,{modelValue:I(i).resource,"onUpdate:modelValue":l[7]||(l[7]=f=>I(i).resource=f),clearable:"",onInput:l[8]||(l[8]=f=>a()),onChange:l[9]||(l[9]=f=>a())},null,8,["modelValue"])]),_:1},512),[[zl,I(i).scriptType==="external"]]),P(p,{label:"\u7ED3\u679C\u53D8\u91CF"},{default:L(()=>[P(u,{modelValue:I(i).resultVariable,"onUpdate:modelValue":l[10]||(l[10]=f=>I(i).resultVariable=f),clearable:"",onInput:l[11]||(l[11]=f=>a()),onChange:l[12]||(l[12]=f=>a())},null,8,["modelValue"])]),_:1})])}}}),vk={style:{"margin-top":"16px"}},yk={style:{display:"flex","align-items":"center","justify-content":"space-between","flex-wrap":"nowrap"}},gk=ue({name:"ReceiveTask",__name:"ReceiveTask",props:{id:String,type:String},setup(t){const e=t,n=jh(),i=G(""),r=G({}),o=G({}),a=G(!1),c=G(),l=G(),u=G(),p=()=>window.bpmnInstances,h=()=>{a.value=!0,r.value={}},v=()=>{if(o.value[r.value.id])return void n.error("\u8BE5\u6D88\u606F\u5DF2\u5B58\u5728\uFF0C\u8BF7\u4FEE\u6539id\u540E\u91CD\u65B0\u4FDD\u5B58");const y=p().moddle.create("bpmn:Message",r.value);u.value.push(y),o.value[r.value.id]=r.value.name,l.value[r.value.id]=y,a.value=!1},f=y=>{y==="-1"?p().modeling.updateProperties(Nt(c.value),{messageRef:null}):p().modeling.updateProperties(Nt(c.value),{messageRef:l.value[y]})};return Sr(()=>{l.value=Object.create(null),u.value=p().modeler.getDefinitions().rootElements,u.value.filter(y=>y.$type==="bpmn:Message").forEach(y=>{l.value[y.id]=y,o.value[y.id]=y.name}),o.value[-1]="\u65E0"}),Cn(()=>{c.value=null}),ie(()=>e.id,()=>{Re(()=>{var y,b;c.value=p().bpmnElement,i.value=((b=(y=c.value.businessObject)==null?void 0:y.messageRef)==null?void 0:b.id)||"-1"})},{immediate:!0}),(y,b)=>{const w=pi,g=di,_=Pr,E=Ke,S=pn,D=un,s=Tn,d=Co;return Y(),Pt("div",vk,[P(E,{label:"\u6D88\u606F\u5B9E\u4F8B"},{default:L(()=>[Ot("div",yk,[P(g,{modelValue:I(i),"onUpdate:modelValue":b[0]||(b[0]=m=>Me(i)?i.value=m:null),onChange:f},{default:L(()=>[(Y(!0),Pt(ne,null,Xe(Object.keys(I(o)),m=>(Y(),ut(w,{value:m,label:I(o)[m],key:m},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),P(_,{type:"primary",preIcon:"ep:plus",style:{"margin-left":"8px"},onClick:h})])]),_:1}),P(d,{modelValue:I(a),"onUpdate:modelValue":b[3]||(b[3]=m=>Me(a)?a.value=m:null),"close-on-click-modal":!1,title:"\u521B\u5EFA\u65B0\u6D88\u606F",width:"400px","append-to-body":"","destroy-on-close":""},{footer:L(()=>[P(s,{size:"small",type:"primary",onClick:v},{default:L(()=>[ft("\u786E \u8BA4")]),_:1})]),default:L(()=>[P(D,{model:I(r),size:"small","label-width":"90px"},{default:L(()=>[P(E,{label:"\u6D88\u606FID"},{default:L(()=>[P(S,{modelValue:I(r).id,"onUpdate:modelValue":b[1]||(b[1]=m=>I(r).id=m),clearable:""},null,8,["modelValue"])]),_:1}),P(E,{label:"\u6D88\u606F\u540D\u79F0"},{default:L(()=>[P(S,{modelValue:I(r).name,"onUpdate:modelValue":b[2]||(b[2]=m=>I(r).name=m),clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),bk={class:"panel-tab__content"},xk=ue({name:"ElementTaskConfig",__name:"ElementTask",props:{id:String,type:String},setup(t){const e=t,n=G({asyncAfter:!1,asyncBefore:!1,exclusive:!1}),i=G(),r=G({UserTask:"UserTask",ScriptTask:"ScriptTask",ReceiveTask:"ReceiveTask"}),o=G(),a=()=>window.bpmnInstances,c=()=>{n.value.asyncBefore||n.value.asyncAfter||(n.value.exclusive=!1),a().modeling.updateProperties(a().bpmnElement,{...n.value})};return ie(()=>e.id,()=>{var l,u,p,h,v,f;o.value=a().bpmnElement,n.value.asyncBefore=(u=(l=o.value)==null?void 0:l.businessObject)==null?void 0:u.asyncBefore,n.value.asyncAfter=(h=(p=o.value)==null?void 0:p.businessObject)==null?void 0:h.asyncAfter,n.value.exclusive=(f=(v=o.value)==null?void 0:v.businessObject)==null?void 0:f.exclusive},{immediate:!0}),ie(()=>e.type,()=>{e.type==r.value.UserTask&&(i.value=hk),e.type==r.value.ScriptTask&&(i.value=fk),e.type==r.value.ReceiveTask&&(i.value=gk)},{immediate:!0}),(l,u)=>{const p=Lh,h=Ke,v=un;return Y(),Pt("div",bk,[P(v,{size:"small","label-width":"90px"},{default:L(()=>[P(h,{label:"\u5F02\u6B65\u5EF6\u7EED",style:{display:"none"}},{default:L(()=>[P(p,{modelValue:I(n).asyncBefore,"onUpdate:modelValue":u[0]||(u[0]=f=>I(n).asyncBefore=f),label:"\u5F02\u6B65\u524D",value:"\u5F02\u6B65\u524D",onChange:c},null,8,["modelValue"]),P(p,{modelValue:I(n).asyncAfter,"onUpdate:modelValue":u[1]||(u[1]=f=>I(n).asyncAfter=f),label:"\u5F02\u6B65\u540E",value:"\u5F02\u6B65\u540E",onChange:c},null,8,["modelValue"]),I(n).asyncAfter||I(n).asyncBefore?(Y(),ut(p,{key:0,modelValue:I(n).exclusive,"onUpdate:modelValue":u[2]||(u[2]=f=>I(n).exclusive=f),label:"\u6392\u9664",value:"\u6392\u9664",onChange:c},null,8,["modelValue"])):wt("",!0)]),_:1}),(Y(),ut(gx(I(i)),vx(yx(l.$props)),null,16))]),_:1})])}}}),Ek={class:"panel-tab__content"},wk=ue({name:"ElementMultiInstance",__name:"ElementMultiInstance",props:{businessObject:Object,type:String},setup(t){const e=t,n=ui("prefix"),i=G(""),r=G({completionCondition:"",loopCardinality:"",extensionElements:[],asyncAfter:!1,asyncBefore:!1,exclusive:!1}),o=G({}),a=G(null),c=G(null),l=()=>window==null?void 0:window.bpmnInstances,u=w=>{if(w!=="Null"){if(w==="StandardLoop"){const g=l().moddle.create("bpmn:StandardLoopCharacteristics");return l().modeling.updateProperties(Nt(a.value),{loopCharacteristics:g}),void(c.value=null)}c.value=w==="SequentialMultiInstance"?l().moddle.create("bpmn:MultiInstanceLoopCharacteristics",{isSequential:!0}):l().moddle.create("bpmn:MultiInstanceLoopCharacteristics",{collection:"${coll_userList}"}),l().modeling.updateProperties(Nt(a.value),{loopCharacteristics:Nt(c.value)})}else l().modeling.updateProperties(Nt(a.value),{loopCharacteristics:null})},p=w=>{let g=null;w&&w.length&&(g=l().moddle.create("bpmn:FormalExpression",{body:w})),l().modeling.updateModdleProperties(Nt(a.value),c.value,{loopCardinality:g})},h=w=>{let g=null;w&&w.length&&(g=l().moddle.create("bpmn:FormalExpression",{body:w})),l().modeling.updateModdleProperties(Nt(a.value),c.value,{completionCondition:g})},v=w=>{const g=l().moddle.create("bpmn:ExtensionElements",{values:[l().moddle.create(`${n}:FailedJobRetryTimeCycle`,{body:w})]});l().modeling.updateModdleProperties(Nt(a.value),c.value,{extensionElements:g})},f=()=>{l().modeling.updateModdleProperties(Nt(a.value),c.value,{collection:o.value.collection||null,elementVariable:o.value.elementVariable||null})},y=w=>{const{asyncBefore:g,asyncAfter:_}=o.value;let E=Object.create(null);g||_?E[w]=o.value[w]:(o.value.exclusive=!1,E={asyncBefore:!1,asyncAfter:!1,exclusive:!1,extensionElements:null}),l().modeling.updateModdleProperties(Nt(a.value),c.value,E)},b=w=>{w==="\u4F9D\u6B21\u5BA1\u6279"?(u("SequentialMultiInstance"),p("1"),h("${ nrOfCompletedInstances >= nrOfInstances }")):w==="\u4F1A\u7B7E"?(u("ParallelMultiInstance"),h("${ nrOfCompletedInstances >= nrOfInstances }")):w==="\u6216\u7B7E"&&(u("ParallelMultiInstance"),h("${ nrOfCompletedInstances > 0 }"))};return Cn(()=>{c.value=null,a.value=null}),ie(()=>e.businessObject,w=>{var _,E,S,D;var g;a.value=l().bpmnElement,(g=w).loopCharacteristics?g.loopCharacteristics.$type==="bpmn:StandardLoopCharacteristics"?(i.value="StandardLoop",o.value={}):(g.loopCharacteristics.isSequential?i.value="SequentialMultiInstance":i.value="ParallelMultiInstance",o.value={...r.value,...g.loopCharacteristics,completionCondition:((E=(_=g.loopCharacteristics)==null?void 0:_.completionCondition)==null?void 0:E.body)??"",loopCardinality:((D=(S=g.loopCharacteristics)==null?void 0:S.loopCardinality)==null?void 0:D.body)??""},c.value=l().bpmnElement.businessObject.loopCharacteristics,g.loopCharacteristics.extensionElements&&g.loopCharacteristics.extensionElements.values&&g.loopCharacteristics.extensionElements.values.length&&(o.value.timeCycle=g.loopCharacteristics.extensionElements.values[0].body)):(i.value="Null",o.value={})},{immediate:!0}),(w,g)=>{const _=Tn,E=Ke,S=pi,D=di,s=pn,d=Lh,m=un;return Y(),Pt("div",Ek,[P(m,{"label-width":"90px"},{default:L(()=>[P(E,{label:"\u5FEB\u6377\u914D\u7F6E"},{default:L(()=>[P(_,{size:"small",onClick:g[0]||(g[0]=C=>b("\u4F9D\u6B21\u5BA1\u6279"))},{default:L(()=>[ft("\u4F9D\u6B21\u5BA1\u6279")]),_:1}),P(_,{size:"small",onClick:g[1]||(g[1]=C=>b("\u4F1A\u7B7E"))},{default:L(()=>[ft("\u4F1A\u7B7E")]),_:1}),P(_,{size:"small",onClick:g[2]||(g[2]=C=>b("\u6216\u7B7E"))},{default:L(()=>[ft("\u6216\u7B7E")]),_:1})]),_:1}),P(E,{label:"\u4F1A\u7B7E\u7C7B\u578B"},{default:L(()=>[P(D,{modelValue:I(i),"onUpdate:modelValue":g[3]||(g[3]=C=>Me(i)?i.value=C:null),onChange:u},{default:L(()=>[P(S,{label:"\u5E76\u884C\u591A\u91CD\u4E8B\u4EF6",value:"ParallelMultiInstance"}),P(S,{label:"\u65F6\u5E8F\u591A\u91CD\u4E8B\u4EF6",value:"SequentialMultiInstance"}),P(S,{label:"\u65E0",value:"Null"})]),_:1},8,["modelValue"])]),_:1}),I(i)==="ParallelMultiInstance"||I(i)==="SequentialMultiInstance"?(Y(),Pt(ne,{key:0},[P(E,{label:"\u5FAA\u73AF\u6570\u91CF",key:"loopCardinality"},{default:L(()=>[P(s,{modelValue:I(o).loopCardinality,"onUpdate:modelValue":g[4]||(g[4]=C=>I(o).loopCardinality=C),clearable:"",onChange:p},null,8,["modelValue"])]),_:1}),Cr(P(E,{label:"\u96C6\u5408",key:"collection"},{default:L(()=>[P(s,{modelValue:I(o).collection,"onUpdate:modelValue":g[5]||(g[5]=C=>I(o).collection=C),clearable:"",onChange:f},null,8,["modelValue"])]),_:1},512),[[zl,!1]]),P(E,{label:"\u5143\u7D20\u53D8\u91CF",key:"elementVariable",style:{display:"none"}},{default:L(()=>[P(s,{modelValue:I(o).elementVariable,"onUpdate:modelValue":g[6]||(g[6]=C=>I(o).elementVariable=C),clearable:"",onChange:f},null,8,["modelValue"])]),_:1}),P(E,{label:"\u5B8C\u6210\u6761\u4EF6",key:"completionCondition"},{default:L(()=>[P(s,{modelValue:I(o).completionCondition,"onUpdate:modelValue":g[7]||(g[7]=C=>I(o).completionCondition=C),clearable:"",onChange:h},null,8,["modelValue"])]),_:1}),P(E,{label:"\u5F02\u6B65\u72B6\u6001",key:"async",style:{display:"none"}},{default:L(()=>[P(d,{modelValue:I(o).asyncBefore,"onUpdate:modelValue":g[8]||(g[8]=C=>I(o).asyncBefore=C),label:"\u5F02\u6B65\u524D",value:"\u5F02\u6B65\u524D",onChange:g[9]||(g[9]=C=>y("asyncBefore"))},null,8,["modelValue"]),P(d,{modelValue:I(o).asyncAfter,"onUpdate:modelValue":g[10]||(g[10]=C=>I(o).asyncAfter=C),label:"\u5F02\u6B65\u540E",value:"\u5F02\u6B65\u540E",onChange:g[11]||(g[11]=C=>y("asyncAfter"))},null,8,["modelValue"]),I(o).asyncAfter||I(o).asyncBefore?(Y(),ut(d,{key:0,modelValue:I(o).exclusive,"onUpdate:modelValue":g[12]||(g[12]=C=>I(o).exclusive=C),label:"\u6392\u9664",value:"\u6392\u9664",onChange:g[13]||(g[13]=C=>y("exclusive"))},null,8,["modelValue"])):wt("",!0)]),_:1}),I(o).asyncAfter||I(o).asyncBefore?(Y(),ut(E,{label:"\u91CD\u8BD5\u5468\u671F",prop:"timeCycle",key:"timeCycle"},{default:L(()=>[P(s,{modelValue:I(o).timeCycle,"onUpdate:modelValue":g[14]||(g[14]=C=>I(o).timeCycle=C),clearable:"",onChange:v},null,8,["modelValue"])]),_:1})):wt("",!0)],64)):wt("",!0)]),_:1})])}}}),_k={class:"panel-tab__content"},Sk=ue({name:"FlowCondition",__name:"FlowCondition",props:{businessObject:Object,type:String},setup(t){const e=t,n=G({}),i=G(),r=G(),o=G(),a=G(),c=()=>window==null?void 0:window.bpmnInstances,l=p=>p==="condition"?(a.value=c().moddle.create("bpmn:FormalExpression"),void c().modeling.updateProperties(Nt(i.value),{conditionExpression:a.value})):p==="default"?(c().modeling.updateProperties(Nt(i.value),{conditionExpression:null}),void c().modeling.updateProperties(Nt(r.value),{default:Nt(i.value)})):(o.value.default&&o.value.default.id===i.value.id&&c().modeling.updateProperties(Nt(r.value),{default:null}),void c().modeling.updateProperties(Nt(i.value),{conditionExpression:null})),u=()=>{let p,{conditionType:h,scriptType:v,body:f,resource:y,language:b}=n.value;h==="expression"?p=c().moddle.create("bpmn:FormalExpression",{body:f}):v==="inlineScript"?(p=c().moddle.create("bpmn:FormalExpression",{body:f,language:b}),n.value.resource=""):(n.value.body="",p=c().moddle.create("bpmn:FormalExpression",{resource:y,language:b})),c().modeling.updateProperties(Nt(i.value),{conditionExpression:p})};return Cn(()=>{i.value=null,r.value=null,o.value=null}),ie(()=>e.businessObject,p=>{console.log(p,"val"),Re(()=>{(()=>{if(i.value=c().bpmnElement,r.value=i.value.source,o.value=i.value.businessObject.sourceRef,n.value={type:"default"},o.value&&o.value.default&&o.value.default.id===i.value.id)n.value={type:"default"};else if(i.value.businessObject.conditionExpression){const h=i.value.businessObject.conditionExpression;if(n.value={...h,type:"condition"},n.value.resource)return n.value.conditionType="script",void(n.value.scriptType="externalScript");if(h.language)return n.value.conditionType="script",void(n.value.scriptType="inlineScript");n.value.conditionType="expression"}else n.value={type:"normal"}})()})},{immediate:!0}),(p,h)=>{const v=pi,f=di,y=Ke,b=pn,w=un;return Y(),Pt("div",_k,[P(w,{model:I(n),"label-width":"90px",size:"small"},{default:L(()=>[P(y,{label:"\u6D41\u8F6C\u7C7B\u578B"},{default:L(()=>[P(f,{modelValue:I(n).type,"onUpdate:modelValue":h[0]||(h[0]=g=>I(n).type=g),onChange:l},{default:L(()=>[P(v,{label:"\u666E\u901A\u6D41\u8F6C\u8DEF\u5F84",value:"normal"}),P(v,{label:"\u9ED8\u8BA4\u6D41\u8F6C\u8DEF\u5F84",value:"default"}),P(v,{label:"\u6761\u4EF6\u6D41\u8F6C\u8DEF\u5F84",value:"condition"})]),_:1},8,["modelValue"])]),_:1}),I(n).type==="condition"?(Y(),ut(y,{label:"\u6761\u4EF6\u683C\u5F0F",key:"condition"},{default:L(()=>[P(f,{modelValue:I(n).conditionType,"onUpdate:modelValue":h[1]||(h[1]=g=>I(n).conditionType=g)},{default:L(()=>[P(v,{label:"\u8868\u8FBE\u5F0F",value:"expression"}),P(v,{label:"\u811A\u672C",value:"script"})]),_:1},8,["modelValue"])]),_:1})):wt("",!0),I(n).conditionType&&I(n).conditionType==="expression"?(Y(),ut(y,{label:"\u8868\u8FBE\u5F0F",key:"express"},{default:L(()=>[P(b,{modelValue:I(n).body,"onUpdate:modelValue":h[2]||(h[2]=g=>I(n).body=g),style:{width:"192px"},clearable:"",onChange:u},null,8,["modelValue"])]),_:1})):wt("",!0),I(n).conditionType&&I(n).conditionType==="script"?(Y(),Pt(ne,{key:2},[P(y,{label:"\u811A\u672C\u8BED\u8A00",key:"language"},{default:L(()=>[P(b,{modelValue:I(n).language,"onUpdate:modelValue":h[3]||(h[3]=g=>I(n).language=g),clearable:"",onChange:u},null,8,["modelValue"])]),_:1}),P(y,{label:"\u811A\u672C\u7C7B\u578B",key:"scriptType"},{default:L(()=>[P(f,{modelValue:I(n).scriptType,"onUpdate:modelValue":h[4]||(h[4]=g=>I(n).scriptType=g)},{default:L(()=>[P(v,{label:"\u5185\u8054\u811A\u672C",value:"inlineScript"}),P(v,{label:"\u5916\u90E8\u811A\u672C",value:"externalScript"})]),_:1},8,["modelValue"])]),_:1}),I(n).scriptType==="inlineScript"?(Y(),ut(y,{label:"\u811A\u672C",key:"body"},{default:L(()=>[P(b,{modelValue:I(n).body,"onUpdate:modelValue":h[5]||(h[5]=g=>I(n).body=g),type:"textarea",clearable:"",onChange:u},null,8,["modelValue"])]),_:1})):wt("",!0),I(n).scriptType==="externalScript"?(Y(),ut(y,{label:"\u8D44\u6E90\u5730\u5740",key:"resource"},{default:L(()=>[P(b,{modelValue:I(n).resource,"onUpdate:modelValue":h[6]||(h[6]=g=>I(n).resource=g),clearable:"",onChange:u},null,8,["modelValue"])]),_:1})):wt("",!0)],64)):wt("",!0)]),_:1},8,["model"])])}}}),Ck={class:"panel-tab__content"},Tk={class:"panel-tab__content--title"},Ak={class:"panel-tab__content--title",style:{"padding-top":"8px","margin-top":"8px","border-top":"1px solid #eee"}},kk=ue({name:"SignalAndMassage",__name:"SignalAndMessage",setup(t){const e=jh(),n=G([]),i=G([]),r=G(!1),o=G(""),a=G({}),c=G(),l=G(),u=G(),p=Ll(()=>o.value==="message"?{title:"\u521B\u5EFA\u6D88\u606F",idLabel:"\u6D88\u606FID",nameLabel:"\u6D88\u606F\u540D\u79F0"}:{title:"\u521B\u5EFA\u4FE1\u53F7",idLabel:"\u4FE1\u53F7ID",nameLabel:"\u4FE1\u53F7\u540D\u79F0"}),h=()=>window==null?void 0:window.bpmnInstances,v=()=>{console.log(window,"window"),c.value=h().modeler.getDefinitions().rootElements,l.value={},u.value={},i.value=[],n.value=[],c.value.forEach(b=>{b.$type==="bpmn:Message"&&(l.value[b.id]=!0,i.value.push({...b})),b.$type==="bpmn:Signal"&&(u.value[b.id]=!0,n.value.push({...b}))})},f=b=>{o.value=b,a.value={},r.value=!0},y=()=>{if(o.value==="message"){l.value[a.value.id]&&e.error("\u8BE5\u6D88\u606F\u5DF2\u5B58\u5728\uFF0C\u8BF7\u4FEE\u6539id\u540E\u91CD\u65B0\u4FDD\u5B58");const b=h().moddle.create("bpmn:Message",a.value);c.value.push(b)}else{u.value[a.value.id]&&e.error("\u8BE5\u4FE1\u53F7\u5DF2\u5B58\u5728\uFF0C\u8BF7\u4FEE\u6539id\u540E\u91CD\u65B0\u4FDD\u5B58");const b=h().moddle.create("bpmn:Signal",a.value);c.value.push(b)}r.value=!1,v()};return Sr(()=>{v()}),(b,w)=>{const g=Ya,_=Pr,E=Ar,S=kr,D=pn,s=Ke,d=un,m=Tn,C=Co;return Y(),Pt("div",Ck,[Ot("div",Tk,[Ot("span",null,[P(g,{icon:"ep:menu",style:{"margin-right":"8px",color:"#555"}}),ft("\u6D88\u606F\u5217\u8868")]),P(_,{type:"primary",title:"\u521B\u5EFA\u65B0\u6D88\u606F",preIcon:"ep:plus",onClick:w[0]||(w[0]=M=>f("message"))})]),P(S,{data:I(i),border:""},{default:L(()=>[P(E,{type:"index",label:"\u5E8F\u53F7",width:"60px"}),P(E,{label:"\u6D88\u606FID",prop:"id","max-width":"300px","show-overflow-tooltip":""}),P(E,{label:"\u6D88\u606F\u540D\u79F0",prop:"name","max-width":"300px","show-overflow-tooltip":""})]),_:1},8,["data"]),Ot("div",Ak,[Ot("span",null,[P(g,{icon:"ep:menu",style:{"margin-right":"8px",color:"#555"}}),ft("\u4FE1\u53F7\u5217\u8868")]),P(_,{type:"primary",title:"\u521B\u5EFA\u65B0\u4FE1\u53F7",preIcon:"ep:plus",onClick:w[1]||(w[1]=M=>f("signal"))})]),P(S,{data:I(n),border:""},{default:L(()=>[P(E,{type:"index",label:"\u5E8F\u53F7",width:"60px"}),P(E,{label:"\u4FE1\u53F7ID",prop:"id","max-width":"300px","show-overflow-tooltip":""}),P(E,{label:"\u4FE1\u53F7\u540D\u79F0",prop:"name","max-width":"300px","show-overflow-tooltip":""})]),_:1},8,["data"]),P(C,{modelValue:I(r),"onUpdate:modelValue":w[5]||(w[5]=M=>Me(r)?r.value=M:null),title:I(p).title,"close-on-click-modal":!1,width:"400px","append-to-body":"","destroy-on-close":""},{footer:L(()=>[P(m,{onClick:w[4]||(w[4]=M=>r.value=!1)},{default:L(()=>[ft("\u53D6 \u6D88")]),_:1}),P(m,{type:"primary",onClick:y},{default:L(()=>[ft("\u4FDD \u5B58")]),_:1})]),default:L(()=>[P(d,{model:I(a),"label-width":"90px"},{default:L(()=>[P(s,{label:I(p).idLabel},{default:L(()=>[P(D,{modelValue:I(a).id,"onUpdate:modelValue":w[2]||(w[2]=M=>I(a).id=M),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),P(s,{label:I(p).nameLabel},{default:L(()=>[P(D,{modelValue:I(a).name,"onUpdate:modelValue":w[3]||(w[3]=M=>I(a).name=M),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),br=()=>window==null?void 0:window.bpmnInstances;function _l(t,e,n){debugger;const i=Object.create(null);switch(i.event=t.event,e&&(i.id=t.id),t.listenerType){case"scriptListener":i.script=function(r,o){const{scriptType:a,scriptFormat:c,value:l,resource:u}=r,p=a==="inlineScript"?{scriptFormat:c,value:l}:{scriptFormat:c,resource:u};return br().moddle.create(`${o}:Script`,p)}(t,n);break;case"expressionListener":i.expression=t.expression;break;case"delegateExpressionListener":i.delegateExpression=t.delegateExpression;break;default:i.class=t.class}if(t.fields&&(i.fields=t.fields.map(r=>function(o,a){const{name:c,fieldType:l,string:u,expression:p}=o,h=l==="string"?{name:c,string:u}:{name:c,expression:p};return br().moddle.create(`${a}:Field`,h)}(r,n))),e&&t.event==="timeout"&&t.eventDefinitionType){const r=br().moddle.create("bpmn:FormalExpression",{body:t.eventTimeDefinitions}),o=br().moddle.create("bpmn:TimerEventDefinition",{id:`TimerEventDefinition_${Pk(8)}`,[`time${t.eventDefinitionType.replace(/^\S/,a=>a.toUpperCase())}`]:r});i.eventDefinitions=[o]}return br().moddle.create(`${n}:${e?"TaskListener":"ExecutionListener"}`,i)}function Eo(t,e){const n=br().moddle.create("bpmn:ExtensionElements",{values:e});br().modeling.updateProperties(Nt(t),{extensionElements:n})}function Pk(t=8,e){let n="";const i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=t;r>0;--r)n+=i[Math.floor(62*Math.random())];return n}function tx(t){let e={...t};if(t.script&&(e={...t,...t.script,scriptType:t.script.resource?"externalScript":"inlineScript"}),t.event==="timeout"&&t.eventDefinitions&&t.eventDefinitions.length){let n="";for(const i in t.eventDefinitions[0])console.log(t.eventDefinitions,i),i.indexOf("time")!==-1&&(n=i,e.eventDefinitionType=i.replace("time","").toLowerCase());console.log(n),e.eventTimeDefinitions=t.eventDefinitions[0][n].body}return e}function ex(t){let e;return t.class&&(e="classListener"),t.expression&&(e="expressionListener"),t.delegateExpression&&(e="delegateExpressionListener"),t.script&&(e="scriptListener"),{...JSON.parse(JSON.stringify(t)),...t.script??{},listenerType:e}}function nx(t){if(t.valueType==="class")return{listenerType:"classListener",class:t.value,event:t.event,fields:[]};if(t.valueType==="expression")return{listenerType:"expressionListener",expression:t.value,event:t.event,fields:[]};if(t.valueType==="delegateExpression")return{listenerType:"delegateExpressionListener",delegateExpression:t.value,event:t.event,fields:[]};throw new Error("\u672A\u77E5\u7684\u76D1\u542C\u5668\u7C7B\u578B")}const ix={classListener:"Java \u7C7B",expressionListener:"\u8868\u8FBE\u5F0F",delegateExpressionListener:"\u4EE3\u7406\u8868\u8FBE\u5F0F",scriptListener:"\u811A\u672C"},Mk={create:"\u521B\u5EFA",assignment:"\u6307\u6D3E",complete:"\u5B8C\u6210",delete:"\u5220\u9664",update:"\u66F4\u65B0",timeout:"\u8D85\u65F6"},rx={string:"\u5B57\u7B26\u4E32",expression:"\u8868\u8FBE\u5F0F"},ox=ue({name:"ProcessListenerDialog",__name:"ProcessListenerDialog",emits:["success"],setup(t,{expose:e,emit:n}){const i=G(!1),r=G(!0),o=G([]),a=G(0),c=Vl({pageNo:1,pageSize:10,type:"",status:zh.ENABLE});e({open:async p=>{c.pageNo=1,c.type=p,l(),i.value=!0}});const l=async()=>{r.value=!0;try{const p=await Bx.getProcessListenerPage(c);o.value=p.list,a.value=p.total}finally{r.value=!1}},u=n;return(p,h)=>{const v=Ar,f=Dx,y=Tn,b=kr,w=Fh,g=Vh,_=jl,E=Oh;return Y(),ut(_,{title:"\u8BF7\u9009\u62E9\u76D1\u542C\u5668",modelValue:I(i),"onUpdate:modelValue":h[2]||(h[2]=S=>Me(i)?i.value=S:null),width:"1024px"},{default:L(()=>[P(g,null,{default:L(()=>[Cr((Y(),ut(b,{data:I(o),stripe:!0,"show-overflow-tooltip":!0},{default:L(()=>[P(v,{label:"\u540D\u5B57",align:"center",prop:"name"}),P(v,{label:"\u7C7B\u578B",align:"center",prop:"type"},{default:L(S=>[P(f,{type:I(So).BPM_PROCESS_LISTENER_TYPE,value:S.row.type},null,8,["type","value"])]),_:1}),P(v,{label:"\u4E8B\u4EF6",align:"center",prop:"event"}),P(v,{label:"\u503C\u7C7B\u578B",align:"center",prop:"valueType"},{default:L(S=>[P(f,{type:I(So).BPM_PROCESS_LISTENER_VALUE_TYPE,value:S.row.valueType},null,8,["type","value"])]),_:1}),P(v,{label:"\u503C",align:"center",prop:"value"}),P(v,{label:"\u64CD\u4F5C",align:"center"},{default:L(S=>[P(y,{link:"",type:"primary",onClick:D=>(async s=>{i.value=!1,u("select",s)})(S.row)},{default:L(()=>[ft(" \u9009\u62E9 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[E,I(r)]]),P(w,{total:I(a),page:I(c).pageNo,"onUpdate:page":h[0]||(h[0]=S=>I(c).pageNo=S),limit:I(c).pageSize,"onUpdate:limit":h[1]||(h[1]=S=>I(c).pageSize=S),onPagination:l},null,8,["total","page","limit"])]),_:1})]),_:1},8,["modelValue"])}}}),Rk={class:"panel-tab__content"},Nk={class:"element-drawer__button"},Ik={class:"listener-filed__title"},Dk={class:"element-drawer__button"},Bk=ue({name:"ElementListeners",__name:"ElementListeners",props:{id:String,type:String},setup(t){const e=t,n=ui("prefix"),i=ui("width"),r=G([]),o=G({}),a=G(!1),c=G([]),l=G({}),u=G(!1),p=G(-1),h=G(-1),v=G(ix),f=G(rx),y=G(),b=G(),w=G(),g=G(),_=G(),E=()=>{var N,R,j;y.value=(window==null?void 0:window.bpmnInstances).bpmnElement,b.value=[],w.value=((j=(R=(N=y.value.businessObject)==null?void 0:N.extensionElements)==null?void 0:R.values)==null?void 0:j.filter(T=>T.$type===`${n}:ExecutionListener`))??[],r.value=w.value.map(T=>ex(T))},S=(N,R)=>{N?(o.value=tx(N),p.value=R):(o.value={},p.value=-1),N&&N.fields?c.value=N.fields.map(j=>({...j,fieldType:j.string?"string":"expression"})):(c.value=[],o.value.fields=[]),a.value=!0,Re(()=>{g.value&&g.value.clearValidate()})},D=(N,R)=>{l.value=N?JSON.parse(JSON.stringify(N)):{},h.value=N?R:-1,u.value=!0,Re(()=>{_.value&&_.value.clearValidate()})},s=async()=>{await _.value.validate()&&(h.value===-1?(c.value.push(l.value),o.value.fields.push(l.value)):(c.value.splice(h.value,1,l.value),o.value.fields.splice(h.value,1,l.value)),u.value=!1,Re(()=>{l.value={}}))},d=async()=>{var R,j,T;if(!await g.value.validate())return;const N=_l(o.value,!1,n);p.value===-1?(w.value.push(N),r.value.push(o.value)):(w.value.splice(p.value,1,N),r.value.splice(p.value,1,o.value)),b.value=((T=(j=(R=y.value.businessObject)==null?void 0:R.extensionElements)==null?void 0:j.values)==null?void 0:T.filter(x=>x.$type!==`${n}:ExecutionListener`))??[],Eo(y.value,b.value.concat(w.value)),a.value=!1,o.value={}},m=G(),C=async()=>{m.value.open("execution")},M=N=>{var T,x,B;const R=nx(N),j=_l(R,!1,n);w.value.push(j),r.value.push(R),b.value=((B=(x=(T=y.value.businessObject)==null?void 0:T.extensionElements)==null?void 0:x.values)==null?void 0:B.filter(V=>V.$type!==`${n}:ExecutionListener`))??[],Eo(y.value,b.value.concat(w.value))};return ie(()=>e.id,N=>{N&&N.length&&Re(()=>{E()})},{immediate:!0}),(N,R)=>{const j=Ar,T=Tn,x=$l,B=kr,V=Pr,H=pi,q=di,J=Ke,Q=pn,it=un,ot=Ya,vt=$h,Yt=Co;return Y(),Pt(ne,null,[Ot("div",Rk,[P(B,{data:I(r),size:"small",border:""},{default:L(()=>[P(j,{label:"\u5E8F\u53F7",width:"50px",type:"index"}),P(j,{label:"\u4E8B\u4EF6\u7C7B\u578B","min-width":"100px",prop:"event"}),P(j,{label:"\u76D1\u542C\u5668\u7C7B\u578B","min-width":"100px","show-overflow-tooltip":"",formatter:et=>I(v)[et.listenerType]},null,8,["formatter"]),P(j,{label:"\u64CD\u4F5C",width:"100px"},{default:L(et=>[P(T,{size:"small",link:"",onClick:Z=>S(et.row,et.$index)},{default:L(()=>[ft("\u7F16\u8F91")]),_:2},1032,["onClick"]),P(x,{direction:"vertical"}),P(T,{size:"small",link:"",style:{color:"#ff4d4f"},onClick:Z=>(Tt=>{debugger;Tr.confirm("\u786E\u8BA4\u79FB\u9664\u8BE5\u76D1\u542C\u5668\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E \u8BA4",cancelButtonText:"\u53D6 \u6D88"}).then(()=>{w.value.splice(Tt,1),r.value.splice(Tt,1),Eo(y.value,b.value.concat(w.value))}).catch(()=>console.info("\u64CD\u4F5C\u53D6\u6D88"))})(et.$index)},{default:L(()=>[ft("\u79FB\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),Ot("div",Nk,[P(V,{type:"primary",preIcon:"ep:plus",title:"\u6DFB\u52A0\u76D1\u542C\u5668",size:"small",onClick:R[0]||(R[0]=et=>S(null))}),P(V,{type:"success",preIcon:"ep:select",title:"\u9009\u62E9\u76D1\u542C\u5668",size:"small",onClick:C})]),P(vt,{modelValue:I(a),"onUpdate:modelValue":R[12]||(R[12]=et=>Me(a)?a.value=et:null),title:"\u6267\u884C\u76D1\u542C\u5668",size:`${I(i)}px`,"append-to-body":"","destroy-on-close":""},{default:L(()=>[P(it,{model:I(o),"label-width":"96px",ref_key:"listenerFormRef",ref:g},{default:L(()=>[P(J,{label:"\u4E8B\u4EF6\u7C7B\u578B",prop:"event",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(q,{modelValue:I(o).event,"onUpdate:modelValue":R[1]||(R[1]=et=>I(o).event=et)},{default:L(()=>[P(H,{label:"start",value:"start"}),P(H,{label:"end",value:"end"})]),_:1},8,["modelValue"])]),_:1}),P(J,{label:"\u76D1\u542C\u5668\u7C7B\u578B",prop:"listenerType",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(q,{modelValue:I(o).listenerType,"onUpdate:modelValue":R[2]||(R[2]=et=>I(o).listenerType=et)},{default:L(()=>[(Y(!0),Pt(ne,null,Xe(Object.keys(I(v)),et=>(Y(),ut(H,{key:et,label:I(v)[et],value:et},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),I(o).listenerType==="classListener"?(Y(),ut(J,{label:"Java\u7C7B",prop:"class",key:"listener-class",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(Q,{modelValue:I(o).class,"onUpdate:modelValue":R[3]||(R[3]=et=>I(o).class=et),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0),I(o).listenerType==="expressionListener"?(Y(),ut(J,{label:"\u8868\u8FBE\u5F0F",prop:"expression",key:"listener-expression",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(Q,{modelValue:I(o).expression,"onUpdate:modelValue":R[4]||(R[4]=et=>I(o).expression=et),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0),I(o).listenerType==="delegateExpressionListener"?(Y(),ut(J,{label:"\u4EE3\u7406\u8868\u8FBE\u5F0F",prop:"delegateExpression",key:"listener-delegate",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(Q,{modelValue:I(o).delegateExpression,"onUpdate:modelValue":R[5]||(R[5]=et=>I(o).delegateExpression=et),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0),I(o).listenerType==="scriptListener"?(Y(),Pt(ne,{key:3},[P(J,{label:"\u811A\u672C\u683C\u5F0F",prop:"scriptFormat",key:"listener-script-format",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u586B\u5199\u811A\u672C\u683C\u5F0F"}},{default:L(()=>[P(Q,{modelValue:I(o).scriptFormat,"onUpdate:modelValue":R[6]||(R[6]=et=>I(o).scriptFormat=et),clearable:""},null,8,["modelValue"])]),_:1}),P(J,{label:"\u811A\u672C\u7C7B\u578B",prop:"scriptType",key:"listener-script-type",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u9009\u62E9\u811A\u672C\u7C7B\u578B"}},{default:L(()=>[P(q,{modelValue:I(o).scriptType,"onUpdate:modelValue":R[7]||(R[7]=et=>I(o).scriptType=et)},{default:L(()=>[P(H,{label:"\u5185\u8054\u811A\u672C",value:"inlineScript"}),P(H,{label:"\u5916\u90E8\u811A\u672C",value:"externalScript"})]),_:1},8,["modelValue"])]),_:1}),I(o).scriptType==="inlineScript"?(Y(),ut(J,{label:"\u811A\u672C\u5185\u5BB9",prop:"value",key:"listener-script",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u586B\u5199\u811A\u672C\u5185\u5BB9"}},{default:L(()=>[P(Q,{modelValue:I(o).value,"onUpdate:modelValue":R[8]||(R[8]=et=>I(o).value=et),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0),I(o).scriptType==="externalScript"?(Y(),ut(J,{label:"\u8D44\u6E90\u5730\u5740",prop:"resource",key:"listener-resource",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u586B\u5199\u8D44\u6E90\u5730\u5740"}},{default:L(()=>[P(Q,{modelValue:I(o).resource,"onUpdate:modelValue":R[9]||(R[9]=et=>I(o).resource=et),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0)],64)):wt("",!0)]),_:1},8,["model"]),P(x),Ot("p",Ik,[Ot("span",null,[P(ot,{icon:"ep:menu"}),ft("\u6CE8\u5165\u5B57\u6BB5\uFF1A")]),P(V,{type:"primary",onClick:R[10]||(R[10]=et=>D(null)),title:"\u6DFB\u52A0\u5B57\u6BB5"})]),P(B,{data:I(c),size:"small","max-height":"240",fit:"",border:"",style:{flex:"none"}},{default:L(()=>[P(j,{label:"\u5E8F\u53F7",width:"50px",type:"index"}),P(j,{label:"\u5B57\u6BB5\u540D\u79F0","min-width":"100px",prop:"name"}),P(j,{label:"\u5B57\u6BB5\u7C7B\u578B","min-width":"80px","show-overflow-tooltip":"",formatter:et=>I(f)[et.fieldType]},null,8,["formatter"]),P(j,{label:"\u5B57\u6BB5\u503C/\u8868\u8FBE\u5F0F","min-width":"100px","show-overflow-tooltip":"",formatter:et=>et.string||et.expression},null,8,["formatter"]),P(j,{label:"\u64CD\u4F5C",width:"130px"},{default:L(et=>[P(T,{size:"small",link:"",onClick:Z=>D(et.row,et.$index)},{default:L(()=>[ft("\u7F16\u8F91")]),_:2},1032,["onClick"]),P(x,{direction:"vertical"}),P(T,{size:"small",link:"",style:{color:"#ff4d4f"},onClick:Z=>(Tt=>{Tr.confirm("\u786E\u8BA4\u79FB\u9664\u8BE5\u5B57\u6BB5\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E \u8BA4",cancelButtonText:"\u53D6 \u6D88"}).then(()=>{c.value.splice(Tt,1),o.value.fields.splice(Tt,1)}).catch(()=>console.info("\u64CD\u4F5C\u53D6\u6D88"))})(et.$index)},{default:L(()=>[ft("\u79FB\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),Ot("div",Dk,[P(T,{onClick:R[11]||(R[11]=et=>a.value=!1)},{default:L(()=>[ft("\u53D6 \u6D88")]),_:1}),P(T,{type:"primary",onClick:d},{default:L(()=>[ft("\u4FDD \u5B58")]),_:1})])]),_:1},8,["modelValue","size"]),P(Yt,{title:"\u5B57\u6BB5\u914D\u7F6E",modelValue:I(u),"onUpdate:modelValue":R[18]||(R[18]=et=>Me(u)?u.value=et:null),width:"600px","append-to-body":"","destroy-on-close":""},{footer:L(()=>[P(T,{size:"small",onClick:R[17]||(R[17]=et=>u.value=!1)},{default:L(()=>[ft("\u53D6 \u6D88")]),_:1}),P(T,{size:"small",type:"primary",onClick:s},{default:L(()=>[ft("\u786E \u5B9A")]),_:1})]),default:L(()=>[P(it,{model:I(l),"label-width":"96spx",ref_key:"listenerFieldFormRef",ref:_,style:{height:"136px"}},{default:L(()=>[P(J,{label:"\u5B57\u6BB5\u540D\u79F0\uFF1A",prop:"name",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(Q,{modelValue:I(l).name,"onUpdate:modelValue":R[13]||(R[13]=et=>I(l).name=et),clearable:""},null,8,["modelValue"])]),_:1}),P(J,{label:"\u5B57\u6BB5\u7C7B\u578B\uFF1A",prop:"fieldType",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(q,{modelValue:I(l).fieldType,"onUpdate:modelValue":R[14]||(R[14]=et=>I(l).fieldType=et)},{default:L(()=>[(Y(!0),Pt(ne,null,Xe(Object.keys(I(f)),et=>(Y(),ut(H,{key:et,label:I(f)[et],value:et},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),I(l).fieldType==="string"?(Y(),ut(J,{label:"\u5B57\u6BB5\u503C\uFF1A",prop:"string",key:"field-string",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(Q,{modelValue:I(l).string,"onUpdate:modelValue":R[15]||(R[15]=et=>I(l).string=et),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0),I(l).fieldType==="expression"?(Y(),ut(J,{label:"\u8868\u8FBE\u5F0F\uFF1A",prop:"expression",key:"field-expression",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(Q,{modelValue:I(l).expression,"onUpdate:modelValue":R[16]||(R[16]=et=>I(l).expression=et),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])]),P(ox,{ref_key:"processListenerDialogRef",ref:m,onSelect:M},null,512)],64)}}}),Ok={class:"panel-tab__content"},jk={class:"element-drawer__button"},Lk=ue({name:"ElementProperties",__name:"ElementProperties",props:{id:String,type:String},setup(t){const e=t,n=ui("prefix"),i=G([]),r=G({}),o=G(-1),a=G(!1),c=G(),l=G(),u=G(),p=G(),h=G(),v=()=>window==null?void 0:window.bpmnInstances,f=()=>{var g,_;console.log(window,"windowwindowwindowwindowwindowwindowwindow"),c.value=v().bpmnElement,l.value=[],u.value=((_=(g=c.value.businessObject)==null?void 0:g.extensionElements)==null?void 0:_.values.filter(E=>(E.$type!==`${n}:Properties`&&l.value.push(E),E.$type===`${n}:Properties`)))??[],p.value=u.value.reduce((E,S)=>E.concat(S.values),[]),i.value=JSON.parse(JSON.stringify(p.value??[]))},y=(g,_)=>{o.value=_,r.value=_===-1?{}:JSON.parse(JSON.stringify(g)),a.value=!0,Re(()=>{h.value&&h.value.clearValidate()})},b=()=>{console.log(r.value,"propertyForm.value");const{name:g,value:_}=r.value;if(o.value!==-1)v().modeling.updateModdleProperties(Nt(c.value),Nt(p.value)[Nt(o.value)],{name:g,value:_});else{const E=v().moddle.create(`${n}:Property`,{name:g,value:_}),S=v().moddle.create(`${n}:Properties`,{values:p.value.concat([E])});w(S)}a.value=!1,f()},w=g=>{const _=v().moddle.create("bpmn:ExtensionElements",{values:l.value.concat([g])});v().modeling.updateProperties(Nt(c.value),{extensionElements:_})};return ie(()=>e.id,g=>{g&&g&&g.length&&f()},{immediate:!0}),(g,_)=>{const E=Ar,S=Tn,D=$l,s=kr,d=Pr,m=pn,C=Ke,M=un,N=Co;return Y(),Pt("div",Ok,[P(s,{data:I(i),"max-height":"240",fit:"",border:""},{default:L(()=>[P(E,{label:"\u5E8F\u53F7",width:"50px",type:"index"}),P(E,{label:"\u5C5E\u6027\u540D",prop:"name","min-width":"100px","show-overflow-tooltip":""}),P(E,{label:"\u5C5E\u6027\u503C",prop:"value","min-width":"100px","show-overflow-tooltip":""}),P(E,{label:"\u64CD\u4F5C",width:"110px"},{default:L(R=>[P(S,{link:"",onClick:j=>y(R.row,R.$index),size:"small"},{default:L(()=>[ft(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),P(D,{direction:"vertical"}),P(S,{link:"",size:"small",style:{color:"#ff4d4f"},onClick:j=>((T,x)=>{console.log(T,"attr"),Tr.confirm("\u786E\u8BA4\u79FB\u9664\u8BE5\u5C5E\u6027\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E \u8BA4",cancelButtonText:"\u53D6 \u6D88"}).then(()=>{i.value.splice(x,1),p.value.splice(x,1);const B=v().moddle.create(`${n}:Properties`,{values:p.value});w(B),f()}).catch(()=>console.info("\u64CD\u4F5C\u53D6\u6D88"))})(R.row,R.$index)},{default:L(()=>[ft(" \u79FB\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),Ot("div",jk,[P(d,{type:"primary",preIcon:"ep:plus",title:"\u6DFB\u52A0\u5C5E\u6027",onClick:_[0]||(_[0]=R=>y(null,-1))})]),P(N,{modelValue:I(a),"onUpdate:modelValue":_[4]||(_[4]=R=>Me(a)?a.value=R:null),title:"\u5C5E\u6027\u914D\u7F6E",width:"600px","append-to-body":"","destroy-on-close":""},{footer:L(()=>[P(S,{onClick:_[3]||(_[3]=R=>a.value=!1)},{default:L(()=>[ft("\u53D6 \u6D88")]),_:1}),P(S,{type:"primary",onClick:b},{default:L(()=>[ft("\u786E \u5B9A")]),_:1})]),default:L(()=>[P(M,{model:I(r),"label-width":"80px",ref_key:"attributeFormRef",ref:h},{default:L(()=>[P(C,{label:"\u5C5E\u6027\u540D\uFF1A",prop:"name"},{default:L(()=>[P(m,{modelValue:I(r).name,"onUpdate:modelValue":_[1]||(_[1]=R=>I(r).name=R),clearable:""},null,8,["modelValue"])]),_:1}),P(C,{label:"\u5C5E\u6027\u503C\uFF1A",prop:"value"},{default:L(()=>[P(m,{modelValue:I(r).value,"onUpdate:modelValue":_[2]||(_[2]=R=>I(r).value=R),clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),Vk={class:"panel-tab__content"},Fk={class:"element-drawer__button"},zk={class:"listener-filed__title"},$k={class:"element-drawer__button"},Gk=ue({name:"UserTaskListeners",__name:"UserTaskListeners",props:{id:String,type:String},setup(t){const e=t,n=ui("prefix"),i=ui("width"),r=G([]),o=G(Mk),a=G(ix),c=G(!1),l=G({}),u=G(rx),p=G([]),h=G(!1),v=G(-1),f=G(-1),y=G({}),b=G(),w=G(),g=G(),_=G(),E=G(),S=()=>window==null?void 0:window.bpmnInstances,D=(R,j)=>{R?(l.value=tx(R),v.value=j):(l.value={},v.value=-1),R&&R.fields?p.value=R.fields.map(T=>({...T,fieldType:T.string?"string":"expression"})):(p.value=[],l.value.fields=[]),c.value=!0,Re(()=>{_.value&&_.value.clearValidate()})},s=async()=>{var j,T,x;if(!await _.value.validate())return;const R=_l(l.value,!0,n);v.value===-1?(w.value.push(R),r.value.push(l.value)):(w.value.splice(v.value,1,R),r.value.splice(v.value,1,l.value)),g.value=((x=(T=(j=b.value.businessObject)==null?void 0:j.extensionElements)==null?void 0:T.values)==null?void 0:x.filter(B=>B.$type!==`${n}:TaskListener`))??[],Eo(b.value,g.value.concat(w.value)),c.value=!1,l.value={}},d=(R,j)=>{y.value=R?JSON.parse(JSON.stringify(R)):{},f.value=R?j:-1,h.value=!0,Re(()=>{E.value&&E.value.clearValidate()})},m=async()=>{await E.value.validate()&&(f.value===-1?(p.value.push(y.value),l.value.fields.push(y.value)):(p.value.splice(f.value,1,y.value),l.value.fields.splice(f.value,1,y.value)),h.value=!1,Re(()=>{y.value={}}))},C=G(),M=async()=>{C.value.open("task")},N=R=>{var x,B,V;const j=nx(R),T=_l(j,!0,n);w.value.push(T),r.value.push(j),g.value=((V=(B=(x=b.value.businessObject)==null?void 0:x.extensionElements)==null?void 0:B.values)==null?void 0:V.filter(H=>H.$type!==`${n}:TaskListener`))??[],Eo(b.value,g.value.concat(w.value))};return ie(()=>e.id,R=>{R&&R.length&&Re(()=>{var j,T;console.log(S().bpmnElement,"window.bpmnInstances.bpmnElementwindow.bpmnInstances.bpmnElementwindow.bpmnInstances.bpmnElementwindow.bpmnInstances.bpmnElementwindow.bpmnInstances.bpmnElementwindow.bpmnInstances.bpmnElement"),b.value=S().bpmnElement,g.value=[],w.value=((T=(j=b.value.businessObject)==null?void 0:j.extensionElements)==null?void 0:T.values.filter(x=>x.$type===`${n}:TaskListener`))??[],r.value=w.value.map(x=>ex(x))})},{immediate:!0}),(R,j)=>{const T=Ar,x=Tn,B=$l,V=kr,H=Pr,q=pi,J=di,Q=Ke,it=pn,ot=un,vt=Ya,Yt=$h,et=Co;return Y(),Pt(ne,null,[Ot("div",Vk,[P(V,{data:I(r),size:"small",border:""},{default:L(()=>[P(T,{label:"\u5E8F\u53F7",width:"50px",type:"index"}),P(T,{label:"\u4E8B\u4EF6\u7C7B\u578B","min-width":"80px","show-overflow-tooltip":"",formatter:Z=>I(o)[Z.event]},null,8,["formatter"]),P(T,{label:"\u4E8B\u4EF6id","min-width":"80px",prop:"id","show-overflow-tooltip":""}),P(T,{label:"\u76D1\u542C\u5668\u7C7B\u578B","min-width":"80px","show-overflow-tooltip":"",formatter:Z=>I(a)[Z.listenerType]},null,8,["formatter"]),P(T,{label:"\u64CD\u4F5C",width:"90px"},{default:L(Z=>[P(x,{size:"small",link:"",onClick:Tt=>D(Z.row,Z.$index)},{default:L(()=>[ft("\u7F16\u8F91")]),_:2},1032,["onClick"]),P(B,{direction:"vertical"}),P(x,{size:"small",link:"",style:{color:"#ff4d4f"},onClick:Tt=>(($t,yt)=>{console.log($t,"listener"),Tr.confirm("\u786E\u8BA4\u79FB\u9664\u8BE5\u76D1\u542C\u5668\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E \u8BA4",cancelButtonText:"\u53D6 \u6D88"}).then(()=>{w.value.splice(yt,1),r.value.splice(yt,1),Eo(b.value,g.value.concat(w.value))}).catch(()=>console.info("\u64CD\u4F5C\u53D6\u6D88"))})(Z.row,Z.$index)},{default:L(()=>[ft("\u79FB\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),Ot("div",Fk,[P(H,{size:"small",type:"primary",preIcon:"ep:plus",title:"\u6DFB\u52A0\u76D1\u542C\u5668",onClick:j[0]||(j[0]=Z=>D(null))}),P(H,{type:"success",preIcon:"ep:select",title:"\u9009\u62E9\u76D1\u542C\u5668",size:"small",onClick:M})]),P(Yt,{modelValue:I(c),"onUpdate:modelValue":j[15]||(j[15]=Z=>Me(c)?c.value=Z:null),title:"\u4EFB\u52A1\u76D1\u542C\u5668",size:`${I(i)}px`,"append-to-body":"","destroy-on-close":""},{default:L(()=>[P(ot,{size:"small",model:I(l),"label-width":"96px",ref_key:"listenerFormRef",ref:_},{default:L(()=>[P(Q,{label:"\u4E8B\u4EF6\u7C7B\u578B",prop:"event",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(J,{modelValue:I(l).event,"onUpdate:modelValue":j[1]||(j[1]=Z=>I(l).event=Z)},{default:L(()=>[(Y(!0),Pt(ne,null,Xe(Object.keys(I(o)),Z=>(Y(),ut(q,{key:Z,label:I(o)[Z],value:Z},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),P(Q,{label:"\u76D1\u542C\u5668ID",prop:"id",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(it,{modelValue:I(l).id,"onUpdate:modelValue":j[2]||(j[2]=Z=>I(l).id=Z),clearable:""},null,8,["modelValue"])]),_:1}),P(Q,{label:"\u76D1\u542C\u5668\u7C7B\u578B",prop:"listenerType",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(J,{modelValue:I(l).listenerType,"onUpdate:modelValue":j[3]||(j[3]=Z=>I(l).listenerType=Z)},{default:L(()=>[(Y(!0),Pt(ne,null,Xe(Object.keys(I(a)),Z=>(Y(),ut(q,{key:Z,label:I(a)[Z],value:Z},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),I(l).listenerType==="classListener"?(Y(),ut(Q,{label:"Java\u7C7B",prop:"class",key:"listener-class",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(it,{modelValue:I(l).class,"onUpdate:modelValue":j[4]||(j[4]=Z=>I(l).class=Z),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0),I(l).listenerType==="expressionListener"?(Y(),ut(Q,{label:"\u8868\u8FBE\u5F0F",prop:"expression",key:"listener-expression",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(it,{modelValue:I(l).expression,"onUpdate:modelValue":j[5]||(j[5]=Z=>I(l).expression=Z),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0),I(l).listenerType==="delegateExpressionListener"?(Y(),ut(Q,{label:"\u4EE3\u7406\u8868\u8FBE\u5F0F",prop:"delegateExpression",key:"listener-delegate",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(it,{modelValue:I(l).delegateExpression,"onUpdate:modelValue":j[6]||(j[6]=Z=>I(l).delegateExpression=Z),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0),I(l).listenerType==="scriptListener"?(Y(),Pt(ne,{key:3},[P(Q,{label:"\u811A\u672C\u683C\u5F0F",prop:"scriptFormat",key:"listener-script-format",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u586B\u5199\u811A\u672C\u683C\u5F0F"}},{default:L(()=>[P(it,{modelValue:I(l).scriptFormat,"onUpdate:modelValue":j[7]||(j[7]=Z=>I(l).scriptFormat=Z),clearable:""},null,8,["modelValue"])]),_:1}),P(Q,{label:"\u811A\u672C\u7C7B\u578B",prop:"scriptType",key:"listener-script-type",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u9009\u62E9\u811A\u672C\u7C7B\u578B"}},{default:L(()=>[P(J,{modelValue:I(l).scriptType,"onUpdate:modelValue":j[8]||(j[8]=Z=>I(l).scriptType=Z)},{default:L(()=>[P(q,{label:"\u5185\u8054\u811A\u672C",value:"inlineScript"}),P(q,{label:"\u5916\u90E8\u811A\u672C",value:"externalScript"})]),_:1},8,["modelValue"])]),_:1}),I(l).scriptType==="inlineScript"?(Y(),ut(Q,{label:"\u811A\u672C\u5185\u5BB9",prop:"value",key:"listener-script",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u586B\u5199\u811A\u672C\u5185\u5BB9"}},{default:L(()=>[P(it,{modelValue:I(l).value,"onUpdate:modelValue":j[9]||(j[9]=Z=>I(l).value=Z),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0),I(l).scriptType==="externalScript"?(Y(),ut(Q,{label:"\u8D44\u6E90\u5730\u5740",prop:"resource",key:"listener-resource",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u586B\u5199\u8D44\u6E90\u5730\u5740"}},{default:L(()=>[P(it,{modelValue:I(l).resource,"onUpdate:modelValue":j[10]||(j[10]=Z=>I(l).resource=Z),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0)],64)):wt("",!0),I(l).event==="timeout"?(Y(),Pt(ne,{key:4},[P(Q,{label:"\u5B9A\u65F6\u5668\u7C7B\u578B",prop:"eventDefinitionType",key:"eventDefinitionType"},{default:L(()=>[P(J,{modelValue:I(l).eventDefinitionType,"onUpdate:modelValue":j[11]||(j[11]=Z=>I(l).eventDefinitionType=Z)},{default:L(()=>[P(q,{label:"\u65E5\u671F",value:"date"}),P(q,{label:"\u6301\u7EED\u65F6\u957F",value:"duration"}),P(q,{label:"\u5FAA\u73AF",value:"cycle"}),P(q,{label:"\u65E0",value:"null"})]),_:1},8,["modelValue"])]),_:1}),I(l).eventDefinitionType&&I(l).eventDefinitionType!=="null"?(Y(),ut(Q,{label:"\u5B9A\u65F6\u5668",prop:"eventTimeDefinitions",key:"eventTimeDefinitions",rules:{required:!0,trigger:["blur","change"],message:"\u8BF7\u586B\u5199\u5B9A\u65F6\u5668\u914D\u7F6E"}},{default:L(()=>[P(it,{modelValue:I(l).eventTimeDefinitions,"onUpdate:modelValue":j[12]||(j[12]=Z=>I(l).eventTimeDefinitions=Z),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0)],64)):wt("",!0)]),_:1},8,["model"]),P(B),Ot("p",zk,[Ot("span",null,[P(vt,{icon:"ep:menu"}),ft("\u6CE8\u5165\u5B57\u6BB5\uFF1A")]),P(x,{size:"small",type:"primary",onClick:j[13]||(j[13]=Z=>d(null))},{default:L(()=>[ft("\u6DFB\u52A0\u5B57\u6BB5")]),_:1})]),P(V,{data:I(p),size:"small","max-height":"240",fit:"",border:"",style:{flex:"none"}},{default:L(()=>[P(T,{label:"\u5E8F\u53F7",width:"50px",type:"index"}),P(T,{label:"\u5B57\u6BB5\u540D\u79F0","min-width":"100px",prop:"name"}),P(T,{label:"\u5B57\u6BB5\u7C7B\u578B","min-width":"80px","show-overflow-tooltip":"",formatter:Z=>I(u)[Z.fieldType]},null,8,["formatter"]),P(T,{label:"\u5B57\u6BB5\u503C/\u8868\u8FBE\u5F0F","min-width":"100px","show-overflow-tooltip":"",formatter:Z=>Z.string||Z.expression},null,8,["formatter"]),P(T,{label:"\u64CD\u4F5C",width:"100px"},{default:L(Z=>[P(x,{size:"small",link:"",onClick:Tt=>d(Z.row,Z.$index)},{default:L(()=>[ft("\u7F16\u8F91")]),_:2},1032,["onClick"]),P(B,{direction:"vertical"}),P(x,{size:"small",link:"",style:{color:"#ff4d4f"},onClick:Tt=>(($t,yt)=>{console.log($t,"field"),Tr.confirm("\u786E\u8BA4\u79FB\u9664\u8BE5\u5B57\u6BB5\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E \u8BA4",cancelButtonText:"\u53D6 \u6D88"}).then(()=>{p.value.splice(yt,1),l.value.fields.splice(yt,1)}).catch(()=>console.info("\u64CD\u4F5C\u53D6\u6D88"))})(Z.row,Z.$index)},{default:L(()=>[ft("\u79FB\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),Ot("div",$k,[P(x,{size:"small",onClick:j[14]||(j[14]=Z=>c.value=!1)},{default:L(()=>[ft("\u53D6 \u6D88")]),_:1}),P(x,{size:"small",type:"primary",onClick:s},{default:L(()=>[ft("\u4FDD \u5B58")]),_:1})])]),_:1},8,["modelValue","size"]),P(et,{title:"\u5B57\u6BB5\u914D\u7F6E",modelValue:I(h),"onUpdate:modelValue":j[21]||(j[21]=Z=>Me(h)?h.value=Z:null),width:"600px","append-to-body":"","destroy-on-close":""},{footer:L(()=>[P(x,{size:"small",onClick:j[20]||(j[20]=Z=>h.value=!1)},{default:L(()=>[ft("\u53D6 \u6D88")]),_:1}),P(x,{size:"small",type:"primary",onClick:m},{default:L(()=>[ft("\u786E \u5B9A")]),_:1})]),default:L(()=>[P(ot,{model:I(y),size:"small","label-width":"96px",ref_key:"listenerFieldFormRef",ref:E,style:{height:"136px"}},{default:L(()=>[P(Q,{label:"\u5B57\u6BB5\u540D\u79F0\uFF1A",prop:"name",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(it,{modelValue:I(y).name,"onUpdate:modelValue":j[16]||(j[16]=Z=>I(y).name=Z),clearable:""},null,8,["modelValue"])]),_:1}),P(Q,{label:"\u5B57\u6BB5\u7C7B\u578B\uFF1A",prop:"fieldType",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(J,{modelValue:I(y).fieldType,"onUpdate:modelValue":j[17]||(j[17]=Z=>I(y).fieldType=Z)},{default:L(()=>[(Y(!0),Pt(ne,null,Xe(Object.keys(I(u)),Z=>(Y(),ut(q,{key:Z,label:I(u)[Z],value:Z},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),I(y).fieldType==="string"?(Y(),ut(Q,{label:"\u5B57\u6BB5\u503C\uFF1A",prop:"string",key:"field-string",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(it,{modelValue:I(y).string,"onUpdate:modelValue":j[18]||(j[18]=Z=>I(y).string=Z),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0),I(y).fieldType==="expression"?(Y(),ut(Q,{label:"\u8868\u8FBE\u5F0F\uFF1A",prop:"expression",key:"field-expression",rules:{required:!0,trigger:["blur","change"]}},{default:L(()=>[P(it,{modelValue:I(y).expression,"onUpdate:modelValue":j[19]||(j[19]=Z=>I(y).expression=Z),clearable:""},null,8,["modelValue"])]),_:1})):wt("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])]),P(ox,{ref_key:"processListenerDialogRef",ref:C,onSelect:N},null,512)],64)}}}),Sl=ue({name:"MyPropertiesPanel",__name:"PropertiesPanel",props:{bpmnModeler:{type:Object,default:()=>{}},prefix:{type:String,default:"camunda"},width:{type:Number,default:480},idEditDisabled:{type:Boolean,default:!1},model:Object},setup(t){const e=t,n=G("base"),i=G(""),r=G(""),o=G({}),a=G(!1),c=G(!1),l=G();Ka("prefix",e.prefix),Ka("width",e.width);const u=()=>window==null?void 0:window.bpmnInstances,p=ie(()=>e.bpmnModeler,()=>{if(!e.bpmnModeler)return void console.log("\u7F3A\u5C11props.bpmnModeler");console.log("props.bpmnModeler \u6709\u503C\u4E86\uFF01\uFF01\uFF01"),window.bpmnInstances={modeler:e.bpmnModeler,modeling:e.bpmnModeler.get("modeling"),moddle:e.bpmnModeler.get("moddle"),eventBus:e.bpmnModeler.get("eventBus"),bpmnFactory:e.bpmnModeler.get("bpmnFactory"),elementFactory:e.bpmnModeler.get("elementFactory"),elementRegistry:e.bpmnModeler.get("elementRegistry"),replace:e.bpmnModeler.get("replace"),selection:e.bpmnModeler.get("selection")},console.log(u(),"window.bpmnInstances"),h(),p()},{immediate:!0}),h=()=>{v(null),e.bpmnModeler.on("import.done",f=>{console.log(f,"eeeee"),v(null)}),e.bpmnModeler.on("selection.changed",({newSelection:f})=>{v(f[0]||null)}),e.bpmnModeler.on("element.changed",({element:f})=>{f&&f.id===i.value&&v(f)})},v=f=>{let y=f;y||(y=u().elementRegistry.find(b=>b.type==="bpmn:Process")??u().elementRegistry.find(b=>b.type==="bpmn:Collaboration")),y&&(console.log(`
              ----------
      select element changed:
                id:  ${y.id}
              type:  ${y.businessObject.$type}
              ----------
              `),console.log("businessObject: ",y.businessObject),u().bpmnElement=y,l.value=y,i.value=y.id,r.value=y.type.split(":")[1]||"",o.value=JSON.parse(JSON.stringify(y.businessObject)),a.value=!(r.value!=="SequenceFlow"||!y.source||y.source.type.indexOf("StartEvent")!==-1),c.value=r.value==="UserTask"||r.value==="StartEvent")};return Cn(()=>{window.bpmnInstances=null,console.log(e,"props1"),console.log(e.bpmnModeler,"props.bpmnModeler1")}),ie(()=>i.value,()=>{n.value="base"}),(f,y)=>{const b=Ya,w=wx,g=nk,_=_x;return Y(),Pt("div",{class:"process-panel__container",style:bx({width:`${t.width}px`})},[P(_,{modelValue:I(n),"onUpdate:modelValue":y[0]||(y[0]=E=>Me(n)?n.value=E:null)},{default:L(()=>[P(w,{name:"base"},{title:L(()=>[P(b,{icon:"ep:info-filled"}),ft(" \u5E38\u89C4")]),default:L(()=>[P(ak,{"id-edit-disabled":t.idEditDisabled,"business-object":I(o),type:I(r),model:t.model},null,8,["id-edit-disabled","business-object","type","model"])]),_:1}),I(r)==="Process"?(Y(),ut(w,{name:"condition",key:"message"},{title:L(()=>[P(b,{icon:"ep:comment"}),ft("\u6D88\u606F\u4E0E\u4FE1\u53F7")]),default:L(()=>[P(kk)]),_:1})):wt("",!0),I(a)?(Y(),ut(w,{name:"condition",key:"condition"},{title:L(()=>[P(b,{icon:"ep:promotion"}),ft("\u6D41\u8F6C\u6761\u4EF6")]),default:L(()=>[P(Sk,{"business-object":I(o),type:I(r)},null,8,["business-object","type"])]),_:1})):wt("",!0),I(c)?(Y(),ut(w,{name:"condition",key:"form"},{title:L(()=>[P(b,{icon:"ep:list"}),ft("\u8868\u5355")]),default:L(()=>[P(g,{id:I(i),type:I(r)},null,8,["id","type"])]),_:1})):wt("",!0),I(r).indexOf("Task")!==-1?(Y(),ut(w,{name:"task",key:"task"},{title:L(()=>[P(b,{icon:"ep:checked"}),ft("\u4EFB\u52A1\uFF08\u5BA1\u6279\u4EBA\uFF09")]),default:L(()=>[P(xk,{id:I(i),type:I(r)},null,8,["id","type"])]),_:1})):wt("",!0),I(r).indexOf("Task")!==-1?(Y(),ut(w,{name:"multiInstance",key:"multiInstance"},{title:L(()=>[P(b,{icon:"ep:help-filled"}),ft("\u591A\u5B9E\u4F8B\uFF08\u4F1A\u7B7E\u914D\u7F6E\uFF09")]),default:L(()=>[P(wk,{"business-object":I(o),type:I(r)},null,8,["business-object","type"])]),_:1})):wt("",!0),P(w,{name:"listeners",key:"listeners"},{title:L(()=>[P(b,{icon:"ep:bell-filled"}),ft("\u6267\u884C\u76D1\u542C\u5668")]),default:L(()=>[P(Bk,{id:I(i),type:I(r)},null,8,["id","type"])]),_:1}),I(r)==="UserTask"?(Y(),ut(w,{name:"taskListeners",key:"taskListeners"},{title:L(()=>[P(b,{icon:"ep:bell-filled"}),ft("\u4EFB\u52A1\u76D1\u542C\u5668")]),default:L(()=>[P(Gk,{id:I(i),type:I(r)},null,8,["id","type"])]),_:1})):wt("",!0),P(w,{name:"extensions",key:"extensions"},{title:L(()=>[P(b,{icon:"ep:circle-plus-filled"}),ft("\u6269\u5C55\u5C5E\u6027")]),default:L(()=>[P(Lk,{id:I(i),type:I(r)},null,8,["id","type"])]),_:1}),P(w,{name:"other",key:"other"},{title:L(()=>[P(b,{icon:"ep:promotion"}),ft("\u5176\u4ED6")]),default:L(()=>[P(pk,{id:I(i)},null,8,["id"])]),_:1})]),_:1},8,["modelValue"])],4)}}});Sl.install=function(t){t.component(Sl.name,Sl)};const Uk={class:"my-process-designer"},Hk={class:"my-process-designer__container"},Cl=ue({name:"MyProcessViewer",__name:"ProcessViewer",props:{value:{type:String,default:""},prefix:{type:String,default:"camunda"},activityData:{type:Array,default:()=>[]},processInstanceData:{type:Object,default:()=>{}},taskData:{type:Array,default:()=>[]}},emits:["destroy"],setup(t,{emit:e}){const n=t;Ka("configGlobal",n);const i=e;let r;const o=G(""),a=G([]),c=G(void 0),l=G([]),u=G(),p=G(null),h=G(null),v=async E=>{let S=`Process_${new Date().getTime()}`,D=`\u4E1A\u52A1\u6D41\u7A0B_${new Date().getTime()}`,s=E||t0(S,D,n.prefix);try{let{warnings:d}=await r.importXML(s);d&&d.length&&d.forEach(m=>console.warn(m)),await f(),r.get("canvas").zoom("fit-viewport","auto")}catch(d){console.error(d)}},f=async()=>{var C;const E=a.value;if(E.length===0)return;let S=r.get("canvas"),D=E.find(M=>!M.endTime),s=E[E.length-1],d=!1,m=[];(C=r.getDefinitions().rootElements[0].flowElements)==null||C.forEach(M=>{var R,j,T;let N=E.find(x=>x.key===M.id);if(N){if(M.$type==="bpmn:UserTask"){const x=l.value.find(V=>V.id===N.taskId);if(!x)return;if(d)return void m.push(M.id);if(S.addMarker(M.id,b(x.status)),x.status===1&&(d=!0),x.status!==2)return;const B=w(N);B==null||B.forEach(V=>{let H=E.find(q=>q.key===V.targetRef.id);H?S.addMarker(V.id,H.endTime?"highlight":"highlight-todo"):V.targetRef.$type==="bpmn:ExclusiveGateway"?(S.addMarker(V.id,N.endTime?"highlight":"highlight-todo"),S.addMarker(V.targetRef.id,N.endTime?"highlight":"highlight-todo")):V.targetRef.$type==="bpmn:EndEvent"&&(D||s.key!==M.id||(S.addMarker(V.id,"highlight"),S.addMarker(V.targetRef.id,"highlight")),N.endTime||(S.addMarker(V.id,"highlight-todo"),S.addMarker(V.targetRef.id,"highlight-todo")))})}else if(M.$type==="bpmn:ExclusiveGateway"){let x,B;S.addMarker(M.id,y(N)),(R=M.outgoing)==null||R.forEach(V=>{let H=E.find(q=>q.key===V.targetRef.id);H&&(B&&B.type!=="endEvent"||(x=V,B=H))}),x&&B&&S.addMarker(x.id,y(B))}else if(M.$type==="bpmn:ParallelGateway")S.addMarker(M.id,y(N)),(j=M.outgoing)==null||j.forEach(x=>{const B=E.find(V=>V.key===x.targetRef.id);B&&(S.addMarker(x.id,y(B)),S.addMarker(x.targetRef.id,y(B)))});else if(M.$type==="bpmn:StartEvent")S.addMarker(M.id,"highlight"),(T=M.outgoing)==null||T.forEach(x=>{E.find(B=>B.key===x.targetRef.id)&&(S.addMarker(x.id,"highlight"),S.addMarker(M.id,"highlight"))});else if(M.$type==="bpmn:EndEvent"){if(!c.value||c.value.status===1)return;S.addMarker(M.id,b(c.value.status))}else if(M.$type==="bpmn:ServiceTask"){if(N.startTime>0&&N.endTime===0&&S.addMarker(M.id,b(1)),N.endTime>0){S.addMarker(M.id,b(2));const x=w(N);x==null||x.forEach(B=>{S.addMarker(B.id,b(2))})}}else if(M.$type==="bpmn:SequenceFlow"){let x=E.find(B=>B.key===M.targetRef.id);x&&S.addMarker(M.id,y(x))}}}),xx(m)||(l.value=l.value.filter(M=>!m.includes(M.taskDefinitionKey)))},y=E=>E.endTime?"highlight":"highlight-todo",b=E=>E===1?"highlight-todo":E===2?"highlight":E===3?"highlight-reject":E===4?"highlight-cancel":E===5?"highlight-return":E===6||E===7||E===0?"highlight-todo":"",w=E=>{if(E.outgoing&&E.outgoing.length>0)return E.outgoing;const S=r.getDefinitions().rootElements[0].flowElements,D=[];return S.forEach(s=>{s.$type==="bpmn:SequenceFlow"&&s.sourceRef.id===E.key&&D.push(s)}),D},g=E=>{var D;E.value=E,!p.value&&(p.value={}),!h.value&&(h.value=r.get("overlays"));const S=a.value.find(s=>s.key===E.value.id);if(S&&!p.value[E.value.id]&&E.value.type!=="bpmn:Process"){let s=`<div class="element-overlays">
            <p>Elemet id: ${E.value.id}</p>
            <p>Elemet type: ${E.value.type}</p>
          </div>`;if(E.value.type==="bpmn:StartEvent"&&c.value)s=`<p>\u53D1\u8D77\u4EBA\uFF1A${c.value.startUser.nickname}</p>
                  <p>\u90E8\u95E8\uFF1A${c.value.startUser.deptName}</p>
                  <p>\u521B\u5EFA\u65F6\u95F4\uFF1A${Mr(c.value.createTime)}`;else if(E.value.type==="bpmn:UserTask"){let d=l.value.find(M=>M.id===S.taskId);if(!d)return;let m=Fl(So.BPM_TASK_STATUS),C="";m.forEach(M=>{M.value==d.status&&(C=M.label)}),s=`<p>\u5BA1\u6279\u4EBA\uFF1A${d.assigneeUser.nickname}</p>
                  <p>\u90E8\u95E8\uFF1A${d.assigneeUser.deptName}</p>
                  <p>\u7ED3\u679C\uFF1A${C}</p>
                  <p>\u521B\u5EFA\u65F6\u95F4\uFF1A${Mr(d.createTime)}</p>`,d.endTime&&(s+=`<p>\u7ED3\u675F\u65F6\u95F4\uFF1A${Mr(d.endTime)}</p>`),d.reason&&(s+=`<p>\u5BA1\u6279\u5EFA\u8BAE\uFF1A${d.reason}</p>`)}else if(E.value.type==="bpmn:ServiceTask"&&c.value)S.startTime>0&&(s=`<p>\u521B\u5EFA\u65F6\u95F4\uFF1A${Mr(S.startTime)}</p>`),S.endTime>0&&(s+=`<p>\u7ED3\u675F\u65F6\u95F4\uFF1A${Mr(S.endTime)}</p>`),console.log(s);else if(E.value.type==="bpmn:EndEvent"&&c.value){let d=Fl(So.BPM_TASK_STATUS),m="";d.forEach(C=>{C.value==c.value.status&&(m=C.label)}),s=`<p>\u7ED3\u679C\uFF1A${m}</p>`,c.value.endTime&&(s+=`<p>\u7ED3\u675F\u65F6\u95F4\uFF1A${Mr(c.value.endTime)}</p>`)}p.value[E.value.id]=(D=Nt(h.value))==null?void 0:D.add(E.value,{position:{left:0,bottom:0},html:`<div class="element-overlays">${s}</div>`})}},_=E=>{Nt(h.value).remove({element:E}),p.value[E.id]=null};return Sr(()=>{o.value=n.value,a.value=n.activityData,r||(r=new Wn({container:u.value,bpmnRenderer:{}})),v(o.value),(()=>{const E=r.get("eventBus");E.on("element.hover",function(S){let D=S?S.element:null;g(D)}),E.on("element.out",function(S){let D=S?S.element:null;_(D)})})()}),Cn(()=>{r&&r.destroy(),i("destroy",r),r=null}),ie(()=>n.value,E=>{o.value=E,v(o.value)}),ie(()=>n.activityData,E=>{a.value=E,v(o.value)}),ie(()=>n.processInstanceData,E=>{c.value=E,v(o.value)}),ie(()=>n.taskData,E=>{l.value=E,v(o.value)}),(E,S)=>(Y(),Pt("div",Uk,[Ot("div",Hk,[Ot("div",{class:"my-process-designer__canvas",style:{height:"760px"},ref_key:"bpmnCanvas",ref:u},null,512)])]))}});Cl.install=function(t){t.component(Cl.name,Cl)};export{Uc as P,wl as _,It as a,np as b,A as c,Ve as d,kv as e,Yo as f,ki as g,Uw as h,kt as i,Sl as j,Cl as k};
