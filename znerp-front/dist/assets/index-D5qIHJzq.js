import{d as G,z as W,h as X,r as i,e as Y,n as Z,O as $,o as s,c as N,f as e,w as t,a,P as ee,F as O,p as ae,Q as le,D as T,q as d,x as u,y,a5 as te,aw as oe,U as re,C as se,A as pe,B as ne,H as ie,I as ue,J as ce,K as de,L as me,M as fe}from"./index-CIfmhqRC.js";import{_ as ye}from"./index.vue_vue_type_script_setup_true_lang-DYHi04Tm.js";import{_ as ge}from"./DictTag.vue_vue_type_script_lang-CTpVFm77.js";import{_ as _e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{_ as ve}from"./index-2RHHZ-Zv.js";import{d as we}from"./formatTime-DFFN_xWx.js";import{h as xe}from"./tree-BMqZf9_I.js";import{d as Ce}from"./download-D5Lb_h0f.js";import{P as h}from"./index-C8586r3L.js";import{_ as ke}from"./ProductCategoryForm.vue_vue_type_script_setup_true_lang-BSgXHuw8.js";import"./index-CrBeVHKs.js";import"./color-BN7ZL7BD.js";import"./el-card-DyMugU68.js";import"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import"./el-tree-select-CYFGeiEt.js";import"./constants-A8BI3pz7.js";const be=G({name:"ErpProductCategory",__name:"index",setup(he){const _=W(),{t:z}=X(),v=i(!0),P=i([]),o=Y({name:void 0,status:void 0}),S=i(),w=i(!1),m=async()=>{v.value=!0;try{const p=await h.getProductCategoryList(o);P.value=xe(p,"id","parentId")}finally{v.value=!1}},x=()=>{o.pageNo=1,m()},A=()=>{S.value.resetFields(),x()},U=i(),V=(p,r)=>{U.value.open(p,r)},F=async()=>{try{await _.exportConfirm(),w.value=!0;const p=await h.exportProductCategory(o);Ce.excel(p,"\u4EA7\u54C1\u5206\u7C7B.xls")}catch{}finally{w.value=!1}},C=i(!0),k=i(!0),K=async()=>{k.value=!1,C.value=!C.value,await oe(),k.value=!0};return Z(()=>{m()}),(p,r)=>{const L=ve,q=re,b=se,D=pe,I=ne,f=ie,n=ue,R=ce,M=_e,c=de,B=ge,E=me,H=ye,g=$("hasPermi"),J=fe;return s(),N(O,null,[e(L,{title:"\u3010\u4EA7\u54C1\u3011\u4EA7\u54C1\u4FE1\u606F\u3001\u5206\u7C7B\u3001\u5355\u4F4D",url:"https://doc.iocoder.cn/erp/product/"}),e(M,null,{default:t(()=>[e(R,{class:"-mb-15px",model:a(o),ref_key:"queryFormRef",ref:S,inline:!0,"label-width":"68px"},{default:t(()=>[e(b,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:t(()=>[e(q,{modelValue:a(o).name,"onUpdate:modelValue":r[0]||(r[0]=l=>a(o).name=l),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:"",onKeyup:ee(x,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(b,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:t(()=>[e(I,{modelValue:a(o).status,"onUpdate:modelValue":r[1]||(r[1]=l=>a(o).status=l),placeholder:"\u8BF7\u9009\u62E9\u5F00\u542F\u72B6\u6001",clearable:"",class:"!w-240px"},{default:t(()=>[(s(!0),N(O,null,ae(a(le)(a(T).COMMON_STATUS),l=>(s(),d(D,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(n,{onClick:x},{default:t(()=>[e(f,{icon:"ep:search",class:"mr-5px"}),u(" \u641C\u7D22")]),_:1}),e(n,{onClick:A},{default:t(()=>[e(f,{icon:"ep:refresh",class:"mr-5px"}),u(" \u91CD\u7F6E")]),_:1}),y((s(),d(n,{type:"primary",plain:"",onClick:r[2]||(r[2]=l=>V("create"))},{default:t(()=>[e(f,{icon:"ep:plus",class:"mr-5px"}),u(" \u65B0\u589E ")]),_:1})),[[g,["erp:product-category:create"]]]),y((s(),d(n,{type:"success",plain:"",onClick:F,loading:a(w)},{default:t(()=>[e(f,{icon:"ep:download",class:"mr-5px"}),u(" \u5BFC\u51FA ")]),_:1},8,["loading"])),[[g,["erp:product-category:export"]]]),e(n,{type:"danger",plain:"",onClick:K},{default:t(()=>[e(f,{icon:"ep:sort",class:"mr-5px"}),u(" \u5C55\u5F00/\u6298\u53E0 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(M,null,{default:t(()=>[a(k)?y((s(),d(E,{key:0,data:a(P),stripe:!0,"show-overflow-tooltip":!0,"row-key":"id","default-expand-all":a(C)},{default:t(()=>[e(c,{label:"\u7F16\u7801",align:"center",prop:"code"}),e(c,{label:"\u540D\u79F0",align:"center",prop:"name"}),e(c,{label:"\u6392\u5E8F",align:"center",prop:"sort"}),e(c,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:t(l=>[e(B,{type:a(T).COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),e(c,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:a(we),width:"180px"},null,8,["formatter"]),e(c,{label:"\u64CD\u4F5C",align:"center"},{default:t(l=>[y((s(),d(n,{link:"",type:"primary",onClick:Q=>V("update",l.row.id)},{default:t(()=>[u(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[g,["erp:product-category:update"]]]),y((s(),d(n,{link:"",type:"danger",onClick:Q=>(async j=>{try{await _.delConfirm(),await h.deleteProductCategory(j),_.success(z("common.delSuccess")),await m()}catch{}})(l.row.id)},{default:t(()=>[u(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[g,["erp:product-category:delete"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[J,a(v)]]):te("",!0),e(H,{total:p.total,page:a(o).pageNo,"onUpdate:page":r[3]||(r[3]=l=>a(o).pageNo=l),limit:a(o).pageSize,"onUpdate:limit":r[4]||(r[4]=l=>a(o).pageSize=l),onPagination:m},null,8,["total","page","limit"])]),_:1}),e(ke,{ref_key:"formRef",ref:U,onSuccess:m},null,512)],64)}}});export{be as default};
