import{d as S,h as z,z as I,r as m,e as J,o as V,q as k,w as t,f as d,a,x as b,y as j,k as D,U as M,C as R,J as A,I as B,M as E}from"./index-CIfmhqRC.js";import{_ as G}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{g as H,e as K,i as L}from"./property-DPsKsB2C.js";const N=S({name:"ProductPropertyForm",__name:"PropertyForm",emits:["success"],setup(O,{expose:w,emit:x}){const{t:n}=z(),c=I(),r=m(!1),p=m(""),u=m(!1),f=m(""),s=m({id:void 0,name:""}),h=J({name:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),i=m();w({open:async(l,e)=>{if(r.value=!0,p.value=n("action."+l),f.value=l,C(),e){u.value=!0;try{s.value=await H(e)}finally{u.value=!1}}}});const U=x,g=async()=>{if(i&&await i.value.validate()){u.value=!0;try{const l=s.value;f.value==="create"?(await K(l),c.success(n("common.createSuccess"))):(await L(l),c.success(n("common.updateSuccess"))),r.value=!1,U("success")}finally{u.value=!1}}},C=()=>{var l;s.value={id:void 0,name:""},(l=i.value)==null||l.resetFields()};return(l,e)=>{const v=M,y=R,F=A,_=B,P=G,q=E;return V(),k(P,{modelValue:a(r),"onUpdate:modelValue":e[3]||(e[3]=o=>D(r)?r.value=o:null),title:a(p)},{footer:t(()=>[d(_,{disabled:a(u),type:"primary",onClick:g},{default:t(()=>[b("\u786E \u5B9A")]),_:1},8,["disabled"]),d(_,{onClick:e[2]||(e[2]=o=>r.value=!1)},{default:t(()=>[b("\u53D6 \u6D88")]),_:1})]),default:t(()=>[j((V(),k(F,{ref_key:"formRef",ref:i,model:a(s),rules:a(h),"label-width":"80px"},{default:t(()=>[d(y,{label:"\u540D\u79F0",prop:"name"},{default:t(()=>[d(v,{modelValue:a(s).name,"onUpdate:modelValue":e[0]||(e[0]=o=>a(s).name=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),d(y,{label:"\u5907\u6CE8",prop:"remark"},{default:t(()=>[d(v,{modelValue:a(s).remark,"onUpdate:modelValue":e[1]||(e[1]=o=>a(s).remark=o),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[q,a(u)]])]),_:1},8,["modelValue","title"])}}});export{N as _};
