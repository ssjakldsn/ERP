import{d as L,u as T,r as t,e as V,n as Y,o as k,q as U,w as n,f as l,g as j,a as B,dY as F,x as G,a5 as J,U as K,H as $,I as Q,l as W,m as X,e2 as Z,b5 as aa,_ as ea}from"./index-CIfmhqRC.js";import la from"./RoleHeader-C3mJeNTM.js";import I from"./RoleList-CB48LlBH.js";import{_ as ta,C as v}from"./ChatRoleForm.vue_vue_type_script_setup_true_lang-BLlgdX66.js";import sa from"./RoleCategoryList-DQ1BXv6f.js";import{C as oa}from"./index-DkeRi2NZ.js";import"./el-card-DyMugU68.js";import"./el-dropdown-item-CvgBZuG7.js";import"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import"./constants-A8BI3pz7.js";import"./index-DvHknbTX.js";const na={class:"search-container"},ia=ea(L({__name:"RoleRepository",setup(ua){const M=T(),r=t(!1),i=t("my-role"),c=t(""),g=V({pageNo:1,pageSize:50}),p=t([]),f=V({pageNo:1,pageSize:50}),m=t([]),y=t("\u5168\u90E8"),C=t([]),P=async a=>{i.value=a.paneName+"",await o()},_=async a=>{const e={...g,name:c.value,publicStatus:!1},{list:s}=await v.getMyPage(e);a?p.value.push.apply(p.value,s):p.value=s},h=async a=>{const e={...f,category:y.value==="\u5168\u90E8"?"":y.value,name:c.value,publicStatus:!0},{total:s,list:d}=await v.getMyPage(e);a?m.value.push.apply(m.value,d):m.value=d},o=async()=>{i.value==="my-role"?(g.pageNo=1,await _()):(f.pageNo=1,await h())},z=async a=>{y.value=a,await o()},w=t(),D=async()=>{w.value.open("my-create",null,"\u6DFB\u52A0\u89D2\u8272")},b=async a=>{w.value.open("my-update",a.id,"\u7F16\u8F91\u89D2\u8272")},R=async a=>{await o()},O=async a=>{await v.deleteMy(a.id),await o()},x=async a=>{try{r.value=!0,a==="public"?(f.pageNo++,await h(!0)):(g.pageNo++,await _(!0))}finally{r.value=!1}},N=async a=>{const e={roleId:a.id},s=await oa.createChatConversationMy(e);await M.push({name:"AiChat",query:{conversationId:s}})};return Y(async()=>{await(async()=>{C.value=["\u5168\u90E8",...await v.getCategoryList()]})(),await o()}),(a,e)=>{const s=K,d=$,q=Q,S=W,E=X,A=Z,H=aa;return k(),U(H,{class:"role-container"},{default:n(()=>[l(ta,{ref_key:"formRef",ref:w,onSuccess:R},null,512),l(la,{title:"\u89D2\u8272\u4ED3\u5E93",class:"relative"}),l(A,{class:"role-main"},{default:n(()=>[j("div",na,[l(s,{loading:r.value,modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=u=>c.value=u),class:"search-input",size:"default",placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u7684\u5185\u5BB9","suffix-icon":B(F),onChange:o},null,8,["loading","modelValue","suffix-icon"]),i.value=="my-role"?(k(),U(q,{key:0,type:"primary",onClick:D,class:"ml-20px"},{default:n(()=>[l(d,{icon:"ep:user",style:{"margin-right":"5px"}}),G(" \u6DFB\u52A0\u89D2\u8272 ")]),_:1})):J("",!0)]),l(E,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=u=>i.value=u),class:"tabs",onTabClick:P},{default:n(()=>[l(S,{class:"role-pane",label:"\u6211\u7684\u89D2\u8272",name:"my-role"},{default:n(()=>[l(I,{loading:r.value,"role-list":p.value,"show-more":!0,onOnDelete:O,onOnEdit:b,onOnUse:N,onOnPage:e[1]||(e[1]=u=>x("my")),class:"mt-20px"},null,8,["loading","role-list"])]),_:1}),l(S,{label:"\u516C\u5171\u89D2\u8272",name:"public-role"},{default:n(()=>[l(sa,{class:"role-category-list","category-list":C.value,active:y.value,onOnCategoryClick:z},null,8,["category-list","active"]),l(I,{"role-list":m.value,onOnDelete:O,onOnEdit:b,onOnUse:N,onOnPage:e[2]||(e[2]=u=>x("public")),class:"mt-20px",loading:""},null,8,["role-list"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-3a7f9148"]]);export{ia as default};
