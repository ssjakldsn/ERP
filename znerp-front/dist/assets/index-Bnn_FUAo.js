import{d as H,z as J,h as L,r as m,e as M,n as O,O as T,o as s,c as j,f as e,w as a,a as r,P as A,x as n,y as u,q as f,F as B,U as D,C as W,H as X,I as $,J as E,K as G,L as N,M as Q}from"./index-CIfmhqRC.js";import{_ as Y}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{_ as Z}from"./index-2RHHZ-Zv.js";import{d as ee}from"./formatTime-DFFN_xWx.js";import{g as ae,d as le}from"./index-BxLwD91R.js";import{_ as re}from"./ProductCategoryForm.vue_vue_type_script_setup_true_lang-DVx6V-gQ.js";import{h as te}from"./tree-BMqZf9_I.js";import"./el-card-DyMugU68.js";import"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";const oe=H({name:"CrmProductCategory",__name:"index",setup(se){const x=J(),{t:F}=L(),y=m(!0),C=m([]),c=M({name:null}),g=m(),d=async()=>{y.value=!0;try{const i=await ae(c);C.value=te(i,"id","parentId")}finally{y.value=!1}},_=()=>{d()},K=()=>{g.value.resetFields(),_()},h=m(),b=(i,l)=>{h.value.open(i,l)};return O(()=>{d()}),(i,l)=>{const P=Z,R=D,v=W,k=X,t=$,q=E,V=Y,p=G,I=N,w=T("hasPermi"),S=Q;return s(),j(B,null,[e(P,{title:"\u3010\u4EA7\u54C1\u3011\u4EA7\u54C1\u7BA1\u7406\u3001\u4EA7\u54C1\u5206\u7C7B",url:"https://doc.iocoder.cn/crm/product/"}),e(V,null,{default:a(()=>[e(q,{class:"-mb-15px",model:r(c),ref_key:"queryFormRef",ref:g,inline:!0,"label-width":"68px"},{default:a(()=>[e(v,{label:"\u540D\u79F0",prop:"name"},{default:a(()=>[e(R,{modelValue:r(c).name,"onUpdate:modelValue":l[0]||(l[0]=o=>r(c).name=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:"",onKeyup:A(_,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(v,null,{default:a(()=>[e(t,{onClick:_},{default:a(()=>[e(k,{icon:"ep:search",class:"mr-5px"}),n(" \u641C\u7D22")]),_:1}),e(t,{onClick:K},{default:a(()=>[e(k,{icon:"ep:refresh",class:"mr-5px"}),n(" \u91CD\u7F6E")]),_:1}),u((s(),f(t,{type:"primary",plain:"",onClick:l[1]||(l[1]=o=>b("create"))},{default:a(()=>[e(k,{icon:"ep:plus",class:"mr-5px"}),n(" \u65B0\u589E ")]),_:1})),[[w,["crm:product-category:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(V,null,{default:a(()=>[u((s(),f(I,{data:r(C),"row-key":"id","default-expand-all":""},{default:a(()=>[e(p,{label:"\u5206\u7C7B\u7F16\u53F7",align:"center",prop:"id"}),e(p,{label:"\u5206\u7C7B\u540D\u79F0",align:"center",prop:"name"}),e(p,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:r(ee),width:"180px"},null,8,["formatter"]),e(p,{label:"\u64CD\u4F5C",align:"center"},{default:a(o=>[u((s(),f(t,{link:"",type:"primary",onClick:U=>b("update",o.row.id)},{default:a(()=>[n(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[w,["crm:product-category:update"]]]),u((s(),f(t,{link:"",type:"danger",onClick:U=>(async z=>{try{await x.delConfirm(),await le(z),x.success(F("common.delSuccess")),await d()}catch{}})(o.row.id)},{default:a(()=>[n(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[w,["crm:product-category:delete"]]])]),_:1})]),_:1},8,["data"])),[[S,r(y)]])]),_:1}),e(re,{ref_key:"formRef",ref:h,onSuccess:d},null,512)],64)}}});export{oe as default};
