import{d as F,z as j,h as q,r as m,e as M,O as U,o as i,c as r,f as a,w as s,a as e,y as d,F as w,p as H,q as J,a4 as O,C as R,J as A,H as B,I as Q,j as W,M as $,_ as D}from"./index-CIfmhqRC.js";import{_ as E}from"./index.vue_vue_type_script_setup_true_lang-DYHi04Tm.js";import{_ as G}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{_ as K}from"./index-2RHHZ-Zv.js";import{g as L,d as T}from"./index-DO3zXEBC.js";import V from"./main-q6_374v6.js";import{_ as X}from"./main.vue_vue_type_script_setup_true_lang-Ds9hfoYc.js";import"./index-CrBeVHKs.js";import"./el-card-DyMugU68.js";import"./el-image-DLpquQe6.js";import"./index-Dsi5T0R-.js";const Y={class:"waterfall"},Z=D(F({name:"MpFreePublish",__name:"index",setup(aa){const u=j(),{t:I}=q(),c=m(!0),f=m(0),_=m([]),t=M({pageNo:1,pageSize:10,accountId:-1}),y=o=>{t.accountId=o,t.pageNo=1,p()},p=async()=>{try{c.value=!0;const o=await L(t);_.value=o.list,f.value=o.total}finally{c.value=!1}};return(o,n)=>{const h=K,v=R,b=A,g=G,z=B,C=Q,x=W,N=E,P=U("hasPermi"),S=$;return i(),r(w,null,[a(h,{title:"\u516C\u4F17\u53F7\u56FE\u6587",url:"https://doc.iocoder.cn/mp/article/"}),a(g,null,{default:s(()=>[a(b,{class:"-mb-15px",model:e(t),ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:s(()=>[a(v,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:s(()=>[a(e(X),{onChange:y})]),_:1})]),_:1},8,["model"])]),_:1}),a(g,null,{default:s(()=>[d((i(),r("div",Y,[(i(!0),r(w,null,H(e(_),l=>d((i(),r("div",{class:"waterfall-item",key:l.articleId},[a(e(V),{articles:l.content.newsItem},null,8,["articles"]),a(x,{justify:"center",class:"ope-row"},{default:s(()=>[d((i(),J(C,{type:"danger",circle:"",onClick:ea=>(async k=>{try{await u.delConfirm("\u5220\u9664\u540E\u7528\u6237\u5C06\u65E0\u6CD5\u8BBF\u95EE\u6B64\u9875\u9762\uFF0C\u786E\u5B9A\u5220\u9664\uFF1F"),await T(t.accountId,k.articleId),u.success(I("common.delSuccess")),await p()}catch{}})(l)},{default:s(()=>[a(z,{icon:"ep:delete"})]),_:2},1032,["onClick"])),[[P,["mp:free-publish:delete"]]])]),_:2},1024)])),[[O,l.content&&l.content.newsItem]])),128))])),[[S,e(c)]]),a(N,{total:e(f),page:e(t).pageNo,"onUpdate:page":n[0]||(n[0]=l=>e(t).pageNo=l),limit:e(t).pageSize,"onUpdate:limit":n[1]||(n[1]=l=>e(t).pageSize=l),onPagination:p},null,8,["total","page","limit"])]),_:1})],64)}}}),[["__scopeId","data-v-ce8a5ece"]]);export{Z as default};
