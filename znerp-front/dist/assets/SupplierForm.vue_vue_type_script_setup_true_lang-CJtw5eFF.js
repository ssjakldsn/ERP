import{d as L,h as O,z as j,r as i,e as z,o as c,q as V,w as l,f as e,a,x as b,y as B,c as D,F as I,p as J,Q,D as R,t as G,k as H,U as K,C as W,E as X,ak as Y,al as Z,cc as $,j as ee,J as le,I as ae,M as oe}from"./index-CIfmhqRC.js";import{_ as de}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{S as _}from"./index-DDwo_T5x.js";import{C as ue}from"./constants-A8BI3pz7.js";const te=L({name:"SupplierForm",__name:"SupplierForm",emits:["success"],setup(se,{expose:A,emit:N}){const{t:f}=O(),k=j(),p=i(!1),h=i(""),m=i(!1),x=i(""),u=i({id:void 0,name:void 0,contact:void 0,mobile:void 0,telephone:void 0,email:void 0,fax:void 0,remark:void 0,status:void 0,sort:void 0,taxNo:void 0,taxPercent:void 0,bankName:void 0,bankAccount:void 0,bankAddress:void 0}),g=z({name:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u5F00\u542F\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),v=i();A({open:async(r,o)=>{if(p.value=!0,h.value=f("action."+r),x.value=r,C(),o){m.value=!0;try{u.value=await _.getSupplier(o)}finally{m.value=!1}}}});const S=N,w=async()=>{await v.value.validate(),m.value=!0;try{const r=u.value;x.value==="create"?(await _.createSupplier(r),k.success(f("common.createSuccess"))):(await _.updateSupplier(r),k.success(f("common.updateSuccess"))),p.value=!1,S("success")}finally{m.value=!1}},C=()=>{var r;u.value={id:void 0,name:void 0,contact:void 0,mobile:void 0,telephone:void 0,email:void 0,fax:void 0,remark:void 0,status:ue.ENABLE,sort:void 0,taxNo:void 0,taxPercent:void 0,bankName:void 0,bankAccount:void 0,bankAddress:void 0},(r=v.value)==null||r.resetFields()};return(r,o)=>{const n=K,t=W,s=X,P=Y,q=Z,U=$,E=ee,F=le,y=ae,M=de,T=oe;return c(),V(M,{title:a(h),modelValue:a(p),"onUpdate:modelValue":o[15]||(o[15]=d=>H(p)?p.value=d:null)},{footer:l(()=>[e(y,{onClick:w,type:"primary",disabled:a(m)},{default:l(()=>[b("\u786E \u5B9A")]),_:1},8,["disabled"]),e(y,{onClick:o[14]||(o[14]=d=>p.value=!1)},{default:l(()=>[b("\u53D6 \u6D88")]),_:1})]),default:l(()=>[B((c(),V(F,{ref_key:"formRef",ref:v,model:a(u),rules:a(g),"label-width":"100px"},{default:l(()=>[e(E,{gutter:20},{default:l(()=>[e(s,{span:12},{default:l(()=>[e(t,{label:"\u540D\u79F0",prop:"name"},{default:l(()=>[e(n,{modelValue:a(u).name,"onUpdate:modelValue":o[0]||(o[0]=d=>a(u).name=d),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(t,{label:"\u8054\u7CFB\u4EBA",prop:"contact"},{default:l(()=>[e(n,{modelValue:a(u).contact,"onUpdate:modelValue":o[1]||(o[1]=d=>a(u).contact=d),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(t,{label:"\u624B\u673A\u53F7\u7801",prop:"mobile"},{default:l(()=>[e(n,{modelValue:a(u).mobile,"onUpdate:modelValue":o[2]||(o[2]=d=>a(u).mobile=d),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(t,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"telephone"},{default:l(()=>[e(n,{modelValue:a(u).telephone,"onUpdate:modelValue":o[3]||(o[3]=d=>a(u).telephone=d),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(t,{label:"\u7535\u5B50\u90AE\u7BB1",prop:"email"},{default:l(()=>[e(n,{modelValue:a(u).email,"onUpdate:modelValue":o[4]||(o[4]=d=>a(u).email=d),placeholder:"\u8BF7\u8F93\u5165\u7535\u5B50\u90AE\u7BB1"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(t,{label:"\u4F20\u771F",prop:"fax"},{default:l(()=>[e(n,{modelValue:a(u).fax,"onUpdate:modelValue":o[5]||(o[5]=d=>a(u).fax=d),placeholder:"\u8BF7\u8F93\u5165\u4F20\u771F"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(t,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:l(()=>[e(q,{modelValue:a(u).status,"onUpdate:modelValue":o[6]||(o[6]=d=>a(u).status=d)},{default:l(()=>[(c(!0),D(I,null,J(a(Q)(a(R).COMMON_STATUS),d=>(c(),V(P,{key:d.value,value:d.value},{default:l(()=>[b(G(d.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(t,{label:"\u6392\u5E8F",prop:"sort"},{default:l(()=>[e(U,{modelValue:a(u).sort,"onUpdate:modelValue":o[7]||(o[7]=d=>a(u).sort=d),placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",class:"!w-1/1",precision:0},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(t,{label:"\u7EB3\u7A0E\u4EBA\u8BC6\u522B\u53F7",prop:"taxNo"},{default:l(()=>[e(n,{modelValue:a(u).taxNo,"onUpdate:modelValue":o[8]||(o[8]=d=>a(u).taxNo=d),placeholder:"\u8BF7\u8F93\u5165\u7EB3\u7A0E\u4EBA\u8BC6\u522B\u53F7"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(t,{label:"\u7A0E\u7387(%)",prop:"taxPercent"},{default:l(()=>[e(U,{modelValue:a(u).taxPercent,"onUpdate:modelValue":o[9]||(o[9]=d=>a(u).taxPercent=d),min:0,precision:2,placeholder:"\u8BF7\u8F93\u5165\u7A0E\u7387",class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(t,{label:"\u5F00\u6237\u884C",prop:"bankName"},{default:l(()=>[e(n,{modelValue:a(u).bankName,"onUpdate:modelValue":o[10]||(o[10]=d=>a(u).bankName=d),placeholder:"\u8BF7\u8F93\u5165\u5F00\u6237\u884C"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(t,{label:"\u5F00\u6237\u8D26\u53F7",prop:"bankAccount"},{default:l(()=>[e(n,{modelValue:a(u).bankAccount,"onUpdate:modelValue":o[11]||(o[11]=d=>a(u).bankAccount=d),placeholder:"\u8BF7\u8F93\u5165\u5F00\u6237\u8D26\u53F7"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(t,{label:"\u5F00\u6237\u5730\u5740",prop:"bankAddress"},{default:l(()=>[e(n,{modelValue:a(u).bankAddress,"onUpdate:modelValue":o[12]||(o[12]=d=>a(u).bankAddress=d),placeholder:"\u8BF7\u8F93\u5165\u5F00\u6237\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:24},{default:l(()=>[e(t,{label:"\u5907\u6CE8",prop:"remark"},{default:l(()=>[e(n,{type:"textarea",modelValue:a(u).remark,"onUpdate:modelValue":o[13]||(o[13]=d=>a(u).remark=d),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[T,a(m)]])]),_:1},8,["title","modelValue"])}}});export{te as _};
