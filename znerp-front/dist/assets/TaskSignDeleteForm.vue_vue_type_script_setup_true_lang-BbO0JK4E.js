import{d as J,r as o,o as m,q as c,w as l,f as t,x as p,a,y as K,c as j,p as M,t as v,F as R,k as A,z as B,ay as E,aK as G,al as H,C as L,U as O,J as P,I as Q,M as W}from"./index-CIfmhqRC.js";import{_ as X}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{e as Y,f as Z}from"./index-C9Urw_yh.js";const $=J({name:"TaskSignDeleteForm",__name:"TaskSignDeleteForm",emits:["success"],setup(ee,{expose:b,emit:h}){const _=B(),u=o(!1),n=o(!1),r=o({id:"",reason:""}),x=o({id:[{required:!0,message:"\u5FC5\u987B\u9009\u62E9\u51CF\u7B7E\u4EFB\u52A1",trigger:"change"}],reason:[{required:!0,message:"\u51CF\u7B7E\u7406\u7531\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),i=o(),f=o([]);b({open:async d=>{if(f.value=await Y(d),E(f.value))return _.warning("\u5F53\u524D\u6CA1\u6709\u53EF\u51CF\u7B7E\u7684\u4EFB\u52A1"),!1;u.value=!0,C()}});const F=h,q=async()=>{if(i&&await i.value.validate()){n.value=!0;try{await Z(r.value),_.success("\u51CF\u7B7E\u6210\u529F"),u.value=!1,F("success")}finally{n.value=!1}}},C=()=>{var d;r.value={id:"",reason:""},(d=i.value)==null||d.resetFields()};return(d,s)=>{const D=G,I=H,g=L,N=O,S=P,y=Q,T=X,z=W;return m(),c(T,{modelValue:a(u),"onUpdate:modelValue":s[3]||(s[3]=e=>A(u)?u.value=e:null),title:"\u51CF\u7B7E",width:"500"},{footer:l(()=>[t(y,{disabled:a(n),type:"primary",onClick:q},{default:l(()=>[p("\u786E \u5B9A")]),_:1},8,["disabled"]),t(y,{onClick:s[2]||(s[2]=e=>u.value=!1)},{default:l(()=>[p("\u53D6 \u6D88")]),_:1})]),default:l(()=>[K((m(),c(S,{ref_key:"formRef",ref:i,model:a(r),rules:a(x),"label-width":"110px"},{default:l(()=>[t(g,{label:"\u51CF\u7B7E\u4EFB\u52A1",prop:"id"},{default:l(()=>[t(I,{modelValue:a(r).id,"onUpdate:modelValue":s[0]||(s[0]=e=>a(r).id=e)},{default:l(()=>[(m(!0),j(R,null,M(a(f),e=>(m(),c(D,{key:e.id,value:e.id},{default:l(()=>{var k,w,V,U;return[p(v(e.name)+" ("+v(((k=e.assigneeUser)==null?void 0:k.deptName)||((w=e.ownerUser)==null?void 0:w.deptName))+" - "+v(((V=e.assigneeUser)==null?void 0:V.nickname)||((U=e.ownerUser)==null?void 0:U.nickname))+") ",1)]}),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(g,{label:"\u51CF\u7B7E\u7406\u7531",prop:"reason"},{default:l(()=>[t(N,{modelValue:a(r).reason,"onUpdate:modelValue":s[1]||(s[1]=e=>a(r).reason=e),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u51CF\u7B7E\u7406\u7531"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[z,a(n)]])]),_:1},8,["modelValue"])}}});export{$ as _};
