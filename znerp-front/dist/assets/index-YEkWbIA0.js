import{d as q,z as B,h as J,u as K,r as _,e as Q,n as j,O as X,o as n,c as h,f as l,w as t,a,F as I,p as E,q as i,Q as Z,D as u,dS as $,x as m,y as g,g as ee,t as le,A as ae,B as te,C as re,G as oe,H as pe,I as ne,J as ie,K as ue,L as de,M as se}from"./index-CIfmhqRC.js";import{_ as ce}from"./index.vue_vue_type_script_setup_true_lang-DYHi04Tm.js";import{_ as me}from"./DictTag.vue_vue_type_script_lang-CTpVFm77.js";import{_ as fe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{d as _e}from"./formatTime-DFFN_xWx.js";import{W as P}from"./index-BCtRIZsN.js";import{g as ge}from"./index-QrlE36WK.js";import"./index-CrBeVHKs.js";import"./color-BN7ZL7BD.js";import"./el-card-DyMugU68.js";import"./fetch-D5K_4anA.js";const we=q({name:"AiWriteManager",__name:"index",setup(ye){const V=B(),{t:U}=J(),O=K(),x=_(!0),R=_([]),W=_(0),r=Q({pageNo:1,pageSize:10,userId:void 0,type:void 0,platform:void 0,createTime:void 0}),M=_(),T=_([]),w=async()=>{x.value=!0;try{const d=await P.getWritePage(r);R.value=d.list,W.value=d.total}finally{x.value=!1}},F=()=>{r.pageNo=1,w()},Y=()=>{M.value.resetFields(),F()},L=(d,o)=>{d==="create"&&O.push("/ai/write")};return j(async()=>{w(),T.value=await ge()}),(d,o)=>{const k=ae,A=te,f=re,D=oe,y=pe,s=ne,S=ie,N=fe,p=ue,c=me,z=de,G=ce,v=X("hasPermi"),H=se;return n(),h(I,null,[l(N,null,{default:t(()=>[l(S,{class:"-mb-15px",model:a(r),ref_key:"queryFormRef",ref:M,inline:!0,"label-width":"68px"},{default:t(()=>[l(f,{label:"\u7528\u6237\u7F16\u53F7",prop:"userId"},{default:t(()=>[l(A,{modelValue:a(r).userId,"onUpdate:modelValue":o[0]||(o[0]=e=>a(r).userId=e),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u7F16\u53F7",class:"!w-240px"},{default:t(()=>[(n(!0),h(I,null,E(a(T),e=>(n(),i(k,{key:e.id,label:e.nickname,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"\u5199\u4F5C\u7C7B\u578B",prop:"type"},{default:t(()=>[l(A,{modelValue:a(r).type,"onUpdate:modelValue":o[1]||(o[1]=e=>a(r).type=e),placeholder:"\u8BF7\u9009\u62E9\u5199\u4F5C\u7C7B\u578B",clearable:"",class:"!w-240px"},{default:t(()=>[(n(!0),h(I,null,E(a(Z)(a(u).AI_WRITE_TYPE),e=>(n(),i(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"\u5E73\u53F0",prop:"platform"},{default:t(()=>[l(A,{modelValue:a(r).platform,"onUpdate:modelValue":o[2]||(o[2]=e=>a(r).platform=e),placeholder:"\u8BF7\u9009\u62E9\u5E73\u53F0",clearable:"",class:"!w-240px"},{default:t(()=>[(n(!0),h(I,null,E(a($)(a(u).AI_PLATFORM),e=>(n(),i(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:t(()=>[l(D,{modelValue:a(r).createTime,"onUpdate:modelValue":o[3]||(o[3]=e=>a(r).createTime=e),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),l(f,null,{default:t(()=>[l(s,{onClick:F},{default:t(()=>[l(y,{icon:"ep:search",class:"mr-5px"}),m(" \u641C\u7D22")]),_:1}),l(s,{onClick:Y},{default:t(()=>[l(y,{icon:"ep:refresh",class:"mr-5px"}),m(" \u91CD\u7F6E")]),_:1}),g((n(),i(s,{type:"primary",plain:"",onClick:o[4]||(o[4]=e=>L("create"))},{default:t(()=>[l(y,{icon:"ep:plus",class:"mr-5px"}),m(" \u65B0\u589E ")]),_:1})),[[v,["ai:write:create"]]]),g((n(),i(s,{type:"success",plain:"",onClick:d.handleExport,loading:d.exportLoading},{default:t(()=>[l(y,{icon:"ep:download",class:"mr-5px"}),m(" \u5BFC\u51FA ")]),_:1},8,["onClick","loading"])),[[v,["ai:write:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),l(N,null,{default:t(()=>[g((n(),i(z,{data:a(R),stripe:!0,"show-overflow-tooltip":!0},{default:t(()=>[l(p,{label:"\u7F16\u53F7",align:"center",prop:"id",width:"120",fixed:"left"}),l(p,{label:"\u7528\u6237",align:"center",prop:"userId",width:"180"},{default:t(e=>{var b;return[ee("span",null,le((b=a(T).find(C=>C.id===e.row.userId))==null?void 0:b.nickname),1)]}),_:1}),l(p,{label:"\u5199\u4F5C\u7C7B\u578B",align:"center",prop:"type"},{default:t(e=>[l(c,{type:a(u).AI_WRITE_TYPE,value:e.row.type},null,8,["type","value"])]),_:1}),l(p,{label:"\u5E73\u53F0",align:"center",prop:"platform",width:"120"},{default:t(e=>[l(c,{type:a(u).AI_PLATFORM,value:e.row.platform},null,8,["type","value"])]),_:1}),l(p,{label:"\u6A21\u578B",align:"center",prop:"model",width:"180"}),l(p,{label:"\u751F\u6210\u5185\u5BB9\u63D0\u793A",align:"center",prop:"prompt",width:"180","show-overflow-tooltip":""}),l(p,{label:"\u751F\u6210\u7684\u5185\u5BB9",align:"center",prop:"generatedContent",width:"180"}),l(p,{label:"\u539F\u6587",align:"center",prop:"originalContent",width:"180"}),l(p,{label:"\u957F\u5EA6",align:"center",prop:"length"},{default:t(e=>[l(c,{type:a(u).AI_WRITE_LENGTH,value:e.row.length},null,8,["type","value"])]),_:1}),l(p,{label:"\u683C\u5F0F",align:"center",prop:"format"},{default:t(e=>[l(c,{type:a(u).AI_WRITE_FORMAT,value:e.row.format},null,8,["type","value"])]),_:1}),l(p,{label:"\u8BED\u6C14",align:"center",prop:"tone"},{default:t(e=>[l(c,{type:a(u).AI_WRITE_TONE,value:e.row.tone},null,8,["type","value"])]),_:1}),l(p,{label:"\u8BED\u8A00",align:"center",prop:"language"},{default:t(e=>[l(c,{type:a(u).AI_WRITE_LANGUAGE,value:e.row.language},null,8,["type","value"])]),_:1}),l(p,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:a(_e),width:"180px"},null,8,["formatter"]),l(p,{label:"\u9519\u8BEF\u4FE1\u606F",align:"center",prop:"errorMessage"}),l(p,{label:"\u64CD\u4F5C",align:"center"},{default:t(e=>[g((n(),i(s,{link:"",type:"primary",onClick:b=>L("update",e.row.id)},{default:t(()=>[m(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[v,["ai:write:update"]]]),g((n(),i(s,{link:"",type:"danger",onClick:b=>(async C=>{try{await V.delConfirm(),await P.deleteWrite(C),V.success(U("common.delSuccess")),await w()}catch{}})(e.row.id)},{default:t(()=>[m(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[v,["ai:write:delete"]]])]),_:1})]),_:1},8,["data"])),[[H,a(x)]]),l(G,{total:a(W),page:a(r).pageNo,"onUpdate:page":o[5]||(o[5]=e=>a(r).pageNo=e),limit:a(r).pageSize,"onUpdate:limit":o[6]||(o[6]=e=>a(r).pageSize=e),onPagination:w},null,8,["total","page","limit"])]),_:1})],64)}}});export{we as default};
