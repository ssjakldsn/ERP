import{d as E,z as H,h as I,r as u,e as J,n as M,o as d,c as T,f as a,w as e,a as s,P as j,x as o,y as A,q as w,t as B,F as D,U as G,C as O,H as W,I as $,J as Q,K as X,av as Y,L as aa,M as ea}from"./index-CIfmhqRC.js";import{_ as ta}from"./index.vue_vue_type_script_setup_true_lang-DYHi04Tm.js";import{_ as la}from"./ContentWrap.vue_vue_type_script_setup_true_lang-sm5dIhPQ.js";import{Z as C}from"./index-H3f_2XHj.js";import{d as ia}from"./formatTime-DFFN_xWx.js";import{_ as sa}from"./LogisticsForm.vue_vue_type_script_setup_true_lang-qvaRY2bP.js";import"./index-CrBeVHKs.js";import"./el-card-DyMugU68.js";import"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";const oa=E({name:"ZnErpLogistics",__name:"index",setup(na){const m=H(),{t:L}=I(),f=u(!0),h=u([]),v=u(0),b=u(),i=J({pageNo:1,pageSize:10,name:void 0}),p=async()=>{f.value=!0;let n={pageNo:i.pageNo,pageSize:i.pageSize,name:i.name};try{const t=await C.logisticsPage(n);h.value=t.list,v.value=t.total}finally{f.value=!1}},g=()=>{i.pageNo=1,p()},F=()=>{b.value.resetFields(),g()},x=u(),z=(n,t)=>{x.value.open(n,t)},S=async(n,t)=>{try{let y={id:t,status:n!=="active"};await C.logisticsUpdate(y),m.success(n==="active"?"\u542F\u7528\u6210\u529F\uFF01":"\u5DF2\u7981\u7528\uFF01"),await p()}catch{}};return M(async()=>{await p()}),(n,t)=>{const y=G,N=O,_=W,r=$,P=Q,U=la,c=X,V=Y,q=aa,K=ta,R=ea;return d(),T(D,null,[a(U,null,{default:e(()=>[a(P,{class:"-mb-15px",model:s(i),ref_key:"queryFormRef",ref:b,inline:!0,"label-width":"88px"},{default:e(()=>[a(N,{label:"\u7269\u6D41\u540D\u79F0",prop:"name"},{default:e(()=>[a(y,{modelValue:s(i).name,"onUpdate:modelValue":t[0]||(t[0]=l=>s(i).name=l),placeholder:"\u8BF7\u8F93\u5165\u7269\u6D41\u540D\u79F0",clearable:"",onKeyup:j(g,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(N,null,{default:e(()=>[a(r,{onClick:g},{default:e(()=>[a(_,{icon:"ep:search",class:"mr-5px"}),o(" \u641C\u7D22 ")]),_:1}),a(r,{onClick:F},{default:e(()=>[a(_,{icon:"ep:refresh",class:"mr-5px"}),o(" \u91CD\u7F6E ")]),_:1}),a(r,{type:"primary",plain:"",onClick:t[1]||(t[1]=l=>z("create"))},{default:e(()=>[a(_,{icon:"ep:plus",class:"mr-5px"}),o(" \u65B0\u589E\u7269\u6D41\u6E20\u9053 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(U,null,{default:e(()=>[A((d(),w(q,{data:s(h),stripe:!0},{default:e(()=>[a(c,{align:"center",label:"\u7269\u6D41\u5546\u540D\u79F0","min-width":"100",prop:"name"}),a(c,{align:"center",label:"\u7269\u6D41\u5546\u4EE3\u7801",prop:"code"}),a(c,{align:"left",label:"\u6388\u6743\u72B6\u6001",prop:"authorization"},{default:e(l=>[a(V,{type:l.row.authorizeStatus==0?"info":"success"},{default:e(()=>[o(B(l.row.authorizeStatus==0?"\u672A\u6388\u6743":"\u5DF2\u6388\u6743"),1)]),_:2},1032,["type"])]),_:1}),a(c,{align:"center",formatter:s(ia),label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},null,8,["formatter"]),a(c,{width:160,align:"center",label:"\u64CD\u4F5C"},{default:e(l=>[a(r,{link:"",type:"primary",onClick:k=>z("update",l.row)},{default:e(()=>[o(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),l.row.status?(d(),w(r,{key:0,link:"",type:"danger",onClick:k=>S("active",l.row.id)},{default:e(()=>[o(" \u7981\u7528 ")]),_:2},1032,["onClick"])):(d(),w(r,{key:1,link:"",type:"success",onClick:k=>S("inactive",l.row.id)},{default:e(()=>[o(" \u542F\u7528 ")]),_:2},1032,["onClick"])),a(r,{link:"",type:"danger",onClick:k=>(async Z=>{try{await m.delConfirm(),await C.deleteLogistics(Z),m.success(L("common.delSuccess")),await p()}catch{}})(l.row.id)},{default:e(()=>[o(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[R,s(f)]]),a(K,{limit:s(i).pageSize,"onUpdate:limit":t[2]||(t[2]=l=>s(i).pageSize=l),page:s(i).pageNo,"onUpdate:page":t[3]||(t[3]=l=>s(i).pageNo=l),total:s(v),onPagination:p},null,8,["limit","page","total"])]),_:1}),a(sa,{ref_key:"formRef",ref:x,onSuccess:p},null,512)],64)}}});export{oa as default};
