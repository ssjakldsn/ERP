import{d as b,r as _,e as u,o as V,q,w as t,f as o,a as e,h as v,z as y,C as R,J as h}from"./index-CIfmhqRC.js";import{_ as k}from"./XButton-CPWgIV2x.js";import{I as m}from"./InputPassword-BH-q229L.js";import{a as x}from"./profile-BKsNLFSW.js";const C=b({name:"ResetPwd",__name:"ResetPwd",setup(M){const{t:r}=v(),p=y(),i=_(),a=u({oldPassword:"",newPassword:"",confirmPassword:""}),f=u({oldPassword:[{required:!0,message:r("profile.password.oldPwdMsg"),trigger:"blur"},{min:6,max:20,message:r("profile.password.pwdRules"),trigger:"blur"}],newPassword:[{required:!0,message:r("profile.password.newPwdMsg"),trigger:"blur"},{min:6,max:20,message:r("profile.password.pwdRules"),trigger:"blur"}],confirmPassword:[{required:!0,message:r("profile.password.cfPwdMsg"),trigger:"blur"},{required:!0,validator:(P,s,l)=>{a.newPassword!==s?l(new Error(r("profile.password.diffPwd"))):l()},trigger:"blur"}]});return(P,s)=>{const l=R,n=k,g=h;return V(),q(g,{ref_key:"formRef",ref:i,model:e(a),rules:e(f),"label-width":200},{default:t(()=>[o(l,{label:e(r)("profile.password.oldPassword"),prop:"oldPassword"},{default:t(()=>[o(e(m),{modelValue:e(a).oldPassword,"onUpdate:modelValue":s[0]||(s[0]=d=>e(a).oldPassword=d)},null,8,["modelValue"])]),_:1},8,["label"]),o(l,{label:e(r)("profile.password.newPassword"),prop:"newPassword"},{default:t(()=>[o(e(m),{modelValue:e(a).newPassword,"onUpdate:modelValue":s[1]||(s[1]=d=>e(a).newPassword=d),strength:""},null,8,["modelValue"])]),_:1},8,["label"]),o(l,{label:e(r)("profile.password.confirmPassword"),prop:"confirmPassword"},{default:t(()=>[o(e(m),{modelValue:e(a).confirmPassword,"onUpdate:modelValue":s[2]||(s[2]=d=>e(a).confirmPassword=d),strength:""},null,8,["modelValue"])]),_:1},8,["label"]),o(l,null,{default:t(()=>[o(n,{title:e(r)("common.save"),type:"primary",onClick:s[3]||(s[3]=d=>{var w;(w=e(i))&&w.validate(async c=>{c&&(await x(a.oldPassword,a.newPassword),p.success(r("common.updateSuccess")))})})},null,8,["title"]),o(n,{title:e(r)("common.reset"),type:"danger",onClick:s[4]||(s[4]=d=>{var w;(w=e(i))&&w.resetFields()})},null,8,["title"])]),_:1})]),_:1},8,["model","rules"])}}});export{C as _};
