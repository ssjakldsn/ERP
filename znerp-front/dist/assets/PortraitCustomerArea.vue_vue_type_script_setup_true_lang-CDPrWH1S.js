import{d as w,r as f,e as g,n as D,o as b,q as N,w as r,f as o,a as m,el as P,E as q,j as A}from"./index-CIfmhqRC.js";import{E}from"./el-card-DyMugU68.js";import{E as j}from"./el-skeleton-item-Dm6LwaUQ.js";import{e as R,_ as S}from"./Echart.vue_vue_type_script_setup_true_lang-C-1NoClp.js";import{c as k}from"./china-aeAnb323.js";import{S as z}from"./portrait-CaDgKbEx.js";const B=w({name:"PortraitCustomerArea",__name:"PortraitCustomerArea",props:{queryParams:{}},setup(h,{expose:v}){var p;const M=h;(p=R)==null||p.registerMap("china",k);const s=f(!1),n=f([]),i=g({title:{text:"\u5168\u90E8\u5BA2\u6237",left:"center"},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2},visualMap:{text:["\u9AD8","\u4F4E"],realtime:!1,calculable:!0,top:"middle",inRange:{color:["#fff","#3b82f6"]}},series:[{name:"\u5BA2\u6237\u5730\u57DF\u5206\u5E03",type:"map",map:"china",roam:!1,selectedMode:!1,data:[]}]}),l=g({title:{text:"\u6210\u4EA4\u5BA2\u6237",left:"center"},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2},visualMap:{text:["\u9AD8","\u4F4E"],realtime:!1,calculable:!0,top:"middle",inRange:{color:["#fff","#3b82f6"]}},series:[{name:"\u5BA2\u6237\u5730\u57DF\u5206\u5E03",type:"map",map:"china",roam:!1,selectedMode:!1,data:[]}]}),u=async()=>{s.value=!0;const t=await z.getCustomerArea(M.queryParams);n.value=t.map(e=>({...e,areaName:P(e.areaName)})),x(),C(),s.value=!1};v({loadData:u});const x=()=>{let t=0,e=0;i.series[0].data=n.value.map(a=>(t=Math.min(t,a.customerCount||0),e=Math.max(e,a.customerCount||0),{...a,name:a.areaName,value:a.customerCount||0})),i.visualMap.min=t,i.visualMap.max=e},C=()=>{let t=0,e=0;l.series[0].data=n.value.map(a=>(t=Math.min(t,a.dealCount||0),e=Math.max(e,a.dealCount||0),{...a,name:a.areaName,value:a.dealCount||0})),l.visualMap.min=t,l.visualMap.max=e};return D(()=>{u()}),(t,e)=>{const a=S,d=j,c=q,_=A,y=E;return b(),N(y,{shadow:"never"},{default:r(()=>[o(_,{gutter:20},{default:r(()=>[o(c,{span:12},{default:r(()=>[o(d,{loading:m(s),animated:""},{default:r(()=>[o(a,{height:500,options:m(i)},null,8,["options"])]),_:1},8,["loading"])]),_:1}),o(c,{span:12},{default:r(()=>[o(d,{loading:m(s),animated:""},{default:r(()=>[o(a,{height:500,options:m(l)},null,8,["options"])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})}}});export{B as _};
