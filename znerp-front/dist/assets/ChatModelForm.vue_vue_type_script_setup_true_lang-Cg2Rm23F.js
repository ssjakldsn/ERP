import{d as j,h as z,z as J,r as m,e as K,o as r,q as n,w as d,f as t,a as l,x as V,y as Q,c as b,F as _,p as x,dS as G,D as w,Q as H,t as W,k as X,A as Y,B as Z,C as $,U as ee,cc as le,ak as ae,al as oe,J as te,I as de,M as ue}from"./index-CIfmhqRC.js";import{_ as se}from"./Dialog.vue_vue_type_style_index_0_lang-CtaLqQeX.js";import{C as k}from"./index-DvHknbTX.js";import{A as re}from"./index-Bb8IOC82.js";import{C as g}from"./constants-A8BI3pz7.js";const me=j({name:"ChatModelForm",__name:"ChatModelForm",emits:["success"],setup(ie,{expose:M,emit:E}){const{t:c}=z(),y=J(),i=m(!1),C=m(""),p=m(!1),h=m(""),o=m({id:void 0,keyId:void 0,name:void 0,model:void 0,platform:void 0,sort:void 0,status:g.ENABLE,temperature:void 0,maxTokens:void 0,maxContexts:void 0}),S=K({keyId:[{required:!0,message:"API \u79D8\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u6A21\u578B\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],model:[{required:!0,message:"\u6A21\u578B\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],platform:[{required:!0,message:"\u6240\u5C5E\u5E73\u53F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),f=m(),A=m([]);M({open:async(u,a)=>{if(i.value=!0,C.value=c("action."+u),h.value=u,F(),a){p.value=!0;try{o.value=await k.getChatModel(a)}finally{p.value=!1}}A.value=await re.getApiKeySimpleList(g.ENABLE)}});const L=E,B=async()=>{await f.value.validate(),p.value=!0;try{const u=o.value;h.value==="create"?(await k.createChatModel(u),y.success(c("common.createSuccess"))):(await k.updateChatModel(u),y.success(c("common.updateSuccess"))),i.value=!1,L("success")}finally{p.value=!1}},F=()=>{var u;o.value={id:void 0,keyId:void 0,name:void 0,model:void 0,platform:void 0,sort:void 0,status:g.ENABLE,temperature:void 0,maxTokens:void 0,maxContexts:void 0},(u=f.value)==null||u.resetFields()};return(u,a)=>{const U=Y,I=Z,s=$,T=ee,v=le,N=ae,P=oe,O=te,q=de,D=se,R=ue;return r(),n(D,{title:l(C),modelValue:l(i),"onUpdate:modelValue":a[10]||(a[10]=e=>X(i)?i.value=e:null)},{footer:d(()=>[t(q,{onClick:B,type:"primary",disabled:l(p)},{default:d(()=>[V("\u786E \u5B9A")]),_:1},8,["disabled"]),t(q,{onClick:a[9]||(a[9]=e=>i.value=!1)},{default:d(()=>[V("\u53D6 \u6D88")]),_:1})]),default:d(()=>[Q((r(),n(O,{ref_key:"formRef",ref:f,model:l(o),rules:l(S),"label-width":"120px"},{default:d(()=>[t(s,{label:"\u6240\u5C5E\u5E73\u53F0",prop:"platform"},{default:d(()=>[t(I,{modelValue:l(o).platform,"onUpdate:modelValue":a[0]||(a[0]=e=>l(o).platform=e),placeholder:"\u8BF7\u8F93\u5165\u5E73\u53F0",clearable:""},{default:d(()=>[(r(!0),b(_,null,x(l(G)(l(w).AI_PLATFORM),e=>(r(),n(U,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"API \u79D8\u94A5",prop:"keyId"},{default:d(()=>[t(I,{modelValue:l(o).keyId,"onUpdate:modelValue":a[1]||(a[1]=e=>l(o).keyId=e),placeholder:"\u8BF7\u9009\u62E9 API \u79D8\u94A5",clearable:""},{default:d(()=>[(r(!0),b(_,null,x(l(A),e=>(r(),n(U,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u6A21\u578B\u540D\u5B57",prop:"name"},{default:d(()=>[t(T,{modelValue:l(o).name,"onUpdate:modelValue":a[2]||(a[2]=e=>l(o).name=e),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u540D\u5B57"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u6A21\u578B\u6807\u8BC6",prop:"model"},{default:d(()=>[t(T,{modelValue:l(o).model,"onUpdate:modelValue":a[3]||(a[3]=e=>l(o).model=e),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u6807\u8BC6"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u6A21\u578B\u6392\u5E8F",prop:"sort"},{default:d(()=>[t(v,{modelValue:l(o).sort,"onUpdate:modelValue":a[4]||(a[4]=e=>l(o).sort=e),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u6392\u5E8F",class:"!w-1/1"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:d(()=>[t(P,{modelValue:l(o).status,"onUpdate:modelValue":a[5]||(a[5]=e=>l(o).status=e)},{default:d(()=>[(r(!0),b(_,null,x(l(H)(l(w).COMMON_STATUS),e=>(r(),n(N,{key:e.value,value:e.value},{default:d(()=>[V(W(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u6E29\u5EA6\u53C2\u6570",prop:"temperature"},{default:d(()=>[t(v,{modelValue:l(o).temperature,"onUpdate:modelValue":a[6]||(a[6]=e=>l(o).temperature=e),placeholder:"\u8BF7\u8F93\u5165\u6E29\u5EA6\u53C2\u6570",min:0,max:2,precision:2},null,8,["modelValue"])]),_:1}),t(s,{label:"\u56DE\u590D\u6570 Token \u6570",prop:"maxTokens"},{default:d(()=>[t(v,{modelValue:l(o).maxTokens,"onUpdate:modelValue":a[7]||(a[7]=e=>l(o).maxTokens=e),placeholder:"\u8BF7\u8F93\u5165\u56DE\u590D\u6570 Token \u6570",min:0,max:4096},null,8,["modelValue"])]),_:1}),t(s,{label:"\u4E0A\u4E0B\u6587\u6570\u91CF",prop:"maxContexts"},{default:d(()=>[t(v,{modelValue:l(o).maxContexts,"onUpdate:modelValue":a[8]||(a[8]=e=>l(o).maxContexts=e),placeholder:"\u8BF7\u8F93\u5165\u4E0A\u4E0B\u6587\u6570\u91CF",min:0,max:20},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[R,l(p)]])]),_:1},8,["title","modelValue"])}}});export{me as _};
